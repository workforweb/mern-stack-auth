{"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.22.9:development":{"value":{"code":"import express from 'express';\nconst app = express();\nconst port = 3000;\napp.get('/', (req, res) => res.send('Hello World!'));\napp.listen(port, () => console.log(`Example app listening on port ${port}!`));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwiYXBwIiwicG9ydCIsImdldCIsInJlcSIsInJlcyIsInNlbmQiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBwb3J0ID0gMzAwMDtcblxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4gcmVzLnNlbmQoJ0hlbGxvIFdvcmxkIScpKTtcbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4gY29uc29sZS5sb2coYEV4YW1wbGUgYXBwIGxpc3RlbmluZyBvbiBwb3J0ICR7cG9ydH0hYCkpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxPQUFPLE1BQU0sU0FBUztBQUM3QixNQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBQyxDQUFDO0FBQ3JCLE1BQU1FLElBQUksR0FBRyxJQUFJO0FBRWpCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUtBLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ3BETCxHQUFHLENBQUNNLE1BQU0sQ0FBQ0wsSUFBSSxFQUFFLE1BQU1NLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLGlDQUFnQ1AsSUFBSyxHQUFFLENBQUMsQ0FBQyJ9","map":{"version":3,"names":["express","app","port","get","req","res","send","listen","console","log"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/","sources":["app.js"],"sourcesContent":["import express from 'express';\nconst app = express();\nconst port = 3000;\n\napp.get('/', (req, res) => res.send('Hello World!'));\napp.listen(port, () => console.log(`Example app listening on port ${port}!`));\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,MAAMC,GAAG,GAAGD,OAAO,CAAC,CAAC;AACrB,MAAME,IAAI,GAAG,IAAI;AAEjBD,GAAG,CAACE,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAKA,GAAG,CAACC,IAAI,CAAC,cAAc,CAAC,CAAC;AACpDL,GAAG,CAACM,MAAM,CAACL,IAAI,EAAE,MAAMM,OAAO,CAACC,GAAG,CAAE,iCAAgCP,IAAK,GAAE,CAAC,CAAC"}},"mtime":1689247327751},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressMongoSanitize = _interopRequireDefault(require(\"express-mongo-sanitize\"));\nvar _compression = _interopRequireDefault(require(\"compression\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\nvar _routes = _interopRequireDefault(require(\"./routes\"));\nvar _config = _interopRequireDefault(require(\"./config/config\"));\nvar _error = require(\"./errors/error\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst app = (0, _express.default)();\nconst port = _config.default.port;\n\n// connect to mongodb\nrequire('./database/dbConn');\n\n// Remove Express header\nif (_config.default.env !== 'development') {\n  app.disable('x-powered-by');\n}\napp.set('etag', false);\napp.set('trust proxy', true);\nif (_config.default.env !== 'test') {\n  app.use((0, _morgan.default)('dev', {\n    skip: function (req, res) {\n      return res.statusCode < 400;\n    }\n  }));\n}\n\n// enable cors\nlet whitelist = ['http://localhost:3000'];\nconst origin = (origin, callback) => {\n  // allow requests with no origin\n  if (!origin) return callback(null, true);\n  if (whitelist.indexOf(origin) === -1) {\n    const message = 'The CORS policy for this origin does not allow access from a specific origin.';\n    return callback(new Error(message), false);\n  }\n  return callback(null, true);\n};\napp.use((0, _cors.default)({\n  origin,\n  credentials: true,\n  optionsSuccessStatus: 200\n}));\n\n// parse json request body\napp.use(_express.default.json());\n\n// parse urlencoded request body\napp.use(_express.default.urlencoded({\n  extended: false\n}));\n\n// parse cookies\napp.use((0, _cookieParser.default)());\n\n// sanitize request data\napp.use((0, _expressMongoSanitize.default)({\n  replaceWith: '_'\n}));\n\n// gzip compression\napp.use((0, _compression.default)());\n\n// Register app routes\n(0, _routes.default)(app);\napp.use(_error.notFound);\n\n// convert error to ApiError, if needed\napp.use(_error.errorConverter);\n\n// handle error\napp.use(_error.errorHandler);\n\n// error handler middleware\napp.use(_error.finalError);\nconst server = app.listen(port, () => console.log(`Server up on port ${port}!`));\nprocess.on('unhandledRejection', err => {\n  console.log(`Error: ${err.message}`);\n  server.close(() => process.exit(1));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2V4cHJlc3NNb25nb1Nhbml0aXplIiwiX2NvbXByZXNzaW9uIiwiX2NvcnMiLCJfbW9yZ2FuIiwiX2Nvb2tpZVBhcnNlciIsIl9yb3V0ZXMiLCJfY29uZmlnIiwiX2Vycm9yIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJhcHAiLCJleHByZXNzIiwicG9ydCIsImNvbmZpZyIsImVudiIsImRpc2FibGUiLCJzZXQiLCJ1c2UiLCJtb3JnYW4iLCJza2lwIiwicmVxIiwicmVzIiwic3RhdHVzQ29kZSIsIndoaXRlbGlzdCIsIm9yaWdpbiIsImNhbGxiYWNrIiwiaW5kZXhPZiIsIm1lc3NhZ2UiLCJFcnJvciIsImNvcnMiLCJjcmVkZW50aWFscyIsIm9wdGlvbnNTdWNjZXNzU3RhdHVzIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImNvb2tpZVBhcnNlciIsIkV4cHJlc3NNb25nb1Nhbml0aXplIiwicmVwbGFjZVdpdGgiLCJjb21wcmVzc2lvbiIsImFwcFJvdXRlcyIsIm5vdEZvdW5kIiwiZXJyb3JDb252ZXJ0ZXIiLCJlcnJvckhhbmRsZXIiLCJmaW5hbEVycm9yIiwic2VydmVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJvbiIsImVyciIsImNsb3NlIiwiZXhpdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjLyIsInNvdXJjZXMiOlsiYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IEV4cHJlc3NNb25nb1Nhbml0aXplIGZyb20gJ2V4cHJlc3MtbW9uZ28tc2FuaXRpemUnO1xuaW1wb3J0IGNvbXByZXNzaW9uIGZyb20gJ2NvbXByZXNzaW9uJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IG1vcmdhbiBmcm9tICdtb3JnYW4nO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcblxuaW1wb3J0IGFwcFJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnL2NvbmZpZyc7XG5pbXBvcnQge1xuICBlcnJvckNvbnZlcnRlcixcbiAgZXJyb3JIYW5kbGVyLFxuICBub3RGb3VuZCxcbiAgZmluYWxFcnJvcixcbn0gZnJvbSAnLi9lcnJvcnMvZXJyb3InO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBwb3J0ID0gY29uZmlnLnBvcnQ7XG5cbi8vIGNvbm5lY3QgdG8gbW9uZ29kYlxucmVxdWlyZSgnLi9kYXRhYmFzZS9kYkNvbm4nKTtcblxuLy8gUmVtb3ZlIEV4cHJlc3MgaGVhZGVyXG5pZiAoY29uZmlnLmVudiAhPT0gJ2RldmVsb3BtZW50Jykge1xuICBhcHAuZGlzYWJsZSgneC1wb3dlcmVkLWJ5Jyk7XG59XG5cbmFwcC5zZXQoJ2V0YWcnLCBmYWxzZSk7XG5hcHAuc2V0KCd0cnVzdCBwcm94eScsIHRydWUpO1xuXG5pZiAoY29uZmlnLmVudiAhPT0gJ3Rlc3QnKSB7XG4gIGFwcC51c2UoXG4gICAgbW9yZ2FuKCdkZXYnLCB7XG4gICAgICBza2lwOiBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXNDb2RlIDwgNDAwO1xuICAgICAgfSxcbiAgICB9KVxuICApO1xufVxuXG4vLyBlbmFibGUgY29yc1xubGV0IHdoaXRlbGlzdCA9IFsnaHR0cDovL2xvY2FsaG9zdDozMDAwJ107XG5jb25zdCBvcmlnaW4gPSAob3JpZ2luLCBjYWxsYmFjaykgPT4ge1xuICAvLyBhbGxvdyByZXF1ZXN0cyB3aXRoIG5vIG9yaWdpblxuICBpZiAoIW9yaWdpbikgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xuICBpZiAod2hpdGVsaXN0LmluZGV4T2Yob3JpZ2luKSA9PT0gLTEpIHtcbiAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgb3JpZ2luIGRvZXMgbm90IGFsbG93IGFjY2VzcyBmcm9tIGEgc3BlY2lmaWMgb3JpZ2luLic7XG5cbiAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1lc3NhZ2UpLCBmYWxzZSk7XG4gIH1cbiAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xufTtcbmFwcC51c2UoY29ycyh7IG9yaWdpbiwgY3JlZGVudGlhbHM6IHRydWUsIG9wdGlvbnNTdWNjZXNzU3RhdHVzOiAyMDAgfSkpO1xuXG4vLyBwYXJzZSBqc29uIHJlcXVlc3QgYm9keVxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5cbi8vIHBhcnNlIHVybGVuY29kZWQgcmVxdWVzdCBib2R5XG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5cbi8vIHBhcnNlIGNvb2tpZXNcbmFwcC51c2UoY29va2llUGFyc2VyKCkpO1xuXG4vLyBzYW5pdGl6ZSByZXF1ZXN0IGRhdGFcbmFwcC51c2UoRXhwcmVzc01vbmdvU2FuaXRpemUoeyByZXBsYWNlV2l0aDogJ18nIH0pKTtcblxuLy8gZ3ppcCBjb21wcmVzc2lvblxuYXBwLnVzZShjb21wcmVzc2lvbigpKTtcblxuLy8gUmVnaXN0ZXIgYXBwIHJvdXRlc1xuYXBwUm91dGVzKGFwcCk7XG5cbmFwcC51c2Uobm90Rm91bmQpO1xuXG4vLyBjb252ZXJ0IGVycm9yIHRvIEFwaUVycm9yLCBpZiBuZWVkZWRcbmFwcC51c2UoZXJyb3JDb252ZXJ0ZXIpO1xuXG4vLyBoYW5kbGUgZXJyb3JcbmFwcC51c2UoZXJyb3JIYW5kbGVyKTtcblxuLy8gZXJyb3IgaGFuZGxlciBtaWRkbGV3YXJlXG5hcHAudXNlKGZpbmFsRXJyb3IpO1xuXG5jb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKHBvcnQsICgpID0+XG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgdXAgb24gcG9ydCAke3BvcnR9IWApXG4pO1xuXG5wcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAoZXJyKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgc2VydmVyLmNsb3NlKCgpID0+IHByb2Nlc3MuZXhpdCgxKSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxxQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsWUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsS0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksT0FBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssYUFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQU0sT0FBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU8sT0FBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVEsTUFBQSxHQUFBUixPQUFBO0FBS3dCLFNBQUFELHVCQUFBVSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRXhCLE1BQU1HLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxFQUFDLENBQUM7QUFDckIsTUFBTUMsSUFBSSxHQUFHQyxlQUFNLENBQUNELElBQUk7O0FBRXhCO0FBQ0FkLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQzs7QUFFNUI7QUFDQSxJQUFJZSxlQUFNLENBQUNDLEdBQUcsS0FBSyxhQUFhLEVBQUU7RUFDaENKLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUM3QjtBQUVBTCxHQUFHLENBQUNNLEdBQUcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDO0FBQ3RCTixHQUFHLENBQUNNLEdBQUcsQ0FB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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_expressMongoSanitize","_compression","_cors","_morgan","_cookieParser","_routes","_config","_error","obj","__esModule","default","app","express","port","config","env","disable","set","use","morgan","skip","req","res","statusCode","whitelist","origin","callback","indexOf","message","Error","cors","credentials","optionsSuccessStatus","json","urlencoded","extended","cookieParser","ExpressMongoSanitize","replaceWith","compression","appRoutes","notFound","errorConverter","errorHandler","finalError","server","listen","console","log","process","on","err","close","exit"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/","sources":["app.js"],"sourcesContent":["import express from 'express';\nimport ExpressMongoSanitize from 'express-mongo-sanitize';\nimport compression from 'compression';\nimport cors from 'cors';\nimport morgan from 'morgan';\nimport cookieParser from 'cookie-parser';\n\nimport appRoutes from './routes';\nimport config from './config/config';\nimport {\n  errorConverter,\n  errorHandler,\n  notFound,\n  finalError,\n} from './errors/error';\n\nconst app = express();\nconst port = config.port;\n\n// connect to mongodb\nrequire('./database/dbConn');\n\n// Remove Express header\nif (config.env !== 'development') {\n  app.disable('x-powered-by');\n}\n\napp.set('etag', false);\napp.set('trust proxy', true);\n\nif (config.env !== 'test') {\n  app.use(\n    morgan('dev', {\n      skip: function (req, res) {\n        return res.statusCode < 400;\n      },\n    })\n  );\n}\n\n// enable cors\nlet whitelist = ['http://localhost:3000'];\nconst origin = (origin, callback) => {\n  // allow requests with no origin\n  if (!origin) return callback(null, true);\n  if (whitelist.indexOf(origin) === -1) {\n    const message =\n      'The CORS policy for this origin does not allow access from a specific origin.';\n\n    return callback(new Error(message), false);\n  }\n  return callback(null, true);\n};\napp.use(cors({ origin, credentials: true, optionsSuccessStatus: 200 }));\n\n// parse json request body\napp.use(express.json());\n\n// parse urlencoded request body\napp.use(express.urlencoded({ extended: false }));\n\n// parse cookies\napp.use(cookieParser());\n\n// sanitize request data\napp.use(ExpressMongoSanitize({ replaceWith: '_' }));\n\n// gzip compression\napp.use(compression());\n\n// Register app routes\nappRoutes(app);\n\napp.use(notFound);\n\n// convert error to ApiError, if needed\napp.use(errorConverter);\n\n// handle error\napp.use(errorHandler);\n\n// error handler middleware\napp.use(finalError);\n\nconst server = app.listen(port, () =>\n  console.log(`Server up on port ${port}!`)\n);\n\nprocess.on('unhandledRejection', (err) => {\n  console.log(`Error: ${err.message}`);\n  server.close(() => process.exit(1));\n});\n"],"mappings":"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"}},"mtime":1689262102732},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nrequire(\"dotenv/config\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst envVarsSchema = _joi.default.object().keys({\n  NODE_ENV: _joi.default.string().valid('production', 'development', 'test').lowercase().required(),\n  PORT: _joi.default.number().default(4000),\n  SERVER_NAME: _joi.default.string().required(),\n  API_URL: _joi.default.string().required().description('Api url'),\n  CLIENT_URL: _joi.default.string().required().description('Client url'),\n  MONGO_INITDB_ROOT_USERNAME: _joi.default.string().required(),\n  MONGO_INITDB_ROOT_PASSWORD: _joi.default.string().required(),\n  MONGO_INITDB_DATABASE: _joi.default.string().required(),\n  DB_LOCAL_PORT: _joi.default.string().required(),\n  DB_DOCKER_PORT: _joi.default.string().required(),\n  DB_HOST: _joi.default.string().ip().required(),\n  // JWT_SECRET: Joi.string().required().description('JWT secret key'),\n  JWT_ACCESS_EXPIRATION_MINUTES: _joi.default.number().default(30).description('minutes after which access tokens expire'),\n  JWT_REFRESH_EXPIRATION_DAYS: _joi.default.number().default(30).description('days after which refresh tokens expire')\n}).unknown();\nconst {\n  value: envVars,\n  error\n} = envVarsSchema.prefs({\n  errors: {\n    label: 'key'\n  }\n}).validate(process.env);\nif (error) {\n  throw new Error(`Config validation error: ${error.message}`);\n}\nconst config = {\n  dev: process.env.NODE_ENV !== 'production',\n  env: envVars.NODE_ENV,\n  port: envVars.PORT,\n  clientUrl: envVars.CLIENT_URL,\n  mongoose: {\n    url: `mongodb://${envVars.MONGO_INITDB_ROOT_USERNAME}:${envVars.MONGO_INITDB_ROOT_PASSWORD}@${envVars.DB_HOST}:${envVars.DB_LOCAL_PORT}/${envVars.MONGO_INITDB_DATABASE}?authSource=admin`,\n    options: {\n      useNewUrlParser: true\n    }\n  },\n  authentication: {\n    accessToken: {\n      secret: envVars.JWT_ACCESS_SECRET,\n      expiresIn: envVars.JWT_ACCESS_EXPIRATION_MINUTES\n    },\n    refreshToken: {\n      secret: envVars.JWT_REFRESH_SECRET,\n      expiresIn: envVars.JWT_REFRESH_EXPIRATION_DAYS\n    }\n  }\n};\nvar _default = config;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImVudlZhcnNTY2hlbWEiLCJKb2kiLCJvYmplY3QiLCJrZXlzIiwiTk9ERV9FTlYiLCJzdHJpbmciLCJ2YWxpZCIsImxvd2VyY2FzZSIsInJlcXVpcmVkIiwiUE9SVCIsIm51bWJlciIsIlNFUlZFUl9OQU1FIiwiQVBJX1VSTCIsImRlc2NyaXB0aW9uIiwiQ0xJRU5UX1VSTCIsIk1PTkdPX0lOSVREQl9ST09UX1VTRVJOQU1FIiwiTU9OR09fSU5JVERCX1JPT1RfUEFTU1dPUkQiLCJNT05HT19JTklUREJfREFUQUJBU0UiLCJEQl9MT0NBTF9QT1JUIiwiREJfRE9DS0VSX1BPUlQiLCJEQl9IT1NUIiwiaXAiLCJKV1RfQUNDRVNTX0VYUElSQVRJT05fTUlOVVRFUyIsIkpXVF9SRUZSRVNIX0VYUElSQVRJT05fREFZUyIsInVua25vd24iLCJ2YWx1ZSIsImVudlZhcnMiLCJlcnJvciIsInByZWZzIiwiZXJyb3JzIiwibGFiZWwiLCJ2YWxpZGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsIm1lc3NhZ2UiLCJjb25maWciLCJkZXYiLCJwb3J0IiwiY2xpZW50VXJsIiwibW9uZ29vc2UiLCJ1cmwiLCJvcHRpb25zIiwidXNlTmV3VXJsUGFyc2VyIiwiYXV0aGVudGljYXRpb24iLCJhY2Nlc3NUb2tlbiIsInNlY3JldCIsIkpXVF9BQ0NFU1NfU0VDUkVUIiwiZXhwaXJlc0luIiwicmVmcmVzaFRva2VuIiwiSldUX1JFRlJFU0hfU0VDUkVUIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCAnZG90ZW52L2NvbmZpZyc7XG5cbmNvbnN0IGVudlZhcnNTY2hlbWEgPSBKb2kub2JqZWN0KClcbiAgLmtleXMoe1xuICAgIE5PREVfRU5WOiBKb2kuc3RyaW5nKClcbiAgICAgIC52YWxpZCgncHJvZHVjdGlvbicsICdkZXZlbG9wbWVudCcsICd0ZXN0JylcbiAgICAgIC5sb3dlcmNhc2UoKVxuICAgICAgLnJlcXVpcmVkKCksXG4gICAgUE9SVDogSm9pLm51bWJlcigpLmRlZmF1bHQoNDAwMCksXG4gICAgU0VSVkVSX05BTUU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIEFQSV9VUkw6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLmRlc2NyaXB0aW9uKCdBcGkgdXJsJyksXG4gICAgQ0xJRU5UX1VSTDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCkuZGVzY3JpcHRpb24oJ0NsaWVudCB1cmwnKSxcbiAgICBNT05HT19JTklUREJfUk9PVF9VU0VSTkFNRTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgTU9OR09fSU5JVERCX1JPT1RfUEFTU1dPUkQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIE1PTkdPX0lOSVREQl9EQVRBQkFTRTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgREJfTE9DQUxfUE9SVDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgREJfRE9DS0VSX1BPUlQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIERCX0hPU1Q6IEpvaS5zdHJpbmcoKS5pcCgpLnJlcXVpcmVkKCksXG5cbiAgICAvLyBKV1RfU0VDUkVUOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKS5kZXNjcmlwdGlvbignSldUIHNlY3JldCBrZXknKSxcbiAgICBKV1RfQUNDRVNTX0VYUElSQVRJT05fTUlOVVRFUzogSm9pLm51bWJlcigpXG4gICAgICAuZGVmYXVsdCgzMClcbiAgICAgIC5kZXNjcmlwdGlvbignbWludXRlcyBhZnRlciB3aGljaCBhY2Nlc3MgdG9rZW5zIGV4cGlyZScpLFxuICAgIEpXVF9SRUZSRVNIX0VYUElSQVRJT05fREFZUzogSm9pLm51bWJlcigpXG4gICAgICAuZGVmYXVsdCgzMClcbiAgICAgIC5kZXNjcmlwdGlvbignZGF5cyBhZnRlciB3aGljaCByZWZyZXNoIHRva2VucyBleHBpcmUnKSxcbiAgfSlcbiAgLnVua25vd24oKTtcblxuY29uc3QgeyB2YWx1ZTogZW52VmFycywgZXJyb3IgfSA9IGVudlZhcnNTY2hlbWFcbiAgLnByZWZzKHsgZXJyb3JzOiB7IGxhYmVsOiAna2V5JyB9IH0pXG4gIC52YWxpZGF0ZShwcm9jZXNzLmVudik7XG5cbmlmIChlcnJvcikge1xuICB0aHJvdyBuZXcgRXJyb3IoYENvbmZpZyB2YWxpZGF0aW9uIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG59XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgZGV2OiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuICBlbnY6IGVudlZhcnMuTk9ERV9FTlYsXG4gIHBvcnQ6IGVudlZhcnMuUE9SVCxcbiAgY2xpZW50VXJsOiBlbnZWYXJzLkNMSUVOVF9VUkwsXG4gIG1vbmdvb3NlOiB7XG4gICAgdXJsOiBgbW9uZ29kYjovLyR7ZW52VmFycy5NT05HT19JTklUREJfUk9PVF9VU0VSTkFNRX06JHtlbnZWYXJzLk1PTkdPX0lOSVREQl9ST09UX1BBU1NXT1JEfUAke2VudlZhcnMuREJfSE9TVH06JHtlbnZWYXJzLkRCX0xPQ0FMX1BPUlR9LyR7ZW52VmFycy5NT05HT19JTklUREJfREFUQUJBU0V9P2F1dGhTb3VyY2U9YWRtaW5gLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICB9LFxuICB9LFxuICBhdXRoZW50aWNhdGlvbjoge1xuICAgIGFjY2Vzc1Rva2VuOiB7XG4gICAgICBzZWNyZXQ6IGVudlZhcnMuSldUX0FDQ0VTU19TRUNSRVQsXG4gICAgICBleHBpcmVzSW46IGVudlZhcnMuSldUX0FDQ0VTU19FWFBJUkFUSU9OX01JTlVURVMsXG4gICAgfSxcbiAgICByZWZyZXNoVG9rZW46IHtcbiAgICAgIHNlY3JldDogZW52VmFycy5KV1RfUkVGUkVTSF9TRUNSRVQsXG4gICAgICBleHBpcmVzSW46IGVudlZhcnMuSldUX1JFRlJFU0hfRVhQSVJBVElPTl9EQVlTLFxuICAgIH0sXG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25maWc7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBQSxPQUFBO0FBQXVCLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRXZCLE1BQU1HLGFBQWEsR0FBR0MsWUFBRyxDQUFDQyxNQUFNLENBQUMsQ0FBQyxDQUMvQkMsSUFBSSxDQUFDO0VBQ0pDLFFBQVEsRUFBRUgsWUFBRyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxDQUNuQkMsS0FBSyxDQUFDLFlBQVksRUFBRSxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQzFDQyxTQUFTLENBQUMsQ0FBQyxDQUNYQyxRQUFRLENBQUMsQ0FBQztFQUNiQyxJQUFJLEVBQUVSLFlBQUcsQ0FBQ1MsTUFBTSxDQUFDLENBQUMsQ0FBQ1gsT0FBTyxDQUFDLElBQUksQ0FBQztFQUNoQ1ksV0FBVyxFQUFFVixZQUFHLENBQUNJLE1BQU0sQ0FBQyxDQUFDLENBQUNHLFFBQVEsQ0FBQyxDQUFDO0VBQ3BDSSxPQUFPLEVBQUVYLFlBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0csUUFBUSxDQUFDLENBQUMsQ0FBQ0ssV0FBVyxDQUFDLFNBQVMsQ0FBQztFQUN2REMsVUFBVSxFQUFFYixZQUFHLENBQUNJLE1BQU0sQ0FBQyxDQUFDLENBQUNHLFFBQVEsQ0FBQyxDQUFDLENBQUNLLFdBQVcsQ0FBQyxZQUFZLENBQUM7RUFDN0RFLDBCQUEwQixF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","map":{"version":3,"names":["_joi","_interopRequireDefault","require","obj","__esModule","default","envVarsSchema","Joi","object","keys","NODE_ENV","string","valid","lowercase","required","PORT","number","SERVER_NAME","API_URL","description","CLIENT_URL","MONGO_INITDB_ROOT_USERNAME","MONGO_INITDB_ROOT_PASSWORD","MONGO_INITDB_DATABASE","DB_LOCAL_PORT","DB_DOCKER_PORT","DB_HOST","ip","JWT_ACCESS_EXPIRATION_MINUTES","JWT_REFRESH_EXPIRATION_DAYS","unknown","value","envVars","error","prefs","errors","label","validate","process","env","Error","message","config","dev","port","clientUrl","mongoose","url","options","useNewUrlParser","authentication","accessToken","secret","JWT_ACCESS_SECRET","expiresIn","refreshToken","JWT_REFRESH_SECRET","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/","sources":["config.js"],"sourcesContent":["import Joi from 'joi';\nimport 'dotenv/config';\n\nconst envVarsSchema = Joi.object()\n  .keys({\n    NODE_ENV: Joi.string()\n      .valid('production', 'development', 'test')\n      .lowercase()\n      .required(),\n    PORT: Joi.number().default(4000),\n    SERVER_NAME: Joi.string().required(),\n    API_URL: Joi.string().required().description('Api url'),\n    CLIENT_URL: Joi.string().required().description('Client url'),\n    MONGO_INITDB_ROOT_USERNAME: Joi.string().required(),\n    MONGO_INITDB_ROOT_PASSWORD: Joi.string().required(),\n    MONGO_INITDB_DATABASE: Joi.string().required(),\n    DB_LOCAL_PORT: Joi.string().required(),\n    DB_DOCKER_PORT: Joi.string().required(),\n    DB_HOST: Joi.string().ip().required(),\n\n    // JWT_SECRET: Joi.string().required().description('JWT secret key'),\n    JWT_ACCESS_EXPIRATION_MINUTES: Joi.number()\n      .default(30)\n      .description('minutes after which access tokens expire'),\n    JWT_REFRESH_EXPIRATION_DAYS: Joi.number()\n      .default(30)\n      .description('days after which refresh tokens expire'),\n  })\n  .unknown();\n\nconst { value: envVars, error } = envVarsSchema\n  .prefs({ errors: { label: 'key' } })\n  .validate(process.env);\n\nif (error) {\n  throw new Error(`Config validation error: ${error.message}`);\n}\n\nconst config = {\n  dev: process.env.NODE_ENV !== 'production',\n  env: envVars.NODE_ENV,\n  port: envVars.PORT,\n  clientUrl: envVars.CLIENT_URL,\n  mongoose: {\n    url: `mongodb://${envVars.MONGO_INITDB_ROOT_USERNAME}:${envVars.MONGO_INITDB_ROOT_PASSWORD}@${envVars.DB_HOST}:${envVars.DB_LOCAL_PORT}/${envVars.MONGO_INITDB_DATABASE}?authSource=admin`,\n    options: {\n      useNewUrlParser: true,\n    },\n  },\n  authentication: {\n    accessToken: {\n      secret: envVars.JWT_ACCESS_SECRET,\n      expiresIn: envVars.JWT_ACCESS_EXPIRATION_MINUTES,\n    },\n    refreshToken: {\n      secret: envVars.JWT_REFRESH_SECRET,\n      expiresIn: envVars.JWT_REFRESH_EXPIRATION_DAYS,\n    },\n  },\n};\n\nexport default config;\n"],"mappings":"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"}},"mtime":1689254649232},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.notFound = exports.finalError = exports.errorHandler = exports.errorConverter = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _ApiErrors = _interopRequireDefault(require(\"./ApiErrors\"));\nvar _config = _interopRequireDefault(require(\"../config/config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst errorConverter = (err, req, res, next) => {\n  let error = err;\n  if (!(error instanceof _ApiErrors.default)) {\n    const statusCode = error.statusCode || error instanceof _mongoose.default.Error ? 400 : 500;\n    const message = error.message || `${httpStatus[statusCode]}`;\n    error = new _ApiErrors.default(statusCode, message, false, err.stack);\n  }\n  next(error);\n};\nexports.errorConverter = errorConverter;\nconst errorHandler = (err, req, res, next) => {\n  let {\n    statusCode,\n    message\n  } = err;\n  if (_config.default.env === 'production' && !err.isOperational) {\n    statusCode = 500;\n    message = 'Internal Server Error';\n  }\n  res.locals['errorMessage'] = err.message;\n  const response = {\n    code: statusCode,\n    message,\n    ...(_config.default.env === 'development' && {\n      stack: err.stack\n    })\n  };\n  if (_config.default.env === 'development') {\n    console.error(err);\n  }\n  res.status(statusCode).send(response);\n};\nexports.errorHandler = errorHandler;\nconst notFound = (req, res, next) => {\n  next(new _ApiErrors.default(404, 'Not found'));\n};\nexports.notFound = notFound;\nconst finalError = (error, req, res, next) => {\n  res.status(error.status || 500).json({\n    error: {\n      status: error.status || 500,\n      message: error.message || 'Internal Server Error',\n      stack: _config.default.dev ? error.stack : ''\n    }\n  });\n};\nexports.finalError = finalError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9BcGlFcnJvcnMiLCJfY29uZmlnIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJlcnJvckNvbnZlcnRlciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJlcnJvciIsIkFwaUVycm9yIiwic3RhdHVzQ29kZSIsIm1vbmdvb3NlIiwiRXJyb3IiLCJtZXNzYWdlIiwiaHR0cFN0YXR1cyIsInN0YWNrIiwiZXhwb3J0cyIsImVycm9ySGFuZGxlciIsImNvbmZpZyIsImVudiIsImlzT3BlcmF0aW9uYWwiLCJsb2NhbHMiLCJyZXNwb25zZSIsImNvZGUiLCJjb25zb2xlIiwic3RhdHVzIiwic2VuZCIsIm5vdEZvdW5kIiwiZmluYWxFcnJvciIsImpzb24iLCJkZXYiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9lcnJvcnMvIiwic291cmNlcyI6WyJlcnJvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IEFwaUVycm9yIGZyb20gJy4vQXBpRXJyb3JzJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnL2NvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBlcnJvckNvbnZlcnRlciA9IChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxldCBlcnJvciA9IGVycjtcbiAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBBcGlFcnJvcikpIHtcbiAgICBjb25zdCBzdGF0dXNDb2RlID1cbiAgICAgIGVycm9yLnN0YXR1c0NvZGUgfHwgZXJyb3IgaW5zdGFuY2VvZiBtb25nb29zZS5FcnJvciA/IDQwMCA6IDUwMDtcbiAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IubWVzc2FnZSB8fCBgJHtodHRwU3RhdHVzW3N0YXR1c0NvZGVdfWA7XG4gICAgZXJyb3IgPSBuZXcgQXBpRXJyb3Ioc3RhdHVzQ29kZSwgbWVzc2FnZSwgZmFsc2UsIGVyci5zdGFjayk7XG4gIH1cbiAgbmV4dChlcnJvcik7XG59O1xuXG5leHBvcnQgY29uc3QgZXJyb3JIYW5kbGVyID0gKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgbGV0IHsgc3RhdHVzQ29kZSwgbWVzc2FnZSB9ID0gZXJyO1xuICBpZiAoY29uZmlnLmVudiA9PT0gJ3Byb2R1Y3Rpb24nICYmICFlcnIuaXNPcGVyYXRpb25hbCkge1xuICAgIHN0YXR1c0NvZGUgPSA1MDA7XG4gICAgbWVzc2FnZSA9ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InO1xuICB9XG5cbiAgcmVzLmxvY2Fsc1snZXJyb3JNZXNzYWdlJ10gPSBlcnIubWVzc2FnZTtcblxuICBjb25zdCByZXNwb25zZSA9IHtcbiAgICBjb2RlOiBzdGF0dXNDb2RlLFxuICAgIG1lc3NhZ2UsXG4gICAgLi4uKGNvbmZpZy5lbnYgPT09ICdkZXZlbG9wbWVudCcgJiYgeyBzdGFjazogZXJyLnN0YWNrIH0pLFxuICB9O1xuXG4gIGlmIChjb25maWcuZW52ID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9XG5cbiAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5zZW5kKHJlc3BvbnNlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBub3RGb3VuZCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdOb3QgZm91bmQnKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmluYWxFcnJvciA9IChlcnJvciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgcmVzLnN0YXR1cyhlcnJvci5zdGF0dXMgfHwgNTAwKS5qc29uKHtcbiAgICBlcnJvcjoge1xuICAgICAgc3RhdHVzOiBlcnJvci5zdGF0dXMgfHwgNTAwLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAgIHN0YWNrOiBjb25maWcuZGV2ID8gZXJyb3Iuc3RhY2sgOiAnJyxcbiAgICB9LFxuICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFzQyxTQUFBRCx1QkFBQUksR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUUvQixNQUFNRyxjQUFjLEdBQUdBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNyRCxJQUFJQyxLQUFLLEdBQUdKLEdBQUc7RUFDZixJQUFJLEVBQUVJLEtBQUssWUFBWUMsa0JBQVEsQ0FBQyxFQUFFO0lBQ2hDLE1BQU1DLFVBQVUsR0FDZEYsS0FBSyxDQUFDRSxVQUFVLElBQUlGLEtBQUssWUFBWUcsaUJBQVEsQ0FBQ0MsS0FBSyxHQUFHLEdBQUcsR0FBRyxHQUFHO0lBQ2pFLE1BQU1DLE9BQU8sR0FBR0wsS0FBSyxDQUFDSyxPQUFPLElBQUssR0FBRUMsVUFBVSxDQUFDSixVQUFVLENBQUUsRUFBQztJQUM1REYsS0FBSyxHQUFHLElBQUlDLGtCQUFRLENBQUNDLFVBQVUsRUFBRUcsT0FBTyxFQUFFLEtBQUssRUFBRVQsR0FBRyxDQUFDVyxLQUFLLENBQUM7RUFDN0Q7RUFDQVIsSUFBSSxDQUFDQyxLQUFLLENBQUM7QUFDYixDQUFDO0FBQUNRLE9BQUEsQ0FBQWIsY0FBQSxHQUFBQSxjQUFBO0FBRUssTUFBTWMsWUFBWSxHQUFHQSxDQUFDYixHQUFHLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDbkQsSUFBSTtJQUFFRyxVQUFVO0lBQUVHO0VBQVEsQ0FBQyxHQUFHVCxHQUFHO0VBQ2pDLElBQUljLGVBQU0sQ0FBQ0MsR0FBRyxLQUFLLFlBQVksSUFBSSxDQUFDZixHQUFHLENBQUNnQixhQUFhLEVBQUU7SUFDckRWLFVBQVUsR0FBRyxHQUFHO0lBQ2hCRyxPQUFPLEdBQUcsdUJBQXVCO0VBQ25DO0VBRUFQLEdBQUcsQ0FBQ2UsTUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHakIsR0FBRyxDQUFDUyxPQUFPO0VBRXhDLE1BQU1TLFFBQVEsR0FBRztJQUNmQyxJQUFJLEVBQUViLFVBQVU7SUFDaEJHLE9BQU87SUFDUCxJQUFJSyxlQUFNLENBQUNDLEdBQUcsS0FBSyxhQUFhLElBQUk7TUFBRUosS0FBSyxFQUFFWCxHQUFHLENBQUNXO0lBQU0sQ0FBQztFQUMxRCxDQUFDO0VBRUQsSUFBSUcsZUFBTSxDQUFDQyxHQUFHLEtBQUssYUFBYSxFQUFFO0lBQ2hDSyxPQUFPLENBQUNoQixLQUFLLENBQUNKLEdBQUcsQ0FBQztFQUNwQjtFQUVBRSxHQUFHLENBQUNtQixNQUFNLENBQUNmLFVBQVUsQ0FBQyxDQUFDZ0IsSUFBSSxDQUFDSixRQUFRLENBQUM7QUFDdkMsQ0FBQztBQUFDTixPQUFBLENBQUFDLFlBQUEsR0FBQUEsWUFBQTtBQUVLLE1BQU1VLFFBQVEsR0FBR0EsQ0FBQ3RCLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDMUNBLElBQUksQ0FBQyxJQUFJRSxrQkFBUSxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN0QyxDQUFDO0FBQUNPLE9BQUEsQ0FBQVcsUUFBQSxHQUFBQSxRQUFBO0FBRUssTUFBTUMsVUFBVSxHQUFHQSxDQUFDcEIsS0FBSyxFQUFFSCxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ25ERCxHQUFHLENBQUNtQixNQUFNLENBQUNqQixLQUFLLENBQUNpQixNQUFNLElBQUksR0FBRyxDQUFDLENBQUNJLElBQUksQ0FBQztJQUNuQ3JCLEtBQUssRUFBRTtNQUNMaUIsTUFBTSxFQUFFakIsS0FBSyxDQUFDaUIsTUFBTSxJQUFJLEdBQUc7TUFDM0JaLE9BQU8sRUFBRUwsS0FBSyxDQUFDSyxPQUFPLElBQUksdUJBQXVCO01BQ2pERSxLQUFLLEVBQUVHLGVBQU0sQ0FBQ1ksR0FBRyxHQUFHdEIsS0FBSyxDQUFDTyxLQUFLLEdBQUc7SUFDcEM7RUFDRixDQUFDLENBQUM7QUFDSixDQUFDO0FBQUNDLE9BQUEsQ0FBQVksVUFBQSxHQUFBQSxVQUFBIn0=","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_ApiErrors","_config","obj","__esModule","default","errorConverter","err","req","res","next","error","ApiError","statusCode","mongoose","Error","message","httpStatus","stack","exports","errorHandler","config","env","isOperational","locals","response","code","console","status","send","notFound","finalError","json","dev"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/","sources":["error.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport ApiError from './ApiErrors';\nimport config from '../config/config';\n\nexport const errorConverter = (err, req, res, next) => {\n  let error = err;\n  if (!(error instanceof ApiError)) {\n    const statusCode =\n      error.statusCode || error instanceof mongoose.Error ? 400 : 500;\n    const message = error.message || `${httpStatus[statusCode]}`;\n    error = new ApiError(statusCode, message, false, err.stack);\n  }\n  next(error);\n};\n\nexport const errorHandler = (err, req, res, next) => {\n  let { statusCode, message } = err;\n  if (config.env === 'production' && !err.isOperational) {\n    statusCode = 500;\n    message = 'Internal Server Error';\n  }\n\n  res.locals['errorMessage'] = err.message;\n\n  const response = {\n    code: statusCode,\n    message,\n    ...(config.env === 'development' && { stack: err.stack }),\n  };\n\n  if (config.env === 'development') {\n    console.error(err);\n  }\n\n  res.status(statusCode).send(response);\n};\n\nexport const notFound = (req, res, next) => {\n  next(new ApiError(404, 'Not found'));\n};\n\nexport const finalError = (error, req, res, next) => {\n  res.status(error.status || 500).json({\n    error: {\n      status: error.status || 500,\n      message: error.message || 'Internal Server Error',\n      stack: config.dev ? error.stack : '',\n    },\n  });\n};\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE/B,MAAMG,cAAc,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACrD,IAAIC,KAAK,GAAGJ,GAAG;EACf,IAAI,EAAEI,KAAK,YAAYC,kBAAQ,CAAC,EAAE;IAChC,MAAMC,UAAU,GACdF,KAAK,CAACE,UAAU,IAAIF,KAAK,YAAYG,iBAAQ,CAACC,KAAK,GAAG,GAAG,GAAG,GAAG;IACjE,MAAMC,OAAO,GAAGL,KAAK,CAACK,OAAO,IAAK,GAAEC,UAAU,CAACJ,UAAU,CAAE,EAAC;IAC5DF,KAAK,GAAG,IAAIC,kBAAQ,CAACC,UAAU,EAAEG,OAAO,EAAE,KAAK,EAAET,GAAG,CAACW,KAAK,CAAC;EAC7D;EACAR,IAAI,CAACC,KAAK,CAAC;AACb,CAAC;AAACQ,OAAA,CAAAb,cAAA,GAAAA,cAAA;AAEK,MAAMc,YAAY,GAAGA,CAACb,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACnD,IAAI;IAAEG,UAAU;IAAEG;EAAQ,CAAC,GAAGT,GAAG;EACjC,IAAIc,eAAM,CAACC,GAAG,KAAK,YAAY,IAAI,CAACf,GAAG,CAACgB,aAAa,EAAE;IACrDV,UAAU,GAAG,GAAG;IAChBG,OAAO,GAAG,uBAAuB;EACnC;EAEAP,GAAG,CAACe,MAAM,CAAC,cAAc,CAAC,GAAGjB,GAAG,CAACS,OAAO;EAExC,MAAMS,QAAQ,GAAG;IACfC,IAAI,EAAEb,UAAU;IAChBG,OAAO;IACP,IAAIK,eAAM,CAACC,GAAG,KAAK,aAAa,IAAI;MAAEJ,KAAK,EAAEX,GAAG,CAACW;IAAM,CAAC;EAC1D,CAAC;EAED,IAAIG,eAAM,CAACC,GAAG,KAAK,aAAa,EAAE;IAChCK,OAAO,CAAChB,KAAK,CAACJ,GAAG,CAAC;EACpB;EAEAE,GAAG,CAACmB,MAAM,CAACf,UAAU,CAAC,CAACgB,IAAI,CAACJ,QAAQ,CAAC;AACvC,CAAC;AAACN,OAAA,CAAAC,YAAA,GAAAA,YAAA;AAEK,MAAMU,QAAQ,GAAGA,CAACtB,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC1CA,IAAI,CAAC,IAAIE,kBAAQ,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;AACtC,CAAC;AAACO,OAAA,CAAAW,QAAA,GAAAA,QAAA;AAEK,MAAMC,UAAU,GAAGA,CAACpB,KAAK,EAAEH,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACnDD,GAAG,CAACmB,MAAM,CAACjB,KAAK,CAACiB,MAAM,IAAI,GAAG,CAAC,CAACI,IAAI,CAAC;IACnCrB,KAAK,EAAE;MACLiB,MAAM,EAAEjB,KAAK,CAACiB,MAAM,IAAI,GAAG;MAC3BZ,OAAO,EAAEL,KAAK,CAACK,OAAO,IAAI,uBAAuB;MACjDE,KAAK,EAAEG,eAAM,CAACY,GAAG,GAAGtB,KAAK,CAACO,KAAK,GAAG;IACpC;EACF,CAAC,CAAC;AACJ,CAAC;AAACC,OAAA,CAAAY,UAAA,GAAAA,UAAA"}},"mtime":1690644355762},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/ApiErrors.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nclass ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\nvar _default = ApiError;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcGlFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsImlzT3BlcmF0aW9uYWwiLCJzdGFjayIsImNhcHR1cmVTdGFja1RyYWNlIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL2Vycm9ycy8iLCJzb3VyY2VzIjpbIkFwaUVycm9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBBcGlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3Ioc3RhdHVzQ29kZSwgbWVzc2FnZSwgaXNPcGVyYXRpb25hbCA9IHRydWUsIHN0YWNrID0gJycpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgIHRoaXMuaXNPcGVyYXRpb25hbCA9IGlzT3BlcmF0aW9uYWw7XG4gICAgaWYgKHN0YWNrKSB7XG4gICAgICB0aGlzLnN0YWNrID0gc3RhY2s7XG4gICAgfSBlbHNlIHtcbiAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGlFcnJvcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsUUFBUSxTQUFTQyxLQUFLLENBQUM7RUFDM0JDLFdBQVdBLENBQUNDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxhQUFhLEdBQUcsSUFBSSxFQUFFQyxLQUFLLEdBQUcsRUFBRSxFQUFFO0lBQ2pFLEtBQUssQ0FBQ0YsT0FBTyxDQUFDO0lBQ2QsSUFBSSxDQUFDRCxVQUFVLEdBQUdBLFVBQVU7SUFDNUIsSUFBSSxDQUFDRSxhQUFhLEdBQUdBLGFBQWE7SUFDbEMsSUFBSUMsS0FBSyxFQUFFO01BQ1QsSUFBSSxDQUFDQSxLQUFLLEdBQUdBLEtBQUs7SUFDcEIsQ0FBQyxNQUFNO01BQ0xMLEtBQUssQ0FBQ00saUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQ0wsV0FBVyxDQUFDO0lBQ2pEO0VBQ0Y7QUFDRjtBQUFDLElBQUFNLFFBQUEsR0FFY1IsUUFBUTtBQUFBUyxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9","map":{"version":3,"names":["ApiError","Error","constructor","statusCode","message","isOperational","stack","captureStackTrace","_default","exports","default"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/","sources":["ApiErrors.js"],"sourcesContent":["class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport default ApiError;\n"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,SAASC,KAAK,CAAC;EAC3BC,WAAWA,CAACC,UAAU,EAAEC,OAAO,EAAEC,aAAa,GAAG,IAAI,EAAEC,KAAK,GAAG,EAAE,EAAE;IACjE,KAAK,CAACF,OAAO,CAAC;IACd,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,aAAa,GAAGA,aAAa;IAClC,IAAIC,KAAK,EAAE;MACT,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,MAAM;MACLL,KAAK,CAACM,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACL,WAAW,CAAC;IACjD;EACF;AACF;AAAC,IAAAM,QAAA,GAEcR,QAAQ;AAAAS,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689326817408},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nrequire(\"dotenv/config\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst envVarsSchema = _joi.default.object().keys({\n  NODE_ENV: _joi.default.string().valid('production', 'development', 'test').lowercase().required(),\n  PORT: _joi.default.number().default(4000),\n  SERVER_NAME: _joi.default.string().required(),\n  API_URL: _joi.default.string().required().description('Api url'),\n  CLIENT_URL: _joi.default.string().required().description('Client url'),\n  MONGO_INITDB_ROOT_USERNAME: _joi.default.string().required(),\n  MONGO_INITDB_ROOT_PASSWORD: _joi.default.string().required(),\n  MONGO_INITDB_DATABASE: _joi.default.string().required(),\n  DB_LOCAL_PORT: _joi.default.string().required(),\n  DB_DOCKER_PORT: _joi.default.string().required(),\n  DB_HOST: _joi.default.string().ip().required(),\n  // JWT_SECRET: Joi.string().required().description('JWT secret key'),\n  JWT_ACCESS_EXPIRATION_MINUTES: _joi.default.number().default(30).description('minutes after which access tokens expire'),\n  JWT_REFRESH_EXPIRATION_DAYS: _joi.default.number().default(30).description('days after which refresh tokens expire')\n}).unknown();\nconst {\n  value: envVars,\n  error\n} = envVarsSchema.prefs({\n  errors: {\n    label: 'key'\n  }\n}).validate(process.env);\nif (error) {\n  throw new Error(`Config validation error: ${error.message}`);\n}\nconst config = {\n  dev: process.env.NODE_ENV !== 'production',\n  env: envVars.NODE_ENV,\n  port: envVars.PORT,\n  clientUrl: envVars.CLIENT_URL,\n  mongoose: {\n    url: `mongodb://${envVars.MONGO_INITDB_ROOT_USERNAME}:${envVars.MONGO_INITDB_ROOT_PASSWORD}@${envVars.DB_HOST}:${envVars.DB_LOCAL_PORT}/${envVars.MONGO_INITDB_DATABASE}?authSource=admin`,\n    options: {\n      useNewUrlParser: true\n    }\n  },\n  authentication: {\n    accessToken: {\n      secret: envVars.JWT_ACCESS_SECRET,\n      expiresIn: envVars.JWT_ACCESS_EXPIRATION_MINUTES\n    },\n    refreshToken: {\n      secret: envVars.JWT_REFRESH_SECRET,\n      expiresIn: envVars.JWT_REFRESH_EXPIRATION_DAYS\n    }\n  }\n};\nvar _default = config;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImVudlZhcnNTY2hlbWEiLCJKb2kiLCJvYmplY3QiLCJrZXlzIiwiTk9ERV9FTlYiLCJzdHJpbmciLCJ2YWxpZCIsImxvd2VyY2FzZSIsInJlcXVpcmVkIiwiUE9SVCIsIm51bWJlciIsIlNFUlZFUl9OQU1FIiwiQVBJX1VSTCIsImRlc2NyaXB0aW9uIiwiQ0xJRU5UX1VSTCIsIk1PTkdPX0lOSVREQl9ST09UX1VTRVJOQU1FIiwiTU9OR09fSU5JVERCX1JPT1RfUEFTU1dPUkQiLCJNT05HT19JTklUREJfREFUQUJBU0UiLCJEQl9MT0NBTF9QT1JUIiwiREJfRE9DS0VSX1BPUlQiLCJEQl9IT1NUIiwiaXAiLCJKV1RfQUNDRVNTX0VYUElSQVRJT05fTUlOVVRFUyIsIkpXVF9SRUZSRVNIX0VYUElSQVRJT05fREFZUyIsInVua25vd24iLCJ2YWx1ZSIsImVudlZhcnMiLCJlcnJvciIsInByZWZzIiwiZXJyb3JzIiwibGFiZWwiLCJ2YWxpZGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsIm1lc3NhZ2UiLCJjb25maWciLCJkZXYiLCJwb3J0IiwiY2xpZW50VXJsIiwibW9uZ29vc2UiLCJ1cmwiLCJvcHRpb25zIiwidXNlTmV3VXJsUGFyc2VyIiwiYXV0aGVudGljYXRpb24iLCJhY2Nlc3NUb2tlbiIsInNlY3JldCIsIkpXVF9BQ0NFU1NfU0VDUkVUIiwiZXhwaXJlc0luIiwicmVmcmVzaFRva2VuIiwiSldUX1JFRlJFU0hfU0VDUkVUIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCAnZG90ZW52L2NvbmZpZyc7XG5cbmNvbnN0IGVudlZhcnNTY2hlbWEgPSBKb2kub2JqZWN0KClcbiAgLmtleXMoe1xuICAgIE5PREVfRU5WOiBKb2kuc3RyaW5nKClcbiAgICAgIC52YWxpZCgncHJvZHVjdGlvbicsICdkZXZlbG9wbWVudCcsICd0ZXN0JylcbiAgICAgIC5sb3dlcmNhc2UoKVxuICAgICAgLnJlcXVpcmVkKCksXG4gICAgUE9SVDogSm9pLm51bWJlcigpLmRlZmF1bHQoNDAwMCksXG4gICAgU0VSVkVSX05BTUU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIEFQSV9VUkw6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLmRlc2NyaXB0aW9uKCdBcGkgdXJsJyksXG4gICAgQ0xJRU5UX1VSTDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCkuZGVzY3JpcHRpb24oJ0NsaWVudCB1cmwnKSxcbiAgICBNT05HT19JTklUREJfUk9PVF9VU0VSTkFNRTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgTU9OR09fSU5JVERCX1JPT1RfUEFTU1dPUkQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIE1PTkdPX0lOSVREQl9EQVRBQkFTRTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgREJfTE9DQUxfUE9SVDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgREJfRE9DS0VSX1BPUlQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIERCX0hPU1Q6IEpvaS5zdHJpbmcoKS5pcCgpLnJlcXVpcmVkKCksXG5cbiAgICAvLyBKV1RfU0VDUkVUOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKS5kZXNjcmlwdGlvbignSldUIHNlY3JldCBrZXknKSxcbiAgICBKV1RfQUNDRVNTX0VYUElSQVRJT05fTUlOVVRFUzogSm9pLm51bWJlcigpXG4gICAgICAuZGVmYXVsdCgzMClcbiAgICAgIC5kZXNjcmlwdGlvbignbWludXRlcyBhZnRlciB3aGljaCBhY2Nlc3MgdG9rZW5zIGV4cGlyZScpLFxuICAgIEpXVF9SRUZSRVNIX0VYUElSQVRJT05fREFZUzogSm9pLm51bWJlcigpXG4gICAgICAuZGVmYXVsdCgzMClcbiAgICAgIC5kZXNjcmlwdGlvbignZGF5cyBhZnRlciB3aGljaCByZWZyZXNoIHRva2VucyBleHBpcmUnKSxcbiAgfSlcbiAgLnVua25vd24oKTtcblxuY29uc3QgeyB2YWx1ZTogZW52VmFycywgZXJyb3IgfSA9IGVudlZhcnNTY2hlbWFcbiAgLnByZWZzKHsgZXJyb3JzOiB7IGxhYmVsOiAna2V5JyB9IH0pXG4gIC52YWxpZGF0ZShwcm9jZXNzLmVudik7XG5cbmlmIChlcnJvcikge1xuICB0aHJvdyBuZXcgRXJyb3IoYENvbmZpZyB2YWxpZGF0aW9uIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG59XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgZGV2OiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuICBlbnY6IGVudlZhcnMuTk9ERV9FTlYsXG4gIHBvcnQ6IGVudlZhcnMuUE9SVCxcbiAgY2xpZW50VXJsOiBlbnZWYXJzLkNMSUVOVF9VUkwsXG4gIG1vbmdvb3NlOiB7XG4gICAgdXJsOiBgbW9uZ29kYjovLyR7ZW52VmFycy5NT05HT19JTklUREJfUk9PVF9VU0VSTkFNRX06JHtlbnZWYXJzLk1PTkdPX0lOSVREQl9ST09UX1BBU1NXT1JEfUAke2VudlZhcnMuREJfSE9TVH06JHtlbnZWYXJzLkRCX0xPQ0FMX1BPUlR9LyR7ZW52VmFycy5NT05HT19JTklUREJfREFUQUJBU0V9P2F1dGhTb3VyY2U9YWRtaW5gLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICB9LFxuICB9LFxuICBhdXRoZW50aWNhdGlvbjoge1xuICAgIGFjY2Vzc1Rva2VuOiB7XG4gICAgICBzZWNyZXQ6IGVudlZhcnMuSldUX0FDQ0VTU19TRUNSRVQsXG4gICAgICBleHBpcmVzSW46IGVudlZhcnMuSldUX0FDQ0VTU19FWFBJUkFUSU9OX01JTlVURVMsXG4gICAgfSxcbiAgICByZWZyZXNoVG9rZW46IHtcbiAgICAgIHNlY3JldDogZW52VmFycy5KV1RfUkVGUkVTSF9TRUNSRVQsXG4gICAgICBleHBpcmVzSW46IGVudlZhcnMuSldUX1JFRlJFU0hfRVhQSVJBVElPTl9EQVlTLFxuICAgIH0sXG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25maWc7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBQSxPQUFBO0FBQXVCLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRXZCLE1BQU1HLGFBQWEsR0FBR0MsWUFBRyxDQUFDQyxNQUFNLENBQUMsQ0FBQyxDQUMvQkMsSUFBSSxDQUFDO0VBQ0pDLFFBQVEsRUFBRUgsWUFBRyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxDQUNuQkMsS0FBSyxDQUFDLFlBQVksRUFBRSxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQzFDQyxTQUFTLENBQUMsQ0FBQyxDQUNYQyxRQUFRLENBQUMsQ0FBQztFQUNiQyxJQUFJLEVBQUVSLFlBQUcsQ0FBQ1MsTUFBTSxDQUFDLENBQUMsQ0FBQ1gsT0FBTyxDQUFDLElBQUksQ0FBQztFQUNoQ1ksV0FBVyxFQUFFVixZQUFHLENBQUNJLE1BQU0sQ0FBQyxDQUFDLENBQUNHLFFBQVEsQ0FBQyxDQUFDO0VBQ3BDSSxPQUFPLEVBQUVYLFlBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0csUUFBUSxDQUFDLENBQUMsQ0FBQ0ssV0FBVyxDQUFDLFNBQVMsQ0FBQztFQUN2REMsVUFBVSxFQUFFYixZQUFHLENBQUNJLE1BQU0sQ0FBQyxDQUFDLENBQUNHLFFBQVEsQ0FBQyxDQUFDLENBQUNLLFdBQVcsQ0FBQyxZQUFZLENBQUM7RUFDN0RFLDBCQUEwQixF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","map":{"version":3,"names":["_joi","_interopRequireDefault","require","obj","__esModule","default","envVarsSchema","Joi","object","keys","NODE_ENV","string","valid","lowercase","required","PORT","number","SERVER_NAME","API_URL","description","CLIENT_URL","MONGO_INITDB_ROOT_USERNAME","MONGO_INITDB_ROOT_PASSWORD","MONGO_INITDB_DATABASE","DB_LOCAL_PORT","DB_DOCKER_PORT","DB_HOST","ip","JWT_ACCESS_EXPIRATION_MINUTES","JWT_REFRESH_EXPIRATION_DAYS","unknown","value","envVars","error","prefs","errors","label","validate","process","env","Error","message","config","dev","port","clientUrl","mongoose","url","options","useNewUrlParser","authentication","accessToken","secret","JWT_ACCESS_SECRET","expiresIn","refreshToken","JWT_REFRESH_SECRET","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/","sources":["config.js"],"sourcesContent":["import Joi from 'joi';\nimport 'dotenv/config';\n\nconst envVarsSchema = Joi.object()\n  .keys({\n    NODE_ENV: Joi.string()\n      .valid('production', 'development', 'test')\n      .lowercase()\n      .required(),\n    PORT: Joi.number().default(4000),\n    SERVER_NAME: Joi.string().required(),\n    API_URL: Joi.string().required().description('Api url'),\n    CLIENT_URL: Joi.string().required().description('Client url'),\n    MONGO_INITDB_ROOT_USERNAME: Joi.string().required(),\n    MONGO_INITDB_ROOT_PASSWORD: Joi.string().required(),\n    MONGO_INITDB_DATABASE: Joi.string().required(),\n    DB_LOCAL_PORT: Joi.string().required(),\n    DB_DOCKER_PORT: Joi.string().required(),\n    DB_HOST: Joi.string().ip().required(),\n\n    // JWT_SECRET: Joi.string().required().description('JWT secret key'),\n    JWT_ACCESS_EXPIRATION_MINUTES: Joi.number()\n      .default(30)\n      .description('minutes after which access tokens expire'),\n    JWT_REFRESH_EXPIRATION_DAYS: Joi.number()\n      .default(30)\n      .description('days after which refresh tokens expire'),\n  })\n  .unknown();\n\nconst { value: envVars, error } = envVarsSchema\n  .prefs({ errors: { label: 'key' } })\n  .validate(process.env);\n\nif (error) {\n  throw new Error(`Config validation error: ${error.message}`);\n}\n\nconst config = {\n  dev: process.env.NODE_ENV !== 'production',\n  env: envVars.NODE_ENV,\n  port: envVars.PORT,\n  clientUrl: envVars.CLIENT_URL,\n  mongoose: {\n    url: `mongodb://${envVars.MONGO_INITDB_ROOT_USERNAME}:${envVars.MONGO_INITDB_ROOT_PASSWORD}@${envVars.DB_HOST}:${envVars.DB_LOCAL_PORT}/${envVars.MONGO_INITDB_DATABASE}?authSource=admin`,\n    options: {\n      useNewUrlParser: true,\n    },\n  },\n  authentication: {\n    accessToken: {\n      secret: envVars.JWT_ACCESS_SECRET,\n      expiresIn: envVars.JWT_ACCESS_EXPIRATION_MINUTES,\n    },\n    refreshToken: {\n      secret: envVars.JWT_REFRESH_SECRET,\n      expiresIn: envVars.JWT_REFRESH_EXPIRATION_DAYS,\n    },\n  },\n};\n\nexport default config;\n"],"mappings":"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"}},"mtime":1689254649232},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.notFound = exports.finalError = exports.errorHandler = exports.errorConverter = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _ApiErrors = _interopRequireDefault(require(\"./ApiErrors\"));\nvar _config = _interopRequireDefault(require(\"../config/config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst errorConverter = (err, req, res, next) => {\n  let error = err;\n  if (!(error instanceof _ApiErrors.default)) {\n    const statusCode = error.statusCode || error instanceof _mongoose.default.Error ? 400 : 500;\n    const message = error.message || `${httpStatus[statusCode]}`;\n    error = new _ApiErrors.default(statusCode, message, false, err.stack);\n  }\n  next(error);\n};\nexports.errorConverter = errorConverter;\nconst errorHandler = (err, req, res, next) => {\n  let {\n    statusCode,\n    message\n  } = err;\n  if (_config.default.env === 'production' && !err.isOperational) {\n    statusCode = 500;\n    message = 'Internal Server Error';\n  }\n  res.locals['errorMessage'] = err.message;\n  const response = {\n    code: statusCode,\n    message,\n    ...(_config.default.env === 'development' && {\n      stack: err.stack\n    })\n  };\n  if (_config.default.env === 'development') {\n    console.error(err);\n  }\n  res.status(statusCode).send(response);\n};\nexports.errorHandler = errorHandler;\nconst notFound = (req, res, next) => {\n  next(new _ApiErrors.default(404, 'Not found'));\n};\nexports.notFound = notFound;\nconst finalError = (error, req, res, next) => {\n  res.status(error.status || 500).json({\n    error: {\n      status: error.status || 500,\n      message: error.message || 'Internal Server Error',\n      stack: _config.default.dev ? error.stack : ''\n    }\n  });\n};\nexports.finalError = finalError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9BcGlFcnJvcnMiLCJfY29uZmlnIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJlcnJvckNvbnZlcnRlciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJlcnJvciIsIkFwaUVycm9yIiwic3RhdHVzQ29kZSIsIm1vbmdvb3NlIiwiRXJyb3IiLCJtZXNzYWdlIiwiaHR0cFN0YXR1cyIsInN0YWNrIiwiZXhwb3J0cyIsImVycm9ySGFuZGxlciIsImNvbmZpZyIsImVudiIsImlzT3BlcmF0aW9uYWwiLCJsb2NhbHMiLCJyZXNwb25zZSIsImNvZGUiLCJjb25zb2xlIiwic3RhdHVzIiwic2VuZCIsIm5vdEZvdW5kIiwiZmluYWxFcnJvciIsImpzb24iLCJkZXYiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9lcnJvcnMvIiwic291cmNlcyI6WyJlcnJvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IEFwaUVycm9yIGZyb20gJy4vQXBpRXJyb3JzJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnL2NvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBlcnJvckNvbnZlcnRlciA9IChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxldCBlcnJvciA9IGVycjtcbiAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBBcGlFcnJvcikpIHtcbiAgICBjb25zdCBzdGF0dXNDb2RlID1cbiAgICAgIGVycm9yLnN0YXR1c0NvZGUgfHwgZXJyb3IgaW5zdGFuY2VvZiBtb25nb29zZS5FcnJvciA/IDQwMCA6IDUwMDtcbiAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IubWVzc2FnZSB8fCBgJHtodHRwU3RhdHVzW3N0YXR1c0NvZGVdfWA7XG4gICAgZXJyb3IgPSBuZXcgQXBpRXJyb3Ioc3RhdHVzQ29kZSwgbWVzc2FnZSwgZmFsc2UsIGVyci5zdGFjayk7XG4gIH1cbiAgbmV4dChlcnJvcik7XG59O1xuXG5leHBvcnQgY29uc3QgZXJyb3JIYW5kbGVyID0gKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgbGV0IHsgc3RhdHVzQ29kZSwgbWVzc2FnZSB9ID0gZXJyO1xuICBpZiAoY29uZmlnLmVudiA9PT0gJ3Byb2R1Y3Rpb24nICYmICFlcnIuaXNPcGVyYXRpb25hbCkge1xuICAgIHN0YXR1c0NvZGUgPSA1MDA7XG4gICAgbWVzc2FnZSA9ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InO1xuICB9XG5cbiAgcmVzLmxvY2Fsc1snZXJyb3JNZXNzYWdlJ10gPSBlcnIubWVzc2FnZTtcblxuICBjb25zdCByZXNwb25zZSA9IHtcbiAgICBjb2RlOiBzdGF0dXNDb2RlLFxuICAgIG1lc3NhZ2UsXG4gICAgLi4uKGNvbmZpZy5lbnYgPT09ICdkZXZlbG9wbWVudCcgJiYgeyBzdGFjazogZXJyLnN0YWNrIH0pLFxuICB9O1xuXG4gIGlmIChjb25maWcuZW52ID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9XG5cbiAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5zZW5kKHJlc3BvbnNlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBub3RGb3VuZCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdOb3QgZm91bmQnKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmluYWxFcnJvciA9IChlcnJvciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgcmVzLnN0YXR1cyhlcnJvci5zdGF0dXMgfHwgNTAwKS5qc29uKHtcbiAgICBlcnJvcjoge1xuICAgICAgc3RhdHVzOiBlcnJvci5zdGF0dXMgfHwgNTAwLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAgIHN0YWNrOiBjb25maWcuZGV2ID8gZXJyb3Iuc3RhY2sgOiAnJyxcbiAgICB9LFxuICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFzQyxTQUFBRCx1QkFBQUksR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUUvQixNQUFNRyxjQUFjLEdBQUdBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNyRCxJQUFJQyxLQUFLLEdBQUdKLEdBQUc7RUFDZixJQUFJLEVBQUVJLEtBQUssWUFBWUMsa0JBQVEsQ0FBQyxFQUFFO0lBQ2hDLE1BQU1DLFVBQVUsR0FDZEYsS0FBSyxDQUFDRSxVQUFVLElBQUlGLEtBQUssWUFBWUcsaUJBQVEsQ0FBQ0MsS0FBSyxHQUFHLEdBQUcsR0FBRyxHQUFHO0lBQ2pFLE1BQU1DLE9BQU8sR0FBR0wsS0FBSyxDQUFDSyxPQUFPLElBQUssR0FBRUMsVUFBVSxDQUFDSixVQUFVLENBQUUsRUFBQztJQUM1REYsS0FBSyxHQUFHLElBQUlDLGtCQUFRLENBQUNDLFVBQVUsRUFBRUcsT0FBTyxFQUFFLEtBQUssRUFBRVQsR0FBRyxDQUFDVyxLQUFLLENBQUM7RUFDN0Q7RUFDQVIsSUFBSSxDQUFDQyxLQUFLLENBQUM7QUFDYixDQUFDO0FBQUNRLE9BQUEsQ0FBQWIsY0FBQSxHQUFBQSxjQUFBO0FBRUssTUFBTWMsWUFBWSxHQUFHQSxDQUFDYixHQUFHLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDbkQsSUFBSTtJQUFFRyxVQUFVO0lBQUVHO0VBQVEsQ0FBQyxHQUFHVCxHQUFHO0VBQ2pDLElBQUljLGVBQU0sQ0FBQ0MsR0FBRyxLQUFLLFlBQVksSUFBSSxDQUFDZixHQUFHLENBQUNnQixhQUFhLEVBQUU7SUFDckRWLFVBQVUsR0FBRyxHQUFHO0lBQ2hCRyxPQUFPLEdBQUcsdUJBQXVCO0VBQ25DO0VBRUFQLEdBQUcsQ0FBQ2UsTUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHakIsR0FBRyxDQUFDUyxPQUFPO0VBRXhDLE1BQU1TLFFBQVEsR0FBRztJQUNmQyxJQUFJLEVBQUViLFVBQVU7SUFDaEJHLE9BQU87SUFDUCxJQUFJSyxlQUFNLENBQUNDLEdBQUcsS0FBSyxhQUFhLElBQUk7TUFBRUosS0FBSyxFQUFFWCxHQUFHLENBQUNXO0lBQU0sQ0FBQztFQUMxRCxDQUFDO0VBRUQsSUFBSUcsZUFBTSxDQUFDQyxHQUFHLEtBQUssYUFBYSxFQUFFO0lBQ2hDSyxPQUFPLENBQUNoQixLQUFLLENBQUNKLEdBQUcsQ0FBQztFQUNwQjtFQUVBRSxHQUFHLENBQUNtQixNQUFNLENBQUNmLFVBQVUsQ0FBQyxDQUFDZ0IsSUFBSSxDQUFDSixRQUFRLENBQUM7QUFDdkMsQ0FBQztBQUFDTixPQUFBLENBQUFDLFlBQUEsR0FBQUEsWUFBQTtBQUVLLE1BQU1VLFFBQVEsR0FBR0EsQ0FBQ3RCLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDMUNBLElBQUksQ0FBQyxJQUFJRSxrQkFBUSxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN0QyxDQUFDO0FBQUNPLE9BQUEsQ0FBQVcsUUFBQSxHQUFBQSxRQUFBO0FBRUssTUFBTUMsVUFBVSxHQUFHQSxDQUFDcEIsS0FBSyxFQUFFSCxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ25ERCxHQUFHLENBQUNtQixNQUFNLENBQUNqQixLQUFLLENBQUNpQixNQUFNLElBQUksR0FBRyxDQUFDLENBQUNJLElBQUksQ0FBQztJQUNuQ3JCLEtBQUssRUFBRTtNQUNMaUIsTUFBTSxFQUFFakIsS0FBSyxDQUFDaUIsTUFBTSxJQUFJLEdBQUc7TUFDM0JaLE9BQU8sRUFBRUwsS0FBSyxDQUFDSyxPQUFPLElBQUksdUJBQXVCO01BQ2pERSxLQUFLLEVBQUVHLGVBQU0sQ0FBQ1ksR0FBRyxHQUFHdEIsS0FBSyxDQUFDTyxLQUFLLEdBQUc7SUFDcEM7RUFDRixDQUFDLENBQUM7QUFDSixDQUFDO0FBQUNDLE9BQUEsQ0FBQVksVUFBQSxHQUFBQSxVQUFBIn0=","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_ApiErrors","_config","obj","__esModule","default","errorConverter","err","req","res","next","error","ApiError","statusCode","mongoose","Error","message","httpStatus","stack","exports","errorHandler","config","env","isOperational","locals","response","code","console","status","send","notFound","finalError","json","dev"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/","sources":["error.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport ApiError from './ApiErrors';\nimport config from '../config/config';\n\nexport const errorConverter = (err, req, res, next) => {\n  let error = err;\n  if (!(error instanceof ApiError)) {\n    const statusCode =\n      error.statusCode || error instanceof mongoose.Error ? 400 : 500;\n    const message = error.message || `${httpStatus[statusCode]}`;\n    error = new ApiError(statusCode, message, false, err.stack);\n  }\n  next(error);\n};\n\nexport const errorHandler = (err, req, res, next) => {\n  let { statusCode, message } = err;\n  if (config.env === 'production' && !err.isOperational) {\n    statusCode = 500;\n    message = 'Internal Server Error';\n  }\n\n  res.locals['errorMessage'] = err.message;\n\n  const response = {\n    code: statusCode,\n    message,\n    ...(config.env === 'development' && { stack: err.stack }),\n  };\n\n  if (config.env === 'development') {\n    console.error(err);\n  }\n\n  res.status(statusCode).send(response);\n};\n\nexport const notFound = (req, res, next) => {\n  next(new ApiError(404, 'Not found'));\n};\n\nexport const finalError = (error, req, res, next) => {\n  res.status(error.status || 500).json({\n    error: {\n      status: error.status || 500,\n      message: error.message || 'Internal Server Error',\n      stack: config.dev ? error.stack : '',\n    },\n  });\n};\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE/B,MAAMG,cAAc,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACrD,IAAIC,KAAK,GAAGJ,GAAG;EACf,IAAI,EAAEI,KAAK,YAAYC,kBAAQ,CAAC,EAAE;IAChC,MAAMC,UAAU,GACdF,KAAK,CAACE,UAAU,IAAIF,KAAK,YAAYG,iBAAQ,CAACC,KAAK,GAAG,GAAG,GAAG,GAAG;IACjE,MAAMC,OAAO,GAAGL,KAAK,CAACK,OAAO,IAAK,GAAEC,UAAU,CAACJ,UAAU,CAAE,EAAC;IAC5DF,KAAK,GAAG,IAAIC,kBAAQ,CAACC,UAAU,EAAEG,OAAO,EAAE,KAAK,EAAET,GAAG,CAACW,KAAK,CAAC;EAC7D;EACAR,IAAI,CAACC,KAAK,CAAC;AACb,CAAC;AAACQ,OAAA,CAAAb,cAAA,GAAAA,cAAA;AAEK,MAAMc,YAAY,GAAGA,CAACb,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACnD,IAAI;IAAEG,UAAU;IAAEG;EAAQ,CAAC,GAAGT,GAAG;EACjC,IAAIc,eAAM,CAACC,GAAG,KAAK,YAAY,IAAI,CAACf,GAAG,CAACgB,aAAa,EAAE;IACrDV,UAAU,GAAG,GAAG;IAChBG,OAAO,GAAG,uBAAuB;EACnC;EAEAP,GAAG,CAACe,MAAM,CAAC,cAAc,CAAC,GAAGjB,GAAG,CAACS,OAAO;EAExC,MAAMS,QAAQ,GAAG;IACfC,IAAI,EAAEb,UAAU;IAChBG,OAAO;IACP,IAAIK,eAAM,CAACC,GAAG,KAAK,aAAa,IAAI;MAAEJ,KAAK,EAAEX,GAAG,CAACW;IAAM,CAAC;EAC1D,CAAC;EAED,IAAIG,eAAM,CAACC,GAAG,KAAK,aAAa,EAAE;IAChCK,OAAO,CAAChB,KAAK,CAACJ,GAAG,CAAC;EACpB;EAEAE,GAAG,CAACmB,MAAM,CAACf,UAAU,CAAC,CAACgB,IAAI,CAACJ,QAAQ,CAAC;AACvC,CAAC;AAACN,OAAA,CAAAC,YAAA,GAAAA,YAAA;AAEK,MAAMU,QAAQ,GAAGA,CAACtB,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC1CA,IAAI,CAAC,IAAIE,kBAAQ,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;AACtC,CAAC;AAACO,OAAA,CAAAW,QAAA,GAAAA,QAAA;AAEK,MAAMC,UAAU,GAAGA,CAACpB,KAAK,EAAEH,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACnDD,GAAG,CAACmB,MAAM,CAACjB,KAAK,CAACiB,MAAM,IAAI,GAAG,CAAC,CAACI,IAAI,CAAC;IACnCrB,KAAK,EAAE;MACLiB,MAAM,EAAEjB,KAAK,CAACiB,MAAM,IAAI,GAAG;MAC3BZ,OAAO,EAAEL,KAAK,CAACK,OAAO,IAAI,uBAAuB;MACjDE,KAAK,EAAEG,eAAM,CAACY,GAAG,GAAGtB,KAAK,CAACO,KAAK,GAAG;IACpC;EACF,CAAC,CAAC;AACJ,CAAC;AAACC,OAAA,CAAAY,UAAA,GAAAA,UAAA"}},"mtime":1690644355762},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/ApiErrors.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nclass ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\nvar _default = ApiError;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcGlFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsImlzT3BlcmF0aW9uYWwiLCJzdGFjayIsImNhcHR1cmVTdGFja1RyYWNlIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL2Vycm9ycy8iLCJzb3VyY2VzIjpbIkFwaUVycm9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBBcGlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3Ioc3RhdHVzQ29kZSwgbWVzc2FnZSwgaXNPcGVyYXRpb25hbCA9IHRydWUsIHN0YWNrID0gJycpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgIHRoaXMuaXNPcGVyYXRpb25hbCA9IGlzT3BlcmF0aW9uYWw7XG4gICAgaWYgKHN0YWNrKSB7XG4gICAgICB0aGlzLnN0YWNrID0gc3RhY2s7XG4gICAgfSBlbHNlIHtcbiAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGlFcnJvcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsUUFBUSxTQUFTQyxLQUFLLENBQUM7RUFDM0JDLFdBQVdBLENBQUNDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxhQUFhLEdBQUcsSUFBSSxFQUFFQyxLQUFLLEdBQUcsRUFBRSxFQUFFO0lBQ2pFLEtBQUssQ0FBQ0YsT0FBTyxDQUFDO0lBQ2QsSUFBSSxDQUFDRCxVQUFVLEdBQUdBLFVBQVU7SUFDNUIsSUFBSSxDQUFDRSxhQUFhLEdBQUdBLGFBQWE7SUFDbEMsSUFBSUMsS0FBSyxFQUFFO01BQ1QsSUFBSSxDQUFDQSxLQUFLLEdBQUdBLEtBQUs7SUFDcEIsQ0FBQyxNQUFNO01BQ0xMLEtBQUssQ0FBQ00saUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQ0wsV0FBVyxDQUFDO0lBQ2pEO0VBQ0Y7QUFDRjtBQUFDLElBQUFNLFFBQUEsR0FFY1IsUUFBUTtBQUFBUyxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9","map":{"version":3,"names":["ApiError","Error","constructor","statusCode","message","isOperational","stack","captureStackTrace","_default","exports","default"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/errors/","sources":["ApiErrors.js"],"sourcesContent":["class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport default ApiError;\n"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,SAASC,KAAK,CAAC;EAC3BC,WAAWA,CAACC,UAAU,EAAEC,OAAO,EAAEC,aAAa,GAAG,IAAI,EAAEC,KAAK,GAAG,EAAE,EAAE;IACjE,KAAK,CAACF,OAAO,CAAC;IACd,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,aAAa,GAAGA,aAAa;IAClC,IAAIC,KAAK,EAAE;MACT,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,MAAM;MACLL,KAAK,CAACM,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACL,WAAW,CAAC;IACjD;EACF;AACF;AAAC,IAAAM,QAAA,GAEcR,QAAQ;AAAAS,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689326817408},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/dbConn.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"'use strict';\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _config = _interopRequireDefault(require(\"../config/config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_mongoose.default.Promise = global.Promise;\n\n// in dev environment\n_mongoose.default.set('debug', true);\n_mongoose.default.set('strictQuery', true);\nfunction onError(err) {\n  console.error(`MongoDB connection error: ${err}`);\n  _mongoose.default.connection.on('error', console.error.bind(console, 'connection error'));\n}\nfunction onConnected() {\n  _mongoose.default.connection.once('open', function callback() {\n    // mongoose.set('debug', true);\n    // print mongoose logs in dev env\n    if (_config.default.dev) {\n      _mongoose.default.set('debug', true);\n    }\n    console.log('Connected to MongoDB!');\n  });\n}\n_mongoose.default.connection.on('disconnected', () => {\n  console.warn('Mongoose connection is disconnected');\n});\nfunction onReconnected() {\n  console.warn('MongoDB reconnected!');\n}\nconst onSIGINT = async () => {\n  console.warn('MongoDB default connection disconnected through app termination!');\n  await _mongoose.default.connection.close();\n  process.exit(0);\n};\n(async () => {\n  await _mongoose.default.connect(_config.default.mongoose.url, _config.default.mongoose.options);\n})();\nconst db = _mongoose.default.connection;\ndb.on('error', onError);\ndb.on('connected', onConnected);\ndb.on('reconnected', onReconnected);\nprocess.on('SIGINT', onSIGINT);\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jb25maWciLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm1vbmdvb3NlIiwiUHJvbWlzZSIsImdsb2JhbCIsInNldCIsIm9uRXJyb3IiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25uZWN0aW9uIiwib24iLCJiaW5kIiwib25Db25uZWN0ZWQiLCJvbmNlIiwiY2FsbGJhY2siLCJjb25maWciLCJkZXYiLCJsb2ciLCJ3YXJuIiwib25SZWNvbm5lY3RlZCIsIm9uU0lHSU5UIiwiY2xvc2UiLCJwcm9jZXNzIiwiZXhpdCIsImNvbm5lY3QiLCJ1cmwiLCJvcHRpb25zIiwiZGIiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJkYkNvbm4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcvY29uZmlnJztcblxubW9uZ29vc2UuUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuXG4vLyBpbiBkZXYgZW52aXJvbm1lbnRcbm1vbmdvb3NlLnNldCgnZGVidWcnLCB0cnVlKTtcbm1vbmdvb3NlLnNldCgnc3RyaWN0UXVlcnknLCB0cnVlKTtcblxuZnVuY3Rpb24gb25FcnJvcihlcnIpIHtcbiAgY29uc29sZS5lcnJvcihgTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOiAke2Vycn1gKTtcbiAgbW9uZ29vc2UuY29ubmVjdGlvbi5vbihcbiAgICAnZXJyb3InLFxuICAgIGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlLCAnY29ubmVjdGlvbiBlcnJvcicpXG4gICk7XG59XG5cbmZ1bmN0aW9uIG9uQ29ubmVjdGVkKCkge1xuICBtb25nb29zZS5jb25uZWN0aW9uLm9uY2UoJ29wZW4nLCBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAvLyBtb25nb29zZS5zZXQoJ2RlYnVnJywgdHJ1ZSk7XG4gICAgLy8gcHJpbnQgbW9uZ29vc2UgbG9ncyBpbiBkZXYgZW52XG4gICAgaWYgKGNvbmZpZy5kZXYpIHtcbiAgICAgIG1vbmdvb3NlLnNldCgnZGVidWcnLCB0cnVlKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nb0RCIScpO1xuICB9KTtcbn1cblxubW9uZ29vc2UuY29ubmVjdGlvbi5vbignZGlzY29ubmVjdGVkJywgKCkgPT4ge1xuICBjb25zb2xlLndhcm4oJ01vbmdvb3NlIGNvbm5lY3Rpb24gaXMgZGlzY29ubmVjdGVkJyk7XG59KTtcblxuZnVuY3Rpb24gb25SZWNvbm5lY3RlZCgpIHtcbiAgY29uc29sZS53YXJuKCdNb25nb0RCIHJlY29ubmVjdGVkIScpO1xufVxuXG5jb25zdCBvblNJR0lOVCA9IGFzeW5jICgpID0+IHtcbiAgY29uc29sZS53YXJuKFxuICAgICdNb25nb0RCIGRlZmF1bHQgY29ubmVjdGlvbiBkaXNjb25uZWN0ZWQgdGhyb3VnaCBhcHAgdGVybWluYXRpb24hJ1xuICApO1xuICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7XG4gIHByb2Nlc3MuZXhpdCgwKTtcbn07XG5cbihhc3luYyAoKSA9PiB7XG4gIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoY29uZmlnLm1vbmdvb3NlLnVybCwgY29uZmlnLm1vbmdvb3NlLm9wdGlvbnMpO1xufSkoKTtcblxuY29uc3QgZGIgPSBtb25nb29zZS5jb25uZWN0aW9uO1xuXG5kYi5vbignZXJyb3InLCBvbkVycm9yKTtcbmRiLm9uKCdjb25uZWN0ZWQnLCBvbkNvbm5lY3RlZCk7XG5kYi5vbigncmVjb25uZWN0ZWQnLCBvblJlY29ubmVjdGVkKTtcblxucHJvY2Vzcy5v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","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_config","obj","__esModule","default","mongoose","Promise","global","set","onError","err","console","error","connection","on","bind","onConnected","once","callback","config","dev","log","warn","onReconnected","onSIGINT","close","process","exit","connect","url","options","db","module","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/","sources":["dbConn.js"],"sourcesContent":["'use strict';\n\nimport mongoose from 'mongoose';\nimport config from '../config/config';\n\nmongoose.Promise = global.Promise;\n\n// in dev environment\nmongoose.set('debug', true);\nmongoose.set('strictQuery', true);\n\nfunction onError(err) {\n  console.error(`MongoDB connection error: ${err}`);\n  mongoose.connection.on(\n    'error',\n    console.error.bind(console, 'connection error')\n  );\n}\n\nfunction onConnected() {\n  mongoose.connection.once('open', function callback() {\n    // mongoose.set('debug', true);\n    // print mongoose logs in dev env\n    if (config.dev) {\n      mongoose.set('debug', true);\n    }\n    console.log('Connected to MongoDB!');\n  });\n}\n\nmongoose.connection.on('disconnected', () => {\n  console.warn('Mongoose connection is disconnected');\n});\n\nfunction onReconnected() {\n  console.warn('MongoDB reconnected!');\n}\n\nconst onSIGINT = async () => {\n  console.warn(\n    'MongoDB default connection disconnected through app termination!'\n  );\n  await mongoose.connection.close();\n  process.exit(0);\n};\n\n(async () => {\n  await mongoose.connect(config.mongoose.url, config.mongoose.options);\n})();\n\nconst db = mongoose.connection;\n\ndb.on('error', onError);\ndb.on('connected', onConnected);\ndb.on('reconnected', onReconnected);\n\nprocess.on('SIGINT', onSIGINT);\n\nmodule.exports = db;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtCG,iBAAQ,CAACC,OAAO,GAAGC,MAAM,CAACD,OAAO;;AAEjC;AACAD,iBAAQ,CAACG,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC;AAC3BH,iBAAQ,CAACG,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC;AAEjC,SAASC,OAAOA,CAACC,GAAG,EAAE;EACpBC,OAAO,CAACC,KAAK,CAAE,6BAA4BF,GAAI,EAAC,CAAC;EACjDL,iBAAQ,CAACQ,UAAU,CAACC,EAAE,CACpB,OAAO,EACPH,OAAO,CAACC,KAAK,CAACG,IAAI,CAACJ,OAAO,EAAE,kBAAkB,CAChD,CAAC;AACH;AAEA,SAASK,WAAWA,CAAA,EAAG;EACrBX,iBAAQ,CAACQ,UAAU,CAACI,IAAI,CAAC,MAAM,EAAE,SAASC,QAAQA,CAAA,EAAG;IACnD;IACA;IACA,IAAIC,eAAM,CAACC,GAAG,EAAE;MACdf,iBAAQ,CAACG,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC;IAC7B;IACAG,OAAO,CAACU,GAAG,CAAC,uBAAuB,CAAC;EACtC,CAAC,CAAC;AACJ;AAEAhB,iBAAQ,CAACQ,UAAU,CAACC,EAAE,CAAC,cAAc,EAAE,MAAM;EAC3CH,OAAO,CAACW,IAAI,CAAC,qCAAqC,CAAC;AACrD,CAAC,CAAC;AAEF,SAASC,aAAaA,CAAA,EAAG;EACvBZ,OAAO,CAACW,IAAI,CAAC,sBAAsB,CAAC;AACtC;AAEA,MAAME,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAC3Bb,OAAO,CAACW,IAAI,CACV,kEACF,CAAC;EACD,MAAMjB,iBAAQ,CAACQ,UAAU,CAACY,KAAK,CAAC,CAAC;EACjCC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;AACjB,CAAC;AAED,CAAC,YAAY;EACX,MAAMtB,iBAAQ,CAACuB,OAAO,CAACT,eAAM,CAACd,QAAQ,CAACwB,GAAG,EAAEV,eAAM,CAACd,QAAQ,CAACyB,OAAO,CAAC;AACtE,CAAC,EAAE,CAAC;AAEJ,MAAMC,EAAE,GAAG1B,iBAAQ,CAACQ,UAAU;AAE9BkB,EAAE,CAACjB,EAAE,CAAC,OAAO,EAAEL,OAAO,CAAC;AACvBsB,EAAE,CAACjB,EAAE,CAAC,WAAW,EAAEE,WAAW,CAAC;AAC/Be,EAAE,CAACjB,EAAE,CAAC,aAAa,EAAES,aAAa,CAAC;AAEnCG,OAAO,CAACZ,EAAE,CAAC,QAAQ,EAAEU,QAAQ,CAAC;AAE9BQ,MAAM,CAACC,OAAO,GAAGF,EAAE"}},"mtime":1689257411372},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/dbConn.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"'use strict';\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _config = _interopRequireDefault(require(\"../config/config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_mongoose.default.Promise = global.Promise;\n\n// in dev environment\n_mongoose.default.set('debug', true);\n_mongoose.default.set('strictQuery', true);\nfunction onError(err) {\n  console.error(`MongoDB connection error: ${err}`);\n  _mongoose.default.connection.on('error', console.error.bind(console, 'connection error'));\n}\nfunction onConnected() {\n  _mongoose.default.connection.once('open', function callback() {\n    // mongoose.set('debug', true);\n    // print mongoose logs in dev env\n    if (_config.default.dev) {\n      _mongoose.default.set('debug', true);\n    }\n    console.log('Connected to MongoDB!');\n  });\n}\n_mongoose.default.connection.on('disconnected', () => {\n  console.warn('Mongoose connection is disconnected');\n});\nfunction onReconnected() {\n  console.warn('MongoDB reconnected!');\n}\nconst onSIGINT = async () => {\n  console.warn('MongoDB default connection disconnected through app termination!');\n  await _mongoose.default.connection.close();\n  process.exit(0);\n};\n(async () => {\n  await _mongoose.default.connect(_config.default.mongoose.url, _config.default.mongoose.options);\n})();\nconst db = _mongoose.default.connection;\ndb.on('error', onError);\ndb.on('connected', onConnected);\ndb.on('reconnected', onReconnected);\nprocess.on('SIGINT', onSIGINT);\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jb25maWciLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm1vbmdvb3NlIiwiUHJvbWlzZSIsImdsb2JhbCIsInNldCIsIm9uRXJyb3IiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25uZWN0aW9uIiwib24iLCJiaW5kIiwib25Db25uZWN0ZWQiLCJvbmNlIiwiY2FsbGJhY2siLCJjb25maWciLCJkZXYiLCJsb2ciLCJ3YXJuIiwib25SZWNvbm5lY3RlZCIsIm9uU0lHSU5UIiwiY2xvc2UiLCJwcm9jZXNzIiwiZXhpdCIsImNvbm5lY3QiLCJ1cmwiLCJvcHRpb25zIiwiZGIiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJkYkNvbm4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcvY29uZmlnJztcblxubW9uZ29vc2UuUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuXG4vLyBpbiBkZXYgZW52aXJvbm1lbnRcbm1vbmdvb3NlLnNldCgnZGVidWcnLCB0cnVlKTtcbm1vbmdvb3NlLnNldCgnc3RyaWN0UXVlcnknLCB0cnVlKTtcblxuZnVuY3Rpb24gb25FcnJvcihlcnIpIHtcbiAgY29uc29sZS5lcnJvcihgTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOiAke2Vycn1gKTtcbiAgbW9uZ29vc2UuY29ubmVjdGlvbi5vbihcbiAgICAnZXJyb3InLFxuICAgIGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlLCAnY29ubmVjdGlvbiBlcnJvcicpXG4gICk7XG59XG5cbmZ1bmN0aW9uIG9uQ29ubmVjdGVkKCkge1xuICBtb25nb29zZS5jb25uZWN0aW9uLm9uY2UoJ29wZW4nLCBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAvLyBtb25nb29zZS5zZXQoJ2RlYnVnJywgdHJ1ZSk7XG4gICAgLy8gcHJpbnQgbW9uZ29vc2UgbG9ncyBpbiBkZXYgZW52XG4gICAgaWYgKGNvbmZpZy5kZXYpIHtcbiAgICAgIG1vbmdvb3NlLnNldCgnZGVidWcnLCB0cnVlKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nb0RCIScpO1xuICB9KTtcbn1cblxubW9uZ29vc2UuY29ubmVjdGlvbi5vbignZGlzY29ubmVjdGVkJywgKCkgPT4ge1xuICBjb25zb2xlLndhcm4oJ01vbmdvb3NlIGNvbm5lY3Rpb24gaXMgZGlzY29ubmVjdGVkJyk7XG59KTtcblxuZnVuY3Rpb24gb25SZWNvbm5lY3RlZCgpIHtcbiAgY29uc29sZS53YXJuKCdNb25nb0RCIHJlY29ubmVjdGVkIScpO1xufVxuXG5jb25zdCBvblNJR0lOVCA9IGFzeW5jICgpID0+IHtcbiAgY29uc29sZS53YXJuKFxuICAgICdNb25nb0RCIGRlZmF1bHQgY29ubmVjdGlvbiBkaXNjb25uZWN0ZWQgdGhyb3VnaCBhcHAgdGVybWluYXRpb24hJ1xuICApO1xuICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7XG4gIHByb2Nlc3MuZXhpdCgwKTtcbn07XG5cbihhc3luYyAoKSA9PiB7XG4gIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoY29uZmlnLm1vbmdvb3NlLnVybCwgY29uZmlnLm1vbmdvb3NlLm9wdGlvbnMpO1xufSkoKTtcblxuY29uc3QgZGIgPSBtb25nb29zZS5jb25uZWN0aW9uO1xuXG5kYi5vbignZXJyb3InLCBvbkVycm9yKTtcbmRiLm9uKCdjb25uZWN0ZWQnLCBvbkNvbm5lY3RlZCk7XG5kYi5vbigncmVjb25uZWN0ZWQnLCBvblJlY29ubmVjdGVkKTtcblxucHJvY2Vzcy5vbignU0lHSU5UJywgb25TSUdJTlQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRiO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFzQyxTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUV0Q0csaUJBQVEsQ0FBQ0MsT0FBTyxHQUFHQyxNQUFNLENBQUNELE9BQU87O0FBRWpDO0FBQ0FELGlCQUFRLENBQUNHLEdBQUcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDO0FBQzNCSCxpQkFBUSxDQUFDRyxHQUFHLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQztBQUVqQyxTQUFTQyxPQUFPQSxDQUFDQyxHQUFHLEVBQUU7RUFDcEJDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFFLDZCQUE0QkYsR0FBSSxFQUFDLENBQUM7RUFDakRMLGlCQUFRLENBQUNRLFVBQVUsQ0FBQ0MsRUFBRSxDQUNwQixPQUFPLEVBQ1BILE9BQU8sQ0FBQ0MsS0FBSyxDQUFDRyxJQUFJLENBQUNKLE9BQU8sRUFBRSxrQkFBa0IsQ0FDaEQsQ0FBQztBQUNIO0FBRUEsU0FBU0ssV0FBV0EsQ0FBQSxFQUFHO0VBQ3JCWCxpQkFBUSxDQUFDUSxVQUFVLENBQUNJLElBQUksQ0FBQyxNQUFNLEVBQUUsU0FBU0MsUUFBUUEsQ0FBQSxFQUFHO0lBQ25EO0lBQ0E7SUFDQSxJQUFJQyxlQUFNLENBQUNDLEdBQUcsRUFBRTtNQUNkZixpQkFBUSxDQUFDRyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztJQUM3QjtJQUNBRyxPQUFPLENBQUNVLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQztFQUN0QyxDQUFDLENBQUM7QUFDSjtBQUVBaEIsaUJBQVEsQ0FBQ1EsVUFBVSxDQUFDQyxFQUFFLENBQUMsY0FBYyxFQUFFLE1BQU07RUFDM0NILE9BQU8sQ0FBQ1csSUFBSSxDQUFDLHFDQUFxQyxDQUFDO0FBQ3JELENBQUMsQ0FBQztBQUVGLFNBQVNDLGFBQWFBLENBQUEsRUFBRztFQUN2QlosT0FBTyxDQUFDVyxJQUFJLENBQUMsc0JBQXNCLENBQUM7QUFDdEM7QUFFQSxNQUFNRSxRQUFRLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQzNCYixPQUFPLENBQUNXLElBQUksQ0FDVixrRUFDRixDQUFDO0VBQ0QsTUFBTWpCLGlCQUFRLENBQUNRLFVBQVUsQ0FBQ1ksS0FBSyxDQUFDLENBQUM7RUFDakNDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNqQixDQUFDO0FBRUQsQ0FBQyxZQUFZO0VBQ1gsTUFBTXRCLGlCQUFRLENBQUN1QixPQUFPLENBQUNULGVBQU0sQ0FBQ2QsUUFBUSxDQUFDd0IsR0FBRyxFQUFFVixlQUFNLENBQUNkLFFBQVEsQ0FBQ3lCLE9BQU8sQ0FBQztBQUN0RSxDQUFDLEVBQUUsQ0FBQztBQUVKLE1BQU1DLEVBQUUsR0FBRzFCLGlCQUFRLENBQUNRLFVBQVU7QUFFOUJrQixFQUFFLENBQUNqQixFQUFFLENBQUMsT0FBTyxFQUFFTCxPQUFPLENBQUM7QUFDdkJzQixFQUFFLENBQUNqQixFQUFFLENBQUMsV0FBVyxFQUFFRSxXQUFXLENBQUM7QUFDL0JlLEVBQUUsQ0FBQ2pCLEVBQUUsQ0FBQyxhQUFhLEVBQUVTLGFBQWEsQ0FBQztBQUVuQ0csT0FBTyxDQUFDWixFQUFFLENBQUMsUUFBUSxFQUFFVSxRQUFRLENBQUM7QUFFOUJRLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHRixFQUFFIn0=","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_config","obj","__esModule","default","mongoose","Promise","global","set","onError","err","console","error","connection","on","bind","onConnected","once","callback","config","dev","log","warn","onReconnected","onSIGINT","close","process","exit","connect","url","options","db","module","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/","sources":["dbConn.js"],"sourcesContent":["'use strict';\n\nimport mongoose from 'mongoose';\nimport config from '../config/config';\n\nmongoose.Promise = global.Promise;\n\n// in dev environment\nmongoose.set('debug', true);\nmongoose.set('strictQuery', true);\n\nfunction onError(err) {\n  console.error(`MongoDB connection error: ${err}`);\n  mongoose.connection.on(\n    'error',\n    console.error.bind(console, 'connection error')\n  );\n}\n\nfunction onConnected() {\n  mongoose.connection.once('open', function callback() {\n    // mongoose.set('debug', true);\n    // print mongoose logs in dev env\n    if (config.dev) {\n      mongoose.set('debug', true);\n    }\n    console.log('Connected to MongoDB!');\n  });\n}\n\nmongoose.connection.on('disconnected', () => {\n  console.warn('Mongoose connection is disconnected');\n});\n\nfunction onReconnected() {\n  console.warn('MongoDB reconnected!');\n}\n\nconst onSIGINT = async () => {\n  console.warn(\n    'MongoDB default connection disconnected through app termination!'\n  );\n  await mongoose.connection.close();\n  process.exit(0);\n};\n\n(async () => {\n  await mongoose.connect(config.mongoose.url, config.mongoose.options);\n})();\n\nconst db = mongoose.connection;\n\ndb.on('error', onError);\ndb.on('connected', onConnected);\ndb.on('reconnected', onReconnected);\n\nprocess.on('SIGINT', onSIGINT);\n\nmodule.exports = db;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtCG,iBAAQ,CAACC,OAAO,GAAGC,MAAM,CAACD,OAAO;;AAEjC;AACAD,iBAAQ,CAACG,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC;AAC3BH,iBAAQ,CAACG,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC;AAEjC,SAASC,OAAOA,CAACC,GAAG,EAAE;EACpBC,OAAO,CAACC,KAAK,CAAE,6BAA4BF,GAAI,EAAC,CAAC;EACjDL,iBAAQ,CAACQ,UAAU,CAACC,EAAE,CACpB,OAAO,EACPH,OAAO,CAACC,KAAK,CAACG,IAAI,CAACJ,OAAO,EAAE,kBAAkB,CAChD,CAAC;AACH;AAEA,SAASK,WAAWA,CAAA,EAAG;EACrBX,iBAAQ,CAACQ,UAAU,CAACI,IAAI,CAAC,MAAM,EAAE,SAASC,QAAQA,CAAA,EAAG;IACnD;IACA;IACA,IAAIC,eAAM,CAACC,GAAG,EAAE;MACdf,iBAAQ,CAACG,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC;IAC7B;IACAG,OAAO,CAACU,GAAG,CAAC,uBAAuB,CAAC;EACtC,CAAC,CAAC;AACJ;AAEAhB,iBAAQ,CAACQ,UAAU,CAACC,EAAE,CAAC,cAAc,EAAE,MAAM;EAC3CH,OAAO,CAACW,IAAI,CAAC,qCAAqC,CAAC;AACrD,CAAC,CAAC;AAEF,SAASC,aAAaA,CAAA,EAAG;EACvBZ,OAAO,CAACW,IAAI,CAAC,sBAAsB,CAAC;AACtC;AAEA,MAAME,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAC3Bb,OAAO,CAACW,IAAI,CACV,kEACF,CAAC;EACD,MAAMjB,iBAAQ,CAACQ,UAAU,CAACY,KAAK,CAAC,CAAC;EACjCC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;AACjB,CAAC;AAED,CAAC,YAAY;EACX,MAAMtB,iBAAQ,CAACuB,OAAO,CAACT,eAAM,CAACd,QAAQ,CAACwB,GAAG,EAAEV,eAAM,CAACd,QAAQ,CAACyB,OAAO,CAAC;AACtE,CAAC,EAAE,CAAC;AAEJ,MAAMC,EAAE,GAAG1B,iBAAQ,CAACQ,UAAU;AAE9BkB,EAAE,CAACjB,EAAE,CAAC,OAAO,EAAEL,OAAO,CAAC;AACvBsB,EAAE,CAACjB,EAAE,CAAC,WAAW,EAAEE,WAAW,CAAC;AAC/Be,EAAE,CAACjB,EAAE,CAAC,aAAa,EAAES,aAAa,CAAC;AAEnCG,OAAO,CAACZ,EAAE,CAAC,QAAQ,EAAEU,QAAQ,CAAC;AAE9BQ,MAAM,CAACC,OAAO,GAAGF,EAAE"}},"mtime":1689257411372},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authRoutes = _interopRequireDefault(require(\"./auth-routes\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = app => {\n  (0, _authRoutes.default)(app);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXV0aFJvdXRlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfZGVmYXVsdCIsImFwcCIsImF1dGhSb3V0ZXMiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF1dGhSb3V0ZXMgZnJvbSAnLi9hdXRoLXJvdXRlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IChhcHApID0+IHtcbiAgYXV0aFJvdXRlcyhhcHApO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsV0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQXVDLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBQUEsSUFBQUcsUUFBQSxHQUV2QkMsR0FBRyxJQUFLO0VBQ3RCLElBQUFDLG1CQUFVLEVBQUNELEdBQUcsQ0FBQztBQUNqQixDQUFDO0FBQUFFLE9BQUEsQ0FBQUosT0FBQSxHQUFBQyxRQUFBIn0=","map":{"version":3,"names":["_authRoutes","_interopRequireDefault","require","obj","__esModule","default","_default","app","authRoutes","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/","sources":["index.js"],"sourcesContent":["import authRoutes from './auth-routes';\n\nexport default (app) => {\n  authRoutes(app);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAuC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,IAAAG,QAAA,GAEvBC,GAAG,IAAK;EACtB,IAAAC,mBAAU,EAACD,GAAG,CAAC;AACjB,CAAC;AAAAE,OAAA,CAAAJ,OAAA,GAAAC,QAAA"}},"mtime":1689261410489},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/auth-routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authController = _interopRequireDefault(require(\"../controllers/auth-controller\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = app => {\n  app.post('/signup', _authController.default.postRegisterUser);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXV0aENvbnRyb2xsZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2RlZmF1bHQiLCJhcHAiLCJwb3N0IiwiYXV0aENvbnRyb2xsZXIiLCJwb3N0UmVnaXN0ZXJVc2VyIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGgtcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhdXRoQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9hdXRoLWNvbnRyb2xsZXInO1xuXG5leHBvcnQgZGVmYXVsdCAoYXBwKSA9PiB7XG4gIGFwcC5wb3N0KCcvc2lnbnVwJywgYXV0aENvbnRyb2xsZXIucG9zdFJlZ2lzdGVyVXNlcik7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxlQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBNEQsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFBQSxJQUFBRyxRQUFBLEdBRTVDQyxHQUFHLElBQUs7RUFDdEJBLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDLFNBQVMsRUFBRUMsdUJBQWMsQ0FBQ0MsZ0JBQWdCLENBQUM7QUFDdEQsQ0FBQztBQUFBQyxPQUFBLENBQUFOLE9BQUEsR0FBQUMsUUFBQSJ9","map":{"version":3,"names":["_authController","_interopRequireDefault","require","obj","__esModule","default","_default","app","post","authController","postRegisterUser","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/","sources":["auth-routes.js"],"sourcesContent":["import authController from '../controllers/auth-controller';\n\nexport default (app) => {\n  app.post('/signup', authController.postRegisterUser);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA4D,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,IAAAG,QAAA,GAE5CC,GAAG,IAAK;EACtBA,GAAG,CAACC,IAAI,CAAC,SAAS,EAAEC,uBAAc,CAACC,gBAAgB,CAAC;AACtD,CAAC;AAAAC,OAAA,CAAAN,OAAA,GAAAC,QAAA"}},"mtime":1689261370577},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/controllers/auth-controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _mongoHelpers = require(\"../database/mongoHelpers\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n// mongodb://AdminUser:qwerty@localhost:27017/?authMechanism=DEFAULT\nvar _default = {\n  postRegisterUser: async (req, res, next) => {\n    try {\n      const {\n        name,\n        email,\n        phone,\n        username,\n        password,\n        confirmPassword,\n        acceptTerms\n      } = req.body;\n      if (await _userModel.default.isEmailTaken(email)) return next(new _ApiErrors.default(400, `Email ${email} already registered`));\n      const user = new _userModel.default();\n\n      // first registered account is an admin\n      const isFirstAccount = (await (0, _mongoHelpers.countDocuments)(_userModel.default)) === 0;\n      user.role = isFirstAccount ? _roles.default.Admin : _roles.default.User;\n      user.name = name;\n      user.email = email;\n      user.username = username;\n      user.phone = phone;\n      user.password = password;\n      user.confirmPassword = confirmPassword;\n      user.acceptTerms = acceptTerms;\n      await user.save();\n      res.status(201).json({\n        message: 'User successfully registered!'\n      });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithEmail: async (req, res, next) => {\n    const {\n      email,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        email: email\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send(tokens.access);\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithUsername: async (req, res, next) => {\n    const {\n      username,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        username: username\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send(tokens.access);\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithPhone: async (req, res, next) => {\n    const {\n      phone,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        phone: phone\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send(tokens.access);\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUser: async (req, res, next) => {\n    // accept token from cookie\n    const {\n      refreshToken\n    } = req.cookies;\n    try {\n      if (!refreshToken) return next(new _ApiErrors.default(400, 'Token is required'));\n      const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n      if (!verifiedRefToken) return next(new _ApiErrors.default(404, 'Token not found'));\n      if (!(0, _mongoHelpers.isValidId)(req.user.id)) return next(new _ApiErrors.default(400, 'User not found'));\n      const user = await _userModel.default.findById(req.user.id);\n      if (!user) return next(new _ApiErrors.default(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(refreshToken) && req.user.role !== _roles.default.Admin) return next(new _ApiErrors.default(401, 'Unauthorized'));\n      const refreshTokenInDb = await _tokenModel.default.findOne({\n        refreshToken,\n        type: _tokenTypes.default.REFRESH,\n        blacklisted: false\n      });\n      if (!refreshTokenInDb) return next(new _ApiErrors.default(404, 'Not found'));\n      await refreshTokenInDb.deleteOne();\n      return res.status(200).clearCookie('refreshToken', {\n        httpOnly: true\n      }).end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUserFromAllScreens: async (req, res, next) => {\n    const token = req.body.token || req.cookies.refreshToken;\n    try {\n      if (!token) return next(new _ApiErrors.default(400, 'Token is required'));\n      if (!(0, _mongoHelpers.isValidId)(req.user.id)) return next(new _ApiErrors.default(400, 'User not found'));\n      const user = await _userModel.default.findById(req.user.id);\n      if (!user) return next(new _ApiErrors.default(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(token) && req.user.role !== _roles.default.Admin) return next(new _ApiErrors.default(401, 'Unauthorized'));\n\n      // return refresh tokens for user\n      const refreshToken = await _tokenModel.default.find({\n        user: req.user.id,\n        type: _tokenTypes.default.REFRESH,\n        blacklisted: false\n      });\n      if (!refreshToken) return next(new _ApiErrors.default(404, 'Not found'));\n      await _tokenModel.default.deleteMany({\n        refreshToken\n      });\n      return res.status(200).clearCookie('refreshToken', {\n        httpOnly: true\n      }).end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getNewTokens: async (req, res, next) => {\n    const {\n      refreshToken\n    } = req.cookies;\n    try {\n      if (!refreshToken) return next(new _ApiErrors.default(401, 'No refresh token provided'));\n      const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n      const user = await _userModel.default.findById(verifiedRefToken.user).exec();\n      if (!user) return next(new _ApiErrors.default(404, 'User not found'));\n      const refTokenInDb = await _tokenModel.default.findOne({\n        user: user.id,\n        token: refreshToken\n      });\n      if (!refTokenInDb) return next(new _ApiErrors.default(401, 'Invalid refresh token'));\n      await verifiedRefToken.deleteOne();\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: false\n      }).header('Authorization', 'Bearer ' + tokens.access).send(tokens.access);\n      // .json({ user, tokens });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getUserCredentials: async (req, res, next) => {\n    try {\n      const user = req.user;\n      if (!user) return next(new _ApiErrors.default(404, 'User not found'));\n      const foundUser = await _userModel.default.findById(user.id).select('-password -acceptTerms -createdAt -updatedAt -__v');\n      if (!foundUser) return next(new _ApiErrors.default(404, 'User not found'));\n      res.status(200).send(foundUser);\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  }\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcm9sZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl90b2tlblR5cGVzIiwiX21vbmdvSGVscGVycyIsIl9BcGlFcnJvcnMiLCJfdG9rZW5IZWxwZXIiLCJfdG9rZW5Nb2RlbCIsIl91c2VyTW9kZWwiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9kZWZhdWx0IiwicG9zdFJlZ2lzdGVyVXNlciIsInJlcSIsInJlcyIsIm5leHQiLCJuYW1lIiwiZW1haWwiLCJwaG9uZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJhY2NlcHRUZXJtcyIsImJvZHkiLCJVc2VyIiwiaXNFbWFpbFRha2VuIiwiQXBpRXJyb3IiLCJ1c2VyIiwiaXNGaXJzdEFjY291bnQiLCJjb3VudERvY3VtZW50cyIsInJvbGUiLCJSb2xlIiwiQWRtaW4iLCJzYXZlIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJwb3N0TG9naW5Vc2VyV2l0aEVtYWlsIiwiZmluZE9uZSIsImlzUGFzc3dvcmRNYXRjaCIsInRva2VucyIsImdlbmVyYXRlQXV0aFRva2VucyIsImNvb2tpZSIsInJlZnJlc2giLCJodHRwT25seSIsInNhbWVTaXRlIiwibWF4QWdlIiwicmVmcmVzaEV4cGlyZXMiLCJleHBpcmVzIiwiRGF0ZSIsIm5vdyIsInNlY3VyZSIsImhlYWRlciIsImFjY2VzcyIsInNlbmQiLCJwb3N0TG9naW5Vc2VyV2l0aFVzZXJuYW1lIiwicG9zdExvZ2luVXNlcldpdGhQaG9uZSIsInBvc3RMb2dvdXRVc2VyIiwicmVmcmVzaFRva2VuIiwiY29va2llcyIsInZlcmlmaWVkUmVmVG9rZW4iLCJ2ZXJpZnlEQlRva2VuIiwidG9rZW5UeXBlcyIsIlJFRlJFU0giLCJpc1ZhbGlkSWQiLCJpZCIsImZpbmRCeUlkIiwib3duc1Rva2VuIiwicmVmcmVzaFRva2VuSW5EYiIsIlRva2VuIiwidHlwZSIsImJsYWNrbGlzdGVkIiwiZGVsZXRlT25lIiwiY2xlYXJDb29raWUiLCJlbmQiLCJwb3N0TG9nb3V0VXNlckZyb21BbGxTY3JlZW5zIiwidG9rZW4iLCJmaW5kIiwiZGVsZXRlTWFueSIsImdldE5ld1Rva2VucyIsImV4ZWMiLCJyZWZUb2tlbkluRGIiLCJnZXRVc2VyQ3JlZGVudGlhbHMiLCJmb3VuZFVzZXIiLCJzZWxlY3QiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJhdXRoLWNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvbGUgZnJvbSAnLi4vY29uZmlnL3JvbGVzJztcbmltcG9ydCB0b2tlblR5cGVzIGZyb20gJy4uL2NvbmZpZy90b2tlblR5cGVzJztcbmltcG9ydCB7IGNvdW50RG9jdW1lbnRzLCBpc1ZhbGlkSWQgfSBmcm9tICcuLi9kYXRhYmFzZS9tb25nb0hlbHBlcnMnO1xuaW1wb3J0IEFwaUVycm9yIGZyb20gJy4uL2Vycm9ycy9BcGlFcnJvcnMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVBdXRoVG9rZW5zLCB2ZXJpZnlEQlRva2VuIH0gZnJvbSAnLi4vaGVscGVycy90b2tlbi1oZWxwZXInO1xuaW1wb3J0IFRva2VuIGZyb20gJy4uL21vZGVscy90b2tlbi1tb2RlbCc7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlci1tb2RlbCc7XG5cbi8vIG1vbmdvZGI6Ly9BZG1pblVzZXI6cXdlcnR5QGxvY2FsaG9zdDoyNzAxNy8/YXV0aE1lY2hhbmlzbT1ERUZBVUxUXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcG9zdFJlZ2lzdGVyVXNlcjogYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHBob25lLFxuICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgIGNvbmZpcm1QYXNzd29yZCxcbiAgICAgICAgYWNjZXB0VGVybXMsXG4gICAgICB9ID0gcmVxLmJvZHk7XG5cbiAgICAgIGlmIChhd2FpdCBVc2VyLmlzRW1haWxUYWtlbihlbWFpbCkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsIGBFbWFpbCAke2VtYWlsfSBhbHJlYWR5IHJlZ2lzdGVyZWRgKSk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcigpO1xuXG4gICAgICAvLyBmaXJzdCByZWdpc3RlcmVkIGFjY291bnQgaXMgYW4gYWRtaW5cbiAgICAgIGNvbnN0IGlzRmlyc3RBY2NvdW50ID0gKGF3YWl0IGNvdW50RG9jdW1lbnRzKFVzZXIpKSA9PT0gMDtcbiAgICAgIHVzZXIucm9sZSA9IGlzRmlyc3RBY2NvdW50ID8gUm9sZS5BZG1pbiA6IFJvbGUuVXNlcjtcblxuICAgICAgdXNlci5uYW1lID0gbmFtZTtcbiAgICAgIHVzZXIuZW1haWwgPSBlbWFpbDtcbiAgICAgIHVzZXIudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgIHVzZXIucGhvbmUgPSBwaG9uZTtcbiAgICAgIHVzZXIucGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICAgIHVzZXIuY29uZmlybVBhc3N3b3JkID0gY29uZmlybVBhc3N3b3JkO1xuICAgICAgdXNlci5hY2NlcHRUZXJtcyA9IGFjY2VwdFRlcm1zO1xuXG4gICAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBzdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZCEnIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgcG9zdExvZ2luVXNlcldpdGhFbWFpbDogYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VyIHx8ICEoYXdhaXQgdXNlci5pc1Bhc3N3b3JkTWF0Y2gocGFzc3dvcmQpKSlcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ0ludmFsaWQgY3JlZGVudGlhbHMnKSk7XG5cbiAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IGdlbmVyYXRlQXV0aFRva2Vucyh1c2VyKTtcblxuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuY29va2llKCdyZWZyZXNoVG9rZW4nLCB0b2tlbnMucmVmcmVzaCwge1xuICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgICBtYXhBZ2U6IHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDAsIC8vIGFsd2F5cyBjYWxjdWxhdGUgdGltZSBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgdG9rZW5zLnJlZnJlc2hFeHBpcmVzICogMTAwMCksIC8vIGFsd2F5cyBjYWxjdWxhdGUgdGltZSBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICBzZWN1cmU6IHRydWUsXG4gICAgICAgIH0pXG4gICAgICAgIC5oZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0b2tlbnMuYWNjZXNzKVxuICAgICAgICAuc2VuZCh0b2tlbnMuYWNjZXNzKTtcbiAgICAgIC8vIC5qc29uKHsgLyp1c2VyLCovIGFjY2VzczogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dpblVzZXJXaXRoVXNlcm5hbWU6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlciB8fCAhKGF3YWl0IHVzZXIuaXNQYXNzd29yZE1hdGNoKHBhc3N3b3JkKSkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIGNyZWRlbnRpYWxzJykpO1xuXG4gICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLmNvb2tpZSgncmVmcmVzaFRva2VuJywgdG9rZW5zLnJlZnJlc2gsIHtcbiAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDApLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQodG9rZW5zLmFjY2Vzcyk7XG4gICAgICAvLyAuanNvbih7IC8qdXNlciwqLyBhY2Nlc3M6IHRva2Vucy5hY2Nlc3MgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA6Pj4gJywgZXJyb3IpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9LFxuICBwb3N0TG9naW5Vc2VyV2l0aFBob25lOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCB7IHBob25lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAgIHBob25lOiBwaG9uZSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIgfHwgIShhd2FpdCB1c2VyLmlzUGFzc3dvcmRNYXRjaChwYXNzd29yZCkpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnSW52YWxpZCBjcmVkZW50aWFscycpKTtcblxuICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5zKHVzZXIpO1xuXG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5jb29raWUoJ3JlZnJlc2hUb2tlbicsIHRva2Vucy5yZWZyZXNoLCB7XG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgIG1heEFnZTogdG9rZW5zLnJlZnJlc2hFeHBpcmVzICogMTAwMCwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIGV4cGlyZXM6IG5ldyBEYXRlKERhdGUubm93KCkgKyB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwKSwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgLmhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2Vucy5hY2Nlc3MpXG4gICAgICAgIC5zZW5kKHRva2Vucy5hY2Nlc3MpO1xuICAgICAgLy8gLmpzb24oeyAvKnVzZXIsKi8gYWNjZXNzOiB0b2tlbnMuYWNjZXNzIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgcG9zdExvZ291dFVzZXI6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIC8vIGFjY2VwdCB0b2tlbiBmcm9tIGNvb2tpZVxuICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuIH0gPSByZXEuY29va2llcztcbiAgICB0cnkge1xuICAgICAgaWYgKCFyZWZyZXNoVG9rZW4pIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdUb2tlbiBpcyByZXF1aXJlZCcpKTtcblxuICAgICAgY29uc3QgdmVyaWZpZWRSZWZUb2tlbiA9IGF3YWl0IHZlcmlmeURCVG9rZW4oXG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgdG9rZW5UeXBlcy5SRUZSRVNIXG4gICAgICApO1xuXG4gICAgICBpZiAoIXZlcmlmaWVkUmVmVG9rZW4pIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdUb2tlbiBub3QgZm91bmQnKSk7XG5cbiAgICAgIGlmICghaXNWYWxpZElkKHJlcS51c2VyLmlkKSlcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEudXNlci5pZCk7XG4gICAgICBpZiAoIXVzZXIpIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdVc2VyIG5vdCBmb3VuZCcpKTtcblxuICAgICAgLy8gdXNlcnMgY2FuIHJldm9rZSB0aGVpciBvd24gdG9rZW5zIGFuZCBhZG1pbnMgY2FuIHJldm9rZSBhbnkgdG9rZW5zXG4gICAgICBpZiAoIXJlcS51c2VyLm93bnNUb2tlbihyZWZyZXNoVG9rZW4pICYmIHJlcS51c2VyLnJvbGUgIT09IFJvbGUuQWRtaW4pXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdVbmF1dGhvcml6ZWQnKSk7XG5cbiAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbkluRGIgPSBhd2FpdCBUb2tlbi5maW5kT25lKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLlJFRlJFU0gsXG4gICAgICAgIGJsYWNrbGlzdGVkOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZWZyZXNoVG9rZW5JbkRiKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnTm90IGZvdW5kJykpO1xuXG4gICAgICBhd2FpdCByZWZyZXNoVG9rZW5JbkRiLmRlbGV0ZU9uZSgpO1xuXG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAuY2xlYXJDb29raWUoJ3JlZnJlc2hUb2tlbicsIHsgaHR0cE9ubHk6IHRydWUgfSlcbiAgICAgICAgLmVuZCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgcG9zdExvZ291dFVzZXJGcm9tQWxsU2NyZWVuczogYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuYm9keS50b2tlbiB8fCByZXEuY29va2llcy5yZWZyZXNoVG9rZW47XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ1Rva2VuIGlzIHJlcXVpcmVkJykpO1xuXG4gICAgICBpZiAoIWlzVmFsaWRJZChyZXEudXNlci5pZCkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdVc2VyIG5vdCBmb3VuZCcpKTtcblxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuaWQpO1xuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIC8vIHVzZXJzIGNhbiByZXZva2UgdGhlaXIgb3duIHRva2VucyBhbmQgYWRtaW5zIGNhbiByZXZva2UgYW55IHRva2Vuc1xuICAgICAgaWYgKCFyZXEudXNlci5vd25zVG9rZW4odG9rZW4pICYmIHJlcS51c2VyLnJvbGUgIT09IFJvbGUuQWRtaW4pXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdVbmF1dGhvcml6ZWQnKSk7XG5cbiAgICAgIC8vIHJldHVybiByZWZyZXNoIHRva2VucyBmb3IgdXNlclxuICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gYXdhaXQgVG9rZW4uZmluZCh7XG4gICAgICAgIHVzZXI6IHJlcS51c2VyLmlkLFxuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLlJFRlJFU0gsXG4gICAgICAgIGJsYWNrbGlzdGVkOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlZnJlc2hUb2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ05vdCBmb3VuZCcpKTtcbiAgICAgIGF3YWl0IFRva2VuLmRlbGV0ZU1hbnkoeyByZWZyZXNoVG9rZW4gfSk7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cygyMDApXG4gICAgICAgIC5jbGVhckNvb2tpZSgncmVmcmVzaFRva2VuJywgeyBodHRwT25seTogdHJ1ZSB9KVxuICAgICAgICAuZW5kKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA6Pj4gJywgZXJyb3IpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9LFxuICBnZXROZXdUb2tlbnM6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuIH0gPSByZXEuY29va2llcztcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlZnJlc2hUb2tlbilcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ05vIHJlZnJlc2ggdG9rZW4gcHJvdmlkZWQnKSk7XG5cbiAgICAgIGNvbnN0IHZlcmlmaWVkUmVmVG9rZW4gPSBhd2FpdCB2ZXJpZnlEQlRva2VuKFxuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIHRva2VuVHlwZXMuUkVGUkVTSFxuICAgICAgKTtcblxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodmVyaWZpZWRSZWZUb2tlbi51c2VyKS5leGVjKCk7XG5cbiAgICAgIGlmICghdXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICBjb25zdCByZWZUb2tlbkluRGIgPSBhd2FpdCBUb2tlbi5maW5kT25lKHtcbiAgICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgICAgdG9rZW46IHJlZnJlc2hUb2tlbixcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlZlRva2VuSW5EYilcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ0ludmFsaWQgcmVmcmVzaCB0b2tlbicpKTtcblxuICAgICAgYXdhaXQgdmVyaWZpZWRSZWZUb2tlbi5kZWxldGVPbmUoKTtcblxuICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5zKHVzZXIpO1xuXG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5jb29raWUoJ3JlZnJlc2hUb2tlbicsIHRva2Vucy5yZWZyZXNoLCB7XG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgIG1heEFnZTogdG9rZW5zLnJlZnJlc2hFeHBpcmVzICogMTAwMCwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIGV4cGlyZXM6IG5ldyBEYXRlKERhdGUubm93KCkgKyB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwKSwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICAgIH0pXG4gICAgICAgIC5oZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0b2tlbnMuYWNjZXNzKVxuICAgICAgICAuc2VuZCh0b2tlbnMuYWNjZXNzKTtcbiAgICAgIC8vIC5qc29uKHsgdXNlciwgdG9rZW5zIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgZ2V0VXNlckNyZWRlbnRpYWxzOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIGNvbnN0IGZvdW5kVXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlci5pZCkuc2VsZWN0KFxuICAgICAgICAnLXBhc3N3b3JkIC1hY2NlcHRUZXJtcyAtY3JlYXRlZEF0IC11cGRhdGVkQXQgLV9fdidcbiAgICAgICk7XG4gICAgICBpZiAoIWZvdW5kVXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChmb3VuZFVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFdBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGFBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFVBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFlBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLFdBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLFVBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUF3QyxTQUFBRCx1QkFBQVEsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUV4QztBQUFBLElBQUFHLFFBQUEsR0FFZTtFQUNiQyxnQkFBZ0IsRUFBRSxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQzFDLElBQUk7TUFDRixNQUFNO1FBQ0pDLElBQUk7UUFDSkMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxlQUFlO1FBQ2ZDO01BQ0YsQ0FBQyxHQUFHVCxHQUFHLENBQUNVLElBQUk7TUFFWixJQUFJLE1BQU1DLGtCQUFJLENBQUNDLFlBQVksQ0FBQ1IsS0FBSyxDQUFDLEVBQ2hDLE9BQU9GLElBQUksQ0FBQyxJQUFJVyxrQkFBUSxDQUFDLEdBQUcsRUFBRyxTQUFRVCxLQUFNLHFCQUFvQixDQUFDLENBQUM7TUFFckUsTUFBTVUsSUFBSSxHQUFHLElBQUlILGtCQUFJLENBQUMsQ0FBQzs7TUFFdkI7TUFDQSxNQUFNSSxjQUFjLEdBQUcsQ0FBQyxNQUFNLElBQUFDLDRC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","map":{"version":3,"names":["_roles","_interopRequireDefault","require","_tokenTypes","_mongoHelpers","_ApiErrors","_tokenHelper","_tokenModel","_userModel","obj","__esModule","default","_default","postRegisterUser","req","res","next","name","email","phone","username","password","confirmPassword","acceptTerms","body","User","isEmailTaken","ApiError","user","isFirstAccount","countDocuments","role","Role","Admin","save","status","json","message","error","console","log","postLoginUserWithEmail","findOne","isPasswordMatch","tokens","generateAuthTokens","cookie","refresh","httpOnly","sameSite","maxAge","refreshExpires","expires","Date","now","secure","header","access","send","postLoginUserWithUsername","postLoginUserWithPhone","postLogoutUser","refreshToken","cookies","verifiedRefToken","verifyDBToken","tokenTypes","REFRESH","isValidId","id","findById","ownsToken","refreshTokenInDb","Token","type","blacklisted","deleteOne","clearCookie","end","postLogoutUserFromAllScreens","token","find","deleteMany","getNewTokens","exec","refTokenInDb","getUserCredentials","foundUser","select","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/controllers/","sources":["auth-controller.js"],"sourcesContent":["import Role from '../config/roles';\nimport tokenTypes from '../config/tokenTypes';\nimport { countDocuments, isValidId } from '../database/mongoHelpers';\nimport ApiError from '../errors/ApiErrors';\nimport { generateAuthTokens, verifyDBToken } from '../helpers/token-helper';\nimport Token from '../models/token-model';\nimport User from '../models/user-model';\n\n// mongodb://AdminUser:qwerty@localhost:27017/?authMechanism=DEFAULT\n\nexport default {\n  postRegisterUser: async (req, res, next) => {\n    try {\n      const {\n        name,\n        email,\n        phone,\n        username,\n        password,\n        confirmPassword,\n        acceptTerms,\n      } = req.body;\n\n      if (await User.isEmailTaken(email))\n        return next(new ApiError(400, `Email ${email} already registered`));\n\n      const user = new User();\n\n      // first registered account is an admin\n      const isFirstAccount = (await countDocuments(User)) === 0;\n      user.role = isFirstAccount ? Role.Admin : Role.User;\n\n      user.name = name;\n      user.email = email;\n      user.username = username;\n      user.phone = phone;\n      user.password = password;\n      user.confirmPassword = confirmPassword;\n      user.acceptTerms = acceptTerms;\n\n      await user.save();\n\n      res.status(201).json({ message: 'User successfully registered!' });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithEmail: async (req, res, next) => {\n    const { email, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        email: email,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send(tokens.access);\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithUsername: async (req, res, next) => {\n    const { username, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        username: username,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send(tokens.access);\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithPhone: async (req, res, next) => {\n    const { phone, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        phone: phone,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send(tokens.access);\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUser: async (req, res, next) => {\n    // accept token from cookie\n    const { refreshToken } = req.cookies;\n    try {\n      if (!refreshToken) return next(new ApiError(400, 'Token is required'));\n\n      const verifiedRefToken = await verifyDBToken(\n        refreshToken,\n        tokenTypes.REFRESH\n      );\n\n      if (!verifiedRefToken) return next(new ApiError(404, 'Token not found'));\n\n      if (!isValidId(req.user.id))\n        return next(new ApiError(400, 'User not found'));\n\n      const user = await User.findById(req.user.id);\n      if (!user) return next(new ApiError(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(refreshToken) && req.user.role !== Role.Admin)\n        return next(new ApiError(401, 'Unauthorized'));\n\n      const refreshTokenInDb = await Token.findOne({\n        refreshToken,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n      });\n      if (!refreshTokenInDb) return next(new ApiError(404, 'Not found'));\n\n      await refreshTokenInDb.deleteOne();\n\n      return res\n        .status(200)\n        .clearCookie('refreshToken', { httpOnly: true })\n        .end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUserFromAllScreens: async (req, res, next) => {\n    const token = req.body.token || req.cookies.refreshToken;\n\n    try {\n      if (!token) return next(new ApiError(400, 'Token is required'));\n\n      if (!isValidId(req.user.id))\n        return next(new ApiError(400, 'User not found'));\n\n      const user = await User.findById(req.user.id);\n      if (!user) return next(new ApiError(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(token) && req.user.role !== Role.Admin)\n        return next(new ApiError(401, 'Unauthorized'));\n\n      // return refresh tokens for user\n      const refreshToken = await Token.find({\n        user: req.user.id,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n      });\n\n      if (!refreshToken) return next(new ApiError(404, 'Not found'));\n      await Token.deleteMany({ refreshToken });\n\n      return res\n        .status(200)\n        .clearCookie('refreshToken', { httpOnly: true })\n        .end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getNewTokens: async (req, res, next) => {\n    const { refreshToken } = req.cookies;\n\n    try {\n      if (!refreshToken)\n        return next(new ApiError(401, 'No refresh token provided'));\n\n      const verifiedRefToken = await verifyDBToken(\n        refreshToken,\n        tokenTypes.REFRESH\n      );\n\n      const user = await User.findById(verifiedRefToken.user).exec();\n\n      if (!user) return next(new ApiError(404, 'User not found'));\n\n      const refTokenInDb = await Token.findOne({\n        user: user.id,\n        token: refreshToken,\n      });\n\n      if (!refTokenInDb)\n        return next(new ApiError(401, 'Invalid refresh token'));\n\n      await verifiedRefToken.deleteOne();\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: false,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send(tokens.access);\n      // .json({ user, tokens });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getUserCredentials: async (req, res, next) => {\n    try {\n      const user = req.user;\n      if (!user) return next(new ApiError(404, 'User not found'));\n\n      const foundUser = await User.findById(user.id).select(\n        '-password -acceptTerms -createdAt -updatedAt -__v'\n      );\n      if (!foundUser) return next(new ApiError(404, 'User not found'));\n\n      res.status(200).send(foundUser);\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n};\n"],"mappings":"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"}},"mtime":1690731512379},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authRoutes = _interopRequireDefault(require(\"./auth-routes\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = app => {\n  (0, _authRoutes.default)(app);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXV0aFJvdXRlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfZGVmYXVsdCIsImFwcCIsImF1dGhSb3V0ZXMiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF1dGhSb3V0ZXMgZnJvbSAnLi9hdXRoLXJvdXRlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IChhcHApID0+IHtcbiAgYXV0aFJvdXRlcyhhcHApO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsV0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQXVDLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBQUEsSUFBQUcsUUFBQSxHQUV2QkMsR0FBRyxJQUFLO0VBQ3RCLElBQUFDLG1CQUFVLEVBQUNELEdBQUcsQ0FBQztBQUNqQixDQUFDO0FBQUFFLE9BQUEsQ0FBQUosT0FBQSxHQUFBQyxRQUFBIn0=","map":{"version":3,"names":["_authRoutes","_interopRequireDefault","require","obj","__esModule","default","_default","app","authRoutes","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/","sources":["index.js"],"sourcesContent":["import authRoutes from './auth-routes';\n\nexport default (app) => {\n  authRoutes(app);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAuC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,IAAAG,QAAA,GAEvBC,GAAG,IAAK;EACtB,IAAAC,mBAAU,EAACD,GAAG,CAAC;AACjB,CAAC;AAAAE,OAAA,CAAAJ,OAAA,GAAAC,QAAA"}},"mtime":1689261410489},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/auth-routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authController = _interopRequireDefault(require(\"../controllers/auth-controller\"));\nvar _JoiValidate = _interopRequireDefault(require(\"../middlewares/JoiValidate\"));\nvar _authValidation = _interopRequireDefault(require(\"../validation/auth-validation\"));\nvar _AuthRights = _interopRequireDefault(require(\"../middlewares/AuthRights\"));\nvar _middlewares = require(\"../middlewares\");\nvar _authenticateJWT = _interopRequireDefault(require(\"../middlewares/authenticateJWT\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = app => {\n  app.post('/signup', (0, _JoiValidate.default)(_authValidation.default.register), _authController.default.postRegisterUser);\n  app.post('/login/email', (0, _JoiValidate.default)(_authValidation.default.loginWithEmail), _authController.default.postLoginUserWithEmail);\n  app.post('/login/username', (0, _JoiValidate.default)(_authValidation.default.loginWithUsername), _authController.default.postLoginUserWithUsername);\n  app.post('/login/phone', (0, _JoiValidate.default)(_authValidation.default.loginWithPhone), _authController.default.postLoginUserWithPhone);\n  app.get('/logout', _middlewares.isLoggedIn, _authController.default.postLogoutUser);\n  app.post('/revoke-all-tokens', _middlewares.isLoggedIn, _authController.default.postLogoutUserFromAllScreens);\n  app.get('/refresh', _middlewares.isLoggedIn, _authController.default.getNewTokens);\n  app.get('/me', _authenticateJWT.default, _middlewares.isLoggedIn, (0, _AuthRights.default)(), _authController.default.getUserCredentials);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXV0aENvbnRyb2xsZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9Kb2lWYWxpZGF0ZSIsIl9hdXRoVmFsaWRhdGlvbiIsIl9BdXRoUmlnaHRzIiwiX21pZGRsZXdhcmVzIiwiX2F1dGhlbnRpY2F0ZUpXVCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2RlZmF1bHQiLCJhcHAiLCJwb3N0IiwiSm9pVmFsaWRhdGUiLCJhdXRoVmFsaWRhdGlvbiIsInJlZ2lzdGVyIiwiYXV0aENvbnRyb2xsZXIiLCJwb3N0UmVnaXN0ZXJVc2VyIiwibG9naW5XaXRoRW1haWwiLCJwb3N0TG9naW5Vc2VyV2l0aEVtYWlsIiwibG9naW5XaXRoVXNlcm5hbWUiLCJwb3N0TG9naW5Vc2VyV2l0aFVzZXJuYW1lIiwibG9naW5XaXRoUGhvbmUiLCJwb3N0TG9naW5Vc2VyV2l0aFBob25lIiwiZ2V0IiwiaXNMb2dnZWRJbiIsInBvc3RMb2dvdXRVc2VyIiwicG9zdExvZ291dFVzZXJGcm9tQWxsU2NyZWVucyIsImdldE5ld1Rva2VucyIsImF1dGhlbnRpY2F0ZUpXVCIsIkFjY2Vzc1RvIiwiZ2V0VXNlckNyZWRlbnRpYWxzIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGgtcm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhdXRoQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9hdXRoLWNvbnRyb2xsZXInO1xuaW1wb3J0IEpvaVZhbGlkYXRlIGZyb20gJy4uL21pZGRsZXdhcmVzL0pvaVZhbGlkYXRlJztcbmltcG9ydCBhdXRoVmFsaWRhdGlvbiBmcm9tICcuLi92YWxpZGF0aW9uL2F1dGgtdmFsaWRhdGlvbic7XG5pbXBvcnQgQWNjZXNzVG8gZnJvbSAnLi4vbWlkZGxld2FyZXMvQXV0aFJpZ2h0cyc7XG5pbXBvcnQgeyBpc0xvZ2dlZEluIH0gZnJvbSAnLi4vbWlkZGxld2FyZXMnO1xuaW1wb3J0IGF1dGhlbnRpY2F0ZUpXVCBmcm9tICcuLi9taWRkbGV3YXJlcy9hdXRoZW50aWNhdGVKV1QnO1xuXG5leHBvcnQgZGVmYXVsdCAoYXBwKSA9PiB7XG4gIGFwcC5wb3N0KFxuICAgICcvc2lnbnVwJyxcbiAgICBKb2lWYWxpZGF0ZShhdXRoVmFsaWRhdGlvbi5yZWdpc3RlciksXG4gICAgYXV0aENvbnRyb2xsZXIucG9zdFJlZ2lzdGVyVXNlclxuICApO1xuXG4gIGFwcC5wb3N0KFxuICAgICcvbG9naW4vZW1haWwnLFxuICAgIEpvaVZhbGlkYXRlKGF1dGhWYWxpZGF0aW9uLmxvZ2luV2l0aEVtYWlsKSxcbiAgICBhdXRoQ29udHJvbGxlci5wb3N0TG9naW5Vc2VyV2l0aEVtYWlsXG4gICk7XG5cbiAgYXBwLnBvc3QoXG4gICAgJy9sb2dpbi91c2VybmFtZScsXG4gICAgSm9pVmFsaWRhdGUoYXV0aFZhbGlkYXRpb24ubG9naW5XaXRoVXNlcm5hbWUpLFxuICAgIGF1dGhDb250cm9sbGVyLnBvc3RMb2dpblVzZXJXaXRoVXNlcm5hbWVcbiAgKTtcblxuICBhcHAucG9zdChcbiAgICAnL2xvZ2luL3Bob25lJyxcbiAgICBKb2lWYWxpZGF0ZShhdXRoVmFsaWRhdGlvbi5sb2dpbldpdGhQaG9uZSksXG4gICAgYXV0aENvbnRyb2xsZXIucG9zdExvZ2luVXNlcldpdGhQaG9uZVxuICApO1xuXG4gIGFwcC5nZXQoJy9sb2dvdXQnLCBpc0xvZ2dlZEluLCBhdXRoQ29udHJvbGxlci5wb3N0TG9nb3V0VXNlcik7XG4gIGFwcC5wb3N0KFxuICAgICcvcmV2b2tlLWFsbC10b2tlbnMnLFxuICAgIGlzTG9nZ2VkSW4sXG4gICAgYXV0aENvbnRyb2xsZXIucG9zdExvZ291dFVzZXJGcm9tQWxsU2NyZWVuc1xuICApO1xuICBhcHAuZ2V0KCcvcmVmcmVzaCcsIGlzTG9nZ2VkSW4sIGF1dGhDb250cm9sbGVyLmdldE5ld1Rva2Vucyk7XG5cbiAgYXBwLmdldChcbiAgICAnL21lJyxcbiAgICBhdXRoZW50aWNhdGVKV1QsXG4gICAgaXNMb2dnZWRJbixcbiAgICBBY2Nlc3NUbygpLFxuICAgIGF1dGhDb250cm9sbGVyLmdldFVzZXJDcmVkZW50aWFsc1xuICApO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsZUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsZUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsV0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksWUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssZ0JBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUE2RCxTQUFBRCx1QkFBQU8sR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLElBQUFHLFFBQUEsR0FFN0NDLEdBQUcsSUFBSztFQUN0QkEsR0FBRyxDQUFDQyxJQUFJLENBQ04sU0FBUyxFQUNULElBQUFDLG9CQUFXLEVBQUNDLHVCQUFjLENBQUNDLFFBQVEsQ0FBQyxFQUNwQ0MsdUJBQWMsQ0FBQ0MsZ0JBQ2pCLENBQUM7RUFFRE4sR0FBRyxDQUFDQyxJQUFJLENBQ04sY0FBYyxFQUNkLElBQUFDLG9CQUFXLEVBQUNDLHVCQUFjLENBQUNJLGNBQWMsQ0FBQyxFQUMxQ0YsdUJBQWMsQ0FBQ0csc0JBQ2pCLENBQUM7RUFFRFIsR0FBRyxDQUFDQyxJQUFJLENBQ04saUJBQWlCLEVBQ2pCLElBQUFDLG9CQUFXLEVBQUNDLHVCQUFjLENBQUNNLGlCQUFpQixDQUFDLEVBQzdDSix1QkFBYyxDQUFDSyx5QkFDakIsQ0FBQztFQUVEVixHQUFHLENBQUNDLElBQUksQ0FDTixjQUFjLEVBQ2QsSUFBQUMsb0JBQVcsRUFBQ0MsdUJBQWMsQ0FBQ1EsY0FBYyxDQUFDLEVBQzFDTix1QkFBYyxDQUFDTyxzQkFDakIsQ0FBQztFQUVEWixHQUFHLENBQUNhLEdBQUcsQ0FBQyxTQUFTLEVBQUVDLHVCQUFVLEVBQUVULHVCQUFjLENBQUNVLGNBQWMsQ0FBQztFQUM3RGYsR0FBRyxDQUFDQyxJQUFJLENBQ04sb0JBQW9CLEVBQ3BCYSx1QkFBVSxFQUNWVCx1QkFBYyxDQUFDVyw0QkFDakIsQ0FBQztFQUNEaEIsR0FBRyxDQUFDYSxHQUFHLENBQUMsVUFBVSxFQUFFQyx1QkFBVSxFQUFFVCx1QkFBYyxDQUFDWSxZQUFZLENBQUM7RUFFNURqQixHQUFHLENBQUNhLEdBQUcsQ0FDTCxLQUFLLEVBQ0xLLHdCQUFlLEVBQ2ZKLHVCQUFVLEVBQ1YsSUFBQUssbUJBQVEsRUFBQyxDQUFDLEVBQ1ZkLHVCQUFjLENBQUNlLGtCQUNqQixDQUFDO0FBQ0gsQ0FBQztBQUFBQyxPQUFBLENBQUF2QixPQUFBLEdBQUFDLFFBQUEifQ==","map":{"version":3,"names":["_authController","_interopRequireDefault","require","_JoiValidate","_authValidation","_AuthRights","_middlewares","_authenticateJWT","obj","__esModule","default","_default","app","post","JoiValidate","authValidation","register","authController","postRegisterUser","loginWithEmail","postLoginUserWithEmail","loginWithUsername","postLoginUserWithUsername","loginWithPhone","postLoginUserWithPhone","get","isLoggedIn","postLogoutUser","postLogoutUserFromAllScreens","getNewTokens","authenticateJWT","AccessTo","getUserCredentials","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/routes/","sources":["auth-routes.js"],"sourcesContent":["import authController from '../controllers/auth-controller';\nimport JoiValidate from '../middlewares/JoiValidate';\nimport authValidation from '../validation/auth-validation';\nimport AccessTo from '../middlewares/AuthRights';\nimport { isLoggedIn } from '../middlewares';\nimport authenticateJWT from '../middlewares/authenticateJWT';\n\nexport default (app) => {\n  app.post(\n    '/signup',\n    JoiValidate(authValidation.register),\n    authController.postRegisterUser\n  );\n\n  app.post(\n    '/login/email',\n    JoiValidate(authValidation.loginWithEmail),\n    authController.postLoginUserWithEmail\n  );\n\n  app.post(\n    '/login/username',\n    JoiValidate(authValidation.loginWithUsername),\n    authController.postLoginUserWithUsername\n  );\n\n  app.post(\n    '/login/phone',\n    JoiValidate(authValidation.loginWithPhone),\n    authController.postLoginUserWithPhone\n  );\n\n  app.get('/logout', isLoggedIn, authController.postLogoutUser);\n  app.post(\n    '/revoke-all-tokens',\n    isLoggedIn,\n    authController.postLogoutUserFromAllScreens\n  );\n  app.get('/refresh', isLoggedIn, authController.getNewTokens);\n\n  app.get(\n    '/me',\n    authenticateJWT,\n    isLoggedIn,\n    AccessTo(),\n    authController.getUserCredentials\n  );\n};\n"],"mappings":";;;;;;AAAA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,eAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,YAAA,GAAAJ,OAAA;AACA,IAAAK,gBAAA,GAAAN,sBAAA,CAAAC,OAAA;AAA6D,SAAAD,uBAAAO,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,IAAAG,QAAA,GAE7CC,GAAG,IAAK;EACtBA,GAAG,CAACC,IAAI,CACN,SAAS,EACT,IAAAC,oBAAW,EAACC,uBAAc,CAACC,QAAQ,CAAC,EACpCC,uBAAc,CAACC,gBACjB,CAAC;EAEDN,GAAG,CAACC,IAAI,CACN,cAAc,EACd,IAAAC,oBAAW,EAACC,uBAAc,CAACI,cAAc,CAAC,EAC1CF,uBAAc,CAACG,sBACjB,CAAC;EAEDR,GAAG,CAACC,IAAI,CACN,iBAAiB,EACjB,IAAAC,oBAAW,EAACC,uBAAc,CAACM,iBAAiB,CAAC,EAC7CJ,uBAAc,CAACK,yBACjB,CAAC;EAEDV,GAAG,CAACC,IAAI,CACN,cAAc,EACd,IAAAC,oBAAW,EAACC,uBAAc,CAACQ,cAAc,CAAC,EAC1CN,uBAAc,CAACO,sBACjB,CAAC;EAEDZ,GAAG,CAACa,GAAG,CAAC,SAAS,EAAEC,uBAAU,EAAET,uBAAc,CAACU,cAAc,CAAC;EAC7Df,GAAG,CAACC,IAAI,CACN,oBAAoB,EACpBa,uBAAU,EACVT,uBAAc,CAACW,4BACjB,CAAC;EACDhB,GAAG,CAACa,GAAG,CAAC,UAAU,EAAEC,uBAAU,EAAET,uBAAc,CAACY,YAAY,CAAC;EAE5DjB,GAAG,CAACa,GAAG,CACL,KAAK,EACLK,wBAAe,EACfJ,uBAAU,EACV,IAAAK,mBAAQ,EAAC,CAAC,EACVd,uBAAc,CAACe,kBACjB,CAAC;AACH,CAAC;AAAAC,OAAA,CAAAvB,OAAA,GAAAC,QAAA"}},"mtime":1690644035000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/controllers/auth-controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _mongoHelpers = require(\"../database/mongoHelpers\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n// mongodb://AdminUser:qwerty@localhost:27017/?authMechanism=DEFAULT\nvar _default = {\n  postRegisterUser: async (req, res, next) => {\n    try {\n      const {\n        name,\n        email,\n        phone,\n        username,\n        password,\n        confirmPassword,\n        acceptTerms\n      } = req.body;\n      if (await _userModel.default.isEmailTaken(email)) return next(new _ApiErrors.default(400, `Email ${email} already registered`));\n      const user = new _userModel.default();\n\n      // first registered account is an admin\n      const isFirstAccount = (await (0, _mongoHelpers.countDocuments)(_userModel.default)) === 0;\n      user.role = isFirstAccount ? _roles.default.Admin : _roles.default.User;\n      user.name = name;\n      user.email = email;\n      user.username = username;\n      user.phone = phone;\n      user.password = password;\n      user.confirmPassword = confirmPassword;\n      user.acceptTerms = acceptTerms;\n      await user.save();\n      res.status(201).json({\n        message: 'User successfully registered!'\n      });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithEmail: async (req, res, next) => {\n    const {\n      email,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        email: email\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithUsername: async (req, res, next) => {\n    const {\n      username,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        username: username\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithPhone: async (req, res, next) => {\n    const {\n      phone,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        phone: phone\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUser: async (req, res, next) => {\n    // accept token from cookie\n    const {\n      refreshToken\n    } = req.cookies;\n    try {\n      if (!refreshToken) return next(new _ApiErrors.default(400, 'Token is required'));\n      const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n      if (!verifiedRefToken) return next(new _ApiErrors.default(404, 'Token not found'));\n      if (!(0, _mongoHelpers.isValidId)(req.user.id)) return next(new _ApiErrors.default(400, 'User not found'));\n      const user = await _userModel.default.findById(req.user.id);\n      if (!user) return next(new _ApiErrors.default(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(refreshToken) && req.user.role !== _roles.default.Admin) return next(new _ApiErrors.default(401, 'Unauthorized'));\n      const refreshTokenInDb = await _tokenModel.default.findOne({\n        refreshToken,\n        type: _tokenTypes.default.REFRESH,\n        blacklisted: false\n      });\n      if (!refreshTokenInDb) return next(new _ApiErrors.default(404, 'Not found'));\n      await refreshTokenInDb.deleteOne();\n      return res.status(200).clearCookie('refreshToken', {\n        httpOnly: true\n      }).end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUserFromAllScreens: async (req, res, next) => {\n    const token = req.body.token || req.cookies.refreshToken;\n    try {\n      if (!token) return next(new _ApiErrors.default(400, 'Token is required'));\n      if (!(0, _mongoHelpers.isValidId)(req.user.id)) return next(new _ApiErrors.default(400, 'User not found'));\n      const user = await _userModel.default.findById(req.user.id);\n      if (!user) return next(new _ApiErrors.default(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(token) && req.user.role !== _roles.default.Admin) return next(new _ApiErrors.default(401, 'Unauthorized'));\n\n      // return refresh tokens for user\n      const refreshToken = await _tokenModel.default.find({\n        user: req.user.id,\n        type: _tokenTypes.default.REFRESH,\n        blacklisted: false\n      });\n      if (!refreshToken) return next(new _ApiErrors.default(404, 'Not found'));\n      await _tokenModel.default.deleteMany({\n        refreshToken\n      });\n      return res.status(200).clearCookie('refreshToken', {\n        httpOnly: true\n      }).end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getNewTokens: async (req, res, next) => {\n    const {\n      refreshToken\n    } = req.cookies;\n    try {\n      if (!refreshToken) return next(new _ApiErrors.default(401, 'No refresh token provided'));\n      const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n      const user = await _userModel.default.findById(verifiedRefToken.user).exec();\n      if (!user) return next(new _ApiErrors.default(404, 'User not found'));\n      const refTokenInDb = await _tokenModel.default.findOne({\n        user: user.id,\n        token: refreshToken\n      });\n      if (!refTokenInDb) return next(new _ApiErrors.default(401, 'Invalid refresh token'));\n      await verifiedRefToken.deleteOne();\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: false\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ user, tokens });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getUserCredentials: async (req, res, next) => {\n    try {\n      const user = req.user;\n      if (!user) return next(new _ApiErrors.default(404, 'User not found'));\n      const foundUser = await _userModel.default.findById(user.id).select('-password -acceptTerms -createdAt -updatedAt -__v');\n      if (!foundUser) return next(new _ApiErrors.default(404, 'User not found'));\n      res.status(200).send(foundUser);\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  }\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcm9sZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl90b2tlblR5cGVzIiwiX21vbmdvSGVscGVycyIsIl9BcGlFcnJvcnMiLCJfdG9rZW5IZWxwZXIiLCJfdG9rZW5Nb2RlbCIsIl91c2VyTW9kZWwiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9kZWZhdWx0IiwicG9zdFJlZ2lzdGVyVXNlciIsInJlcSIsInJlcyIsIm5leHQiLCJuYW1lIiwiZW1haWwiLCJwaG9uZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJhY2NlcHRUZXJtcyIsImJvZHkiLCJVc2VyIiwiaXNFbWFpbFRha2VuIiwiQXBpRXJyb3IiLCJ1c2VyIiwiaXNGaXJzdEFjY291bnQiLCJjb3VudERvY3VtZW50cyIsInJvbGUiLCJSb2xlIiwiQWRtaW4iLCJzYXZlIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJwb3N0TG9naW5Vc2VyV2l0aEVtYWlsIiwiZmluZE9uZSIsImlzUGFzc3dvcmRNYXRjaCIsInRva2VucyIsImdlbmVyYXRlQXV0aFRva2VucyIsImNvb2tpZSIsInJlZnJlc2giLCJodHRwT25seSIsInNhbWVTaXRlIiwibWF4QWdlIiwicmVmcmVzaEV4cGlyZXMiLCJleHBpcmVzIiwiRGF0ZSIsIm5vdyIsInNlY3VyZSIsImhlYWRlciIsImFjY2VzcyIsInNlbmQiLCJhY2Nlc3NUb2tlbiIsInBvc3RMb2dpblVzZXJXaXRoVXNlcm5hbWUiLCJwb3N0TG9naW5Vc2VyV2l0aFBob25lIiwicG9zdExvZ291dFVzZXIiLCJyZWZyZXNoVG9rZW4iLCJjb29raWVzIiwidmVyaWZpZWRSZWZUb2tlbiIsInZlcmlmeURCVG9rZW4iLCJ0b2tlblR5cGVzIiwiUkVGUkVTSCIsImlzVmFsaWRJZCIsImlkIiwiZmluZEJ5SWQiLCJvd25zVG9rZW4iLCJyZWZyZXNoVG9rZW5JbkRiIiwiVG9rZW4iLCJ0eXBlIiwiYmxhY2tsaXN0ZWQiLCJkZWxldGVPbmUiLCJjbGVhckNvb2tpZSIsImVuZCIsInBvc3RMb2dvdXRVc2VyRnJvbUFsbFNjcmVlbnMiLCJ0b2tlbiIsImZpbmQiLCJkZWxldGVNYW55IiwiZ2V0TmV3VG9rZW5zIiwiZXhlYyIsInJlZlRva2VuSW5EYiIsImdldFVzZXJDcmVkZW50aWFscyIsImZvdW5kVXNlciIsInNlbGVjdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImF1dGgtY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm9sZSBmcm9tICcuLi9jb25maWcvcm9sZXMnO1xuaW1wb3J0IHRva2VuVHlwZXMgZnJvbSAnLi4vY29uZmlnL3Rva2VuVHlwZXMnO1xuaW1wb3J0IHsgY291bnREb2N1bWVudHMsIGlzVmFsaWRJZCB9IGZyb20gJy4uL2RhdGFiYXNlL21vbmdvSGVscGVycyc7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5pbXBvcnQgeyBnZW5lcmF0ZUF1dGhUb2tlbnMsIHZlcmlmeURCVG9rZW4gfSBmcm9tICcuLi9oZWxwZXJzL3Rva2VuLWhlbHBlcic7XG5pbXBvcnQgVG9rZW4gZnJvbSAnLi4vbW9kZWxzL3Rva2VuLW1vZGVsJztcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyLW1vZGVsJztcblxuLy8gbW9uZ29kYjovL0FkbWluVXNlcjpxd2VydHlAbG9jYWxob3N0OjI3MDE3Lz9hdXRoTWVjaGFuaXNtPURFRkFVTFRcblxuZXhwb3J0IGRlZmF1bHQge1xuICBwb3N0UmVnaXN0ZXJVc2VyOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBuYW1lLFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGhvbmUsXG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgY29uZmlybVBhc3N3b3JkLFxuICAgICAgICBhY2NlcHRUZXJtcyxcbiAgICAgIH0gPSByZXEuYm9keTtcblxuICAgICAgaWYgKGF3YWl0IFVzZXIuaXNFbWFpbFRha2VuKGVtYWlsKSlcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgYEVtYWlsICR7ZW1haWx9IGFscmVhZHkgcmVnaXN0ZXJlZGApKTtcblxuICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKCk7XG5cbiAgICAgIC8vIGZpcnN0IHJlZ2lzdGVyZWQgYWNjb3VudCBpcyBhbiBhZG1pblxuICAgICAgY29uc3QgaXNGaXJzdEFjY291bnQgPSAoYXdhaXQgY291bnREb2N1bWVudHMoVXNlcikpID09PSAwO1xuICAgICAgdXNlci5yb2xlID0gaXNGaXJzdEFjY291bnQgPyBSb2xlLkFkbWluIDogUm9sZS5Vc2VyO1xuXG4gICAgICB1c2VyLm5hbWUgPSBuYW1lO1xuICAgICAgdXNlci5lbWFpbCA9IGVtYWlsO1xuICAgICAgdXNlci51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgdXNlci5waG9uZSA9IHBob25lO1xuICAgICAgdXNlci5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgdXNlci5jb25maXJtUGFzc3dvcmQgPSBjb25maXJtUGFzc3dvcmQ7XG4gICAgICB1c2VyLmFjY2VwdFRlcm1zID0gYWNjZXB0VGVybXM7XG5cbiAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkIScgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA6Pj4gJywgZXJyb3IpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9LFxuICBwb3N0TG9naW5Vc2VyV2l0aEVtYWlsOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIgfHwgIShhd2FpdCB1c2VyLmlzUGFzc3dvcmRNYXRjaChwYXNzd29yZCkpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnSW52YWxpZCBjcmVkZW50aWFscycpKTtcblxuICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5zKHVzZXIpO1xuXG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5jb29raWUoJ3JlZnJlc2hUb2tlbicsIHRva2Vucy5yZWZyZXNoLCB7XG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgIG1heEFnZTogdG9rZW5zLnJlZnJlc2hFeHBpcmVzICogMTAwMCwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIGV4cGlyZXM6IG5ldyBEYXRlKERhdGUubm93KCkgKyB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwKSwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgLmhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2Vucy5hY2Nlc3MpXG4gICAgICAgIC5zZW5kKHsgYWNjZXNzVG9rZW46IHRva2Vucy5hY2Nlc3MgfSk7XG4gICAgICAvLyAuanNvbih7IC8qdXNlciwqLyBhY2Nlc3M6IHRva2Vucy5hY2Nlc3MgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA6Pj4gJywgZXJyb3IpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9LFxuICBwb3N0TG9naW5Vc2VyV2l0aFVzZXJuYW1lOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIgfHwgIShhd2FpdCB1c2VyLmlzUGFzc3dvcmRNYXRjaChwYXNzd29yZCkpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnSW52YWxpZCBjcmVkZW50aWFscycpKTtcblxuICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5zKHVzZXIpO1xuXG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5jb29raWUoJ3JlZnJlc2hUb2tlbicsIHRva2Vucy5yZWZyZXNoLCB7XG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgIG1heEFnZTogdG9rZW5zLnJlZnJlc2hFeHBpcmVzICogMTAwMCwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIGV4cGlyZXM6IG5ldyBEYXRlKERhdGUubm93KCkgKyB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwKSwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgLmhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2Vucy5hY2Nlc3MpXG4gICAgICAgIC5zZW5kKHsgYWNjZXNzVG9rZW46IHRva2Vucy5hY2Nlc3MgfSk7XG4gICAgICAvLyAuanNvbih7IC8qdXNlciwqLyBhY2Nlc3M6IHRva2Vucy5hY2Nlc3MgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA6Pj4gJywgZXJyb3IpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9LFxuICBwb3N0TG9naW5Vc2VyV2l0aFBob25lOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCB7IHBob25lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAgIHBob25lOiBwaG9uZSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIgfHwgIShhd2FpdCB1c2VyLmlzUGFzc3dvcmRNYXRjaChwYXNzd29yZCkpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnSW52YWxpZCBjcmVkZW50aWFscycpKTtcblxuICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5zKHVzZXIpO1xuXG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5jb29raWUoJ3JlZnJlc2hUb2tlbicsIHRva2Vucy5yZWZyZXNoLCB7XG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgIG1heEFnZTogdG9rZW5zLnJlZnJlc2hFeHBpcmVzICogMTAwMCwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIGV4cGlyZXM6IG5ldyBEYXRlKERhdGUubm93KCkgKyB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwKSwgLy8gYWx3YXlzIGNhbGN1bGF0ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgLmhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2Vucy5hY2Nlc3MpXG4gICAgICAgIC5zZW5kKHsgYWNjZXNzVG9rZW46IHRva2Vucy5hY2Nlc3MgfSk7XG4gICAgICAvLyAuanNvbih7IC8qdXNlciwqLyBhY2Nlc3M6IHRva2Vucy5hY2Nlc3MgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA6Pj4gJywgZXJyb3IpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9LFxuICBwb3N0TG9nb3V0VXNlcjogYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgLy8gYWNjZXB0IHRva2VuIGZyb20gY29va2llXG4gICAgY29uc3QgeyByZWZyZXNoVG9rZW4gfSA9IHJlcS5jb29raWVzO1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlZnJlc2hUb2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ1Rva2VuIGlzIHJlcXVpcmVkJykpO1xuXG4gICAgICBjb25zdCB2ZXJpZmllZFJlZlRva2VuID0gYXdhaXQgdmVyaWZ5REJUb2tlbihcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICB0b2tlblR5cGVzLlJFRlJFU0hcbiAgICAgICk7XG5cbiAgICAgIGlmICghdmVyaWZpZWRSZWZUb2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ1Rva2VuIG5vdCBmb3VuZCcpKTtcblxuICAgICAgaWYgKCFpc1ZhbGlkSWQocmVxLnVzZXIuaWQpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLmlkKTtcbiAgICAgIGlmICghdXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICAvLyB1c2VycyBjYW4gcmV2b2tlIHRoZWlyIG93biB0b2tlbnMgYW5kIGFkbWlucyBjYW4gcmV2b2tlIGFueSB0b2tlbnNcbiAgICAgIGlmICghcmVxLnVzZXIub3duc1Rva2VuKHJlZnJlc2hUb2tlbikgJiYgcmVxLnVzZXIucm9sZSAhPT0gUm9sZS5BZG1pbilcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ1VuYXV0aG9yaXplZCcpKTtcblxuICAgICAgY29uc3QgcmVmcmVzaFRva2VuSW5EYiA9IGF3YWl0IFRva2VuLmZpbmRPbmUoe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuUkVGUkVTSCxcbiAgICAgICAgYmxhY2tsaXN0ZWQ6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlZnJlc2hUb2tlbkluRGIpIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdOb3QgZm91bmQnKSk7XG5cbiAgICAgIGF3YWl0IHJlZnJlc2hUb2tlbkluRGIuZGVsZXRlT25lKCk7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cygyMDApXG4gICAgICAgIC5jbGVhckNvb2tpZSgncmVmcmVzaFRva2VuJywgeyBodHRwT25seTogdHJ1ZSB9KVxuICAgICAgICAuZW5kKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA6Pj4gJywgZXJyb3IpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9LFxuICBwb3N0TG9nb3V0VXNlckZyb21BbGxTY3JlZW5zOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5ib2R5LnRva2VuIHx8IHJlcS5jb29raWVzLnJlZnJlc2hUb2tlbjtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIXRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVG9rZW4gaXMgcmVxdWlyZWQnKSk7XG5cbiAgICAgIGlmICghaXNWYWxpZElkKHJlcS51c2VyLmlkKSlcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEudXNlci5pZCk7XG4gICAgICBpZiAoIXVzZXIpIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdVc2VyIG5vdCBmb3VuZCcpKTtcblxuICAgICAgLy8gdXNlcnMgY2FuIHJldm9rZSB0aGVpciBvd24gdG9rZW5zIGFuZCBhZG1pbnMgY2FuIHJldm9rZSBhbnkgdG9rZW5zXG4gICAgICBpZiAoIXJlcS51c2VyLm93bnNUb2tlbih0b2tlbikgJiYgcmVxLnVzZXIucm9sZSAhPT0gUm9sZS5BZG1pbilcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ1VuYXV0aG9yaXplZCcpKTtcblxuICAgICAgLy8gcmV0dXJuIHJlZnJlc2ggdG9rZW5zIGZvciB1c2VyXG4gICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCBUb2tlbi5maW5kKHtcbiAgICAgICAgdXNlcjogcmVxLnVzZXIuaWQsXG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuUkVGUkVTSCxcbiAgICAgICAgYmxhY2tsaXN0ZWQ6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVmcmVzaFRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnTm90IGZvdW5kJykpO1xuICAgICAgYXdhaXQgVG9rZW4uZGVsZXRlTWFueSh7IHJlZnJlc2hUb2tlbiB9KTtcblxuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgLmNsZWFyQ29va2llKCdyZWZyZXNoVG9rZW4nLCB7IGh0dHBPbmx5OiB0cnVlIH0pXG4gICAgICAgIC5lbmQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIGdldE5ld1Rva2VuczogYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgeyByZWZyZXNoVG9rZW4gfSA9IHJlcS5jb29raWVzO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmICghcmVmcmVzaFRva2VuKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnTm8gcmVmcmVzaCB0b2tlbiBwcm92aWRlZCcpKTtcblxuICAgICAgY29uc3QgdmVyaWZpZWRSZWZUb2tlbiA9IGF3YWl0IHZlcmlmeURCVG9rZW4oXG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgdG9rZW5UeXBlcy5SRUZSRVNIXG4gICAgICApO1xuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh2ZXJpZmllZFJlZlRva2VuLnVzZXIpLmV4ZWMoKTtcblxuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIGNvbnN0IHJlZlRva2VuSW5EYiA9IGF3YWl0IFRva2VuLmZpbmRPbmUoe1xuICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICB0b2tlbjogcmVmcmVzaFRva2VuLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVmVG9rZW5JbkRiKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnSW52YWxpZCByZWZyZXNoIHRva2VuJykpO1xuXG4gICAgICBhd2FpdCB2ZXJpZmllZFJlZlRva2VuLmRlbGV0ZU9uZSgpO1xuXG4gICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLmNvb2tpZSgncmVmcmVzaFRva2VuJywgdG9rZW5zLnJlZnJlc2gsIHtcbiAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDApLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgICAgfSlcbiAgICAgICAgLmhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2Vucy5hY2Nlc3MpXG4gICAgICAgIC5zZW5kKHsgYWNjZXNzVG9rZW46IHRva2Vucy5hY2Nlc3MgfSk7XG4gICAgICAvLyAuanNvbih7IHVzZXIsIHRva2VucyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIGdldFVzZXJDcmVkZW50aWFsczogYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGlmICghdXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICBjb25zdCBmb3VuZFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXIuaWQpLnNlbGVjdChcbiAgICAgICAgJy1wYXNzd29yZCAtYWNjZXB0VGVybXMgLWNyZWF0ZWRBdCAtdXBkYXRlZEF0IC1fX3YnXG4gICAgICApO1xuICAgICAgaWYgKCFmb3VuZFVzZXIpIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdVc2VyIG5vdCBmb3VuZCcpKTtcblxuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoZm91bmRVc2VyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxXQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxhQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxVQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxZQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxXQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTSxVQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFBd0MsU0FBQUQsdUJBQUFRLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFeEM7QUFBQSxJQUFBRyxRQUFBLEdBRWU7RUFDYkMsZ0JBQWdCLEVBQUUsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUMxQyxJQUFJO01BQ0YsTUFBTTtRQUNKQyxJQUFJO1FBQ0pDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsZUFBZTtRQUNmQztNQUNGLENBQUMsR0FBR1QsR0FBRyxDQUFDVSxJQUFJO01BRVosSUFBSSxNQUFNQyxrQkFBSSxDQUFDQyxZQUFZLENBQUNSLEtBQUssQ0FBQyxFQUNoQyxPQUFPRixJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUcsU0FBUVQsS0FBTSxxQkFBb0IsQ0FBQyxDQUFDO01BRXJFLE1B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","map":{"version":3,"names":["_roles","_interopRequireDefault","require","_tokenTypes","_mongoHelpers","_ApiErrors","_tokenHelper","_tokenModel","_userModel","obj","__esModule","default","_default","postRegisterUser","req","res","next","name","email","phone","username","password","confirmPassword","acceptTerms","body","User","isEmailTaken","ApiError","user","isFirstAccount","countDocuments","role","Role","Admin","save","status","json","message","error","console","log","postLoginUserWithEmail","findOne","isPasswordMatch","tokens","generateAuthTokens","cookie","refresh","httpOnly","sameSite","maxAge","refreshExpires","expires","Date","now","secure","header","access","send","accessToken","postLoginUserWithUsername","postLoginUserWithPhone","postLogoutUser","refreshToken","cookies","verifiedRefToken","verifyDBToken","tokenTypes","REFRESH","isValidId","id","findById","ownsToken","refreshTokenInDb","Token","type","blacklisted","deleteOne","clearCookie","end","postLogoutUserFromAllScreens","token","find","deleteMany","getNewTokens","exec","refTokenInDb","getUserCredentials","foundUser","select","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/controllers/","sources":["auth-controller.js"],"sourcesContent":["import Role from '../config/roles';\nimport tokenTypes from '../config/tokenTypes';\nimport { countDocuments, isValidId } from '../database/mongoHelpers';\nimport ApiError from '../errors/ApiErrors';\nimport { generateAuthTokens, verifyDBToken } from '../helpers/token-helper';\nimport Token from '../models/token-model';\nimport User from '../models/user-model';\n\n// mongodb://AdminUser:qwerty@localhost:27017/?authMechanism=DEFAULT\n\nexport default {\n  postRegisterUser: async (req, res, next) => {\n    try {\n      const {\n        name,\n        email,\n        phone,\n        username,\n        password,\n        confirmPassword,\n        acceptTerms,\n      } = req.body;\n\n      if (await User.isEmailTaken(email))\n        return next(new ApiError(400, `Email ${email} already registered`));\n\n      const user = new User();\n\n      // first registered account is an admin\n      const isFirstAccount = (await countDocuments(User)) === 0;\n      user.role = isFirstAccount ? Role.Admin : Role.User;\n\n      user.name = name;\n      user.email = email;\n      user.username = username;\n      user.phone = phone;\n      user.password = password;\n      user.confirmPassword = confirmPassword;\n      user.acceptTerms = acceptTerms;\n\n      await user.save();\n\n      res.status(201).json({ message: 'User successfully registered!' });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithEmail: async (req, res, next) => {\n    const { email, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        email: email,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithUsername: async (req, res, next) => {\n    const { username, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        username: username,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithPhone: async (req, res, next) => {\n    const { phone, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        phone: phone,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUser: async (req, res, next) => {\n    // accept token from cookie\n    const { refreshToken } = req.cookies;\n    try {\n      if (!refreshToken) return next(new ApiError(400, 'Token is required'));\n\n      const verifiedRefToken = await verifyDBToken(\n        refreshToken,\n        tokenTypes.REFRESH\n      );\n\n      if (!verifiedRefToken) return next(new ApiError(404, 'Token not found'));\n\n      if (!isValidId(req.user.id))\n        return next(new ApiError(400, 'User not found'));\n\n      const user = await User.findById(req.user.id);\n      if (!user) return next(new ApiError(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(refreshToken) && req.user.role !== Role.Admin)\n        return next(new ApiError(401, 'Unauthorized'));\n\n      const refreshTokenInDb = await Token.findOne({\n        refreshToken,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n      });\n      if (!refreshTokenInDb) return next(new ApiError(404, 'Not found'));\n\n      await refreshTokenInDb.deleteOne();\n\n      return res\n        .status(200)\n        .clearCookie('refreshToken', { httpOnly: true })\n        .end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUserFromAllScreens: async (req, res, next) => {\n    const token = req.body.token || req.cookies.refreshToken;\n\n    try {\n      if (!token) return next(new ApiError(400, 'Token is required'));\n\n      if (!isValidId(req.user.id))\n        return next(new ApiError(400, 'User not found'));\n\n      const user = await User.findById(req.user.id);\n      if (!user) return next(new ApiError(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(token) && req.user.role !== Role.Admin)\n        return next(new ApiError(401, 'Unauthorized'));\n\n      // return refresh tokens for user\n      const refreshToken = await Token.find({\n        user: req.user.id,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n      });\n\n      if (!refreshToken) return next(new ApiError(404, 'Not found'));\n      await Token.deleteMany({ refreshToken });\n\n      return res\n        .status(200)\n        .clearCookie('refreshToken', { httpOnly: true })\n        .end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getNewTokens: async (req, res, next) => {\n    const { refreshToken } = req.cookies;\n\n    try {\n      if (!refreshToken)\n        return next(new ApiError(401, 'No refresh token provided'));\n\n      const verifiedRefToken = await verifyDBToken(\n        refreshToken,\n        tokenTypes.REFRESH\n      );\n\n      const user = await User.findById(verifiedRefToken.user).exec();\n\n      if (!user) return next(new ApiError(404, 'User not found'));\n\n      const refTokenInDb = await Token.findOne({\n        user: user.id,\n        token: refreshToken,\n      });\n\n      if (!refTokenInDb)\n        return next(new ApiError(401, 'Invalid refresh token'));\n\n      await verifiedRefToken.deleteOne();\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: false,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ user, tokens });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getUserCredentials: async (req, res, next) => {\n    try {\n      const user = req.user;\n      if (!user) return next(new ApiError(404, 'User not found'));\n\n      const foundUser = await User.findById(user.id).select(\n        '-password -acceptTerms -createdAt -updatedAt -__v'\n      );\n      if (!foundUser) return next(new ApiError(404, 'User not found'));\n\n      res.status(200).send(foundUser);\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n};\n"],"mappings":"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"}},"mtime":1690789262731},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/user-model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _validator = _interopRequireDefault(require(\"validator\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: [true, 'User name required'],\n    trim: true\n  },\n  email: {\n    type: String,\n    required: [true, 'User email required'],\n    unique: true,\n    trim: true,\n    lowercase: true,\n    validate(value) {\n      if (!_validator.default.isEmail(value)) {\n        throw new Error('Invalid email');\n      }\n    }\n  },\n  username: {\n    type: String,\n    required: [true, 'User username required'],\n    unique: true,\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)) {\n        throw new Error('Username must contain at least one letter and one number');\n      }\n    }\n  },\n  phone: {\n    type: String,\n    unique: true,\n    trim: true,\n    maxlength: 10,\n    validate(value) {\n      if (!value.match(/[6-9]{1}[0-9]{9}/)) {\n        throw new Error('Not a valid phone number');\n      }\n    },\n    required: [true, 'User phone number required']\n  },\n  password: {\n    type: String,\n    required: [true, 'User password required'],\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/)) {\n        throw new Error('Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character');\n      }\n    }\n  },\n  role: {\n    type: String,\n    enum: Object.keys(_roles.default),\n    default: _roles.default.User,\n    required: [true, 'Please specify user role']\n  },\n  acceptTerms: {\n    type: Boolean,\n    default: false,\n    required: [true, 'Please accept terms']\n  }\n});\nuserSchema.set('timestamps', true);\nuserSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  }\n});\nuserSchema.static('isEmailTaken', async function (email, excludeUserId) {\n  const user = await this.findOne({\n    email,\n    _id: {\n      $ne: excludeUserId\n    }\n  });\n  return !!user;\n});\nuserSchema.method('isPasswordMatch', async function (password) {\n  const user = this;\n  return _bcrypt.default.compare(password, user.password);\n});\nuserSchema.pre('save', async function (next) {\n  const user = this;\n  if (user.isModified('password')) {\n    user.password = await _bcrypt.default.hash(user.password, 8);\n  }\n  next();\n});\nconst User = _mongoose.default.model('User', userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl92YWxpZGF0b3IiLCJfYmNyeXB0IiwiX3JvbGVzIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidHJpbSIsImVtYWlsIiwidW5pcXVlIiwibG93ZXJjYXNlIiwidmFsaWRhdGUiLCJ2YWx1ZSIsInZhbGlkYXRvciIsImlzRW1haWwiLCJFcnJvciIsInVzZXJuYW1lIiwibWlubGVuZ3RoIiwibWF0Y2giLCJwaG9uZSIsIm1heGxlbmd0aCIsInBhc3N3b3JkIiwicm9sZSIsImVudW0iLCJPYmplY3QiLCJrZXlzIiwiUm9sZXMiLCJVc2VyIiwiYWNjZXB0VGVybXMiLCJCb29sZWFuIiwic2V0IiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwiaWQiLCJfaWQiLCJ0b0hleFN0cmluZyIsIl9fdiIsInN0YXRpYyIsImV4Y2x1ZGVVc2VySWQiLCJ1c2VyIiwiZmluZE9uZSIsIiRuZSIsIm1ldGhvZCIsImJjcnlwdCIsImNvbXBhcmUiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsImhhc2giLCJtb2RlbCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXItbW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB2YWxpZGF0b3IgZnJvbSAndmFsaWRhdG9yJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0JztcbmltcG9ydCBSb2xlcyBmcm9tICcuLi9jb25maWcvcm9sZXMnO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIG5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBuYW1lIHJlcXVpcmVkJ10sXG4gICAgdHJpbTogdHJ1ZSxcbiAgfSxcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBlbWFpbCByZXF1aXJlZCddLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICAgIGxvd2VyY2FzZTogdHJ1ZSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgaWYgKCF2YWxpZGF0b3IuaXNFbWFpbCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVtYWlsJyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgdXNlcm5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciB1c2VybmFtZSByZXF1aXJlZCddLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICAgIG1pbmxlbmd0aDogOCxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgaWYgKCF2YWx1ZS5tYXRjaCgvXig/PS4qWzAtOV0pKD89LipbYS16QS1aXSkoW2EtekEtWjAtOV0rKSQvKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ1VzZXJuYW1lIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgbGV0dGVyIGFuZCBvbmUgbnVtYmVyJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIHBob25lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICAgIG1heGxlbmd0aDogMTAsXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGlmICghdmFsdWUubWF0Y2goL1s2LTldezF9WzAtOV17OX0vKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIHZhbGlkIHBob25lIG51bWJlcicpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBwaG9uZSBudW1iZXIgcmVxdWlyZWQnXSxcbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBwYXNzd29yZCByZXF1aXJlZCddLFxuICAgIHRyaW06IHRydWUsXG4gICAgbWlubGVuZ3RoOiA4LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBpZiAoXG4gICAgICAgICF2YWx1ZS5tYXRjaChcbiAgICAgICAgICAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlxcZCkoPz0uKlsjJEAhJSYqP10pW0EtWmEtelxcZCMkQCElJio/XXs4LDMwfSQvXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ0F0bGVhc3QgMSBsZXR0ZXIsIDEgbnVtYmVyLCAxIHNwZWNpYWwgY2hhcmFjdGVyIGFuZCBTSE9VTEQgTk9UIHN0YXJ0IHdpdGggYSBzcGVjaWFsIGNoYXJhY3RlcidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuICByb2xlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IE9iamVjdC5rZXlzKFJvbGVzKSxcbiAgICBkZWZhdWx0OiBSb2xlcy5Vc2VyLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBzcGVjaWZ5IHVzZXIgcm9sZSddLFxuICB9LFxuICBhY2NlcHRUZXJtczoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIGFjY2VwdCB0ZXJtcyddLFxuICB9LFxufSk7XG5cbnVzZXJTY2hlbWEuc2V0KCd0aW1lc3RhbXBzJywgdHJ1ZSk7XG5cbnVzZXJTY2hlbWEuc2V0KCd0b0pTT04nLCB7XG4gIHRyYW5zZm9ybTogZnVuY3Rpb24gKGRvYywgcmV0KSB7XG4gICAgcmV0LmlkID0gcmV0Ll9pZC50b0hleFN0cmluZygpO1xuICAgIGRlbGV0ZSByZXQuX2lkO1xuICAgIGRlbGV0ZSByZXQuX192O1xuICAgIHJldHVybiByZXQ7XG4gIH0sXG59KTtcblxudXNlclNjaGVtYS5zdGF0aWMoJ2lzRW1haWxUYWtlbicsIGFzeW5jIGZ1bmN0aW9uIChlbWFpbCwgZXhjbHVkZVVzZXJJZCkge1xuICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5maW5kT25lKHsgZW1haWwsIF9pZDogeyAkbmU6IGV4Y2x1ZGVVc2VySWQgfSB9KTtcbiAgcmV0dXJuICEhdXNlcjtcbn0pO1xuXG51c2VyU2NoZW1hLm1ldGhvZCgnaXNQYXNzd29yZE1hdGNoJywgYXN5bmMgZnVuY3Rpb24gKHBhc3N3b3JkKSB7XG4gIGNvbnN0IHVzZXIgPSB0aGlzO1xuICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xufSk7XG5cbnVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24gKG5leHQpIHtcbiAgY29uc3QgdXNlciA9IHRoaXM7XG4gIGlmICh1c2VyLmlzTW9kaWZpZWQoJ3Bhc3N3b3JkJykpIHtcbiAgICB1c2VyLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godXNlci5wYXNzd29yZCwgOCk7XG4gIH1cbiAgbmV4dCgpO1xufSk7XG5cbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBVc2VyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFB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","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_validator","_bcrypt","_roles","obj","__esModule","default","userSchema","mongoose","Schema","name","type","String","required","trim","email","unique","lowercase","validate","value","validator","isEmail","Error","username","minlength","match","phone","maxlength","password","role","enum","Object","keys","Roles","User","acceptTerms","Boolean","set","transform","doc","ret","id","_id","toHexString","__v","static","excludeUserId","user","findOne","$ne","method","bcrypt","compare","pre","next","isModified","hash","model","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/","sources":["user-model.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport validator from 'validator';\nimport bcrypt from 'bcrypt';\nimport Roles from '../config/roles';\n\nconst userSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: [true, 'User name required'],\n    trim: true,\n  },\n  email: {\n    type: String,\n    required: [true, 'User email required'],\n    unique: true,\n    trim: true,\n    lowercase: true,\n    validate(value) {\n      if (!validator.isEmail(value)) {\n        throw new Error('Invalid email');\n      }\n    },\n  },\n  username: {\n    type: String,\n    required: [true, 'User username required'],\n    unique: true,\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)) {\n        throw new Error(\n          'Username must contain at least one letter and one number'\n        );\n      }\n    },\n  },\n  phone: {\n    type: String,\n    unique: true,\n    trim: true,\n    maxlength: 10,\n    validate(value) {\n      if (!value.match(/[6-9]{1}[0-9]{9}/)) {\n        throw new Error('Not a valid phone number');\n      }\n    },\n    required: [true, 'User phone number required'],\n  },\n  password: {\n    type: String,\n    required: [true, 'User password required'],\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (\n        !value.match(\n          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/\n        )\n      ) {\n        throw new Error(\n          'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character'\n        );\n      }\n    },\n  },\n  role: {\n    type: String,\n    enum: Object.keys(Roles),\n    default: Roles.User,\n    required: [true, 'Please specify user role'],\n  },\n  acceptTerms: {\n    type: Boolean,\n    default: false,\n    required: [true, 'Please accept terms'],\n  },\n});\n\nuserSchema.set('timestamps', true);\n\nuserSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  },\n});\n\nuserSchema.static('isEmailTaken', async function (email, excludeUserId) {\n  const user = await this.findOne({ email, _id: { $ne: excludeUserId } });\n  return !!user;\n});\n\nuserSchema.method('isPasswordMatch', async function (password) {\n  const user = this;\n  return bcrypt.compare(password, user.password);\n});\n\nuserSchema.pre('save', async function (next) {\n  const user = this;\n  if (user.isModified('password')) {\n    user.password = await bcrypt.hash(user.password, 8);\n  }\n  next();\n});\n\nconst User = mongoose.model('User', userSchema);\n\nexport default User;\n"],"mappings":"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"}},"mtime":1689338818615},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst Role = {\n  Admin: 'Admin',\n  User: 'User'\n};\nvar _default = Role;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb2xlIiwiQWRtaW4iLCJVc2VyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL2NvbmZpZy8iLCJzb3VyY2VzIjpbInJvbGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJvbGUgPSB7XG4gIEFkbWluOiAnQWRtaW4nLFxuICBVc2VyOiAnVXNlcicsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBSb2xlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxJQUFJLEdBQUc7RUFDWEMsS0FBSyxFQUFFLE9BQU87RUFDZEMsSUFBSSxFQUFFO0FBQ1IsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FFYUgsSUFBSTtBQUFBSSxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9","map":{"version":3,"names":["Role","Admin","User","_default","exports","default"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/","sources":["roles.js"],"sourcesContent":["const Role = {\n  Admin: 'Admin',\n  User: 'User',\n};\n\nexport default Role;\n"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAG;EACXC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE;AACR,CAAC;AAAC,IAAAC,QAAA,GAEaH,IAAI;AAAAI,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689247652453},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/permissions.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst Permission = {\n  Read: 'Read',\n  Create: 'Create',\n  Update: 'Update',\n  Delete: 'Delete'\n};\nvar _default = Permission;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQZXJtaXNzaW9uIiwiUmVhZCIsIkNyZWF0ZSIsIlVwZGF0ZSIsIkRlbGV0ZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9jb25maWcvIiwic291cmNlcyI6WyJwZXJtaXNzaW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBQZXJtaXNzaW9uID0ge1xuICBSZWFkOiAnUmVhZCcsXG4gIENyZWF0ZTogJ0NyZWF0ZScsXG4gIFVwZGF0ZTogJ1VwZGF0ZScsXG4gIERlbGV0ZTogJ0RlbGV0ZScsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBQZXJtaXNzaW9uO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxVQUFVLEdBQUc7RUFDakJDLElBQUksRUFBRSxNQUFNO0VBQ1pDLE1BQU0sRUFBRSxRQUFRO0VBQ2hCQyxNQUFNLEVBQUUsUUFBUTtFQUNoQkMsTUFBTSxFQUFFO0FBQ1YsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FFYUwsVUFBVTtBQUFBTSxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9","map":{"version":3,"names":["Permission","Read","Create","Update","Delete","_default","exports","default"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/","sources":["permissions.js"],"sourcesContent":["const Permission = {\n  Read: 'Read',\n  Create: 'Create',\n  Update: 'Update',\n  Delete: 'Delete',\n};\n\nexport default Permission;\n"],"mappings":";;;;;;AAAA,MAAMA,UAAU,GAAG;EACjBC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE,QAAQ;EAChBC,MAAM,EAAE,QAAQ;EAChBC,MAAM,EAAE;AACV,CAAC;AAAC,IAAAC,QAAA,GAEaL,UAAU;AAAAM,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689247735580},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/user-model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _validator = _interopRequireDefault(require(\"validator\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: [true, 'User name required'],\n    trim: true\n  },\n  email: {\n    type: String,\n    required: [true, 'User email required'],\n    unique: true,\n    trim: true,\n    lowercase: true,\n    validate(value) {\n      if (!_validator.default.isEmail(value)) {\n        throw new Error('Invalid email');\n      }\n    }\n  },\n  username: {\n    type: String,\n    required: [true, 'User username required'],\n    unique: true,\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)) {\n        throw new Error('Username must contain at least one letter and one number');\n      }\n    }\n  },\n  phone: {\n    type: String,\n    unique: true,\n    trim: true,\n    maxlength: 10,\n    validate(value) {\n      if (!value.match(/[6-9]{1}[0-9]{9}/)) {\n        throw new Error('Not a valid phone number');\n      }\n    },\n    required: [true, 'User phone number required']\n  },\n  password: {\n    type: String,\n    required: [true, 'User password required'],\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/)) {\n        throw new Error('Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character');\n      }\n    }\n  },\n  role: {\n    type: String,\n    enum: Object.keys(_roles.default),\n    default: _roles.default.User,\n    required: [true, 'Please specify user role']\n  },\n  acceptTerms: {\n    type: Boolean,\n    default: false,\n    required: [true, 'Please accept terms']\n  }\n});\nuserSchema.set('timestamps', true);\nuserSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  }\n});\nuserSchema.static('isEmailTaken', async function (email, excludeUserId) {\n  const user = await this.findOne({\n    email,\n    _id: {\n      $ne: excludeUserId\n    }\n  });\n  return !!user;\n});\nuserSchema.method('isPasswordMatch', async function (password) {\n  const user = this;\n  return _bcrypt.default.compare(password, user.password);\n});\nuserSchema.pre('save', async function (next) {\n  const user = this;\n  if (user.isModified('password')) {\n    user.password = await _bcrypt.default.hash(user.password, 8);\n  }\n  next();\n});\nconst User = _mongoose.default.model('User', userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl92YWxpZGF0b3IiLCJfYmNyeXB0IiwiX3JvbGVzIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidHJpbSIsImVtYWlsIiwidW5pcXVlIiwibG93ZXJjYXNlIiwidmFsaWRhdGUiLCJ2YWx1ZSIsInZhbGlkYXRvciIsImlzRW1haWwiLCJFcnJvciIsInVzZXJuYW1lIiwibWlubGVuZ3RoIiwibWF0Y2giLCJwaG9uZSIsIm1heGxlbmd0aCIsInBhc3N3b3JkIiwicm9sZSIsImVudW0iLCJPYmplY3QiLCJrZXlzIiwiUm9sZXMiLCJVc2VyIiwiYWNjZXB0VGVybXMiLCJCb29sZWFuIiwic2V0IiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwiaWQiLCJfaWQiLCJ0b0hleFN0cmluZyIsIl9fdiIsInN0YXRpYyIsImV4Y2x1ZGVVc2VySWQiLCJ1c2VyIiwiZmluZE9uZSIsIiRuZSIsIm1ldGhvZCIsImJjcnlwdCIsImNvbXBhcmUiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsImhhc2giLCJtb2RlbCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXItbW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB2YWxpZGF0b3IgZnJvbSAndmFsaWRhdG9yJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0JztcbmltcG9ydCBSb2xlcyBmcm9tICcuLi9jb25maWcvcm9sZXMnO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIG5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBuYW1lIHJlcXVpcmVkJ10sXG4gICAgdHJpbTogdHJ1ZSxcbiAgfSxcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBlbWFpbCByZXF1aXJlZCddLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICAgIGxvd2VyY2FzZTogdHJ1ZSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgaWYgKCF2YWxpZGF0b3IuaXNFbWFpbCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVtYWlsJyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgdXNlcm5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciB1c2VybmFtZSByZXF1aXJlZCddLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICAgIG1pbmxlbmd0aDogOCxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgaWYgKCF2YWx1ZS5tYXRjaCgvXig/PS4qWzAtOV0pKD89LipbYS16QS1aXSkoW2EtekEtWjAtOV0rKSQvKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ1VzZXJuYW1lIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgbGV0dGVyIGFuZCBvbmUgbnVtYmVyJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIHBob25lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICAgIG1heGxlbmd0aDogMTAsXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGlmICghdmFsdWUubWF0Y2goL1s2LTldezF9WzAtOV17OX0vKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIHZhbGlkIHBob25lIG51bWJlcicpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBwaG9uZSBudW1iZXIgcmVxdWlyZWQnXSxcbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBwYXNzd29yZCByZXF1aXJlZCddLFxuICAgIHRyaW06IHRydWUsXG4gICAgbWlubGVuZ3RoOiA4LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBpZiAoXG4gICAgICAgICF2YWx1ZS5tYXRjaChcbiAgICAgICAgICAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlxcZCkoPz0uKlsjJEAhJSYqP10pW0EtWmEtelxcZCMkQCElJio/XXs4LDMwfSQvXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ0F0bGVhc3QgMSBsZXR0ZXIsIDEgbnVtYmVyLCAxIHNwZWNpYWwgY2hhcmFjdGVyIGFuZCBTSE9VTEQgTk9UIHN0YXJ0IHdpdGggYSBzcGVjaWFsIGNoYXJhY3RlcidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuICByb2xlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IE9iamVjdC5rZXlzKFJvbGVzKSxcbiAgICBkZWZhdWx0OiBSb2xlcy5Vc2VyLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBzcGVjaWZ5IHVzZXIgcm9sZSddLFxuICB9LFxuICBhY2NlcHRUZXJtczoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIGFjY2VwdCB0ZXJtcyddLFxuICB9LFxufSk7XG5cbnVzZXJTY2hlbWEuc2V0KCd0aW1lc3RhbXBzJywgdHJ1ZSk7XG5cbnVzZXJTY2hlbWEuc2V0KCd0b0pTT04nLCB7XG4gIHRyYW5zZm9ybTogZnVuY3Rpb24gKGRvYywgcmV0KSB7XG4gICAgcmV0LmlkID0gcmV0Ll9pZC50b0hleFN0cmluZygpO1xuICAgIGRlbGV0ZSByZXQuX2lkO1xuICAgIGRlbGV0ZSByZXQuX192O1xuICAgIHJldHVybiByZXQ7XG4gIH0sXG59KTtcblxudXNlclNjaGVtYS5zdGF0aWMoJ2lzRW1haWxUYWtlbicsIGFzeW5jIGZ1bmN0aW9uIChlbWFpbCwgZXhjbHVkZVVzZXJJZCkge1xuICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5maW5kT25lKHsgZW1haWwsIF9pZDogeyAkbmU6IGV4Y2x1ZGVVc2VySWQgfSB9KTtcbiAgcmV0dXJuICEhdXNlcjtcbn0pO1xuXG51c2VyU2NoZW1hLm1ldGhvZCgnaXNQYXNzd29yZE1hdGNoJywgYXN5bmMgZnVuY3Rpb24gKHBhc3N3b3JkKSB7XG4gIGNvbnN0IHVzZXIgPSB0aGlzO1xuICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xufSk7XG5cbnVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24gKG5leHQpIHtcbiAgY29uc3QgdXNlciA9IHRoaXM7XG4gIGlmICh1c2VyLmlzTW9kaWZpZWQoJ3Bhc3N3b3JkJykpIHtcbiAgICB1c2VyLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godXNlci5wYXNzd29yZCwgOCk7XG4gIH1cbiAgbmV4dCgpO1xufSk7XG5cbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBVc2VyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFB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","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_validator","_bcrypt","_roles","obj","__esModule","default","userSchema","mongoose","Schema","name","type","String","required","trim","email","unique","lowercase","validate","value","validator","isEmail","Error","username","minlength","match","phone","maxlength","password","role","enum","Object","keys","Roles","User","acceptTerms","Boolean","set","transform","doc","ret","id","_id","toHexString","__v","static","excludeUserId","user","findOne","$ne","method","bcrypt","compare","pre","next","isModified","hash","model","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/","sources":["user-model.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport validator from 'validator';\nimport bcrypt from 'bcrypt';\nimport Roles from '../config/roles';\n\nconst userSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: [true, 'User name required'],\n    trim: true,\n  },\n  email: {\n    type: String,\n    required: [true, 'User email required'],\n    unique: true,\n    trim: true,\n    lowercase: true,\n    validate(value) {\n      if (!validator.isEmail(value)) {\n        throw new Error('Invalid email');\n      }\n    },\n  },\n  username: {\n    type: String,\n    required: [true, 'User username required'],\n    unique: true,\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)) {\n        throw new Error(\n          'Username must contain at least one letter and one number'\n        );\n      }\n    },\n  },\n  phone: {\n    type: String,\n    unique: true,\n    trim: true,\n    maxlength: 10,\n    validate(value) {\n      if (!value.match(/[6-9]{1}[0-9]{9}/)) {\n        throw new Error('Not a valid phone number');\n      }\n    },\n    required: [true, 'User phone number required'],\n  },\n  password: {\n    type: String,\n    required: [true, 'User password required'],\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (\n        !value.match(\n          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/\n        )\n      ) {\n        throw new Error(\n          'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character'\n        );\n      }\n    },\n  },\n  role: {\n    type: String,\n    enum: Object.keys(Roles),\n    default: Roles.User,\n    required: [true, 'Please specify user role'],\n  },\n  acceptTerms: {\n    type: Boolean,\n    default: false,\n    required: [true, 'Please accept terms'],\n  },\n});\n\nuserSchema.set('timestamps', true);\n\nuserSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  },\n});\n\nuserSchema.static('isEmailTaken', async function (email, excludeUserId) {\n  const user = await this.findOne({ email, _id: { $ne: excludeUserId } });\n  return !!user;\n});\n\nuserSchema.method('isPasswordMatch', async function (password) {\n  const user = this;\n  return bcrypt.compare(password, user.password);\n});\n\nuserSchema.pre('save', async function (next) {\n  const user = this;\n  if (user.isModified('password')) {\n    user.password = await bcrypt.hash(user.password, 8);\n  }\n  next();\n});\n\nconst User = mongoose.model('User', userSchema);\n\nexport default User;\n"],"mappings":"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"}},"mtime":1689338818615},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst Role = {\n  Admin: 'Admin',\n  User: 'User'\n};\nvar _default = Role;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb2xlIiwiQWRtaW4iLCJVc2VyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL2NvbmZpZy8iLCJzb3VyY2VzIjpbInJvbGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJvbGUgPSB7XG4gIEFkbWluOiAnQWRtaW4nLFxuICBVc2VyOiAnVXNlcicsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBSb2xlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxJQUFJLEdBQUc7RUFDWEMsS0FBSyxFQUFFLE9BQU87RUFDZEMsSUFBSSxFQUFFO0FBQ1IsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FFYUgsSUFBSTtBQUFBSSxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9","map":{"version":3,"names":["Role","Admin","User","_default","exports","default"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/","sources":["roles.js"],"sourcesContent":["const Role = {\n  Admin: 'Admin',\n  User: 'User',\n};\n\nexport default Role;\n"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAG;EACXC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE;AACR,CAAC;AAAC,IAAAC,QAAA,GAEaH,IAAI;AAAAI,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689247652453},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/permissions.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst Permission = {\n  Read: 'Read',\n  Create: 'Create',\n  Update: 'Update',\n  Delete: 'Delete'\n};\nvar _default = Permission;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQZXJtaXNzaW9uIiwiUmVhZCIsIkNyZWF0ZSIsIlVwZGF0ZSIsIkRlbGV0ZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9jb25maWcvIiwic291cmNlcyI6WyJwZXJtaXNzaW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBQZXJtaXNzaW9uID0ge1xuICBSZWFkOiAnUmVhZCcsXG4gIENyZWF0ZTogJ0NyZWF0ZScsXG4gIFVwZGF0ZTogJ1VwZGF0ZScsXG4gIERlbGV0ZTogJ0RlbGV0ZScsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBQZXJtaXNzaW9uO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxVQUFVLEdBQUc7RUFDakJDLElBQUksRUFBRSxNQUFNO0VBQ1pDLE1BQU0sRUFBRSxRQUFRO0VBQ2hCQyxNQUFNLEVBQUUsUUFBUTtFQUNoQkMsTUFBTSxFQUFFO0FBQ1YsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FFYUwsVUFBVTtBQUFBTSxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9","map":{"version":3,"names":["Permission","Read","Create","Update","Delete","_default","exports","default"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/","sources":["permissions.js"],"sourcesContent":["const Permission = {\n  Read: 'Read',\n  Create: 'Create',\n  Update: 'Update',\n  Delete: 'Delete',\n};\n\nexport default Permission;\n"],"mappings":";;;;;;AAAA,MAAMA,UAAU,GAAG;EACjBC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE,QAAQ;EAChBC,MAAM,EAAE,QAAQ;EAChBC,MAAM,EAAE;AACV,CAAC;AAAC,IAAAC,QAAA,GAEaL,UAAU;AAAAM,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689247735580},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/mongoHelpers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidId = exports.countDocumentsWithKey = exports.countDocuments = void 0;\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nconst isValidId = id => {\n  return _mongoose.Types.ObjectId.isValid(id);\n};\n\n// if (!isValidId(id)) throw 'User not found';\nexports.isValidId = isValidId;\nconst countDocuments = async modelName => {\n  return await modelName.countDocuments({});\n};\n\n// await countDocuments(User)\nexports.countDocuments = countDocuments;\nconst countDocumentsWithKey = async (modelName, value) => {\n  return await modelName.countDocuments(value);\n};\n\n// const count = await countDocumentsWithKey(User, { role: Role.Admin });\nexports.countDocumentsWithKey = countDocumentsWithKey;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJub2RlSW50ZXJvcCIsIldlYWtNYXAiLCJjYWNoZUJhYmVsSW50ZXJvcCIsImNhY2hlTm9kZUludGVyb3AiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiaXNWYWxpZElkIiwiaWQiLCJUeXBlcyIsIk9iamVjdElkIiwiaXNWYWxpZCIsImV4cG9ydHMiLCJjb3VudERvY3VtZW50cyIsIm1vZGVsTmFtZSIsImNvdW50RG9jdW1lbnRzV2l0aEtleSIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJtb25nb0hlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IFR5cGVzIH0gZnJvbSAnbW9uZ29vc2UnO1xuXG5leHBvcnQgY29uc3QgaXNWYWxpZElkID0gKGlkKSA9PiB7XG4gIHJldHVybiBUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGlkKTtcbn07XG5cbi8vIGlmICghaXNWYWxpZElkKGlkKSkgdGhyb3cgJ1VzZXIgbm90IGZvdW5kJztcblxuZXhwb3J0IGNvbnN0IGNvdW50RG9jdW1lbnRzID0gYXN5bmMgKG1vZGVsTmFtZSkgPT4ge1xuICByZXR1cm4gYXdhaXQgbW9kZWxOYW1lLmNvdW50RG9jdW1lbnRzKHt9KTtcbn07XG5cbi8vIGF3YWl0IGNvdW50RG9jdW1lbnRzKFVzZXIpXG5cbmV4cG9ydCBjb25zdCBjb3VudERvY3VtZW50c1dpdGhLZXkgPSBhc3luYyAobW9kZWxOYW1lLCB2YWx1ZSkgPT4ge1xuICByZXR1cm4gYXdhaXQgbW9kZWxOYW1lLmNvdW50RG9jdW1lbnRzKHZhbHVlKTtcbn07XG5cbi8vIGNvbnN0IGNvdW50ID0gYXdhaXQgY291bnREb2N1bWVudHNXaXRoS2V5KFVzZXIsIHsgcm9sZTogUm9sZS5BZG1pbiB9KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQWdDLFNBQUFDLHlCQUFBQyxXQUFBLGVBQUFDLE9BQUEsa0NBQUFDLGlCQUFBLE9BQUFELE9BQUEsUUFBQUUsZ0JBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSxDQUFBQyxXQUFBLFdBQUFBLFdBQUEsR0FBQUcsZ0JBQUEsR0FBQUQsaUJBQUEsS0FBQUYsV0FBQTtBQUFBLFNBQUFILHdCQUFBTyxHQUFBLEVBQUFKLFdBQUEsU0FBQUEsV0FBQSxJQUFBSSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxXQUFBRCxHQUFBLFFBQUFBLEdBQUEsb0JBQUFBLEdBQUEsd0JBQUFBLEdBQUEsNEJBQUFFLE9BQUEsRUFBQUYsR0FBQSxVQUFBRyxLQUFBLEdBQUFSLHdCQUFBLENBQUFDLFdBQUEsT0FBQU8sS0FBQSxJQUFBQSxLQUFBLENBQUFDLEdBQUEsQ0FBQUosR0FBQSxZQUFBRyxLQUFBLENBQUFFLEdBQUEsQ0FBQUwsR0FBQSxTQUFBTSxNQUFBLFdBQUFDLHFCQUFBLEdBQUFDLE1BQUEsQ0FBQUMsY0FBQSxJQUFBRCxNQUFBLENBQUFFLHdCQUFBLFdBQUFDLEdBQUEsSUFBQVgsR0FBQSxRQUFBVyxHQUFBLGtCQUFBSCxNQUFBLENBQUFJLFNBQUEsQ0FBQUMsY0FBQSxDQUFBQyxJQUFBLENBQUFkLEdBQUEsRUFBQVcsR0FBQSxTQUFBSSxJQUFBLEdBQUFSLHFCQUFBLEdBQUFDLE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQVYsR0FBQSxFQUFBVyxHQUFBLGNBQUFJLElBQUEsS0FBQUEsSUFBQSxDQUFBVixHQUFBLElBQUFVLElBQUEsQ0FBQUMsR0FBQSxLQUFBUixNQUFBLENBQUFDLGNBQUEsQ0FBQUgsTUFBQSxFQUFBSyxHQUFBLEVBQUFJLElBQUEsWUFBQVQsTUFBQSxDQUFBSyxHQUFBLElBQUFYLEdBQUEsQ0FBQVcsR0FBQSxTQUFBTCxNQUFBLENBQUFKLE9BQUEsR0FBQUYsR0FBQSxNQUFBRyxLQUFBLElBQUFBLEtBQUEsQ0FBQWEsR0FBQSxDQUFBaEIsR0FBQSxFQUFBTSxNQUFBLFlBQUFBLE1BQUE7QUFHekIsTUFBTVcsU0FBUyxHQUFJQyxFQUFFLElBQUs7RUFDL0IsT0FBT0MsZUFBSyxDQUFDQyxRQUFRLENBQUNDLE9BQU8sQ0FBQ0gsRUFBRSxDQUFDO0FBQ25DLENBQUM7O0FBRUQ7QUFBQUksT0FBQSxDQUFBTCxTQUFBLEdBQUFBLFNBQUE7QUFFTyxNQUFNTSxjQUFjLEdBQUcsTUFBT0MsU0FBUyxJQUFLO0VBQ2pELE9BQU8sTUFBTUEsU0FBUyxDQUFDRCxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0MsQ0FBQzs7QUFFRDtBQUFBRCxPQUFBLENBQUFDLGNBQUEsR0FBQUEsY0FBQTtBQUVPLE1BQU1FLHFCQUFxQixHQUFHLE1BQUFBLENBQU9ELFNBQVMsRUFBRUUsS0FBSyxLQUFLO0VBQy9ELE9BQU8sTUFBTUYsU0FBUyxDQUFDRCxjQUFjLENBQUNHLEtBQUssQ0FBQztBQUM5QyxDQUFDOztBQUVEO0FBQUFKLE9BQUEsQ0FBQUcscUJBQUEsR0FBQUEscUJBQUEifQ==","map":{"version":3,"names":["_mongoose","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","isValidId","id","Types","ObjectId","isValid","exports","countDocuments","modelName","countDocumentsWithKey","value"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/","sources":["mongoHelpers.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport { Types } from 'mongoose';\n\nexport const isValidId = (id) => {\n  return Types.ObjectId.isValid(id);\n};\n\n// if (!isValidId(id)) throw 'User not found';\n\nexport const countDocuments = async (modelName) => {\n  return await modelName.countDocuments({});\n};\n\n// await countDocuments(User)\n\nexport const countDocumentsWithKey = async (modelName, value) => {\n  return await modelName.countDocuments(value);\n};\n\n// const count = await countDocumentsWithKey(User, { role: Role.Admin });\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,uBAAA,CAAAC,OAAA;AAAgC,SAAAC,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAH,wBAAAO,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAGzB,MAAMW,SAAS,GAAIC,EAAE,IAAK;EAC/B,OAAOC,eAAK,CAACC,QAAQ,CAACC,OAAO,CAACH,EAAE,CAAC;AACnC,CAAC;;AAED;AAAAI,OAAA,CAAAL,SAAA,GAAAA,SAAA;AAEO,MAAMM,cAAc,GAAG,MAAOC,SAAS,IAAK;EACjD,OAAO,MAAMA,SAAS,CAACD,cAAc,CAAC,CAAC,CAAC,CAAC;AAC3C,CAAC;;AAED;AAAAD,OAAA,CAAAC,cAAA,GAAAA,cAAA;AAEO,MAAME,qBAAqB,GAAG,MAAAA,CAAOD,SAAS,EAAEE,KAAK,KAAK;EAC/D,OAAO,MAAMF,SAAS,CAACD,cAAc,CAACG,KAAK,CAAC;AAC9C,CAAC;;AAED;AAAAJ,OAAA,CAAAG,qBAAA,GAAAA,qBAAA"}},"mtime":1689349300487},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/mongoHelpers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidId = exports.countDocumentsWithKey = exports.countDocuments = void 0;\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nconst isValidId = id => {\n  return _mongoose.Types.ObjectId.isValid(id);\n};\n\n// if (!isValidId(id)) throw 'User not found';\nexports.isValidId = isValidId;\nconst countDocuments = async modelName => {\n  return await modelName.countDocuments({});\n};\n\n// await countDocuments(User)\nexports.countDocuments = countDocuments;\nconst countDocumentsWithKey = async (modelName, value) => {\n  return await modelName.countDocuments(value);\n};\n\n// const count = await countDocumentsWithKey(User, { role: Role.Admin });\nexports.countDocumentsWithKey = countDocumentsWithKey;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJub2RlSW50ZXJvcCIsIldlYWtNYXAiLCJjYWNoZUJhYmVsSW50ZXJvcCIsImNhY2hlTm9kZUludGVyb3AiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiaXNWYWxpZElkIiwiaWQiLCJUeXBlcyIsIk9iamVjdElkIiwiaXNWYWxpZCIsImV4cG9ydHMiLCJjb3VudERvY3VtZW50cyIsIm1vZGVsTmFtZSIsImNvdW50RG9jdW1lbnRzV2l0aEtleSIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJtb25nb0hlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IFR5cGVzIH0gZnJvbSAnbW9uZ29vc2UnO1xuXG5leHBvcnQgY29uc3QgaXNWYWxpZElkID0gKGlkKSA9PiB7XG4gIHJldHVybiBUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGlkKTtcbn07XG5cbi8vIGlmICghaXNWYWxpZElkKGlkKSkgdGhyb3cgJ1VzZXIgbm90IGZvdW5kJztcblxuZXhwb3J0IGNvbnN0IGNvdW50RG9jdW1lbnRzID0gYXN5bmMgKG1vZGVsTmFtZSkgPT4ge1xuICByZXR1cm4gYXdhaXQgbW9kZWxOYW1lLmNvdW50RG9jdW1lbnRzKHt9KTtcbn07XG5cbi8vIGF3YWl0IGNvdW50RG9jdW1lbnRzKFVzZXIpXG5cbmV4cG9ydCBjb25zdCBjb3VudERvY3VtZW50c1dpdGhLZXkgPSBhc3luYyAobW9kZWxOYW1lLCB2YWx1ZSkgPT4ge1xuICByZXR1cm4gYXdhaXQgbW9kZWxOYW1lLmNvdW50RG9jdW1lbnRzKHZhbHVlKTtcbn07XG5cbi8vIGNvbnN0IGNvdW50ID0gYXdhaXQgY291bnREb2N1bWVudHNXaXRoS2V5KFVzZXIsIHsgcm9sZTogUm9sZS5BZG1pbiB9KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQWdDLFNBQUFDLHlCQUFBQyxXQUFBLGVBQUFDLE9BQUEsa0NBQUFDLGlCQUFBLE9BQUFELE9BQUEsUUFBQUUsZ0JBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSxDQUFBQyxXQUFBLFdBQUFBLFdBQUEsR0FBQUcsZ0JBQUEsR0FBQUQsaUJBQUEsS0FBQUYsV0FBQTtBQUFBLFNBQUFILHdCQUFBTyxHQUFBLEVBQUFKLFdBQUEsU0FBQUEsV0FBQSxJQUFBSSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxXQUFBRCxHQUFBLFFBQUFBLEdBQUEsb0JBQUFBLEdBQUEsd0JBQUFBLEdBQUEsNEJBQUFFLE9BQUEsRUFBQUYsR0FBQSxVQUFBRyxLQUFBLEdBQUFSLHdCQUFBLENBQUFDLFdBQUEsT0FBQU8sS0FBQSxJQUFBQSxLQUFBLENBQUFDLEdBQUEsQ0FBQUosR0FBQSxZQUFBRyxLQUFBLENBQUFFLEdBQUEsQ0FBQUwsR0FBQSxTQUFBTSxNQUFBLFdBQUFDLHFCQUFBLEdBQUFDLE1BQUEsQ0FBQUMsY0FBQSxJQUFBRCxNQUFBLENBQUFFLHdCQUFBLFdBQUFDLEdBQUEsSUFBQVgsR0FBQSxRQUFBVyxHQUFBLGtCQUFBSCxNQUFBLENBQUFJLFNBQUEsQ0FBQUMsY0FBQSxDQUFBQyxJQUFBLENBQUFkLEdBQUEsRUFBQVcsR0FBQSxTQUFBSSxJQUFBLEdBQUFSLHFCQUFBLEdBQUFDLE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQVYsR0FBQSxFQUFBVyxHQUFBLGNBQUFJLElBQUEsS0FBQUEsSUFBQSxDQUFBVixHQUFBLElBQUFVLElBQUEsQ0FBQUMsR0FBQSxLQUFBUixNQUFBLENBQUFDLGNBQUEsQ0FBQUgsTUFBQSxFQUFBSyxHQUFBLEVBQUFJLElBQUEsWUFBQVQsTUFBQSxDQUFBSyxHQUFBLElBQUFYLEdBQUEsQ0FBQVcsR0FBQSxTQUFBTCxNQUFBLENBQUFKLE9BQUEsR0FBQUYsR0FBQSxNQUFBRyxLQUFBLElBQUFBLEtBQUEsQ0FBQWEsR0FBQSxDQUFBaEIsR0FBQSxFQUFBTSxNQUFBLFlBQUFBLE1BQUE7QUFHekIsTUFBTVcsU0FBUyxHQUFJQyxFQUFFLElBQUs7RUFDL0IsT0FBT0MsZUFBSyxDQUFDQyxRQUFRLENBQUNDLE9BQU8sQ0FBQ0gsRUFBRSxDQUFDO0FBQ25DLENBQUM7O0FBRUQ7QUFBQUksT0FBQSxDQUFBTCxTQUFBLEdBQUFBLFNBQUE7QUFFTyxNQUFNTSxjQUFjLEdBQUcsTUFBT0MsU0FBUyxJQUFLO0VBQ2pELE9BQU8sTUFBTUEsU0FBUyxDQUFDRCxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0MsQ0FBQzs7QUFFRDtBQUFBRCxPQUFBLENBQUFDLGNBQUEsR0FBQUEsY0FBQTtBQUVPLE1BQU1FLHFCQUFxQixHQUFHLE1BQUFBLENBQU9ELFNBQVMsRUFBRUUsS0FBSyxLQUFLO0VBQy9ELE9BQU8sTUFBTUYsU0FBUyxDQUFDRCxjQUFjLENBQUNHLEtBQUssQ0FBQztBQUM5QyxDQUFDOztBQUVEO0FBQUFKLE9BQUEsQ0FBQUcscUJBQUEsR0FBQUEscUJBQUEifQ==","map":{"version":3,"names":["_mongoose","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","isValidId","id","Types","ObjectId","isValid","exports","countDocuments","modelName","countDocumentsWithKey","value"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/database/","sources":["mongoHelpers.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport { Types } from 'mongoose';\n\nexport const isValidId = (id) => {\n  return Types.ObjectId.isValid(id);\n};\n\n// if (!isValidId(id)) throw 'User not found';\n\nexport const countDocuments = async (modelName) => {\n  return await modelName.countDocuments({});\n};\n\n// await countDocuments(User)\n\nexport const countDocumentsWithKey = async (modelName, value) => {\n  return await modelName.countDocuments(value);\n};\n\n// const count = await countDocumentsWithKey(User, { role: Role.Admin });\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,uBAAA,CAAAC,OAAA;AAAgC,SAAAC,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAH,wBAAAO,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAGzB,MAAMW,SAAS,GAAIC,EAAE,IAAK;EAC/B,OAAOC,eAAK,CAACC,QAAQ,CAACC,OAAO,CAACH,EAAE,CAAC;AACnC,CAAC;;AAED;AAAAI,OAAA,CAAAL,SAAA,GAAAA,SAAA;AAEO,MAAMM,cAAc,GAAG,MAAOC,SAAS,IAAK;EACjD,OAAO,MAAMA,SAAS,CAACD,cAAc,CAAC,CAAC,CAAC,CAAC;AAC3C,CAAC;;AAED;AAAAD,OAAA,CAAAC,cAAA,GAAAA,cAAA;AAEO,MAAME,qBAAqB,GAAG,MAAAA,CAAOD,SAAS,EAAEE,KAAK,KAAK;EAC/D,OAAO,MAAMF,SAAS,CAACD,cAAc,CAACG,KAAK,CAAC;AAC9C,CAAC;;AAED;AAAAJ,OAAA,CAAAG,qBAAA,GAAAA,qBAAA"}},"mtime":1689349300487},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/validation/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/validation/auth-validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar J = _interopRequireWildcard(require(\"../helpers/validation-helper\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar _default = {\n  register: {\n    body: J.ObjectKeys({\n      name: J.name.min(5).max(30).trim(true).escapeHTML().required(),\n      username: J.username.min(8).max(30).trim(true).escapeHTML().required(),\n      phone: J.phone.trim(true).escapeHTML().required(),\n      email: J.email.email().trim(true).escapeHTML().required(),\n      password: J.password.custom(J.checkPassword).min(8).max(30).trim(true).escapeHTML().required(),\n      confirmPassword: J.confirmPassword.trim(true).escapeHTML().required(),\n      acceptTerms: J.acceptTerms.required()\n    })\n  },\n  loginWithEmail: {\n    body: J.ObjectKeys({\n      email: J.email.email().trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  },\n  loginWithUsername: {\n    body: J.ObjectKeys({\n      username: J.username.min(8).max(30).trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  },\n  loginWithPhone: {\n    body: J.ObjectKeys({\n      phone: J.phone.trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  }\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwibm9kZUludGVyb3AiLCJXZWFrTWFwIiwiY2FjaGVCYWJlbEludGVyb3AiLCJjYWNoZU5vZGVJbnRlcm9wIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjYWNoZSIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsIl9kZWZhdWx0IiwicmVnaXN0ZXIiLCJib2R5IiwiT2JqZWN0S2V5cyIsIm5hbWUiLCJtaW4iLCJtYXgiLCJ0cmltIiwiZXNjYXBlSFRNTCIsInJlcXVpcmVkIiwidXNlcm5hbWUiLCJwaG9uZSIsImVtYWlsIiwicGFzc3dvcmQiLCJjdXN0b20iLCJjaGVja1Bhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiYWNjZXB0VGVybXMiLCJsb2dpbldpdGhFbWFpbCIsIm9wdGlvbmFsIiwibG9naW5XaXRoVXNlcm5hbWUiLCJsb2dpbldpdGhQaG9uZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy92YWxpZGF0aW9uLyIsInNvdXJjZXMiOlsiYXV0aC12YWxpZGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEogZnJvbSAnLi4vaGVscGVycy92YWxpZGF0aW9uLWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcmVnaXN0ZXI6IHtcbiAgICBib2R5OiBKLk9iamVjdEtleXMoe1xuICAgICAgbmFtZTogSi5uYW1lLm1pbig1KS5tYXgoMzApLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLnJlcXVpcmVkKCksXG4gICAgICB1c2VybmFtZTogSi51c2VybmFtZS5taW4oOCkubWF4KDMwKS50cmltKHRydWUpLmVzY2FwZUhUTUwoKS5yZXF1aXJlZCgpLFxuICAgICAgcGhvbmU6IEoucGhvbmUudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkucmVxdWlyZWQoKSxcbiAgICAgIGVtYWlsOiBKLmVtYWlsLmVtYWlsKCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkucmVxdWlyZWQoKSxcbiAgICAgIHBhc3N3b3JkOiBKLnBhc3N3b3JkXG4gICAgICAgIC5jdXN0b20oSi5jaGVja1Bhc3N3b3JkKVxuICAgICAgICAubWluKDgpXG4gICAgICAgIC5tYXgoMzApXG4gICAgICAgIC50cmltKHRydWUpXG4gICAgICAgIC5lc2NhcGVIVE1MKClcbiAgICAgICAgLnJlcXVpcmVkKCksXG4gICAgICBjb25maXJtUGFzc3dvcmQ6IEouY29uZmlybVBhc3N3b3JkLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLnJlcXVpcmVkKCksXG4gICAgICBhY2NlcHRUZXJtczogSi5hY2NlcHRUZXJtcy5yZXF1aXJlZCgpLFxuICAgIH0pLFxuICB9LFxuICBsb2dpbldpdGhFbWFpbDoge1xuICAgIGJvZHk6IEouT2JqZWN0S2V5cyh7XG4gICAgICBlbWFpbDogSi5lbWFpbC5lbWFpbCgpLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLm9wdGlvbmFsKCksXG4gICAgICBwYXNzd29yZDogSi5wYXNzd29yZC5taW4oOCkubWF4KDMwKS50cmltKHRydWUpLmVzY2FwZUhUTUwoKSxcbiAgICB9KSxcbiAgfSxcbiAgbG9naW5XaXRoVXNlcm5hbWU6IHtcbiAgICBib2R5OiBKLk9iamVjdEtleXMoe1xuICAgICAgdXNlcm5hbWU6IEoudXNlcm5hbWUubWluKDgpLm1heCgzMCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkub3B0aW9uYWwoKSxcbiAgICAgIHBhc3N3b3JkOiBKLnBhc3N3b3JkLm1pbig4KS5tYXgoMzApLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLFxuICAgIH0pLFxuICB9LFxuICBsb2dpbldpdGhQaG9uZToge1xuICAgIGJvZHk6IEouT2JqZWN0S2V5cyh7XG4gICAgICBwaG9uZTogSi5waG9uZS50cmltKHRydWUpLmVzY2FwZUhUTUwoKS5vcHRpb25hbCgpLFxuICAgICAgcGFzc3dvcmQ6IEoucGFzc3dvcmQubWluKDgpLm1heCgzMCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCksXG4gICAgfSksXG4gIH0sXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxDQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFBa0QsU0FBQUMseUJBQUFDLFdBQUEsZUFBQUMsT0FBQSxrQ0FBQUMsaUJBQUEsT0FBQUQsT0FBQSxRQUFBRSxnQkFBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLENBQUFDLFdBQUEsV0FBQUEsV0FBQSxHQUFBRyxnQkFBQSxHQUFBRCxpQkFBQSxLQUFBRixXQUFBO0FBQUEsU0FBQUgsd0JBQUFPLEdBQUEsRUFBQUosV0FBQSxTQUFBQSxXQUFBLElBQUFJLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLFdBQUFELEdBQUEsUUFBQUEsR0FBQSxvQkFBQUEsR0FBQSx3QkFBQUEsR0FBQSw0QkFBQUUsT0FBQSxFQUFBRixHQUFBLFVBQUFHLEtBQUEsR0FBQVIsd0JBQUEsQ0FBQUMsV0FBQSxPQUFBTyxLQUFBLElBQUFBLEtBQUEsQ0FBQUMsR0FBQSxDQUFBSixHQUFBLFlBQUFHLEtBQUEsQ0FBQUUsR0FBQSxDQUFBTCxHQUFBLFNBQUFNLE1BQUEsV0FBQUMscUJBQUEsR0FBQUMsTUFBQSxDQUFBQyxjQUFBLElBQUFELE1BQUEsQ0FBQUUsd0JBQUEsV0FBQUMsR0FBQSxJQUFBWCxHQUFBLFFBQUFXLEdBQUEsa0JBQUFILE1BQUEsQ0FBQUksU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWQsR0FBQSxFQUFBVyxHQUFBLFNBQUFJLElBQUEsR0FBQVIscUJBQUEsR0FBQUMsTUFBQSxDQUFBRSx3QkFBQSxDQUFBVixHQUFBLEVBQUFXLEdBQUEsY0FBQUksSUFBQSxLQUFBQSxJQUFBLENBQUFWLEdBQUEsSUFBQVUsSUFBQSxDQUFBQyxHQUFBLEtBQUFSLE1BQUEsQ0FBQUMsY0FBQSxDQUFBSCxNQUFBLEVBQUFLLEdBQUEsRUFBQUksSUFBQSxZQUFBVCxNQUFBLENBQUFLLEdBQUEsSUFBQVgsR0FBQSxDQUFBVyxHQUFBLFNBQUFMLE1BQUEsQ0FBQUosT0FBQSxHQUFBRixHQUFBLE1BQUFHLEtBQUEsSUFBQUEsS0FBQSxDQUFBYSxHQUFBLENBQUFoQixHQUFBLEVBQUFNLE1BQUEsWUFBQUEsTUFBQTtBQUFBLElBQUFXLFFBQUEsR0FFbkM7RUFDYkMsUUFBUSxFQUFFO0lBQ1JDLElBQUksRUFBRTNCLENBQUMsQ0FBQzRCLFVBQVUsQ0FBQztNQUNqQkMsSUFBSSxFQUFFN0IsQ0FBQyxDQUFDNkIsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDQyxVQUFVLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQztNQUM5REMsUUFBUSxFQUFFbkMsQ0FBQyxDQUFDbUMsUUFBUSxDQUFDTCxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDQyxVQUFVLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQztNQUN0RUUsS0FBSyxFQUFFcEMsQ0FBQyxDQUFDb0MsS0FBSyxDQUFDSixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FBQyxDQUFDO01BQ2pERyxLQUFLLEVBQUVyQyxDQUFDLENBQUNxQyxLQUFLLENBQUNBLEtBQUssQ0FBQyxDQUFDLENBQUNMLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQ0MsVUFBVSxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUM7TUFDekRJLFFBQVEsRUFBRXRDLENBQUMsQ0FBQ3NDLFFBQVEsQ0FDakJDLE1BQU0sQ0FBQ3ZDLENBQUMsQ0FBQ3dDLGFBQWEsQ0FBQyxDQUN2QlYsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUNOQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQ1BDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FDVkMsVUFBVSxDQUFDLENBQUMsQ0FDWkMsUUFBUSxDQUFDLENBQUM7TUFDYk8sZUFBZSxFQUFFekMsQ0FBQyxDQUFDeUMsZUFBZSxDQUFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FBQyxDQUFDO01BQ3JFUSxXQUFXLEVBQUUxQyxDQUFDLENBQUMwQyxXQUFXLENBQUNSLFFBQVEsQ0FBQztJQUN0QyxDQUFDO0VBQ0gsQ0FBQztFQUNEUyxjQUFjLEVBQUU7SUFDZGhCLElBQUksRUFBRTNCLENBQUMsQ0FBQzRCLFVBQVUsQ0FBQztNQUNqQlMsS0FBSyxFQUFFckMsQ0FBQyxDQUFDcUMsS0FBSyxDQUFDQSxLQUFLLENBQUMsQ0FBQyxDQUFDTCxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxDQUFDLENBQUNXLFFBQVEsQ0FBQyxDQUFDO01BQ3pETixRQUFRLEVBQUV0QyxDQUFDLENBQUNzQyxRQUFRLENBQUNSLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUNDLFVBQVUsQ0FBQztJQUM1RCxDQUFDO0VBQ0gsQ0FBQztFQUNEWSxpQkFBaUIsRUFBRTtJQUNqQmxCLElBQUksRUFBRTNCLENBQUMsQ0FBQzRCLFVBQVUsQ0FBQztNQUNqQk8sUUFBUSxFQUFFbkMsQ0FBQyxDQUFDbUMsUUFBUSxDQUFDTCxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDQyxVQUFVLENBQUMsQ0FBQyxDQUFDVyxRQUFRLENBQUMsQ0FBQztNQUN0RU4sUUFBUSxFQUFFdEMsQ0FBQyxDQUFDc0MsUUFBUSxDQUFDUixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDQyxVQUFVLENBQUM7SUFDNUQsQ0FBQztFQUNILENBQUM7RUFDRGEsY0FBYyxFQUFFO0lBQ2RuQixJQUFJLEVBQUUzQixDQUFDLENBQUM0QixVQUFVLENBQUM7TUFDakJRLEtBQUssRUFBRXBDLENBQUMsQ0FBQ29DLEtBQUssQ0FBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDQyxVQUFVLENBQUMsQ0FBQyxDQUFDVyxRQUFRLENBQUMsQ0FBQztNQUNqRE4sUUFBUSxFQUFFdEMsQ0FBQyxDQUFDc0MsUUFBUSxDQUFDUixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDQyxVQUFVLENBQUM7SUFDNUQsQ0FBQztFQUNIO0FBQ0YsQ0FBQztBQUFBYyxPQUFBLENBQUFyQyxPQUFBLEdBQUFlLFFBQUEifQ==","map":{"version":3,"names":["J","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_default","register","body","ObjectKeys","name","min","max","trim","escapeHTML","required","username","phone","email","password","custom","checkPassword","confirmPassword","acceptTerms","loginWithEmail","optional","loginWithUsername","loginWithPhone","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/validation/","sources":["auth-validation.js"],"sourcesContent":["import * as J from '../helpers/validation-helper';\n\nexport default {\n  register: {\n    body: J.ObjectKeys({\n      name: J.name.min(5).max(30).trim(true).escapeHTML().required(),\n      username: J.username.min(8).max(30).trim(true).escapeHTML().required(),\n      phone: J.phone.trim(true).escapeHTML().required(),\n      email: J.email.email().trim(true).escapeHTML().required(),\n      password: J.password\n        .custom(J.checkPassword)\n        .min(8)\n        .max(30)\n        .trim(true)\n        .escapeHTML()\n        .required(),\n      confirmPassword: J.confirmPassword.trim(true).escapeHTML().required(),\n      acceptTerms: J.acceptTerms.required(),\n    }),\n  },\n  loginWithEmail: {\n    body: J.ObjectKeys({\n      email: J.email.email().trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n  loginWithUsername: {\n    body: J.ObjectKeys({\n      username: J.username.min(8).max(30).trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n  loginWithPhone: {\n    body: J.ObjectKeys({\n      phone: J.phone.trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n};\n"],"mappings":"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"}},"mtime":1690033078386},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/validation-helper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.username = exports.token = exports.role = exports.revokeToken = exports.refreshToken = exports.phone = exports.password = exports.objectId = exports.name = exports.id = exports.email = exports.confirmPassword = exports.checkPassword = exports.acceptTerms = exports.UpdRole = exports.UpdPassword = exports.UpdName = exports.UpdEmail = exports.UpdConfirmPassword = exports.ObjectKeys = void 0;\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nvar _customJoi = _interopRequireDefault(require(\"../utils/customJoi\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst checkPassword = (value, helpers) => {\n  if (value.length < 8) {\n    return helpers.message({\n      custom: 'password must be at least 8 characters'\n    });\n  } else if (!value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/)) {\n    return helpers.message({\n      custom: 'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character'\n    });\n  }\n  return value;\n};\nexports.checkPassword = checkPassword;\nconst objectId = (value, helpers) => {\n  if (!value.match(/^[0-9a-fA-F]{24}$/)) {\n    return helpers.message({\n      custom: '\"{{#label}}\" must be a valid mongo id'\n    });\n  }\n  return value;\n};\nexports.objectId = objectId;\nconst id = _customJoi.default.string().custom(objectId);\nexports.id = id;\nconst email = _customJoi.default.string();\nexports.email = email;\nconst password = _customJoi.default.string().required();\nexports.password = password;\nconst confirmPassword = _customJoi.default.string().valid(_customJoi.default.ref('password')).required().messages({\n  'any.only': 'Both passwords must match'\n});\n\n// .label('Confirm password')\n// .options({ messages: { 'any.only': 'Both passwords must match' } });\n// .messages({ 'any.only': '{{#label}} does not match' });\nexports.confirmPassword = confirmPassword;\nconst name = _customJoi.default.string().required();\nexports.name = name;\nconst username = _customJoi.default.string().pattern(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/).messages({\n  'string.pattern.base': 'At least 1 letter and 1 number'\n});\nexports.username = username;\nconst phone = _customJoi.default.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).messages({\n  'string.pattern.base': 'Not a valid phone number'\n});\nexports.phone = phone;\nconst token = _customJoi.default.string().required();\nexports.token = token;\nconst refreshToken = _customJoi.default.string().required();\nexports.refreshToken = refreshToken;\nconst revokeToken = _customJoi.default.string().empty('');\nexports.revokeToken = revokeToken;\nconst acceptTerms = _customJoi.default.boolean().valid(true).required().messages({\n  'any.only': 'Please accept terms'\n});\nexports.acceptTerms = acceptTerms;\nconst role = _customJoi.default.string().valid(_roles.default.Admin, _roles.default.User).required();\nexports.role = role;\nconst ObjectKeys = keys => {\n  return _customJoi.default.object().keys({\n    ...keys\n  });\n};\n\n// name: J.name,\n//     email: J.email.email(),\n//     password: J.password.custom(J.checkPassword),\n//     confirmPassword: J.confirmPassword,\n//     acceptTerms: J.acceptTerms,\n//     role: J.role,\nexports.ObjectKeys = ObjectKeys;\nconst UpdName = _customJoi.default.string().empty('');\nexports.UpdName = UpdName;\nconst UpdEmail = _customJoi.default.string().empty('');\nexports.UpdEmail = UpdEmail;\nconst UpdPassword = _customJoi.default.string().empty('');\nexports.UpdPassword = UpdPassword;\nconst UpdConfirmPassword = _customJoi.default.string().valid(_customJoi.default.ref('password')).messages({\n  'any.only': 'Both passwords must match'\n}).empty('');\nexports.UpdConfirmPassword = UpdConfirmPassword;\nconst UpdRole = _customJoi.default.string().valid(_roles.default.Admin, _roles.default.User).empty('');\n\n// const validation = joi.object({\n//   userName: joi.string().alphanum().min(3).max(25).trim(true).required(),\n//   email: joi.string().email().trim(true).required(),\n//   password: joi.string().min(8).trim(true).required(),\n//   mobileNumber: joi.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).required(),\n//   birthYear: joi.number().integer().min(1920).max(2000),\n//   skillSet: joi.array().items(joi.string().alphanum().trim(true))\n// .default([]),\n//  is_active: joi.boolean().default(true),\n\n// export const lessonSchema = Joi.object().keys({\n//   courseId: Joi.number().integer().required(),\n//   url: Joi.string().trim().uri().required(),\n//   description: Joi.string().trim(),\n//   thumbnailUrl: Joi.string().uri(),\n//   title: Joi.string().trim().required(),\n//   duration: Joi.string(),\n//   seqNo: Joi.number(),\n//   createdAt: Joi.date(),\n//   updatedAt: Joi.date()\n// });\nexports.UpdRole = UpdRole;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcm9sZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jdXN0b21Kb2kiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNoZWNrUGFzc3dvcmQiLCJ2YWx1ZSIsImhlbHBlcnMiLCJsZW5ndGgiLCJtZXNzYWdlIiwiY3VzdG9tIiwibWF0Y2giLCJleHBvcnRzIiwib2JqZWN0SWQiLCJpZCIsImN1c3RvbUpvaSIsInN0cmluZyIsImVtYWlsIiwicGFzc3dvcmQiLCJyZXF1aXJlZCIsImNvbmZpcm1QYXNzd29yZCIsInZhbGlkIiwicmVmIiwibWVzc2FnZXMiLCJuYW1lIiwidXNlcm5hbWUiLCJwYXR0ZXJuIiwicGhvbmUiLCJ0b2tlbiIsInJlZnJlc2hUb2tlbiIsInJldm9rZVRva2VuIiwiZW1wdHkiLCJhY2NlcHRUZXJtcyIsImJvb2xlYW4iLCJyb2xlIiwiUm9sZSIsIkFkbWluIiwiVXNlciIsIk9iamVjdEtleXMiLCJrZXlzIiwib2JqZWN0IiwiVXBkTmFtZSIsIlVwZEVtYWlsIiwiVXBkUGFzc3dvcmQiLCJVcGRDb25maXJtUGFzc3dvcmQiLCJVcGRSb2xlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvaGVscGVycy8iLCJzb3VyY2VzIjpbInZhbGlkYXRpb24taGVscGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb2xlIGZyb20gJy4uL2NvbmZpZy9yb2xlcyc7XG5pbXBvcnQgY3VzdG9tSm9pIGZyb20gJy4uL3V0aWxzL2N1c3RvbUpvaSc7XG5cbmV4cG9ydCBjb25zdCBjaGVja1Bhc3N3b3JkID0gKHZhbHVlLCBoZWxwZXJzKSA9PiB7XG4gIGlmICh2YWx1ZS5sZW5ndGggPCA4KSB7XG4gICAgcmV0dXJuIGhlbHBlcnMubWVzc2FnZSh7XG4gICAgICBjdXN0b206ICdwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycycsXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoXG4gICAgIXZhbHVlLm1hdGNoKFxuICAgICAgL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcXGQpKD89LipbIyRAISUmKj9dKVtBLVphLXpcXGQjJEAhJSYqP117OCwzMH0kL1xuICAgIClcbiAgKSB7XG4gICAgcmV0dXJuIGhlbHBlcnMubWVzc2FnZSh7XG4gICAgICBjdXN0b206XG4gICAgICAgICdBdGxlYXN0IDEgbGV0dGVyLCAxIG51bWJlciwgMSBzcGVjaWFsIGNoYXJhY3RlciBhbmQgU0hPVUxEIE5PVCBzdGFydCB3aXRoIGEgc3BlY2lhbCBjaGFyYWN0ZXInLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBvYmplY3RJZCA9ICh2YWx1ZSwgaGVscGVycykgPT4ge1xuICBpZiAoIXZhbHVlLm1hdGNoKC9eWzAtOWEtZkEtRl17MjR9JC8pKSB7XG4gICAgcmV0dXJuIGhlbHBlcnMubWVzc2FnZSh7IGN1c3RvbTogJ1wie3sjbGFiZWx9fVwiIG11c3QgYmUgYSB2YWxpZCBtb25nbyBpZCcgfSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuZXhwb3J0IGNvbnN0IGlkID0gY3VzdG9tSm9pLnN0cmluZygpLmN1c3RvbShvYmplY3RJZCk7XG5cbmV4cG9ydCBjb25zdCBlbWFpbCA9IGN1c3RvbUpvaS5zdHJpbmcoKTtcblxuZXhwb3J0IGNvbnN0IHBhc3N3b3JkID0gY3VzdG9tSm9pLnN0cmluZygpLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCBjb25zdCBjb25maXJtUGFzc3dvcmQgPSBjdXN0b21Kb2lcbiAgLnN0cmluZygpXG4gIC52YWxpZChjdXN0b21Kb2kucmVmKCdwYXNzd29yZCcpKVxuICAucmVxdWlyZWQoKVxuICAubWVzc2FnZXMoeyAnYW55Lm9ubHknOiAnQm90aCBwYXNzd29yZHMgbXVzdCBtYXRjaCcgfSk7XG5cbi8vIC5sYWJlbCgnQ29uZmlybSBwYXNzd29yZCcpXG4vLyAub3B0aW9ucyh7IG1lc3NhZ2VzOiB7ICdhbnkub25seSc6ICdCb3RoIHBhc3N3b3JkcyBtdXN0IG1hdGNoJyB9IH0pO1xuLy8gLm1lc3NhZ2VzKHsgJ2FueS5vbmx5JzogJ3t7I2xhYmVsfX0gZG9lcyBub3QgbWF0Y2gnIH0pO1xuXG5leHBvcnQgY29uc3QgbmFtZSA9IGN1c3RvbUpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpO1xuXG5leHBvcnQgY29uc3QgdXNlcm5hbWUgPSBjdXN0b21Kb2lcbiAgLnN0cmluZygpXG4gIC5wYXR0ZXJuKC9eKD89LipbMC05XSkoPz0uKlthLXpBLVpdKShbYS16QS1aMC05XSspJC8pXG4gIC5tZXNzYWdlcyh7ICdzdHJpbmcucGF0dGVybi5iYXNlJzogJ0F0IGxlYXN0IDEgbGV0dGVyIGFuZCAxIG51bWJlcicgfSk7XG5cbmV4cG9ydCBjb25zdCBwaG9uZSA9IGN1c3RvbUpvaVxuICAuc3RyaW5nKClcbiAgLmxlbmd0aCgxMClcbiAgLnBhdHRlcm4oL1s2LTldezF9WzAtOV17OX0vKVxuICAubWVzc2FnZXMoeyAnc3RyaW5nLnBhdHRlcm4uYmFzZSc6ICdOb3QgYSB2YWxpZCBwaG9uZSBudW1iZXInIH0pO1xuXG5leHBvcnQgY29uc3QgdG9rZW4gPSBjdXN0b21Kb2kuc3RyaW5nKCkucmVxdWlyZWQoKTtcblxuZXhwb3J0IGNvbnN0IHJlZnJlc2hUb2tlbiA9IGN1c3RvbUpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpO1xuXG5leHBvcnQgY29uc3QgcmV2b2tlVG9rZW4gPSBjdXN0b21Kb2kuc3RyaW5nKCkuZW1wdHkoJycpO1xuXG5leHBvcnQgY29uc3QgYWNjZXB0VGVybXMgPSBjdXN0b21Kb2lcbiAgLmJvb2xlYW4oKVxuICAudmFsaWQodHJ1ZSlcbiAgLnJlcXVpcmVkKClcbiAgLm1lc3NhZ2VzKHsgJ2FueS5vbmx5JzogJ1BsZWFzZSBhY2NlcHQgdGVybXMnIH0pO1xuXG5leHBvcnQgY29uc3Qgcm9sZSA9IGN1c3RvbUpvaS5zdHJpbmcoKS52YWxpZChSb2xlLkFkbWluLCBSb2xlLlVzZXIpLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCBjb25zdCBPYmplY3RLZXlzID0gKGtleXMpID0+IHtcbiAgcmV0dXJuIGN1c3RvbUpvaS5vYmplY3QoKS5rZXlzKHsgLi4ua2V5cyB9KTtcbn07XG5cbi8vIG5hbWU6IEoubmFtZSxcbi8vICAgICBlbWFpbDogSi5lbWFpbC5lbWFpbCgpLFxuLy8gICAgIHBhc3N3b3JkOiBKLnBhc3N3b3JkLmN1c3RvbShKLmNoZWNrUGFzc3dvcmQpLFxuLy8gICAgIGNvbmZpcm1QYXNzd29yZDogSi5jb25maXJtUGFzc3dvcmQsXG4vLyAgICAgYWNjZXB0VGVybXM6IEouYWNjZXB0VGVybXMsXG4vLyAgICAgcm9sZTogSi5yb2xlLFxuXG5leHBvcnQgY29uc3QgVXBkTmFtZSA9IGN1c3RvbUpvaS5zdHJpbmcoKS5lbXB0eSgnJyk7XG5leHBvcnQgY29uc3QgVXBkRW1haWwgPSBjdXN0b21Kb2kuc3RyaW5nKCkuZW1wdHkoJycpO1xuZXhwb3J0IGNvbnN0IFVwZFBhc3N3b3JkID0gY3VzdG9tSm9pLnN0cmluZygpLmVtcHR5KCcnKTtcbmV4cG9ydCBjb25zdCBVcGRDb25maXJtUGFzc3dvcmQgPSBjdXN0b21Kb2lcbiAgLnN0cmluZygpXG4gIC52YWxpZChjdXN0b21Kb2kucmVmKCdwYXNzd29yZCcpKVxuICAubWVzc2FnZXMoeyAnYW55Lm9ubHknOiAnQm90aCBwYXNzd29yZHMgbXVzdCBtYXRjaCcgfSlcbiAgLmVtcHR5KCcnKTtcbmV4cG9ydCBjb25zdCBVcGRSb2xlID0gY3VzdG9tSm9pXG4gIC5zdHJpbmcoKVxuICAudmFsaWQoUm9sZS5BZG1pbiwgUm9sZS5Vc2VyKVxuICAuZW1wdHkoJycpO1xuXG4vLyBjb25zdCB2YWxpZGF0aW9uID0gam9pLm9iamVjdCh7XG4vLyAgIHVzZXJOYW1lOiBqb2kuc3RyaW5nKCkuYWxwaGFudW0oKS5taW4oMykubWF4KDI1KS50cmltKHRydWUpLnJlcXVpcmVkKCksXG4vLyAgIGVtYWlsOiBqb2kuc3RyaW5nKCkuZW1haWwoKS50cmltKHRydWUpLnJlcXVpcmVkKCksXG4vLyAgIHBhc3N3b3JkOiBqb2kuc3RyaW5nKCkubWluKDgpLnRyaW0odHJ1ZSkucmVxdWlyZWQoKSxcbi8vICAgbW9iaWxlTnVtYmVyOiBqb2kuc3RyaW5nKCkubGVuZ3RoKDEwKS5wYXR0ZXJuKC9bNi05XXsxfVswLTldezl9LykucmVxdWlyZWQoKSxcbi8vICAgYmlydGhZZWFyOiBqb2kubnVtYmVyKCkuaW50ZWdlcigpLm1pbigxOTIwKS5tYXgoMjAwMCksXG4vLyAgIHNraWxsU2V0OiBqb2kuYXJyYXkoKS5pdGVtcyhqb2kuc3RyaW5nKCkuYWxwaGFudW0oKS50cmltKHRydWUpKVxuLy8gLmRlZmF1bHQoW10pLFxuLy8gIGlzX2FjdGl2ZTogam9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuXG4vLyBleHBvcnQgY29uc3QgbGVzc29uU2NoZW1hID0gSm9pLm9iamVjdCgpLmtleXMoe1xuLy8gICBjb3Vyc2VJZDogSm9pLm51bWJlcigpLmludGVnZXIoKS5yZXF1aXJlZCgpLFxuLy8gICB1cmw6IEpvaS5zdHJpbmcoKS50cmltKCkudXJpKCkucmVxdWlyZWQoKSxcbi8vICAgZGVzY3JpcHRpb246IEpvaS5zdHJpbmcoKS50cmltKCksXG4vLyAgIHRodW1ibmFpbFVybDogSm9pLnN0cmluZygpLnVyaSgpLFxuLy8gICB0aXRsZTogSm9pLnN0cmluZygpLnRyaW0oKS5yZXF1aXJlZCgpLFxuLy8gICBkdXJhdGlvbjogSm9pLnN0cmluZygpLFxuLy8gICBzZXFObzogSm9pLm51bWJlcigpLFxuLy8gICBjcmVhdGVkQXQ6IEpvaS5kYXRlKCksXG4vLyAgIHVwZGF0ZWRBdDogSm9pLmRhdGUoKVxuLy8gfSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUEyQyxTQUFBRCx1QkFBQUcs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","map":{"version":3,"names":["_roles","_interopRequireDefault","require","_customJoi","obj","__esModule","default","checkPassword","value","helpers","length","message","custom","match","exports","objectId","id","customJoi","string","email","password","required","confirmPassword","valid","ref","messages","name","username","pattern","phone","token","refreshToken","revokeToken","empty","acceptTerms","boolean","role","Role","Admin","User","ObjectKeys","keys","object","UpdName","UpdEmail","UpdPassword","UpdConfirmPassword","UpdRole"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/","sources":["validation-helper.js"],"sourcesContent":["import Role from '../config/roles';\nimport customJoi from '../utils/customJoi';\n\nexport const checkPassword = (value, helpers) => {\n  if (value.length < 8) {\n    return helpers.message({\n      custom: 'password must be at least 8 characters',\n    });\n  } else if (\n    !value.match(\n      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/\n    )\n  ) {\n    return helpers.message({\n      custom:\n        'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character',\n    });\n  }\n  return value;\n};\n\nexport const objectId = (value, helpers) => {\n  if (!value.match(/^[0-9a-fA-F]{24}$/)) {\n    return helpers.message({ custom: '\"{{#label}}\" must be a valid mongo id' });\n  }\n  return value;\n};\n\nexport const id = customJoi.string().custom(objectId);\n\nexport const email = customJoi.string();\n\nexport const password = customJoi.string().required();\n\nexport const confirmPassword = customJoi\n  .string()\n  .valid(customJoi.ref('password'))\n  .required()\n  .messages({ 'any.only': 'Both passwords must match' });\n\n// .label('Confirm password')\n// .options({ messages: { 'any.only': 'Both passwords must match' } });\n// .messages({ 'any.only': '{{#label}} does not match' });\n\nexport const name = customJoi.string().required();\n\nexport const username = customJoi\n  .string()\n  .pattern(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)\n  .messages({ 'string.pattern.base': 'At least 1 letter and 1 number' });\n\nexport const phone = customJoi\n  .string()\n  .length(10)\n  .pattern(/[6-9]{1}[0-9]{9}/)\n  .messages({ 'string.pattern.base': 'Not a valid phone number' });\n\nexport const token = customJoi.string().required();\n\nexport const refreshToken = customJoi.string().required();\n\nexport const revokeToken = customJoi.string().empty('');\n\nexport const acceptTerms = customJoi\n  .boolean()\n  .valid(true)\n  .required()\n  .messages({ 'any.only': 'Please accept terms' });\n\nexport const role = customJoi.string().valid(Role.Admin, Role.User).required();\n\nexport const ObjectKeys = (keys) => {\n  return customJoi.object().keys({ ...keys });\n};\n\n// name: J.name,\n//     email: J.email.email(),\n//     password: J.password.custom(J.checkPassword),\n//     confirmPassword: J.confirmPassword,\n//     acceptTerms: J.acceptTerms,\n//     role: J.role,\n\nexport const UpdName = customJoi.string().empty('');\nexport const UpdEmail = customJoi.string().empty('');\nexport const UpdPassword = customJoi.string().empty('');\nexport const UpdConfirmPassword = customJoi\n  .string()\n  .valid(customJoi.ref('password'))\n  .messages({ 'any.only': 'Both passwords must match' })\n  .empty('');\nexport const UpdRole = customJoi\n  .string()\n  .valid(Role.Admin, Role.User)\n  .empty('');\n\n// const validation = joi.object({\n//   userName: joi.string().alphanum().min(3).max(25).trim(true).required(),\n//   email: joi.string().email().trim(true).required(),\n//   password: joi.string().min(8).trim(true).required(),\n//   mobileNumber: joi.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).required(),\n//   birthYear: joi.number().integer().min(1920).max(2000),\n//   skillSet: joi.array().items(joi.string().alphanum().trim(true))\n// .default([]),\n//  is_active: joi.boolean().default(true),\n\n// export const lessonSchema = Joi.object().keys({\n//   courseId: Joi.number().integer().required(),\n//   url: Joi.string().trim().uri().required(),\n//   description: Joi.string().trim(),\n//   thumbnailUrl: Joi.string().uri(),\n//   title: Joi.string().trim().required(),\n//   duration: Joi.string(),\n//   seqNo: Joi.number(),\n//   createdAt: Joi.date(),\n//   updatedAt: Joi.date()\n// });\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA2C,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEpC,MAAMG,aAAa,GAAGA,CAACC,KAAK,EAAEC,OAAO,KAAK;EAC/C,IAAID,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;IACpB,OAAOD,OAAO,CAACE,OAAO,CAAC;MACrBC,MAAM,EAAE;IACV,CAAC,CAAC;EACJ,CAAC,MAAM,IACL,CAACJ,KAAK,CAACK,KAAK,CACV,0EACF,CAAC,EACD;IACA,OAAOJ,OAAO,CAACE,OAAO,CAAC;MACrBC,MAAM,EACJ;IACJ,CAAC,CAAC;EACJ;EACA,OAAOJ,KAAK;AACd,CAAC;AAACM,OAAA,CAAAP,aAAA,GAAAA,aAAA;AAEK,MAAMQ,QAAQ,GAAGA,CAACP,KAAK,EAAEC,OAAO,KAAK;EAC1C,IAAI,CAACD,KAAK,CAACK,KAAK,CAAC,mBAAmB,CAAC,EAAE;IACrC,OAAOJ,OAAO,CAACE,OAAO,CAAC;MAAEC,MAAM,EAAE;IAAwC,CAAC,CAAC;EAC7E;EACA,OAAOJ,KAAK;AACd,CAAC;AAACM,OAAA,CAAAC,QAAA,GAAAA,QAAA;AAEK,MAAMC,EAAE,GAAGC,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACN,MAAM,CAACG,QAAQ,CAAC;AAACD,OAAA,CAAAE,EAAA,GAAAA,EAAA;AAE/C,MAAMG,KAAK,GAAGF,kBAAS,CAACC,MAAM,CAAC,CAAC;AAACJ,OAAA,CAAAK,KAAA,GAAAA,KAAA;AAEjC,MAAMC,QAAQ,GAAGH,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC;AAACP,OAAA,CAAAM,QAAA,GAAAA,QAAA;AAE/C,MAAME,eAAe,GAAGL,kBAAS,CACrCC,MAAM,CAAC,CAAC,CACRK,KAAK,CAACN,kBAAS,CAACO,GAAG,CAAC,UAAU,CAAC,CAAC,CAChCH,QAAQ,CAAC,CAAC,CACVI,QAAQ,CAAC;EAAE,UAAU,EAAE;AAA4B,CAAC,CAAC;;AAExD;AACA;AACA;AAAAX,OAAA,CAAAQ,eAAA,GAAAA,eAAA;AAEO,MAAMI,IAAI,GAAGT,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC;AAACP,OAAA,CAAAY,IAAA,GAAAA,IAAA;AAE3C,MAAMC,QAAQ,GAAGV,kBAAS,CAC9BC,MAAM,CAAC,CAAC,CACRU,OAAO,CAAC,2CAA2C,CAAC,CACpDH,QAAQ,CAAC;EAAE,qBAAqB,EAAE;AAAiC,CAAC,CAAC;AAACX,OAAA,CAAAa,QAAA,GAAAA,QAAA;AAElE,MAAME,KAAK,GAAGZ,kBAAS,CAC3BC,MAAM,CAAC,CAAC,CACRR,MAAM,CAAC,EAAE,CAAC,CACVkB,OAAO,CAAC,kBAAkB,CAAC,CAC3BH,QAAQ,CAAC;EAAE,qBAAqB,EAAE;AAA2B,CAAC,CAAC;AAACX,OAAA,CAAAe,KAAA,GAAAA,KAAA;AAE5D,MAAMC,KAAK,GAAGb,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC;AAACP,OAAA,CAAAgB,KAAA,GAAAA,KAAA;AAE5C,MAAMC,YAAY,GAAGd,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC;AAACP,OAAA,CAAAiB,YAAA,GAAAA,YAAA;AAEnD,MAAMC,WAAW,GAAGf,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACe,KAAK,CAAC,EAAE,CAAC;AAACnB,OAAA,CAAAkB,WAAA,GAAAA,WAAA;AAEjD,MAAME,WAAW,GAAGjB,kBAAS,CACjCkB,OAAO,CAAC,CAAC,CACTZ,KAAK,CAAC,IAAI,CAAC,CACXF,QAAQ,CAAC,CAAC,CACVI,QAAQ,CAAC;EAAE,UAAU,EAAE;AAAsB,CAAC,CAAC;AAACX,OAAA,CAAAoB,WAAA,GAAAA,WAAA;AAE5C,MAAME,IAAI,GAAGnB,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACK,KAAK,CAACc,cAAI,CAACC,KAAK,EAAED,cAAI,CAACE,IAAI,CAAC,CAAClB,QAAQ,CAAC,CAAC;AAACP,OAAA,CAAAsB,IAAA,GAAAA,IAAA;AAExE,MAAMI,UAAU,GAAIC,IAAI,IAAK;EAClC,OAAOxB,kBAAS,CAACyB,MAAM,CAAC,CAAC,CAACD,IAAI,CAAC;IAAE,GAAGA;EAAK,CAAC,CAAC;AAC7C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AAAA3B,OAAA,CAAA0B,UAAA,GAAAA,UAAA;AAEO,MAAMG,OAAO,GAAG1B,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACe,KAAK,CAAC,EAAE,CAAC;AAACnB,OAAA,CAAA6B,OAAA,GAAAA,OAAA;AAC7C,MAAMC,QAAQ,GAAG3B,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACe,KAAK,CAAC,EAAE,CAAC;AAACnB,OAAA,CAAA8B,QAAA,GAAAA,QAAA;AAC9C,MAAMC,WAAW,GAAG5B,kBAAS,CAACC,MAAM,CAAC,CAAC,CAACe,KAAK,CAAC,EAAE,CAAC;AAACnB,OAAA,CAAA+B,WAAA,GAAAA,WAAA;AACjD,MAAMC,kBAAkB,GAAG7B,kBAAS,CACxCC,MAAM,CAAC,CAAC,CACRK,KAAK,CAACN,kBAAS,CAACO,GAAG,CAAC,UAAU,CAAC,CAAC,CAChCC,QAAQ,CAAC;EAAE,UAAU,EAAE;AAA4B,CAAC,CAAC,CACrDQ,KAAK,CAAC,EAAE,CAAC;AAACnB,OAAA,CAAAgC,kBAAA,GAAAA,kBAAA;AACN,MAAMC,OAAO,GAAG9B,kBAAS,CAC7BC,MAAM,CAAC,CAAC,CACRK,KAAK,CAACc,cAAI,CAACC,KAAK,EAAED,cAAI,CAACE,IAAI,CAAC,CAC5BN,KAAK,CAAC,EAAE,CAAC;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAAnB,OAAA,CAAAiC,OAAA,GAAAA,OAAA"}},"mtime":1689926403123},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/customJoi.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sanitizeHtml = _interopRequireDefault(require(\"sanitize-html\"));\nvar _joi = _interopRequireDefault(require(\"joi\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst customJoi = _joi.default.extend(joi => ({\n  type: 'string',\n  base: joi.string(),\n  messages: {\n    'string.escapeHTML': '{{#label}} not contain any html tags'\n  },\n  rules: {\n    escapeHTML: {\n      validate(value, helpers) {\n        const clean = (0, _sanitizeHtml.default)(value, {\n          allowedTags: [],\n          allowedAttributes: {}\n        });\n        if (clean !== value) return helpers.error('string.escapeHTML', {\n          value\n        });\n        return clean;\n      }\n    }\n  }\n}));\nvar _default = customJoi; // const Joi = require('../../_helpers/custom_joi');\n// then create validation schema\n// const schema = Joi.object().keys({\n// notes: Joi.string().htmlStrip().allow('', null),\n// specialInstructions: Joi.string().htmlStrip()\n// });\n// const { error, value } = schema.validate(req.body);\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2FuaXRpemVIdG1sIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfam9pIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjdXN0b21Kb2kiLCJKb2kiLCJleHRlbmQiLCJqb2kiLCJ0eXBlIiwiYmFzZSIsInN0cmluZyIsIm1lc3NhZ2VzIiwicnVsZXMiLCJlc2NhcGVIVE1MIiwidmFsaWRhdGUiLCJ2YWx1ZSIsImhlbHBlcnMiLCJjbGVhbiIsInNhbml0aXplSHRtbCIsImFsbG93ZWRUYWdzIiwiYWxsb3dlZEF0dHJpYnV0ZXMiLCJlcnJvciIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsiY3VzdG9tSm9pLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzYW5pdGl6ZUh0bWwgZnJvbSAnc2FuaXRpemUtaHRtbCc7XG5pbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbmNvbnN0IGN1c3RvbUpvaSA9IEpvaS5leHRlbmQoKGpvaSkgPT4gKHtcbiAgdHlwZTogJ3N0cmluZycsXG4gIGJhc2U6IGpvaS5zdHJpbmcoKSxcbiAgbWVzc2FnZXM6IHtcbiAgICAnc3RyaW5nLmVzY2FwZUhUTUwnOiAne3sjbGFiZWx9fSBub3QgY29udGFpbiBhbnkgaHRtbCB0YWdzJyxcbiAgfSxcbiAgcnVsZXM6IHtcbiAgICBlc2NhcGVIVE1MOiB7XG4gICAgICB2YWxpZGF0ZSh2YWx1ZSwgaGVscGVycykge1xuICAgICAgICBjb25zdCBjbGVhbiA9IHNhbml0aXplSHRtbCh2YWx1ZSwge1xuICAgICAgICAgIGFsbG93ZWRUYWdzOiBbXSxcbiAgICAgICAgICBhbGxvd2VkQXR0cmlidXRlczoge30sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChjbGVhbiAhPT0gdmFsdWUpXG4gICAgICAgICAgcmV0dXJuIGhlbHBlcnMuZXJyb3IoJ3N0cmluZy5lc2NhcGVIVE1MJywgeyB2YWx1ZSB9KTtcbiAgICAgICAgcmV0dXJuIGNsZWFuO1xuICAgICAgfSxcbiAgICB9LFxuICB9LFxufSkpO1xuXG5leHBvcnQgZGVmYXVsdCBjdXN0b21Kb2k7XG5cbi8vIGNvbnN0IEpvaSA9IHJlcXVpcmUoJy4uLy4uL19oZWxwZXJzL2N1c3RvbV9qb2knKTtcblxuLy8gdGhlbiBjcmVhdGUgdmFsaWRhdGlvbiBzY2hlbWFcblxuLy8gY29uc3Qgc2NoZW1hID0gSm9pLm9iamVjdCgpLmtleXMoe1xuLy8gbm90ZXM6IEpvaS5zdHJpbmcoKS5odG1sU3RyaXAoKS5hbGxvdygnJywgbnVsbCksXG4vLyBzcGVjaWFsSW5zdHJ1Y3Rpb25zOiBKb2kuc3RyaW5nKCkuaHRtbFN0cmlwKClcbi8vIH0pO1xuLy8gY29uc3QgeyBlcnJvciwgdmFsdWUgfSA9IHNjaGVtYS52YWxpZGF0ZShyZXEuYm9keSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLElBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFzQixTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUV0QixNQUFNRyxTQUFTLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFFQyxHQUFHLEtBQU07RUFDckNDLElBQUksRUFBRSxRQUFRO0VBQ2RDLElBQUksRUFBRUYsR0FBRyxDQUFDRyxNQUFNLENBQUMsQ0FBQztFQUNsQkMsUUFBUSxFQUFFO0lBQ1IsbUJBQW1CLEVBQUU7RUFDdkIsQ0FBQztFQUNEQyxLQUFLLEVBQUU7SUFDTEMsVUFBVSxFQUFFO01BQ1ZDLFFBQVFBLENBQUNDLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3ZCLE1BQU1DLEtBQUssR0FBRyxJQUFBQyxxQkFBWSxFQUFDSCxLQUFLLEVBQUU7VUFDaENJLFdBQVcsRUFBRSxFQUFFO1VBQ2ZDLGlCQUFpQixFQUFFLENBQUM7UUFDdEIsQ0FBQyxDQUFDO1FBRUYsSUFBSUgsS0FBSyxLQUFLRixLQUFLLEVBQ2pCLE9BQU9DLE9BQU8sQ0FBQ0ssS0FBSyxDQUFDLG1CQUFtQixFQUFFO1VBQUVOO1FBQU0sQ0FBQyxDQUFDO1FBQ3RELE9BQU9FLEtBQUs7TUFDZDtJQUNGO0VBQ0Y7QUFDRixDQUFDLENBQUMsQ0FBQztBQUFDLElBQUFLLFFBQUEsR0FFV2xCLFNBQVMsRUFFeEI7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQW1CLE9BQUEsQ0FBQXBCLE9BQUEsR0FBQW1CLFFBQUEifQ==","map":{"version":3,"names":["_sanitizeHtml","_interopRequireDefault","require","_joi","obj","__esModule","default","customJoi","Joi","extend","joi","type","base","string","messages","rules","escapeHTML","validate","value","helpers","clean","sanitizeHtml","allowedTags","allowedAttributes","error","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/","sources":["customJoi.js"],"sourcesContent":["import sanitizeHtml from 'sanitize-html';\nimport Joi from 'joi';\n\nconst customJoi = Joi.extend((joi) => ({\n  type: 'string',\n  base: joi.string(),\n  messages: {\n    'string.escapeHTML': '{{#label}} not contain any html tags',\n  },\n  rules: {\n    escapeHTML: {\n      validate(value, helpers) {\n        const clean = sanitizeHtml(value, {\n          allowedTags: [],\n          allowedAttributes: {},\n        });\n\n        if (clean !== value)\n          return helpers.error('string.escapeHTML', { value });\n        return clean;\n      },\n    },\n  },\n}));\n\nexport default customJoi;\n\n// const Joi = require('../../_helpers/custom_joi');\n\n// then create validation schema\n\n// const schema = Joi.object().keys({\n// notes: Joi.string().htmlStrip().allow('', null),\n// specialInstructions: Joi.string().htmlStrip()\n// });\n// const { error, value } = schema.validate(req.body);\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsB,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtB,MAAMG,SAAS,GAAGC,YAAG,CAACC,MAAM,CAAEC,GAAG,KAAM;EACrCC,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAEF,GAAG,CAACG,MAAM,CAAC,CAAC;EAClBC,QAAQ,EAAE;IACR,mBAAmB,EAAE;EACvB,CAAC;EACDC,KAAK,EAAE;IACLC,UAAU,EAAE;MACVC,QAAQA,CAACC,KAAK,EAAEC,OAAO,EAAE;QACvB,MAAMC,KAAK,GAAG,IAAAC,qBAAY,EAACH,KAAK,EAAE;UAChCI,WAAW,EAAE,EAAE;UACfC,iBAAiB,EAAE,CAAC;QACtB,CAAC,CAAC;QAEF,IAAIH,KAAK,KAAKF,KAAK,EACjB,OAAOC,OAAO,CAACK,KAAK,CAAC,mBAAmB,EAAE;UAAEN;QAAM,CAAC,CAAC;QACtD,OAAOE,KAAK;MACd;IACF;EACF;AACF,CAAC,CAAC,CAAC;AAAC,IAAAK,QAAA,GAEWlB,SAAS,EAExB;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAAmB,OAAA,CAAApB,OAAA,GAAAmB,QAAA"}},"mtime":1689254861328},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/validation/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/validation/auth-validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar J = _interopRequireWildcard(require(\"../helpers/validation-helper\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar _default = {\n  register: {\n    body: J.ObjectKeys({\n      name: J.name.min(5).max(30).trim(true).escapeHTML().required(),\n      username: J.username.min(8).max(30).trim(true).escapeHTML().required(),\n      phone: J.phone.trim(true).escapeHTML().required(),\n      email: J.email.email().trim(true).escapeHTML().required(),\n      password: J.password.custom(J.checkPassword).min(8).max(30).trim(true).escapeHTML().required(),\n      confirmPassword: J.confirmPassword.trim(true).escapeHTML().required(),\n      acceptTerms: J.acceptTerms.required()\n    })\n  },\n  loginWithEmail: {\n    body: J.ObjectKeys({\n      email: J.email.email().trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  },\n  loginWithUsername: {\n    body: J.ObjectKeys({\n      username: J.username.min(8).max(30).trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  },\n  loginWithPhone: {\n    body: J.ObjectKeys({\n      phone: J.phone.trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  }\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwibm9kZUludGVyb3AiLCJXZWFrTWFwIiwiY2FjaGVCYWJlbEludGVyb3AiLCJjYWNoZU5vZGVJbnRlcm9wIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjYWNoZSIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsIl9kZWZhdWx0IiwicmVnaXN0ZXIiLCJib2R5IiwiT2JqZWN0S2V5cyIsIm5hbWUiLCJtaW4iLCJtYXgiLCJ0cmltIiwiZXNjYXBlSFRNTCIsInJlcXVpcmVkIiwidXNlcm5hbWUiLCJwaG9uZSIsImVtYWlsIiwicGFzc3dvcmQiLCJjdXN0b20iLCJjaGVja1Bhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiYWNjZXB0VGVybXMiLCJsb2dpbldpdGhFbWFpbCIsIm9wdGlvbmFsIiwibG9naW5XaXRoVXNlcm5hbWUiLCJsb2dpbldpdGhQaG9uZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy92YWxpZGF0aW9uLyIsInNvdXJjZXMiOlsiYXV0aC12YWxpZGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEogZnJvbSAnLi4vaGVscGVycy92YWxpZGF0aW9uLWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcmVnaXN0ZXI6IHtcbiAgICBib2R5OiBKLk9iamVjdEtleXMoe1xuICAgICAgbmFtZTogSi5uYW1lLm1pbig1KS5tYXgoMzApLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLnJlcXVpcmVkKCksXG4gICAgICB1c2VybmFtZTogSi51c2VybmFtZS5taW4oOCkubWF4KDMwKS50cmltKHRydWUpLmVzY2FwZUhUTUwoKS5yZXF1aXJlZCgpLFxuICAgICAgcGhvbmU6IEoucGhvbmUudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkucmVxdWlyZWQoKSxcbiAgICAgIGVtYWlsOiBKLmVtYWlsLmVtYWlsKCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkucmVxdWlyZWQoKSxcbiAgICAgIHBhc3N3b3JkOiBKLnBhc3N3b3JkXG4gICAgICAgIC5jdXN0b20oSi5jaGVja1Bhc3N3b3JkKVxuICAgICAgICAubWluKDgpXG4gICAgICAgIC5tYXgoMzApXG4gICAgICAgIC50cmltKHRydWUpXG4gICAgICAgIC5lc2NhcGVIVE1MKClcbiAgICAgICAgLnJlcXVpcmVkKCksXG4gICAgICBjb25maXJtUGFzc3dvcmQ6IEouY29uZmlybVBhc3N3b3JkLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLnJlcXVpcmVkKCksXG4gICAgICBhY2NlcHRUZXJtczogSi5hY2NlcHRUZXJtcy5yZXF1aXJlZCgpLFxuICAgIH0pLFxuICB9LFxuICBsb2dpbldpdGhFbWFpbDoge1xuICAgIGJvZHk6IEouT2JqZWN0S2V5cyh7XG4gICAgICBlbWFpbDogSi5lbWFpbC5lbWFpbCgpLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLm9wdGlvbmFsKCksXG4gICAgICBwYXNzd29yZDogSi5wYXNzd29yZC5taW4oOCkubWF4KDMwKS50cmltKHRydWUpLmVzY2FwZUhUTUwoKSxcbiAgICB9KSxcbiAgfSxcbiAgbG9naW5XaXRoVXNlcm5hbWU6IHtcbiAgICBib2R5OiBKLk9iamVjdEtleXMoe1xuICAgICAgdXNlcm5hbWU6IEoudXNlcm5hbWUubWluKDgpLm1heCgzMCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkub3B0aW9uYWwoKSxcbiAgICAgIHBhc3N3b3JkOiBKLnBhc3N3b3JkLm1pbig4KS5tYXgoMzApLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLFxuICAgIH0pLFxuICB9LFxuICBsb2dpbldpdGhQaG9uZToge1xuICAgIGJvZHk6IEouT2JqZWN0S2V5cyh7XG4gICAgICBwaG9uZTogSi5waG9uZS50cmltKHRydWUpLmVzY2FwZUhUTUwoKS5vcHRpb25hbCgpLFxuICAgICAgcGFzc3dvcmQ6IEoucGFzc3dvcmQubWluKDgpLm1heCgzMCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCksXG4gICAgfSksXG4gIH0sXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxDQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFBa0QsU0FBQUMseUJBQUFDLFdBQUEsZUFBQUMsT0FBQSxrQ0FBQUMsaUJBQUEsT0FBQUQsT0FBQSxRQUFBRSxnQkFBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLENBQUFDLFdBQUEsV0FBQUEsV0FBQSxHQUFBRyxnQkFBQSxHQUFBRCxpQkFBQSxLQUFBRixXQUFBO0FBQUEsU0FBQUgsd0JBQUFPLEdBQUEsRUFBQUosV0FBQSxTQUFBQSxXQUFBLElBQUFJLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLFdBQUFELEdBQUEsUUFBQUEsR0FBQSxvQkFBQUEsR0FBQSx3QkFBQUEsR0FBQSw0QkFBQUUsT0FBQSxFQUFBRixHQUFBLFVBQUFHLEtBQUEsR0FBQVIsd0JBQUEsQ0FBQUMsV0FBQSxPQUFBTyxLQUFBLElBQUFBLEtBQUEsQ0FBQUMsR0FBQSxDQUFBSixHQUFBLFlBQUFHLEtBQUEsQ0FBQUUsR0FBQSxDQUFBTCxHQUFBLFNBQUFNLE1BQUEsV0FBQUMscUJBQUEsR0FBQUMsTUFBQSxDQUFBQyxjQUFBLElBQUFELE1BQUEsQ0FBQUUsd0JBQUEsV0FBQUMsR0FBQSxJQUFBWCxHQUFBLFFBQUFXLEdBQUEsa0JBQUFILE1BQUEsQ0FBQUksU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWQsR0FBQSxFQUFBVyxHQUFBLFNBQUFJLElBQUEsR0FBQVIscUJBQUEs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","map":{"version":3,"names":["J","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_default","register","body","ObjectKeys","name","min","max","trim","escapeHTML","required","username","phone","email","password","custom","checkPassword","confirmPassword","acceptTerms","loginWithEmail","optional","loginWithUsername","loginWithPhone","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/validation/","sources":["auth-validation.js"],"sourcesContent":["import * as J from '../helpers/validation-helper';\n\nexport default {\n  register: {\n    body: J.ObjectKeys({\n      name: J.name.min(5).max(30).trim(true).escapeHTML().required(),\n      username: J.username.min(8).max(30).trim(true).escapeHTML().required(),\n      phone: J.phone.trim(true).escapeHTML().required(),\n      email: J.email.email().trim(true).escapeHTML().required(),\n      password: J.password\n        .custom(J.checkPassword)\n        .min(8)\n        .max(30)\n        .trim(true)\n        .escapeHTML()\n        .required(),\n      confirmPassword: J.confirmPassword.trim(true).escapeHTML().required(),\n      acceptTerms: J.acceptTerms.required(),\n    }),\n  },\n  loginWithEmail: {\n    body: J.ObjectKeys({\n      email: J.email.email().trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n  loginWithUsername: {\n    body: J.ObjectKeys({\n      username: J.username.min(8).max(30).trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n  loginWithPhone: {\n    body: J.ObjectKeys({\n      phone: J.phone.trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n};\n"],"mappings":"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"}},"mtime":1690033078386},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/validation-helper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.username = exports.token = exports.role = exports.revokeToken = exports.refreshToken = exports.phone = exports.password = exports.objectId = exports.name = exports.id = exports.email = exports.confirmPassword = exports.checkPassword = exports.acceptTerms = exports.UpdRole = exports.UpdPassword = exports.UpdName = exports.UpdEmail = exports.UpdConfirmPassword = exports.ObjectKeys = void 0;\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nvar _customJoi = _interopRequireDefault(require(\"../utils/customJoi\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst checkPassword = (value, helpers) => {\n  if (value.length < 8) {\n    return helpers.message({\n      custom: 'password must be at least 8 characters'\n    });\n  } else if (!value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/)) {\n    return helpers.message({\n      custom: 'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character'\n    });\n  }\n  return value;\n};\nexports.checkPassword = checkPassword;\nconst objectId = (value, helpers) => {\n  if (!value.match(/^[0-9a-fA-F]{24}$/)) {\n    return helpers.message({\n      custom: '\"{{#label}}\" must be a valid mongo id'\n    });\n  }\n  return value;\n};\nexports.objectId = objectId;\nconst id = _customJoi.default.string().custom(objectId);\nexports.id = id;\nconst email = _customJoi.default.string();\nexports.email = email;\nconst password = _customJoi.default.string().required();\nexports.password = password;\nconst confirmPassword = _customJoi.default.string().valid(_customJoi.default.ref('password')).required().messages({\n  'any.only': 'Both passwords must match'\n});\n\n// .label('Confirm password')\n// .options({ messages: { 'any.only': 'Both passwords must match' } });\n// .messages({ 'any.only': '{{#label}} does not match' });\nexports.confirmPassword = confirmPassword;\nconst name = _customJoi.default.string().required();\nexports.name = name;\nconst username = _customJoi.default.string().pattern(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/).messages({\n  'string.pattern.base': 'At least 1 letter and 1 number'\n});\nexports.username = username;\nconst phone = _customJoi.default.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).messages({\n  'string.pattern.base': 'Not a valid phone number'\n});\nexports.phone = phone;\nconst token = _customJoi.default.string().required();\nexports.token = token;\nconst refreshToken = _customJoi.default.string().required();\nexports.refreshToken = refreshToken;\nconst revokeToken = _customJoi.default.string().empty('');\nexports.revokeToken = revokeToken;\nconst acceptTerms = _customJoi.default.boolean().valid(true).required().messages({\n  'any.only': 'Please accept terms'\n});\nexports.acceptTerms = acceptTerms;\nconst role = _customJoi.default.string().valid(_roles.default.Admin, _roles.default.User).required();\nexports.role = role;\nconst ObjectKeys = keys => {\n  return _customJoi.default.object().keys({\n    ...keys\n  });\n};\n\n// name: J.name,\n//     email: J.email.email(),\n//     password: J.password.custom(J.checkPassword),\n//     confirmPassword: J.confirmPassword,\n//     acceptTerms: J.acceptTerms,\n//     role: J.role,\nexports.ObjectKeys = ObjectKeys;\nconst UpdName = _customJoi.default.string().empty('');\nexports.UpdName = UpdName;\nconst UpdEmail = _customJoi.default.string().empty('');\nexports.UpdEmail = UpdEmail;\nconst UpdPassword = _customJoi.default.string().empty('');\nexports.UpdPassword = UpdPassword;\nconst UpdConfirmPassword = _customJoi.default.string().valid(_customJoi.default.ref('password')).messages({\n  'any.only': 'Both passwords must match'\n}).empty('');\nexports.UpdConfirmPassword = UpdConfirmPassword;\nconst UpdRole = _customJoi.default.string().valid(_roles.default.Admin, _roles.default.User).empty('');\n\n// const validation = joi.object({\n//   userName: joi.string().alphanum().min(3).max(25).trim(true).required(),\n//   email: joi.string().email().trim(true).required(),\n//   password: joi.string().min(8).trim(true).required(),\n//   mobileNumber: joi.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).required(),\n//   birthYear: joi.number().integer().min(1920).max(2000),\n//   skillSet: joi.array().items(joi.string().alphanum().trim(true))\n// .default([]),\n//  is_active: joi.boolean().default(true),\n\n// export const lessonSchema = Joi.object().keys({\n//   courseId: Joi.number().integer().required(),\n//   url: Joi.string().trim().uri().required(),\n//   description: Joi.string().trim(),\n//   thumbnailUrl: Joi.string().uri(),\n//   title: Joi.string().trim().required(),\n//   duration: Joi.string(),\n//   seqNo: Joi.number(),\n//   createdAt: Joi.date(),\n//   updatedAt: Joi.date()\n// });\nexports.UpdRole = UpdRole;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcm9sZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jdXN0b21Kb2kiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNoZWNrUGFzc3dvcmQiLCJ2YWx1ZSIsImhlbHBlcnMiLCJsZW5ndGgiLCJtZXNzYWdlIiwiY3VzdG9tIiwibWF0Y2giLCJleHBvcnRzIiwib2JqZWN0SWQiLCJpZCIsImN1c3RvbUpvaSIsInN0cmluZyIsImVtYWlsIiwicGFzc3dvcmQiLCJyZXF1aXJlZCIsImNvbmZpcm1QYXNzd29yZCIsInZhbGlkIiwicmVmIiwibWVzc2FnZXMiLCJuYW1lIiwidXNlcm5hbWUiLCJwYXR0ZXJuIiwicGhvbmUiLCJ0b2tlbiIsInJlZnJlc2hUb2tlbiIsInJldm9rZVRva2VuIiwiZW1wdHkiLCJhY2NlcHRUZXJtcyIsImJvb2xlYW4iLCJyb2xlIiwiUm9sZSIsIkFkbWluIiwiVXNlciIsIk9iamVjdEtleXMiLCJrZXlzIiwib2JqZWN0IiwiVXBkTmFtZSIsIlVwZEVtYWlsIiwiVXBkUGFzc3dvcmQiLCJVcGRDb25maXJtUGFzc3dvcmQiLCJVcGRSb2xlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvaGVscGVycy8iLCJzb3VyY2VzIjpbInZhbGlkYXRpb24taGVscGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb2xlIGZyb20gJy4uL2NvbmZpZy9yb2xlcyc7XG5pbXBvcnQgY3VzdG9tSm9pIGZyb20gJy4uL3V0aWxzL2N1c3RvbUpvaSc7XG5cbmV4cG9ydCBjb25zdCBjaGVja1Bhc3N3b3JkID0gKHZhbHVlLCBoZWxwZXJzKSA9PiB7XG4gIGlmICh2YWx1ZS5sZW5ndGggPCA4KSB7XG4gICAgcmV0dXJuIGhlbHBlcnMubWVzc2FnZSh7XG4gICAgICBjdXN0b206ICdwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycycsXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoXG4gICAgIXZhbHVlLm1hdGNoKFxuICAgICAgL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcXGQpKD89LipbIyRAISUmKj9dKVtBLVphLXpcXGQjJEAhJSYqP117OCwzMH0kL1xuICAgIClcbiAgKSB7XG4gICAgcmV0dXJuIGhlbHBlcnMubWVzc2FnZSh7XG4gICAgICBjdXN0b206XG4gICAgICAgICdBdGxlYXN0IDEgbGV0dGVyLCAxIG51bWJlciwgMSBzcGVjaWFsIGNoYXJhY3RlciBhbmQgU0hPVUxEIE5PVCBzdGFydCB3aXRoIGEgc3BlY2lhbCBjaGFyYWN0ZXInLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBvYmplY3RJZCA9ICh2YWx1ZSwgaGVscGVycykgPT4ge1xuICBpZiAoIXZhbHVlLm1hdGNoKC9eWzAtOWEtZkEtRl17MjR9JC8pKSB7XG4gICAgcmV0dXJuIGhlbHBlcnMubWVzc2FnZSh7IGN1c3RvbTogJ1wie3sjbGFiZWx9fVwiIG11c3QgYmUgYSB2YWxpZCBtb25nbyBpZCcgfSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuZXhwb3J0IGNvbnN0IGlkID0gY3VzdG9tSm9pLnN0cmluZygpLmN1c3RvbShvYmplY3RJZCk7XG5cbmV4cG9ydCBjb25zdCBlbWFpbCA9IGN1c3RvbUpvaS5zdHJpbmcoKTtcblxuZXhwb3J0IGNvbnN0IHBhc3N3b3JkID0gY3VzdG9tSm9pLnN0cmluZygpLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCBjb25zdCBjb25maXJtUGFzc3dvcmQgPSBjdXN0b21Kb2lcbiAgLnN0cmluZygpXG4gIC52YWxpZChjdXN0b21Kb2kucmVmKCdwYXNzd29yZCcpKVxuICAucmVxdWlyZWQoKVxuICAubWVzc2FnZXMoeyAnYW55Lm9ubHknOiAnQm90aCBwYXNzd29yZHMgbXVzdCBtYXRjaCcgfSk7XG5cbi8vIC5sYWJlbCgnQ29uZmlybSBwYXNzd29yZCcpXG4vLyAub3B0aW9ucyh7IG1lc3NhZ2VzOiB7ICdhbnkub25seSc6ICdCb3RoIHBhc3N3b3JkcyBtdXN0IG1hdGNoJyB9IH0pO1xuLy8gLm1lc3NhZ2VzKHsgJ2FueS5vbmx5JzogJ3t7I2xhYmVsfX0gZG9lcyBub3QgbWF0Y2gnIH0pO1xuXG5leHBvcnQgY29uc3QgbmFtZSA9IGN1c3RvbUpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpO1xuXG5leHBvcnQgY29uc3QgdXNlcm5hbWUgPSBjdXN0b21Kb2lcbiAgLnN0cmluZygpXG4gIC5wYXR0ZXJuKC9eKD89LipbMC05XSkoPz0uKlthLXpBLVpdKShbYS16QS1aMC05XSspJC8pXG4gIC5tZXNzYWdlcyh7ICdzdHJpbmcucGF0dGVybi5iYXNlJzogJ0F0IGxlYXN0IDEgbGV0dGVyIGFuZCAxIG51bWJlcicgfSk7XG5cbmV4cG9ydCBjb25zdCBwaG9uZSA9IGN1c3RvbUpvaVxuICAuc3RyaW5nKClcbiAgLmxlbmd0aCgxMClcbiAgLnBhdHRlcm4oL1s2LTldezF9WzAtOV17OX0vKVxuICAubWVzc2FnZXMoeyAnc3RyaW5nLnBhdHRlcm4uYmFzZSc6ICdOb3QgYSB2YWxpZCBwaG9uZSBudW1iZXInIH0pO1xuXG5leHBvcnQgY29uc3QgdG9rZW4gPSBjdXN0b21Kb2kuc3RyaW5nKCkucmVxdWlyZWQoKTtcblxuZXhwb3J0IGNvbnN0IHJlZnJlc2hUb2tlbiA9IGN1c3RvbUpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpO1xuXG5leHBvcnQgY29uc3QgcmV2b2tlVG9rZW4gPSBjdXN0b21Kb2kuc3RyaW5nKCkuZW1wdHkoJycpO1xuXG5leHBvcnQgY29uc3QgYWNjZXB0VGVybXMgPSBjdXN0b21Kb2lcbiAgLmJvb2xlYW4oKVxuICAudmFsaWQodHJ1ZSlcbiAgLnJlcXVpcmVkKClcbiAgLm1lc3NhZ2VzKHsgJ2FueS5vbmx5JzogJ1BsZWFzZSBhY2NlcHQgdGVybXMnIH0pO1xuXG5leHBvcnQgY29uc3Qgcm9sZSA9IGN1c3RvbUpvaS5zdHJpbmcoKS52YWxpZChSb2xlLkFkbWluLCBSb2xlLlVzZXIpLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCBjb25zdCBPYmplY3RLZXlzID0gKGtleXMpID0+IHtcbiAgcmV0dXJuIGN1c3RvbUpvaS5vYmplY3QoKS5rZXlzKHsgLi4ua2V5cyB9KTtcbn07XG5cbi8vIG5hbWU6IEoubmFtZSxcbi8vICAgICBlbWFpbDogSi5lbWFpbC5lbWFpbCgpLFxuLy8gICAgIHBhc3N3b3JkOiBKLnBhc3N3b3JkLmN1c3RvbShKLmNoZWNrUGFzc3dvcmQpLFxuLy8gICAgIGNvbmZpcm1QYXNzd29yZDogSi5jb25maXJtUGFzc3dvcmQsXG4vLyAgICAgYWNjZXB0VGVybXM6IEouYWNjZXB0VGVybXMsXG4vLyAgICAgcm9sZTogSi5yb2xlLFxuXG5leHBvcnQgY29uc3QgVXBkTmFtZSA9IGN1c3RvbUpvaS5zdHJpbmcoKS5lbXB0eSgnJyk7XG5leHBvcnQgY29uc3QgVXBkRW1haWwgPSBjdXN0b21Kb2kuc3RyaW5nKCkuZW1wdHkoJycpO1xuZXhwb3J0IGNvbnN0IFVwZFBhc3N3b3JkID0gY3VzdG9tSm9pLnN0cmluZygpLmVtcHR5KCcnKTtcbmV4cG9ydCBjb25zdCBVcGRDb25maXJtUGFzc3dvcmQgPSBjdXN0b21Kb2lcbiAgLnN0cmluZygpXG4gIC52YWxpZChjdXN0b21Kb2kucmVmKCdwYXNzd29yZCcpKVxuICAubWVzc2FnZXMoeyAnYW55Lm9ubHknOiAnQm90aCBwYXNzd29yZHMgbXVzdCBtYXRjaCcgfSlcbiAgLmVtcHR5KCcnKTtcbmV4cG9ydCBjb25zdCBVcGRSb2xlID0gY3VzdG9tSm9pXG4gIC5zdHJpbmcoKVxuICAudmFsaWQoUm9sZS5BZG1pbiwgUm9sZS5Vc2VyKVxuICAuZW1wdHkoJycpO1xuXG4vLyBjb25zdCB2YWxpZGF0aW9uID0gam9pLm9iamVjdCh7XG4vLyAgIHVzZXJOYW1lOiBqb2kuc3RyaW5nKCkuYWxwaGFudW0oKS5taW4oMykubWF4KDI1KS50cmltKHRydWUpLnJlcXVpcmVkKCksXG4vLyAgIGVtYWlsOiBqb2kuc3RyaW5nKCkuZW1haWwoKS50cmltKHRydWUpLnJlcXVpcmVkKCksXG4vLyAgIHBhc3N3b3JkOiBqb2kuc3RyaW5nKCkubWluKDgpLnRyaW0odHJ1ZSkucmVxdWlyZWQoKSxcbi8vICAgbW9iaWxlTnVtYmVyOiBqb2kuc3RyaW5nKCkubGVuZ3RoKDEwKS5wYXR0ZXJuKC9bNi05XXsxfVswLTldezl9LykucmVxdWlyZWQoKSxcbi8vICAgYmlydGhZZWFyOiBqb2kubnVtYmVyKCkuaW50ZWdlcigpLm1pbigxOTIwKS5tYXgoMjAwMCksXG4vLyAgIHNraWxsU2V0OiBqb2kuYXJyYXkoKS5pdGVtcyhqb2kuc3RyaW5nKCkuYWxwaGFudW0oKS50cmltKHRydWUpKVxuLy8gLmRlZmF1bHQoW10pLFxuLy8gIGlzX2FjdGl2ZTogam9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuXG4vLyBleHBvcnQgY29uc3QgbGVzc29uU2NoZW1hID0gSm9pLm9iamVjdCgpLmtleXMoe1xuLy8gICBjb3Vyc2VJZDogSm9pLm51bWJlcigpLmludGVnZXIoKS5yZXF1aXJlZCgpLFxuLy8gICB1cmw6IEpvaS5zdHJpbmcoKS50cmltKCkudXJpKCkucmVxdWlyZWQoKSxcbi8vICAgZGVzY3JpcHRpb246IEpvaS5zdHJpbmcoKS50cmltKCksXG4vLyAgIHRodW1ibmFpbFVybDogSm9pLnN0cmluZygpLnVyaSgpLFxuLy8gICB0aXRsZTogSm9pLnN0cmluZygpLnRyaW0oKS5yZXF1aXJlZCgpLFxuLy8gICBkdXJhdGlvbjogSm9pLnN0cmluZygpLFxuLy8gICBzZXFObzogSm9pLm51bWJlcigpLFxuLy8gICBjcmVhdGVkQXQ6IEpvaS5kYXRlKCksXG4vLyAgIHVwZGF0ZWRBdDogSm9pLmRhdGUoKVxuLy8gfSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUEyQyxTQUFBRCx1QkFBQUcs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","map":{"version":3,"names":["_roles","_interopRequireDefault","require","_customJoi","obj","__esModule","default","checkPassword","value","helpers","length","message","custom","match","exports","objectId","id","customJoi","string","email","password","required","confirmPassword","valid","ref","messages","name","username","pattern","phone","token","refreshToken","revokeToken","empty","acceptTerms","boolean","role","Role","Admin","User","ObjectKeys","keys","object","UpdName","UpdEmail","UpdPassword","UpdConfirmPassword","UpdRole"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/","sources":["validation-helper.js"],"sourcesContent":["import Role from '../config/roles';\nimport customJoi from '../utils/customJoi';\n\nexport const checkPassword = (value, helpers) => {\n  if (value.length < 8) {\n    return helpers.message({\n      custom: 'password must be at least 8 characters',\n    });\n  } else if (\n    !value.match(\n      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/\n    )\n  ) {\n    return helpers.message({\n      custom:\n        'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character',\n    });\n  }\n  return value;\n};\n\nexport const objectId = (value, helpers) => {\n  if (!value.match(/^[0-9a-fA-F]{24}$/)) {\n    return helpers.message({ custom: '\"{{#label}}\" must be a valid mongo id' });\n  }\n  return value;\n};\n\nexport const id = customJoi.string().custom(objectId);\n\nexport const email = customJoi.string();\n\nexport const password = customJoi.string().required();\n\nexport const confirmPassword = customJoi\n  .string()\n  .valid(customJoi.ref('password'))\n  .required()\n  .messages({ 'any.only': 'Both passwords must match' });\n\n// .label('Confirm password')\n// .options({ messages: { 'any.only': 'Both passwords must match' } });\n// .messages({ 'any.only': '{{#label}} does not match' });\n\nexport const name = customJoi.string().required();\n\nexport const username = customJoi\n  .string()\n  .pattern(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)\n  .messages({ 'string.pattern.base': 'At least 1 letter and 1 number' });\n\nexport const phone = customJoi\n  .string()\n  .length(10)\n  .pattern(/[6-9]{1}[0-9]{9}/)\n  .messages({ 'string.pattern.base': 'Not a valid phone number' });\n\nexport const token = customJoi.string().required();\n\nexport const refreshToken = customJoi.string().required();\n\nexport const revokeToken = customJoi.string().empty('');\n\nexport const acceptTerms = customJoi\n  .boolean()\n  .valid(true)\n  .required()\n  .messages({ 'any.only': 'Please accept terms' });\n\nexport const role = customJoi.string().valid(Role.Admin, Role.User).required();\n\nexport const ObjectKeys = (keys) => {\n  return customJoi.object().keys({ ...keys });\n};\n\n// name: J.name,\n//     email: J.email.email(),\n//     password: J.password.custom(J.checkPassword),\n//     confirmPassword: J.confirmPassword,\n//     acceptTerms: J.acceptTerms,\n//     role: J.role,\n\nexport const UpdName = customJoi.string().empty('');\nexport const UpdEmail = customJoi.string().empty('');\nexport const UpdPassword = customJoi.string().empty('');\nexport const UpdConfirmPassword = customJoi\n  .string()\n  .valid(customJoi.ref('password'))\n  .messages({ 'any.only': 'Both passwords must match' })\n  .empty('');\nexport const UpdRole = customJoi\n  .string()\n  .valid(Role.Admin, Role.User)\n  .empty('');\n\n// const validation = joi.object({\n//   userName: joi.string().alphanum().min(3).max(25).trim(true).required(),\n//   email: joi.string().email().trim(true).required(),\n//   password: joi.string().min(8).trim(true).required(),\n//   mobileNumber: joi.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).required(),\n//   birthYear: joi.number().integer().min(1920).max(2000),\n//   skillSet: joi.array().items(joi.string().alphanum().trim(true))\n// .default([]),\n//  is_active: joi.boolean().default(true),\n\n// export const lessonSchema = Joi.object().keys({\n//   courseId: Joi.number().integer().required(),\n//   url: Joi.string().trim().uri().required(),\n//   description: Joi.string().trim(),\n//   thumbnailUrl: Joi.string().uri(),\n//   title: Joi.string().trim().required(),\n//   duration: Joi.string(),\n//   seqNo: Joi.number(),\n//   createdAt: Joi.date(),\n//   updatedAt: Joi.date()\n// });\n"],"mappings":"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"}},"mtime":1689926403123},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/JoiValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst JoiValiate = schema => (req, res, next) => {\n  const validSchema = (0, _utils.pick)(schema, ['params', 'query', 'body']);\n  const object = (0, _utils.pick)(req, Object.keys(validSchema));\n  const {\n    value,\n    error\n  } = _joi.default.compile(validSchema).prefs({\n    errors: {\n      label: 'key'\n    },\n    abortEarly: false,\n    allowUnknown: true,\n    stripUnknown: true\n  }).validate(object);\n  if (error) {\n    const errorMessage = error.details.map(details => details.message.replace(/['\"]/g, ''));\n    return res.status(400).send(errorMessage);\n  }\n  Object.assign(req, value);\n  return next();\n};\nvar _default = JoiValiate;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbHMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkpvaVZhbGlhdGUiLCJzY2hlbWEiLCJyZXEiLCJyZXMiLCJuZXh0IiwidmFsaWRTY2hlbWEiLCJwaWNrIiwib2JqZWN0IiwiT2JqZWN0Iiwia2V5cyIsInZhbHVlIiwiZXJyb3IiLCJKb2kiLCJjb21waWxlIiwicHJlZnMiLCJlcnJvcnMiLCJsYWJlbCIsImFib3J0RWFybHkiLCJhbGxvd1Vua25vd24iLCJzdHJpcFVua25vd24iLCJ2YWxpZGF0ZSIsImVycm9yTWVzc2FnZSIsImRldGFpbHMiLCJtYXAiLCJtZXNzYWdlIiwicmVwbGFjZSIsInN0YXR1cyIsInNlbmQiLCJhc3NpZ24iLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIkpvaVZhbGlkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IHBpY2sgfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IEpvaVZhbGlhdGUgPSAoc2NoZW1hKSA9PiAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsaWRTY2hlbWEgPSBwaWNrKHNjaGVtYSwgWydwYXJhbXMnLCAncXVlcnknLCAnYm9keSddKTtcbiAgY29uc3Qgb2JqZWN0ID0gcGljayhyZXEsIE9iamVjdC5rZXlzKHZhbGlkU2NoZW1hKSk7XG4gIGNvbnN0IHsgdmFsdWUsIGVycm9yIH0gPSBKb2kuY29tcGlsZSh2YWxpZFNjaGVtYSlcbiAgICAucHJlZnMoe1xuICAgICAgZXJyb3JzOiB7IGxhYmVsOiAna2V5JyB9LFxuICAgICAgYWJvcnRFYXJseTogZmFsc2UsXG4gICAgICBhbGxvd1Vua25vd246IHRydWUsXG4gICAgICBzdHJpcFVua25vd246IHRydWUsXG4gICAgfSlcbiAgICAudmFsaWRhdGUob2JqZWN0KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5kZXRhaWxzLm1hcCgoZGV0YWlscykgPT5cbiAgICAgIGRldGFpbHMubWVzc2FnZS5yZXBsYWNlKC9bJ1wiXS9nLCAnJylcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycm9yTWVzc2FnZSk7XG4gIH1cbiAgT2JqZWN0LmFzc2lnbihyZXEsIHZhbHVlKTtcbiAgcmV0dXJuIG5leHQoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEpvaVZhbGlhdGU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUFnQyxTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVoQyxNQUFNRyxVQUFVLEdBQUlDLE1BQU0sSUFBSyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2pELE1BQU1DLFdBQVcsR0FBRyxJQUFBQyxXQUFJLEVBQUNMLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7RUFDN0QsTUFBTU0sTUFBTSxHQUFHLElBQUFELFdBQUksRUFBQ0osR0FBRyxFQUFFTSxNQUFNLENBQUNDLElBQUksQ0FBQ0osV0FBVyxDQUFDLENBQUM7RUFDbEQsTUFBTTtJQUFFSyxLQUFLO0lBQUVDO0VBQU0sQ0FBQyxHQUFHQyxZQUFHLENBQUNDLE9BQU8sQ0FBQ1IsV0FBVyxDQUFDLENBQzlDUyxLQUFLLENBQUM7SUFDTEMsTUFBTSxFQUFFO01BQUVDLEtBQUssRUFBRTtJQUFNLENBQUM7SUFDeEJDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCQyxZQUFZLEVBQUUsSUFBSTtJQUNsQkMsWUFBWSxFQUFFO0VBQ2hCLENBQUMsQ0FBQyxDQUNEQyxRQUFRLENBQUNiLE1BQU0sQ0FBQztFQUVuQixJQUFJSSxLQUFLLEVBQUU7SUFDVCxNQUFNVSxZQUFZLEdBQUdWLEtBQUssQ0FBQ1csT0FBTyxDQUFDQyxHQUFHLENBQUVELE9BQU8sSUFDN0NBLE9BQU8sQ0FBQ0UsT0FBTyxDQUFDQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FDckMsQ0FBQztJQUVELE9BQU90QixHQUFHLENBQUN1QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ04sWUFBWSxDQUFDO0VBQzNDO0VBQ0FiLE1BQU0sQ0FBQ29CLE1BQU0sQ0FBQzFCLEdBQUcsRUFBRVEsS0FBSyxDQUFDO0VBQ3pCLE9BQU9OLElBQUksQ0FBQyxDQUFDO0FBQ2YsQ0FBQztBQUFDLElBQUF5QixRQUFBLEdBRWE3QixVQUFVO0FBQUE4QixPQUFBLENBQUEvQixPQUFBLEdBQUE4QixRQUFBIn0=","map":{"version":3,"names":["_joi","_interopRequireDefault","require","_utils","obj","__esModule","default","JoiValiate","schema","req","res","next","validSchema","pick","object","Object","keys","value","error","Joi","compile","prefs","errors","label","abortEarly","allowUnknown","stripUnknown","validate","errorMessage","details","map","message","replace","status","send","assign","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/","sources":["JoiValidate.js"],"sourcesContent":["import Joi from 'joi';\nimport { pick } from '../utils';\n\nconst JoiValiate = (schema) => (req, res, next) => {\n  const validSchema = pick(schema, ['params', 'query', 'body']);\n  const object = pick(req, Object.keys(validSchema));\n  const { value, error } = Joi.compile(validSchema)\n    .prefs({\n      errors: { label: 'key' },\n      abortEarly: false,\n      allowUnknown: true,\n      stripUnknown: true,\n    })\n    .validate(object);\n\n  if (error) {\n    const errorMessage = error.details.map((details) =>\n      details.message.replace(/['\"]/g, '')\n    );\n\n    return res.status(400).send(errorMessage);\n  }\n  Object.assign(req, value);\n  return next();\n};\n\nexport default JoiValiate;\n"],"mappings":";;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAAgC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhC,MAAMG,UAAU,GAAIC,MAAM,IAAK,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACjD,MAAMC,WAAW,GAAG,IAAAC,WAAI,EAACL,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;EAC7D,MAAMM,MAAM,GAAG,IAAAD,WAAI,EAACJ,GAAG,EAAEM,MAAM,CAACC,IAAI,CAACJ,WAAW,CAAC,CAAC;EAClD,MAAM;IAAEK,KAAK;IAAEC;EAAM,CAAC,GAAGC,YAAG,CAACC,OAAO,CAACR,WAAW,CAAC,CAC9CS,KAAK,CAAC;IACLC,MAAM,EAAE;MAAEC,KAAK,EAAE;IAAM,CAAC;IACxBC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,IAAI;IAClBC,YAAY,EAAE;EAChB,CAAC,CAAC,CACDC,QAAQ,CAACb,MAAM,CAAC;EAEnB,IAAII,KAAK,EAAE;IACT,MAAMU,YAAY,GAAGV,KAAK,CAACW,OAAO,CAACC,GAAG,CAAED,OAAO,IAC7CA,OAAO,CAACE,OAAO,CAACC,OAAO,CAAC,OAAO,EAAE,EAAE,CACrC,CAAC;IAED,OAAOtB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACN,YAAY,CAAC;EAC3C;EACAb,MAAM,CAACoB,MAAM,CAAC1B,GAAG,EAAEQ,KAAK,CAAC;EACzB,OAAON,IAAI,CAAC,CAAC;AACf,CAAC;AAAC,IAAAyB,QAAA,GAEa7B,UAAU;AAAA8B,OAAA,CAAA/B,OAAA,GAAA8B,QAAA"}},"mtime":1689327239121},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/JoiValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst JoiValiate = schema => (req, res, next) => {\n  const validSchema = (0, _utils.pick)(schema, ['params', 'query', 'body']);\n  const object = (0, _utils.pick)(req, Object.keys(validSchema));\n  const {\n    value,\n    error\n  } = _joi.default.compile(validSchema).prefs({\n    errors: {\n      label: 'key'\n    },\n    abortEarly: false,\n    allowUnknown: true,\n    stripUnknown: true\n  }).validate(object);\n  if (error) {\n    const errorMessage = error.details.map(details => details.message.replace(/['\"]/g, ''));\n    return res.status(400).send(errorMessage);\n  }\n  Object.assign(req, value);\n  return next();\n};\nvar _default = JoiValiate;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbHMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkpvaVZhbGlhdGUiLCJzY2hlbWEiLCJyZXEiLCJyZXMiLCJuZXh0IiwidmFsaWRTY2hlbWEiLCJwaWNrIiwib2JqZWN0IiwiT2JqZWN0Iiwia2V5cyIsInZhbHVlIiwiZXJyb3IiLCJKb2kiLCJjb21waWxlIiwicHJlZnMiLCJlcnJvcnMiLCJsYWJlbCIsImFib3J0RWFybHkiLCJhbGxvd1Vua25vd24iLCJzdHJpcFVua25vd24iLCJ2YWxpZGF0ZSIsImVycm9yTWVzc2FnZSIsImRldGFpbHMiLCJtYXAiLCJtZXNzYWdlIiwicmVwbGFjZSIsInN0YXR1cyIsInNlbmQiLCJhc3NpZ24iLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIkpvaVZhbGlkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKb2kgZnJvbSAnam9pJztcbmltcG9ydCB7IHBpY2sgfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IEpvaVZhbGlhdGUgPSAoc2NoZW1hKSA9PiAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsaWRTY2hlbWEgPSBwaWNrKHNjaGVtYSwgWydwYXJhbXMnLCAncXVlcnknLCAnYm9keSddKTtcbiAgY29uc3Qgb2JqZWN0ID0gcGljayhyZXEsIE9iamVjdC5rZXlzKHZhbGlkU2NoZW1hKSk7XG4gIGNvbnN0IHsgdmFsdWUsIGVycm9yIH0gPSBKb2kuY29tcGlsZSh2YWxpZFNjaGVtYSlcbiAgICAucHJlZnMoe1xuICAgICAgZXJyb3JzOiB7IGxhYmVsOiAna2V5JyB9LFxuICAgICAgYWJvcnRFYXJseTogZmFsc2UsXG4gICAgICBhbGxvd1Vua25vd246IHRydWUsXG4gICAgICBzdHJpcFVua25vd246IHRydWUsXG4gICAgfSlcbiAgICAudmFsaWRhdGUob2JqZWN0KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5kZXRhaWxzLm1hcCgoZGV0YWlscykgPT5cbiAgICAgIGRldGFpbHMubWVzc2FnZS5yZXBsYWNlKC9bJ1wiXS9nLCAnJylcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycm9yTWVzc2FnZSk7XG4gIH1cbiAgT2JqZWN0LmFzc2lnbihyZXEsIHZhbHVlKTtcbiAgcmV0dXJuIG5leHQoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEpvaVZhbGlhdGU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUFnQyxTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVoQyxNQUFNRyxVQUFVLEdBQUlDLE1BQU0sSUFBSyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2pELE1BQU1DLFdBQVcsR0FBRyxJQUFBQyxXQUFJLEVBQUNMLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7RUFDN0QsTUFBTU0sTUFBTSxHQUFHLElBQUFELFdBQUksRUFBQ0osR0FBRyxFQUFFTSxNQUFNLENBQUNDLElBQUksQ0FBQ0osV0FBVyxDQUFDLENBQUM7RUFDbEQsTUFBTTtJQUFFSyxLQUFLO0lBQUVDO0VBQU0sQ0FBQyxHQUFHQyxZQUFHLENBQUNDLE9BQU8sQ0FBQ1IsV0FBVyxDQUFDLENBQzlDUyxLQUFLLENBQUM7SUFDTEMsTUFBTSxFQUFFO01BQUVDLEtBQUssRUFBRTtJQUFNLENBQUM7SUFDeEJDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCQyxZQUFZLEVBQUUsSUFBSTtJQUNsQkMsWUFBWSxFQUFFO0VBQ2hCLENBQUMsQ0FBQyxDQUNEQyxRQUFRLENBQUNiLE1BQU0sQ0FBQztFQUVuQixJQUFJSSxLQUFLLEVBQUU7SUFDVCxNQUFNVSxZQUFZLEdBQUdWLEtBQUssQ0FBQ1csT0FBTyxDQUFDQyxHQUFHLENBQUVELE9BQU8sSUFDN0NBLE9BQU8sQ0FBQ0UsT0FBTyxDQUFDQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FDckMsQ0FBQztJQUVELE9BQU90QixHQUFHLENBQUN1QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ04sWUFBWSxDQUFDO0VBQzNDO0VBQ0FiLE1BQU0sQ0FBQ29CLE1BQU0sQ0FBQzFCLEdBQUcsRUFBRVEsS0FBSyxDQUFDO0VBQ3pCLE9BQU9OLElBQUksQ0FBQyxDQUFDO0FBQ2YsQ0FBQztBQUFDLElBQUF5QixRQUFBLEdBRWE3QixVQUFVO0FBQUE4QixPQUFBLENBQUEvQixPQUFBLEdBQUE4QixRQUFBIn0=","map":{"version":3,"names":["_joi","_interopRequireDefault","require","_utils","obj","__esModule","default","JoiValiate","schema","req","res","next","validSchema","pick","object","Object","keys","value","error","Joi","compile","prefs","errors","label","abortEarly","allowUnknown","stripUnknown","validate","errorMessage","details","map","message","replace","status","send","assign","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/","sources":["JoiValidate.js"],"sourcesContent":["import Joi from 'joi';\nimport { pick } from '../utils';\n\nconst JoiValiate = (schema) => (req, res, next) => {\n  const validSchema = pick(schema, ['params', 'query', 'body']);\n  const object = pick(req, Object.keys(validSchema));\n  const { value, error } = Joi.compile(validSchema)\n    .prefs({\n      errors: { label: 'key' },\n      abortEarly: false,\n      allowUnknown: true,\n      stripUnknown: true,\n    })\n    .validate(object);\n\n  if (error) {\n    const errorMessage = error.details.map((details) =>\n      details.message.replace(/['\"]/g, '')\n    );\n\n    return res.status(400).send(errorMessage);\n  }\n  Object.assign(req, value);\n  return next();\n};\n\nexport default JoiValiate;\n"],"mappings":";;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAAgC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhC,MAAMG,UAAU,GAAIC,MAAM,IAAK,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACjD,MAAMC,WAAW,GAAG,IAAAC,WAAI,EAACL,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;EAC7D,MAAMM,MAAM,GAAG,IAAAD,WAAI,EAACJ,GAAG,EAAEM,MAAM,CAACC,IAAI,CAACJ,WAAW,CAAC,CAAC;EAClD,MAAM;IAAEK,KAAK;IAAEC;EAAM,CAAC,GAAGC,YAAG,CAACC,OAAO,CAACR,WAAW,CAAC,CAC9CS,KAAK,CAAC;IACLC,MAAM,EAAE;MAAEC,KAAK,EAAE;IAAM,CAAC;IACxBC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,IAAI;IAClBC,YAAY,EAAE;EAChB,CAAC,CAAC,CACDC,QAAQ,CAACb,MAAM,CAAC;EAEnB,IAAII,KAAK,EAAE;IACT,MAAMU,YAAY,GAAGV,KAAK,CAACW,OAAO,CAACC,GAAG,CAAED,OAAO,IAC7CA,OAAO,CAACE,OAAO,CAACC,OAAO,CAAC,OAAO,EAAE,EAAE,CACrC,CAAC;IAED,OAAOtB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACN,YAAY,CAAC;EAC3C;EACAb,MAAM,CAACoB,MAAM,CAAC1B,GAAG,EAAEQ,KAAK,CAAC;EACzB,OAAON,IAAI,CAAC,CAAC;AACf,CAAC;AAAC,IAAAyB,QAAA,GAEa7B,UAAU;AAAA8B,OAAA,CAAA/B,OAAA,GAAA8B,QAAA"}},"mtime":1689327239121},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pick = exports.omit = exports.escapeString = exports.clean = void 0;\nvar _validator = _interopRequireDefault(require(\"validator\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst pick = (object, keys) => keys.reduce((obj, key) => {\n  if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n    // eslint-disable-next-line no-param-reassign\n    obj[key] = object[key];\n  }\n  return obj;\n}, {});\nexports.pick = pick;\nconst omit = (obj, ...props) => {\n  const result = {\n    ...obj\n  };\n  props.forEach(function (prop) {\n    delete result[prop];\n  });\n  return result;\n};\nexports.omit = omit;\nconst escapeString = string => {\n  return _validator.default.escape(string);\n};\nexports.escapeString = escapeString;\nconst clean = resp => {\n  const queue = [resp];\n  while (queue.length) {\n    const element = queue.pop();\n    for (var x in element) {\n      const data = element[x];\n      if (data === 'null' || data == 'N/A' || data === null || data === '-' || typeof data === 'undefined' || data instanceof Object && Object.keys(data).length == 0) {\n        delete element[x];\n      }\n      if (data instanceof Object) {\n        queue.push(data);\n      }\n    }\n  }\n  return resp;\n};\nexports.clean = clean;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdmFsaWRhdG9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInBpY2siLCJvYmplY3QiLCJrZXlzIiwicmVkdWNlIiwia2V5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZXhwb3J0cyIsIm9taXQiLCJwcm9wcyIsInJlc3VsdCIsImZvckVhY2giLCJwcm9wIiwiZXNjYXBlU3RyaW5nIiwic3RyaW5nIiwidmFsaWRhdG9yIiwiZXNjYXBlIiwiY2xlYW4iLCJyZXNwIiwicXVldWUiLCJsZW5ndGgiLCJlbGVtZW50IiwicG9wIiwieCIsImRhdGEiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdG9yIGZyb20gJ3ZhbGlkYXRvcic7XG5cbmV4cG9ydCBjb25zdCBwaWNrID0gKG9iamVjdCwga2V5cykgPT5cbiAga2V5cy5yZWR1Y2UoKG9iaiwga2V5KSA9PiB7XG4gICAgaWYgKG9iamVjdCAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG9ialtrZXldID0gb2JqZWN0W2tleV07XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcblxuZXhwb3J0IGNvbnN0IG9taXQgPSAob2JqLCAuLi5wcm9wcykgPT4ge1xuICBjb25zdCByZXN1bHQgPSB7IC4uLm9iaiB9O1xuICBwcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgZGVsZXRlIHJlc3VsdFtwcm9wXTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgZXNjYXBlU3RyaW5nID0gKHN0cmluZykgPT4ge1xuICByZXR1cm4gdmFsaWRhdG9yLmVzY2FwZShzdHJpbmcpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNsZWFuID0gKHJlc3ApID0+IHtcbiAgY29uc3QgcXVldWUgPSBbcmVzcF07XG5cbiAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBxdWV1ZS5wb3AoKTtcblxuICAgIGZvciAodmFyIHggaW4gZWxlbWVudCkge1xuICAgICAgY29uc3QgZGF0YSA9IGVsZW1lbnRbeF07XG5cbiAgICAgIGlmIChcbiAgICAgICAgZGF0YSA9PT0gJ251bGwnIHx8XG4gICAgICAgIGRhdGEgPT0gJ04vQScgfHxcbiAgICAgICAgZGF0YSA9PT0gbnVsbCB8fFxuICAgICAgICBkYXRhID09PSAnLScgfHxcbiAgICAgICAgdHlwZW9mIGRhdGEgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIChkYXRhIGluc3RhbmNlb2YgT2JqZWN0ICYmIE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PSAwKVxuICAgICAgKSB7XG4gICAgICAgIGRlbGV0ZSBlbGVtZW50W3hdO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICBxdWV1ZS5wdXNoKGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXNwO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQWtDLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRTNCLE1BQU1HLElBQUksR0FBR0EsQ0FBQ0MsTUFBTSxFQUFFQyxJQUFJLEtBQy9CQSxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDTixHQUFHLEVBQUVPLEdBQUcsS0FBSztFQUN4QixJQUFJSCxNQUFNLElBQUlJLE1BQU0sQ0FBQ0MsU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQ1AsTUFBTSxFQUFFRyxHQUFHLENBQUMsRUFBRTtJQUMvRDtJQUNBUCxHQUFHLENBQUNPLEdBQUcsQ0FBQyxHQUFHSCxNQUFNLENBQUNHLEdBQUcsQ0FBQztFQUN4QjtFQUNBLE9BQU9QLEdBQUc7QUFDWixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFBQ1ksT0FBQSxDQUFBVCxJQUFBLEdBQUFBLElBQUE7QUFFRixNQUFNVSxJQUFJLEdBQUdBLENBQUNiLEdBQUcsRUFBRSxHQUFHYyxLQUFLLEtBQUs7RUFDckMsTUFBTUMsTUFBTSxHQUFHO0lBQUUsR0FBR2Y7RUFBSSxDQUFDO0VBQ3pCYyxLQUFLLENBQUNFLE9BQU8sQ0FBQyxVQUFVQyxJQUFJLEVBQUU7SUFDNUIsT0FBT0YsTUFBTSxDQUFDRSxJQUFJLENBQUM7RUFDckIsQ0FBQyxDQUFDO0VBQ0YsT0FBT0YsTUFBTTtBQUNmLENBQUM7QUFBQ0gsT0FBQSxDQUFBQyxJQUFBLEdBQUFBLElBQUE7QUFFSyxNQUFNSyxZQUFZLEdBQUlDLE1BQU0sSUFBSztFQUN0QyxPQUFPQyxrQkFBUyxDQUFDQyxNQUFNLENBQUNGLE1BQU0sQ0FBQztBQUNqQyxDQUFDO0FBQUNQLE9BQUEsQ0FBQU0sWUFBQSxHQUFBQSxZQUFBO0FBRUssTUFBTUksS0FBSyxHQUFJQyxJQUFJLElBQUs7RUFDN0IsTUFBTUMsS0FBSyxHQUFHLENBQUNELElBQUksQ0FBQztFQUVwQixPQUFPQyxLQUFLLENBQUNDLE1BQU0sRUFBRTtJQUNuQixNQUFNQyxPQUFPLEdBQUdGLEtBQUssQ0FBQ0csR0FBRyxDQUFDLENBQUM7SUFFM0IsS0FBSyxJQUFJQyxDQUFDLElBQUlGLE9BQU8sRUFBRTtNQUNyQixNQUFNRyxJQUFJLEdBQUdILE9BQU8sQ0FBQ0UsQ0FBQyxDQUFDO01BRXZCLElBQ0VDLElBQUksS0FBSyxNQUFNLElBQ2ZBLElBQUksSUFBSSxLQUFLLElBQ2JBLElBQUksS0FBSyxJQUFJLElBQ2JBLElBQUksS0FBSyxHQUFHLElBQ1osT0FBT0EsSUFBSSxLQUFLLFdBQVcsSUFDMUJBLElBQUksWUFBWXJCLE1BQU0sSUFBSUEsTUFBTSxDQUFDSCxJQUFJLENBQUN3QixJQUFJLENBQUMsQ0FBQ0osTUFBTSxJQUFJLENBQUUsRUFDekQ7UUFDQSxPQUFPQyxPQUFPLENBQUNFLENBQUMsQ0FBQztNQUNuQjtNQUVBLElBQUlDLElBQUksWUFBWXJCLE1BQU0sRUFBRTtRQUMxQmdCLEtBQUssQ0FBQ00sSUFBSSxDQUFDRCxJQUFJLENBQUM7TUFDbEI7SUFDRjtFQUNGO0VBRUEsT0FBT04sSUFBSTtBQUNiLENBQUM7QUFBQ1gsT0FBQSxDQUFBVSxLQUFBLEdBQUFBLEtBQUEifQ==","map":{"version":3,"names":["_validator","_interopRequireDefault","require","obj","__esModule","default","pick","object","keys","reduce","key","Object","prototype","hasOwnProperty","call","exports","omit","props","result","forEach","prop","escapeString","string","validator","escape","clean","resp","queue","length","element","pop","x","data","push"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/","sources":["index.js"],"sourcesContent":["import validator from 'validator';\n\nexport const pick = (object, keys) =>\n  keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n\nexport const omit = (obj, ...props) => {\n  const result = { ...obj };\n  props.forEach(function (prop) {\n    delete result[prop];\n  });\n  return result;\n};\n\nexport const escapeString = (string) => {\n  return validator.escape(string);\n};\n\nexport const clean = (resp) => {\n  const queue = [resp];\n\n  while (queue.length) {\n    const element = queue.pop();\n\n    for (var x in element) {\n      const data = element[x];\n\n      if (\n        data === 'null' ||\n        data == 'N/A' ||\n        data === null ||\n        data === '-' ||\n        typeof data === 'undefined' ||\n        (data instanceof Object && Object.keys(data).length == 0)\n      ) {\n        delete element[x];\n      }\n\n      if (data instanceof Object) {\n        queue.push(data);\n      }\n    }\n  }\n\n  return resp;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAkC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3B,MAAMG,IAAI,GAAGA,CAACC,MAAM,EAAEC,IAAI,KAC/BA,IAAI,CAACC,MAAM,CAAC,CAACN,GAAG,EAAEO,GAAG,KAAK;EACxB,IAAIH,MAAM,IAAII,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACP,MAAM,EAAEG,GAAG,CAAC,EAAE;IAC/D;IACAP,GAAG,CAACO,GAAG,CAAC,GAAGH,MAAM,CAACG,GAAG,CAAC;EACxB;EACA,OAAOP,GAAG;AACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AAACY,OAAA,CAAAT,IAAA,GAAAA,IAAA;AAEF,MAAMU,IAAI,GAAGA,CAACb,GAAG,EAAE,GAAGc,KAAK,KAAK;EACrC,MAAMC,MAAM,GAAG;IAAE,GAAGf;EAAI,CAAC;EACzBc,KAAK,CAACE,OAAO,CAAC,UAAUC,IAAI,EAAE;IAC5B,OAAOF,MAAM,CAACE,IAAI,CAAC;EACrB,CAAC,CAAC;EACF,OAAOF,MAAM;AACf,CAAC;AAACH,OAAA,CAAAC,IAAA,GAAAA,IAAA;AAEK,MAAMK,YAAY,GAAIC,MAAM,IAAK;EACtC,OAAOC,kBAAS,CAACC,MAAM,CAACF,MAAM,CAAC;AACjC,CAAC;AAACP,OAAA,CAAAM,YAAA,GAAAA,YAAA;AAEK,MAAMI,KAAK,GAAIC,IAAI,IAAK;EAC7B,MAAMC,KAAK,GAAG,CAACD,IAAI,CAAC;EAEpB,OAAOC,KAAK,CAACC,MAAM,EAAE;IACnB,MAAMC,OAAO,GAAGF,KAAK,CAACG,GAAG,CAAC,CAAC;IAE3B,KAAK,IAAIC,CAAC,IAAIF,OAAO,EAAE;MACrB,MAAMG,IAAI,GAAGH,OAAO,CAACE,CAAC,CAAC;MAEvB,IACEC,IAAI,KAAK,MAAM,IACfA,IAAI,IAAI,KAAK,IACbA,IAAI,KAAK,IAAI,IACbA,IAAI,KAAK,GAAG,IACZ,OAAOA,IAAI,KAAK,WAAW,IAC1BA,IAAI,YAAYrB,MAAM,IAAIA,MAAM,CAACH,IAAI,CAACwB,IAAI,CAAC,CAACJ,MAAM,IAAI,CAAE,EACzD;QACA,OAAOC,OAAO,CAACE,CAAC,CAAC;MACnB;MAEA,IAAIC,IAAI,YAAYrB,MAAM,EAAE;QAC1BgB,KAAK,CAACM,IAAI,CAACD,IAAI,CAAC;MAClB;IACF;EACF;EAEA,OAAON,IAAI;AACb,CAAC;AAACX,OAAA,CAAAU,KAAA,GAAAA,KAAA"}},"mtime":1690211398703},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pick = exports.omit = exports.escapeString = exports.clean = void 0;\nvar _validator = _interopRequireDefault(require(\"validator\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst pick = (object, keys) => keys.reduce((obj, key) => {\n  if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n    // eslint-disable-next-line no-param-reassign\n    obj[key] = object[key];\n  }\n  return obj;\n}, {});\nexports.pick = pick;\nconst omit = (obj, ...props) => {\n  const result = {\n    ...obj\n  };\n  props.forEach(function (prop) {\n    delete result[prop];\n  });\n  return result;\n};\nexports.omit = omit;\nconst escapeString = string => {\n  return _validator.default.escape(string);\n};\nexports.escapeString = escapeString;\nconst clean = resp => {\n  const queue = [resp];\n  while (queue.length) {\n    const element = queue.pop();\n    for (var x in element) {\n      const data = element[x];\n      if (data === 'null' || data == 'N/A' || data === null || data === '-' || typeof data === 'undefined' || data instanceof Object && Object.keys(data).length == 0) {\n        delete element[x];\n      }\n      if (data instanceof Object) {\n        queue.push(data);\n      }\n    }\n  }\n  return resp;\n};\nexports.clean = clean;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdmFsaWRhdG9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInBpY2siLCJvYmplY3QiLCJrZXlzIiwicmVkdWNlIiwia2V5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZXhwb3J0cyIsIm9taXQiLCJwcm9wcyIsInJlc3VsdCIsImZvckVhY2giLCJwcm9wIiwiZXNjYXBlU3RyaW5nIiwic3RyaW5nIiwidmFsaWRhdG9yIiwiZXNjYXBlIiwiY2xlYW4iLCJyZXNwIiwicXVldWUiLCJsZW5ndGgiLCJlbGVtZW50IiwicG9wIiwieCIsImRhdGEiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdG9yIGZyb20gJ3ZhbGlkYXRvcic7XG5cbmV4cG9ydCBjb25zdCBwaWNrID0gKG9iamVjdCwga2V5cykgPT5cbiAga2V5cy5yZWR1Y2UoKG9iaiwga2V5KSA9PiB7XG4gICAgaWYgKG9iamVjdCAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG9ialtrZXldID0gb2JqZWN0W2tleV07XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcblxuZXhwb3J0IGNvbnN0IG9taXQgPSAob2JqLCAuLi5wcm9wcykgPT4ge1xuICBjb25zdCByZXN1bHQgPSB7IC4uLm9iaiB9O1xuICBwcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgZGVsZXRlIHJlc3VsdFtwcm9wXTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgZXNjYXBlU3RyaW5nID0gKHN0cmluZykgPT4ge1xuICByZXR1cm4gdmFsaWRhdG9yLmVzY2FwZShzdHJpbmcpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNsZWFuID0gKHJlc3ApID0+IHtcbiAgY29uc3QgcXVldWUgPSBbcmVzcF07XG5cbiAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBxdWV1ZS5wb3AoKTtcblxuICAgIGZvciAodmFyIHggaW4gZWxlbWVudCkge1xuICAgICAgY29uc3QgZGF0YSA9IGVsZW1lbnRbeF07XG5cbiAgICAgIGlmIChcbiAgICAgICAgZGF0YSA9PT0gJ251bGwnIHx8XG4gICAgICAgIGRhdGEgPT0gJ04vQScgfHxcbiAgICAgICAgZGF0YSA9PT0gbnVsbCB8fFxuICAgICAgICBkYXRhID09PSAnLScgfHxcbiAgICAgICAgdHlwZW9mIGRhdGEgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIChkYXRhIGluc3RhbmNlb2YgT2JqZWN0ICYmIE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PSAwKVxuICAgICAgKSB7XG4gICAgICAgIGRlbGV0ZSBlbGVtZW50W3hdO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICBxdWV1ZS5wdXNoKGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXNwO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQWtDLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRTNCLE1BQU1HLElBQUksR0FBR0EsQ0FBQ0MsTUFBTSxFQUFFQyxJQUFJLEtBQy9CQSxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDTixHQUFHLEVBQUVPLEdBQUcsS0FBSztFQUN4QixJQUFJSCxNQUFNLElBQUlJLE1BQU0sQ0FBQ0MsU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQ1AsTUFBTSxFQUFFRyxHQUFHLENBQUMsRUFBRTtJQUMvRDtJQUNBUCxHQUFHLENBQUNPLEdBQUcsQ0FBQyxHQUFHSCxNQUFNLENBQUNHLEdBQUcsQ0FBQztFQUN4QjtFQUNBLE9BQU9QLEdBQUc7QUFDWixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFBQ1ksT0FBQSxDQUFBVCxJQUFBLEdBQUFBLElBQUE7QUFFRixNQUFNVSxJQUFJLEdBQUdBLENBQUNiLEdBQUcsRUFBRSxHQUFHYyxLQUFLLEtBQUs7RUFDckMsTUFBTUMsTUFBTSxHQUFHO0lBQUUsR0FBR2Y7RUFBSSxDQUFDO0VBQ3pCYyxLQUFLLENBQUNFLE9BQU8sQ0FBQyxVQUFVQyxJQUFJLEVBQUU7SUFDNUIsT0FBT0YsTUFBTSxDQUFDRSxJQUFJLENBQUM7RUFDckIsQ0FBQyxDQUFDO0VBQ0YsT0FBT0YsTUFBTTtBQUNmLENBQUM7QUFBQ0gsT0FBQSxDQUFBQyxJQUFBLEdBQUFBLElBQUE7QUFFSyxNQUFNSyxZQUFZLEdBQUlDLE1BQU0sSUFBSztFQUN0QyxPQUFPQyxrQkFBUyxDQUFDQyxNQUFNLENBQUNGLE1BQU0sQ0FBQztBQUNqQyxDQUFDO0FBQUNQLE9BQUEsQ0FBQU0sWUFBQSxHQUFBQSxZQUFBO0FBRUssTUFBTUksS0FBSyxHQUFJQyxJQUFJLElBQUs7RUFDN0IsTUFBTUMsS0FBSyxHQUFHLENBQUNELElBQUksQ0FBQztFQUVwQixPQUFPQyxLQUFLLENBQUNDLE1BQU0sRUFBRTtJQUNuQixNQUFNQyxPQUFPLEdBQUdGLEtBQUssQ0FBQ0csR0FBRyxDQUFDLENBQUM7SUFFM0IsS0FBSyxJQUFJQyxDQUFDLElBQUlGLE9BQU8sRUFBRTtNQUNyQixNQUFNRyxJQUFJLEdBQUdILE9BQU8sQ0FBQ0UsQ0FBQyxDQUFDO01BRXZCLElBQ0VDLElBQUksS0FBSyxNQUFNLElBQ2ZBLElBQUksSUFBSSxLQUFLLElBQ2JBLElBQUksS0FBSyxJQUFJLElBQ2JBLElBQUksS0FBSyxHQUFHLElBQ1osT0FBT0EsSUFBSSxLQUFLLFdBQVcsSUFDMUJBLElBQUksWUFBWXJCLE1BQU0sSUFBSUEsTUFBTSxDQUFDSCxJQUFJLENBQUN3QixJQUFJLENBQUMsQ0FBQ0osTUFBTSxJQUFJLENBQUUsRUFDekQ7UUFDQSxPQUFPQyxPQUFPLENBQUNFLENBQUMsQ0FBQztNQUNuQjtNQUVBLElBQUlDLElBQUksWUFBWXJCLE1BQU0sRUFBRTtRQUMxQmdCLEtBQUssQ0FBQ00sSUFBSSxDQUFDRCxJQUFJLENBQUM7TUFDbEI7SUFDRjtFQUNGO0VBRUEsT0FBT04sSUFBSTtBQUNiLENBQUM7QUFBQ1gsT0FBQSxDQUFBVSxLQUFBLEdBQUFBLEtBQUEifQ==","map":{"version":3,"names":["_validator","_interopRequireDefault","require","obj","__esModule","default","pick","object","keys","reduce","key","Object","prototype","hasOwnProperty","call","exports","omit","props","result","forEach","prop","escapeString","string","validator","escape","clean","resp","queue","length","element","pop","x","data","push"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/","sources":["index.js"],"sourcesContent":["import validator from 'validator';\n\nexport const pick = (object, keys) =>\n  keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n\nexport const omit = (obj, ...props) => {\n  const result = { ...obj };\n  props.forEach(function (prop) {\n    delete result[prop];\n  });\n  return result;\n};\n\nexport const escapeString = (string) => {\n  return validator.escape(string);\n};\n\nexport const clean = (resp) => {\n  const queue = [resp];\n\n  while (queue.length) {\n    const element = queue.pop();\n\n    for (var x in element) {\n      const data = element[x];\n\n      if (\n        data === 'null' ||\n        data == 'N/A' ||\n        data === null ||\n        data === '-' ||\n        typeof data === 'undefined' ||\n        (data instanceof Object && Object.keys(data).length == 0)\n      ) {\n        delete element[x];\n      }\n\n      if (data instanceof Object) {\n        queue.push(data);\n      }\n    }\n  }\n\n  return resp;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAkC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3B,MAAMG,IAAI,GAAGA,CAACC,MAAM,EAAEC,IAAI,KAC/BA,IAAI,CAACC,MAAM,CAAC,CAACN,GAAG,EAAEO,GAAG,KAAK;EACxB,IAAIH,MAAM,IAAII,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACP,MAAM,EAAEG,GAAG,CAAC,EAAE;IAC/D;IACAP,GAAG,CAACO,GAAG,CAAC,GAAGH,MAAM,CAACG,GAAG,CAAC;EACxB;EACA,OAAOP,GAAG;AACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AAACY,OAAA,CAAAT,IAAA,GAAAA,IAAA;AAEF,MAAMU,IAAI,GAAGA,CAACb,GAAG,EAAE,GAAGc,KAAK,KAAK;EACrC,MAAMC,MAAM,GAAG;IAAE,GAAGf;EAAI,CAAC;EACzBc,KAAK,CAACE,OAAO,CAAC,UAAUC,IAAI,EAAE;IAC5B,OAAOF,MAAM,CAACE,IAAI,CAAC;EACrB,CAAC,CAAC;EACF,OAAOF,MAAM;AACf,CAAC;AAACH,OAAA,CAAAC,IAAA,GAAAA,IAAA;AAEK,MAAMK,YAAY,GAAIC,MAAM,IAAK;EACtC,OAAOC,kBAAS,CAACC,MAAM,CAACF,MAAM,CAAC;AACjC,CAAC;AAACP,OAAA,CAAAM,YAAA,GAAAA,YAAA;AAEK,MAAMI,KAAK,GAAIC,IAAI,IAAK;EAC7B,MAAMC,KAAK,GAAG,CAACD,IAAI,CAAC;EAEpB,OAAOC,KAAK,CAACC,MAAM,EAAE;IACnB,MAAMC,OAAO,GAAGF,KAAK,CAACG,GAAG,CAAC,CAAC;IAE3B,KAAK,IAAIC,CAAC,IAAIF,OAAO,EAAE;MACrB,MAAMG,IAAI,GAAGH,OAAO,CAACE,CAAC,CAAC;MAEvB,IACEC,IAAI,KAAK,MAAM,IACfA,IAAI,IAAI,KAAK,IACbA,IAAI,KAAK,IAAI,IACbA,IAAI,KAAK,GAAG,IACZ,OAAOA,IAAI,KAAK,WAAW,IAC1BA,IAAI,YAAYrB,MAAM,IAAIA,MAAM,CAACH,IAAI,CAACwB,IAAI,CAAC,CAACJ,MAAM,IAAI,CAAE,EACzD;QACA,OAAOC,OAAO,CAACE,CAAC,CAAC;MACnB;MAEA,IAAIC,IAAI,YAAYrB,MAAM,EAAE;QAC1BgB,KAAK,CAACM,IAAI,CAACD,IAAI,CAAC;MAClB;IACF;EACF;EAEA,OAAON,IAAI;AACb,CAAC;AAACX,OAAA,CAAAU,KAAA,GAAAA,KAAA"}},"mtime":1690211398703},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/customJoi.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sanitizeHtml = _interopRequireDefault(require(\"sanitize-html\"));\nvar _joi = _interopRequireDefault(require(\"joi\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst customJoi = _joi.default.extend(joi => ({\n  type: 'string',\n  base: joi.string(),\n  messages: {\n    'string.escapeHTML': '{{#label}} not contain any html tags'\n  },\n  rules: {\n    escapeHTML: {\n      validate(value, helpers) {\n        const clean = (0, _sanitizeHtml.default)(value, {\n          allowedTags: [],\n          allowedAttributes: {}\n        });\n        if (clean !== value) return helpers.error('string.escapeHTML', {\n          value\n        });\n        return clean;\n      }\n    }\n  }\n}));\nvar _default = customJoi; // const Joi = require('../../_helpers/custom_joi');\n// then create validation schema\n// const schema = Joi.object().keys({\n// notes: Joi.string().htmlStrip().allow('', null),\n// specialInstructions: Joi.string().htmlStrip()\n// });\n// const { error, value } = schema.validate(req.body);\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2FuaXRpemVIdG1sIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfam9pIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjdXN0b21Kb2kiLCJKb2kiLCJleHRlbmQiLCJqb2kiLCJ0eXBlIiwiYmFzZSIsInN0cmluZyIsIm1lc3NhZ2VzIiwicnVsZXMiLCJlc2NhcGVIVE1MIiwidmFsaWRhdGUiLCJ2YWx1ZSIsImhlbHBlcnMiLCJjbGVhbiIsInNhbml0aXplSHRtbCIsImFsbG93ZWRUYWdzIiwiYWxsb3dlZEF0dHJpYnV0ZXMiLCJlcnJvciIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsiY3VzdG9tSm9pLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzYW5pdGl6ZUh0bWwgZnJvbSAnc2FuaXRpemUtaHRtbCc7XG5pbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbmNvbnN0IGN1c3RvbUpvaSA9IEpvaS5leHRlbmQoKGpvaSkgPT4gKHtcbiAgdHlwZTogJ3N0cmluZycsXG4gIGJhc2U6IGpvaS5zdHJpbmcoKSxcbiAgbWVzc2FnZXM6IHtcbiAgICAnc3RyaW5nLmVzY2FwZUhUTUwnOiAne3sjbGFiZWx9fSBub3QgY29udGFpbiBhbnkgaHRtbCB0YWdzJyxcbiAgfSxcbiAgcnVsZXM6IHtcbiAgICBlc2NhcGVIVE1MOiB7XG4gICAgICB2YWxpZGF0ZSh2YWx1ZSwgaGVscGVycykge1xuICAgICAgICBjb25zdCBjbGVhbiA9IHNhbml0aXplSHRtbCh2YWx1ZSwge1xuICAgICAgICAgIGFsbG93ZWRUYWdzOiBbXSxcbiAgICAgICAgICBhbGxvd2VkQXR0cmlidXRlczoge30sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChjbGVhbiAhPT0gdmFsdWUpXG4gICAgICAgICAgcmV0dXJuIGhlbHBlcnMuZXJyb3IoJ3N0cmluZy5lc2NhcGVIVE1MJywgeyB2YWx1ZSB9KTtcbiAgICAgICAgcmV0dXJuIGNsZWFuO1xuICAgICAgfSxcbiAgICB9LFxuICB9LFxufSkpO1xuXG5leHBvcnQgZGVmYXVsdCBjdXN0b21Kb2k7XG5cbi8vIGNvbnN0IEpvaSA9IHJlcXVpcmUoJy4uLy4uL19oZWxwZXJzL2N1c3RvbV9qb2knKTtcblxuLy8gdGhlbiBjcmVhdGUgdmFsaWRhdGlvbiBzY2hlbWFcblxuLy8gY29uc3Qgc2NoZW1hID0gSm9pLm9iamVjdCgpLmtleXMoe1xuLy8gbm90ZXM6IEpvaS5zdHJpbmcoKS5odG1sU3RyaXAoKS5hbGxvdygnJywgbnVsbCksXG4vLyBzcGVjaWFsSW5zdHJ1Y3Rpb25zOiBKb2kuc3RyaW5nKCkuaHRtbFN0cmlwKClcbi8vIH0pO1xuLy8gY29uc3QgeyBlcnJvciwgdmFsdWUgfSA9IHNjaGVtYS52YWxpZGF0ZShyZXEuYm9keSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLElBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFzQixTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUV0QixNQUFNRyxTQUFTLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFFQyxHQUFHLEtBQU07RUFDckNDLElBQUksRUFBRSxRQUFRO0VBQ2RDLElBQUksRUFBRUYsR0FBRyxDQUFDRyxNQUFNLENBQUMsQ0FBQztFQUNsQkMsUUFBUSxFQUFFO0lBQ1IsbUJBQW1CLEVBQUU7RUFDdkIsQ0FBQztFQUNEQyxLQUFLLEVBQUU7SUFDTEMsVUFBVSxFQUFFO01BQ1ZDLFFBQVFBLENBQUNDLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3ZCLE1BQU1DLEtBQUssR0FBRyxJQUFBQyxxQkFBWSxFQUFDSCxLQUFLLEVBQUU7VUFDaENJLFdBQVcsRUFBRSxFQUFFO1VBQ2ZDLGlCQUFpQixFQUFFLENBQUM7UUFDdEIsQ0FBQyxDQUFDO1FBRUYsSUFBSUgsS0FBSyxLQUFLRixLQUFLLEVBQ2pCLE9BQU9DLE9BQU8sQ0FBQ0ssS0FBSyxDQUFDLG1CQUFtQixFQUFFO1VBQUVOO1FBQU0sQ0FBQyxDQUFDO1FBQ3RELE9BQU9FLEtBQUs7TUFDZDtJQUNGO0VBQ0Y7QUFDRixDQUFDLENBQUMsQ0FBQztBQUFDLElBQUFLLFFBQUEsR0FFV2xCLFNBQVMsRUFFeEI7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQW1CLE9BQUEsQ0FBQXBCLE9BQUEsR0FBQW1CLFFBQUEifQ==","map":{"version":3,"names":["_sanitizeHtml","_interopRequireDefault","require","_joi","obj","__esModule","default","customJoi","Joi","extend","joi","type","base","string","messages","rules","escapeHTML","validate","value","helpers","clean","sanitizeHtml","allowedTags","allowedAttributes","error","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/","sources":["customJoi.js"],"sourcesContent":["import sanitizeHtml from 'sanitize-html';\nimport Joi from 'joi';\n\nconst customJoi = Joi.extend((joi) => ({\n  type: 'string',\n  base: joi.string(),\n  messages: {\n    'string.escapeHTML': '{{#label}} not contain any html tags',\n  },\n  rules: {\n    escapeHTML: {\n      validate(value, helpers) {\n        const clean = sanitizeHtml(value, {\n          allowedTags: [],\n          allowedAttributes: {},\n        });\n\n        if (clean !== value)\n          return helpers.error('string.escapeHTML', { value });\n        return clean;\n      },\n    },\n  },\n}));\n\nexport default customJoi;\n\n// const Joi = require('../../_helpers/custom_joi');\n\n// then create validation schema\n\n// const schema = Joi.object().keys({\n// notes: Joi.string().htmlStrip().allow('', null),\n// specialInstructions: Joi.string().htmlStrip()\n// });\n// const { error, value } = schema.validate(req.body);\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsB,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtB,MAAMG,SAAS,GAAGC,YAAG,CAACC,MAAM,CAAEC,GAAG,KAAM;EACrCC,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAEF,GAAG,CAACG,MAAM,CAAC,CAAC;EAClBC,QAAQ,EAAE;IACR,mBAAmB,EAAE;EACvB,CAAC;EACDC,KAAK,EAAE;IACLC,UAAU,EAAE;MACVC,QAAQA,CAACC,KAAK,EAAEC,OAAO,EAAE;QACvB,MAAMC,KAAK,GAAG,IAAAC,qBAAY,EAACH,KAAK,EAAE;UAChCI,WAAW,EAAE,EAAE;UACfC,iBAAiB,EAAE,CAAC;QACtB,CAAC,CAAC;QAEF,IAAIH,KAAK,KAAKF,KAAK,EACjB,OAAOC,OAAO,CAACK,KAAK,CAAC,mBAAmB,EAAE;UAAEN;QAAM,CAAC,CAAC;QACtD,OAAOE,KAAK;MACd;IACF;EACF;AACF,CAAC,CAAC,CAAC;AAAC,IAAAK,QAAA,GAEWlB,SAAS,EAExB;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAAmB,OAAA,CAAApB,OAAA,GAAAmB,QAAA"}},"mtime":1689254861328},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/token-helper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyDBToken = exports.verifyAccessToken = exports.tokenfromheader = exports.saveToken = exports.randomTokenString = exports.parseTokenAndGetUserId = exports.generateToken = exports.generateAuthTokens = void 0;\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _Cryptor = require(\"../utils/Cryptor\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst accessSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst refreshSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst generateToken = async (userId, expires, type, secret) => {\n  const payload = {\n    sub: userId,\n    exp: Math.floor(Date.now() / 1000) + expires,\n    iat: Date.now().valueOf() / 1000,\n    type\n  };\n\n  // const duration = { expiresIn: expires };\n\n  const doEncrypt = _jsonwebtoken.default.sign(payload, secret);\n  const token = await (0, _Cryptor.Encrypt)(doEncrypt);\n  return token;\n};\n\n// const now = Date.now().valueOf() / 1000;\n\n// jwt.sign({\n//   id: 'an id',\n//   exp: Math.floor(Date.now() / 1000) + (60 * 2),\n//   iat: Math.floor(Date.now())\n// }, 'secret')\n\n// in this example its 2 minutes.\n// You can also calculate:\n// (60 * minutes), (3600 * hours) or (86400 * days) for minutes, hours or days.\nexports.generateToken = generateToken;\nconst saveToken = async (token, userId, expires, type, blacklisted) => {\n  const tokenDoc = await _tokenModel.default.create({\n    token,\n    user: userId,\n    expires,\n    type,\n    blacklisted\n  });\n  return tokenDoc;\n};\nexports.saveToken = saveToken;\nconst promisify = fn => {\n  return (...args) => {\n    return new Promise((resolve, reject) => {\n      function customCallback(err, ...results) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(results.length === 1 ? results[0] : results);\n      }\n      args.push(customCallback);\n      fn.call(void 0, ...args);\n    });\n  };\n};\nconst validateToken = async (token, secret) => {\n  const payload = await promisify(_jsonwebtoken.default.verify)(token, secret);\n  return payload;\n};\nconst parseTokenAndGetUserId = async token => {\n  const decrypted = await (0, _Cryptor.Decrypt)(token);\n  const decoded = await validateToken(decrypted, accessSecret);\n  return decoded.sub || '';\n};\nexports.parseTokenAndGetUserId = parseTokenAndGetUserId;\nconst tokenfromheader = async req => {\n  const authHeader = req.headers['authorization'];\n  const bearerToken = authHeader.split(' ');\n  const token = bearerToken[1];\n  if (!token) return next(new _ApiErrors.default(401, 'Access Denied'));\n  const tokenfromheader = await (0, _Cryptor.Decrypt)(token);\n  return tokenfromheader;\n};\nexports.tokenfromheader = tokenfromheader;\nconst verifyAccessToken = async token => {\n  // const decrypted = await Decrypt(token);\n  const payload = await validateToken(token, accessSecret);\n  if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n  return payload;\n};\nexports.verifyAccessToken = verifyAccessToken;\nconst verifyDBToken = async (token, type) => {\n  try {\n    const decrypted = await (0, _Cryptor.Decrypt)(token);\n    const payload = await validateToken(decrypted, refreshSecret);\n    if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n    const tokenDoc = await _tokenModel.default.findOne({\n      token,\n      type,\n      user: payload.sub,\n      blacklisted: false\n    });\n    if (!tokenDoc) throw new Error('Refresh token not found in store');\n    return tokenDoc;\n  } catch (error) {\n    console.error('Token is not valid', error.message);\n    return null;\n  }\n};\n\n// exp: Math.floor(Date.now() / 1000) + (60 * 60),\nexports.verifyDBToken = verifyDBToken;\nconst generateAuthTokens = async user => {\n  // const accessTokenExpires = 30 * 60 * 1000; // 30 minutes\n  const accessTokenExpires = 1 * 30; // 30 sec\n\n  const accessToken = await generateToken(user.id, accessTokenExpires, _tokenTypes.default.ACCESS, accessSecret);\n  const refreshTokenExpires = 365 * 24 * 60 * 60; // 1 yr\n\n  const refreshToken = await generateToken(user.id, refreshTokenExpires, _tokenTypes.default.REFRESH, refreshSecret);\n  await _tokenModel.default.create({\n    token: refreshToken,\n    user: user.id,\n    expires: new Date(Date.now() + refreshTokenExpires),\n    type: _tokenTypes.default.REFRESH,\n    blacklisted: false\n  });\n  return {\n    access: accessToken,\n    accessExpires: accessTokenExpires,\n    refresh: refreshToken,\n    refreshExpires: refreshTokenExpires\n  };\n};\nexports.generateAuthTokens = generateAuthTokens;\nconst randomTokenString = async str => {\n  return _crypto.default.randomBytes(str).toString('hex');\n};\nexports.randomTokenString = randomTokenString;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3J5cHRvIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfanNvbndlYnRva2VuIiwiX3VzZXJNb2RlbCIsIl90b2tlbk1vZGVsIiwiX3Rva2VuVHlwZXMiLCJfQ3J5cHRvciIsIl9BcGlFcnJvcnMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImFjY2Vzc1NlY3JldCIsInJlZnJlc2hTZWNyZXQiLCJnZW5lcmF0ZVRva2VuIiwidXNlcklkIiwiZXhwaXJlcyIsInR5cGUiLCJzZWNyZXQiLCJwYXlsb2FkIiwic3ViIiwiZXhwIiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsImlhdCIsInZhbHVlT2YiLCJkb0VuY3J5cHQiLCJqd3QiLCJzaWduIiwidG9rZW4iLCJFbmNyeXB0IiwiZXhwb3J0cyIsInNhdmVUb2tlbiIsImJsYWNrbGlzdGVkIiwidG9rZW5Eb2MiLCJUb2tlbiIsImNyZWF0ZSIsInVzZXIiLCJwcm9taXNpZnkiLCJmbiIsImFyZ3MiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImN1c3RvbUNhbGxiYWNrIiwiZXJyIiwicmVzdWx0cyIsImxlbmd0aCIsInB1c2giLCJjYWxsIiwidmFsaWRhdGVUb2tlbiIsInZlcmlmeSIsInBhcnNlVG9rZW5BbmRHZXRVc2VySWQiLCJkZWNyeXB0ZWQiLCJEZWNyeXB0IiwiZGVjb2RlZCIsInRva2VuZnJvbWhlYWRlciIsInJlcSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYmVhcmVyVG9rZW4iLCJzcGxpdCIsIm5leHQiLCJBcGlFcnJvciIsInZlcmlmeUFjY2Vzc1Rva2VuIiwiRXJyb3IiLCJ2ZXJpZnlEQlRva2VuIiwiZmluZE9uZSIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJnZW5lcmF0ZUF1dGhUb2tlbnMiLCJhY2Nlc3NUb2tlbkV4cGlyZXMiLCJhY2Nlc3NUb2tlbiIsImlkIiwidG9rZW5UeXBlcyIsIkFDQ0VTUyIsInJlZnJlc2hUb2tlbkV4cGlyZXMiLCJyZWZyZXNoVG9rZW4iLCJSRUZSRVNIIiwiYWNjZXNzIiwiYWNjZXNzRXhwaXJlcyIsInJlZnJlc2giLCJyZWZyZXNoRXhwaXJlcyIsInJhbmRvbVRva2VuU3RyaW5nIiwic3RyIiwiY3J5cHRvIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL2hlbHBlcnMvIiwic291cmNlcyI6WyJ0b2tlbi1oZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXItbW9kZWwnO1xuaW1wb3J0IFRva2VuIGZyb20gJy4uL21vZGVscy90b2tlbi1tb2RlbCc7XG5pbXBvcnQgdG9rZW5UeXBlcyBmcm9tICcuLi9jb25maWcvdG9rZW5UeXBlcyc7XG5pbXBvcnQgeyBFbmNyeXB0LCBEZWNyeXB0IH0gZnJvbSAnLi4vdXRpbHMvQ3J5cHRvcic7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5cbmNvbnN0IGFjY2Vzc1NlY3JldCA9XG4gICd5SnpkV0lpT2lJMk5ETmlaR0UyWW1VeU1qRTFOVEUwTkRkbE1UZzJPVGNpTENKcFlYUWlPakUyT0RFMk5USXlPRGtzSW1WNGNDSTZNVFknO1xuY29uc3QgcmVmcmVzaFNlY3JldCA9XG4gICd5SnpkV0lpT2lJMk5ETmlaR0UyWW1VeU1qRTFOVEUwTkRkbE1UZzJPVGNpTENKcFlYUWlPakUyT0RFMk5USXlPRGtzSW1WNGNDSTZNVFknO1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUb2tlbiA9IGFzeW5jICh1c2VySWQsIGV4cGlyZXMsIHR5cGUsIHNlY3JldCkgPT4ge1xuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIHN1YjogdXNlcklkLFxuICAgIGV4cDogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyBleHBpcmVzLFxuICAgIGlhdDogRGF0ZS5ub3coKS52YWx1ZU9mKCkgLyAxMDAwLFxuICAgIHR5cGUsXG4gIH07XG5cbiAgLy8gY29uc3QgZHVyYXRpb24gPSB7IGV4cGlyZXNJbjogZXhwaXJlcyB9O1xuXG4gIGNvbnN0IGRvRW5jcnlwdCA9IGp3dC5zaWduKHBheWxvYWQsIHNlY3JldCk7XG5cbiAgY29uc3QgdG9rZW4gPSBhd2FpdCBFbmNyeXB0KGRvRW5jcnlwdCk7XG5cbiAgcmV0dXJuIHRva2VuO1xufTtcblxuLy8gY29uc3Qgbm93ID0gRGF0ZS5ub3coKS52YWx1ZU9mKCkgLyAxMDAwO1xuXG4vLyBqd3Quc2lnbih7XG4vLyAgIGlkOiAnYW4gaWQnLFxuLy8gICBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgKDYwICogMiksXG4vLyAgIGlhdDogTWF0aC5mbG9vcihEYXRlLm5vdygpKVxuLy8gfSwgJ3NlY3JldCcpXG5cbi8vIGluIHRoaXMgZXhhbXBsZSBpdOKAmXMgMiBtaW51dGVzLlxuLy8gWW91IGNhbiBhbHNvIGNhbGN1bGF0ZTpcbi8vICg2MCAqIG1pbnV0ZXMpLCAoMzYwMCAqIGhvdXJzKSBvciAoODY0MDAgKiBkYXlzKSBmb3IgbWludXRlcywgaG91cnMgb3IgZGF5cy5cblxuZXhwb3J0IGNvbnN0IHNhdmVUb2tlbiA9IGFzeW5jICh0b2tlbiwgdXNlcklkLCBleHBpcmVzLCB0eXBlLCBibGFja2xpc3RlZCkgPT4ge1xuICBjb25zdCB0b2tlbkRvYyA9IGF3YWl0IFRva2VuLmNyZWF0ZSh7XG4gICAgdG9rZW4sXG4gICAgdXNlcjogdXNlcklkLFxuICAgIGV4cGlyZXMsXG4gICAgdHlwZSxcbiAgICBibGFja2xpc3RlZCxcbiAgfSk7XG4gIHJldHVybiB0b2tlbkRvYztcbn07XG5cbmNvbnN0IHByb21pc2lmeSA9IChmbikgPT4ge1xuICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZnVuY3Rpb24gY3VzdG9tQ2FsbGJhY2soZXJyLCAuLi5yZXN1bHRzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzdWx0cy5sZW5ndGggPT09IDEgPyByZXN1bHRzWzBdIDogcmVzdWx0cyk7XG4gICAgICB9XG5cbiAgICAgIGFyZ3MucHVzaChjdXN0b21DYWxsYmFjayk7XG4gICAgICBmbi5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICAgIH0pO1xuICB9O1xufTtcblxuY29uc3QgdmFsaWRhdGVUb2tlbiA9IGFzeW5jICh0b2tlbiwgc2VjcmV0KSA9PiB7XG4gIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBwcm9taXNpZnkoand0LnZlcmlmeSkodG9rZW4sIHNlY3JldCk7XG4gIHJldHVybiBwYXlsb2FkO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlVG9rZW5BbmRHZXRVc2VySWQgPSBhc3luYyAodG9rZW4pID0+IHtcbiAgY29uc3QgZGVjcnlwdGVkID0gYXdhaXQgRGVjcnlwdCh0b2tlbik7XG4gIGNvbnN0IGRlY29kZWQgPSBhd2FpdCB2YWxpZGF0ZVRva2VuKGRlY3J5cHRlZCwgYWNjZXNzU2VjcmV0KTtcbiAgcmV0dXJuIGRlY29kZWQuc3ViIHx8ICcnO1xufTtcblxuZXhwb3J0IGNvbnN0IHRva2VuZnJvbWhlYWRlciA9IGFzeW5jIChyZXEpID0+IHtcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XG5cbiAgY29uc3QgYmVhcmVyVG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJyk7XG5cbiAgY29uc3QgdG9rZW4gPSBiZWFyZXJUb2tlblsxXTtcblxuICBpZiAoIXRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnQWNjZXNzIERlbmllZCcpKTtcblxuICBjb25zdCB0b2tlbmZyb21oZWFkZXIgPSBhd2FpdCBEZWNyeXB0KHRva2VuKTtcblxuICByZXR1cm4gdG9rZW5mcm9taGVhZGVyO1xufTtcblxuZXhwb3J0IGNvbnN0IHZlcmlmeUFjY2Vzc1Rva2VuID0gYXN5bmMgKHRva2VuKSA9PiB7XG4gIC8vIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IERlY3J5cHQodG9rZW4pO1xuICBjb25zdCBwYXlsb2FkID0gYXdhaXQgdmFsaWRhdGVUb2tlbih0b2tlbiwgYWNjZXNzU2VjcmV0KTtcblxuICBpZiAodHlwZW9mIHBheWxvYWQuc3ViICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKDQwMCwgJ2JhZCB1c2VyJyk7XG5cbiAgcmV0dXJuIHBheWxvYWQ7XG59O1xuXG5leHBvcnQgY29uc3QgdmVyaWZ5REJUb2tlbiA9IGFzeW5jICh0b2tlbiwgdHlwZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IERlY3J5cHQodG9rZW4pO1xuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2YWxpZGF0ZVRva2VuKGRlY3J5cHRlZCwgcmVmcmVzaFNlY3JldCk7XG5cbiAgICBpZiAodHlwZW9mIHBheWxvYWQuc3ViICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKDQwMCwgJ2JhZCB1c2VyJyk7XG5cbiAgICBjb25zdCB0b2tlbkRvYyA9IGF3YWl0IFRva2VuLmZpbmRPbmUoe1xuICAgICAgdG9rZW4sXG4gICAgICB0eXBlLFxuICAgICAgdXNlcjogcGF5bG9hZC5zdWIsXG4gICAgICBibGFja2xpc3RlZDogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBpZiAoIXRva2VuRG9jKSB0aHJvdyBuZXcgRXJyb3IoJ1JlZnJlc2ggdG9rZW4gbm90IGZvdW5kIGluIHN0b3JlJyk7XG5cbiAgICByZXR1cm4gdG9rZW5Eb2M7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVG9rZW4gaXMgbm90IHZhbGlkJywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbi8vIGV4cDogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyAoNjAgKiA2MCksXG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUF1dGhUb2tlbnMgPSBhc3luYyAodXNlcikgPT4ge1xuICAvLyBjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZXMgPSAzMCAqIDYwICogMTAwMDsgLy8gMzAgbWludXRlc1xuICBjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZXMgPSAxICogMzA7IC8vIDMwIHNlY1xuXG4gIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgZ2VuZXJhdGVUb2tlbihcbiAgICB1c2VyLmlkLFxuICAgIGFjY2Vzc1Rva2VuRXhwaXJlcyxcbiAgICB0b2tlblR5cGVzLkFDQ0VTUyxcbiAgICBhY2Nlc3NTZWNyZXRcbiAgKTtcblxuICBjb25zdCByZWZyZXNoVG9rZW5FeHBpcmVzID0gMzY1ICogMjQgKiA2MCAqIDYwOyAvLyAxIHlyXG5cbiAgY29uc3QgcmVmcmVzaFRva2VuID0gYXdhaXQgZ2VuZXJhdGVUb2tlbihcbiAgICB1c2VyLmlkLFxuICAgIHJlZnJlc2hUb2tlbkV4cGlyZXMsXG4gICAgdG9rZW5UeXBlcy5SRUZSRVNILFxuICAgIHJlZnJlc2hTZWNyZXRcbiAgKTtcblxuICBhd2FpdCBUb2tlbi5jcmVhdGUoe1xuICAgIHRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgdXNlcjogdXNlci5pZCxcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgcmVmcmVzaFRva2VuRXhwaXJlcyksXG4gICAgdHlwZTogdG9rZW5UeXBlcy5SRUZSRVNILFxuICAgIGJsYWNrbGlzdGVkOiBmYWxzZSxcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhY2Nlc3M6IGFjY2Vzc1Rva2VuLFxuICAgIGFjY2Vzc0V4cGlyZXM6IGFjY2Vzc1Rva2VuRXhwaXJlcyxcblxuICAgIHJlZnJlc2g6IHJlZnJlc2hUb2tlbixcbiAgICByZWZyZXNoRXhwaXJlczogcmVmcmVzaFRva2VuRXhwaXJlcyxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCByYW5kb21Ub2tlblN0cmluZyA9IGFzeW5jIChzdHIpID0+IHtcbiAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcyhzdHIpLnRvU3RyaW5nKCdoZXgnKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFVBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFdBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFdBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLFFBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLFVBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUEyQyxTQUFBRCx1QkFBQVEsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUUzQyxNQUFNRyxZQUFZLEdBQ2hCLGdGQUFnRjtBQUNsRixNQUFNQyxhQUFhLEdBQ2pCLGdGQUFnRjtBQUUzRSxNQUFNQyxhQUFhLEdBQUcsTUFBQUEsQ0FBT0MsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsTUFBTSxLQUFLO0VBQ3BFLE1BQU1DLE9BQU8sR0FBRztJQUNkQyxHQUFHLEVBQUVMLE1BQU07SUFDWE0sR0FBRyxFQUFFQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHVCxPQUFPO0lBQzVDVSxHQUFHLEVBQUVGLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQ0UsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJO0lBQ2hDVjtFQUNG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","map":{"version":3,"names":["_crypto","_interopRequireDefault","require","_jsonwebtoken","_userModel","_tokenModel","_tokenTypes","_Cryptor","_ApiErrors","obj","__esModule","default","accessSecret","refreshSecret","generateToken","userId","expires","type","secret","payload","sub","exp","Math","floor","Date","now","iat","valueOf","doEncrypt","jwt","sign","token","Encrypt","exports","saveToken","blacklisted","tokenDoc","Token","create","user","promisify","fn","args","Promise","resolve","reject","customCallback","err","results","length","push","call","validateToken","verify","parseTokenAndGetUserId","decrypted","Decrypt","decoded","tokenfromheader","req","authHeader","headers","bearerToken","split","next","ApiError","verifyAccessToken","Error","verifyDBToken","findOne","error","console","message","generateAuthTokens","accessTokenExpires","accessToken","id","tokenTypes","ACCESS","refreshTokenExpires","refreshToken","REFRESH","access","accessExpires","refresh","refreshExpires","randomTokenString","str","crypto","randomBytes","toString"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/","sources":["token-helper.js"],"sourcesContent":["import crypto from 'crypto';\nimport jwt from 'jsonwebtoken';\nimport User from '../models/user-model';\nimport Token from '../models/token-model';\nimport tokenTypes from '../config/tokenTypes';\nimport { Encrypt, Decrypt } from '../utils/Cryptor';\nimport ApiError from '../errors/ApiErrors';\n\nconst accessSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst refreshSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\n\nexport const generateToken = async (userId, expires, type, secret) => {\n  const payload = {\n    sub: userId,\n    exp: Math.floor(Date.now() / 1000) + expires,\n    iat: Date.now().valueOf() / 1000,\n    type,\n  };\n\n  // const duration = { expiresIn: expires };\n\n  const doEncrypt = jwt.sign(payload, secret);\n\n  const token = await Encrypt(doEncrypt);\n\n  return token;\n};\n\n// const now = Date.now().valueOf() / 1000;\n\n// jwt.sign({\n//   id: 'an id',\n//   exp: Math.floor(Date.now() / 1000) + (60 * 2),\n//   iat: Math.floor(Date.now())\n// }, 'secret')\n\n// in this example its 2 minutes.\n// You can also calculate:\n// (60 * minutes), (3600 * hours) or (86400 * days) for minutes, hours or days.\n\nexport const saveToken = async (token, userId, expires, type, blacklisted) => {\n  const tokenDoc = await Token.create({\n    token,\n    user: userId,\n    expires,\n    type,\n    blacklisted,\n  });\n  return tokenDoc;\n};\n\nconst promisify = (fn) => {\n  return (...args) => {\n    return new Promise((resolve, reject) => {\n      function customCallback(err, ...results) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(results.length === 1 ? results[0] : results);\n      }\n\n      args.push(customCallback);\n      fn.call(this, ...args);\n    });\n  };\n};\n\nconst validateToken = async (token, secret) => {\n  const payload = await promisify(jwt.verify)(token, secret);\n  return payload;\n};\n\nexport const parseTokenAndGetUserId = async (token) => {\n  const decrypted = await Decrypt(token);\n  const decoded = await validateToken(decrypted, accessSecret);\n  return decoded.sub || '';\n};\n\nexport const tokenfromheader = async (req) => {\n  const authHeader = req.headers['authorization'];\n\n  const bearerToken = authHeader.split(' ');\n\n  const token = bearerToken[1];\n\n  if (!token) return next(new ApiError(401, 'Access Denied'));\n\n  const tokenfromheader = await Decrypt(token);\n\n  return tokenfromheader;\n};\n\nexport const verifyAccessToken = async (token) => {\n  // const decrypted = await Decrypt(token);\n  const payload = await validateToken(token, accessSecret);\n\n  if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n\n  return payload;\n};\n\nexport const verifyDBToken = async (token, type) => {\n  try {\n    const decrypted = await Decrypt(token);\n    const payload = await validateToken(decrypted, refreshSecret);\n\n    if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n\n    const tokenDoc = await Token.findOne({\n      token,\n      type,\n      user: payload.sub,\n      blacklisted: false,\n    });\n\n    if (!tokenDoc) throw new Error('Refresh token not found in store');\n\n    return tokenDoc;\n  } catch (error) {\n    console.error('Token is not valid', error.message);\n    return null;\n  }\n};\n\n// exp: Math.floor(Date.now() / 1000) + (60 * 60),\n\nexport const generateAuthTokens = async (user) => {\n  // const accessTokenExpires = 30 * 60 * 1000; // 30 minutes\n  const accessTokenExpires = 1 * 30; // 30 sec\n\n  const accessToken = await generateToken(\n    user.id,\n    accessTokenExpires,\n    tokenTypes.ACCESS,\n    accessSecret\n  );\n\n  const refreshTokenExpires = 365 * 24 * 60 * 60; // 1 yr\n\n  const refreshToken = await generateToken(\n    user.id,\n    refreshTokenExpires,\n    tokenTypes.REFRESH,\n    refreshSecret\n  );\n\n  await Token.create({\n    token: refreshToken,\n    user: user.id,\n    expires: new Date(Date.now() + refreshTokenExpires),\n    type: tokenTypes.REFRESH,\n    blacklisted: false,\n  });\n\n  return {\n    access: accessToken,\n    accessExpires: accessTokenExpires,\n\n    refresh: refreshToken,\n    refreshExpires: refreshTokenExpires,\n  };\n};\n\nexport const randomTokenString = async (str) => {\n  return crypto.randomBytes(str).toString('hex');\n};\n"],"mappings":"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"}},"mtime":1690643865000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/token-model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst tokenSchema = new _mongoose.default.Schema({\n  token: {\n    type: String,\n    required: true,\n    index: true\n  },\n  user: {\n    type: String,\n    ref: 'User',\n    required: true\n  },\n  blacklisted: {\n    type: Boolean,\n    default: false\n  }\n});\ntokenSchema.set('timestamps', false);\ntokenSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  }\n});\nconst Token = _mongoose.default.model('Token', tokenSchema);\nvar _default = Token;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidG9rZW5TY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsInRva2VuIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiaW5kZXgiLCJ1c2VyIiwicmVmIiwiYmxhY2tsaXN0ZWQiLCJCb29sZWFuIiwic2V0IiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwiaWQiLCJfaWQiLCJ0b0hleFN0cmluZyIsIl9fdiIsIlRva2VuIiwibW9kZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJ0b2tlbi1tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCB0b2tlblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICB0b2tlbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBpbmRleDogdHJ1ZSxcbiAgfSxcbiAgdXNlcjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZWY6ICdVc2VyJyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgYmxhY2tsaXN0ZWQ6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICB9LFxufSk7XG5cbnRva2VuU2NoZW1hLnNldCgndGltZXN0YW1wcycsIGZhbHNlKTtcblxudG9rZW5TY2hlbWEuc2V0KCd0b0pTT04nLCB7XG4gIHRyYW5zZm9ybTogZnVuY3Rpb24gKGRvYywgcmV0KSB7XG4gICAgcmV0LmlkID0gcmV0Ll9pZC50b0hleFN0cmluZygpO1xuICAgIGRlbGV0ZSByZXQuX2lkO1xuICAgIGRlbGV0ZSByZXQuX192O1xuICAgIHJldHVybiByZXQ7XG4gIH0sXG59KTtcblxuY29uc3QgVG9rZW4gPSBtb25nb29zZS5tb2RlbCgnVG9rZW4nLCB0b2tlblNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFRva2VuO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBZ0MsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFaEMsTUFBTUcsV0FBVyxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FBQztFQUN0Q0MsS0FBSyxFQUFFO0lBQ0xDLElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxLQUFLLEVBQUU7RUFDVCxDQUFDO0VBQ0RDLElBQUksRUFBRTtJQUNKSixJQUFJLEVBQUVDLE1BQU07SUFDWkksR0FBRyxFQUFFLE1BQU07SUFDWEgsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNESSxXQUFXLEVBQUU7SUFDWE4sSUFBSSxFQUFFTyxPQUFPO0lBQ2JaLE9BQU8sRUFBRTtFQUNYO0FBQ0YsQ0FBQyxDQUFDO0FBRUZDLFdBQVcsQ0FBQ1ksR0FBRyxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUM7QUFFcENaLFdBQVcsQ0FBQ1ksR0FBRyxDQUFDLFFBQVEsRUFBRTtFQUN4QkMsU0FBUyxFQUFFLFNBQUFBLENBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzdCQSxHQUFHLENBQUNDLEVBQUUsR0FBR0QsR0FBRyxDQUFDRSxHQUFHLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQzlCLE9BQU9ILEdBQUcsQ0FBQ0UsR0FBRztJQUNkLE9BQU9GLEdBQUcsQ0FBQ0ksR0FBRztJQUNkLE9BQU9KLEdBQUc7RUFDWjtBQUNGLENBQUMsQ0FBQztBQUVGLE1BQU1LLEtBQUssR0FBR25CLGlCQUFRLENBQUNvQixLQUFLLENBQUMsT0FBTyxFQUFFckIsV0FBVyxDQUFDO0FBQUMsSUFBQXNCLFFBQUEsR0FFcENGLEtBQUs7QUFBQUcsT0FBQSxDQUFBeEIsT0FBQSxHQUFBdUIsUUFBQSJ9","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","obj","__esModule","default","tokenSchema","mongoose","Schema","token","type","String","required","index","user","ref","blacklisted","Boolean","set","transform","doc","ret","id","_id","toHexString","__v","Token","model","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/","sources":["token-model.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst tokenSchema = new mongoose.Schema({\n  token: {\n    type: String,\n    required: true,\n    index: true,\n  },\n  user: {\n    type: String,\n    ref: 'User',\n    required: true,\n  },\n  blacklisted: {\n    type: Boolean,\n    default: false,\n  },\n});\n\ntokenSchema.set('timestamps', false);\n\ntokenSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  },\n});\n\nconst Token = mongoose.model('Token', tokenSchema);\n\nexport default Token;\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAgC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhC,MAAMG,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACtCC,KAAK,EAAE;IACLC,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdC,KAAK,EAAE;EACT,CAAC;EACDC,IAAI,EAAE;IACJJ,IAAI,EAAEC,MAAM;IACZI,GAAG,EAAE,MAAM;IACXH,QAAQ,EAAE;EACZ,CAAC;EACDI,WAAW,EAAE;IACXN,IAAI,EAAEO,OAAO;IACbZ,OAAO,EAAE;EACX;AACF,CAAC,CAAC;AAEFC,WAAW,CAACY,GAAG,CAAC,YAAY,EAAE,KAAK,CAAC;AAEpCZ,WAAW,CAACY,GAAG,CAAC,QAAQ,EAAE;EACxBC,SAAS,EAAE,SAAAA,CAAUC,GAAG,EAAEC,GAAG,EAAE;IAC7BA,GAAG,CAACC,EAAE,GAAGD,GAAG,CAACE,GAAG,CAACC,WAAW,CAAC,CAAC;IAC9B,OAAOH,GAAG,CAACE,GAAG;IACd,OAAOF,GAAG,CAACI,GAAG;IACd,OAAOJ,GAAG;EACZ;AACF,CAAC,CAAC;AAEF,MAAMK,KAAK,GAAGnB,iBAAQ,CAACoB,KAAK,CAAC,OAAO,EAAErB,WAAW,CAAC;AAAC,IAAAsB,QAAA,GAEpCF,KAAK;AAAAG,OAAA,CAAAxB,OAAA,GAAAuB,QAAA"}},"mtime":1689498391410},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/token-helper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyDBToken = exports.verifyAccessToken = exports.tokenfromheader = exports.saveToken = exports.randomTokenString = exports.parseTokenAndGetUserId = exports.generateToken = exports.generateAuthTokens = void 0;\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _Cryptor = require(\"../utils/Cryptor\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst accessSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst refreshSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst generateToken = async (userId, expires, type, secret) => {\n  const payload = {\n    sub: userId,\n    exp: Math.floor(Date.now() / 1000) + expires,\n    iat: Date.now().valueOf() / 1000,\n    type\n  };\n\n  // const duration = { expiresIn: expires };\n\n  const doEncrypt = _jsonwebtoken.default.sign(payload, secret);\n  const token = await (0, _Cryptor.Encrypt)(doEncrypt);\n  return token;\n};\n\n// const now = Date.now().valueOf() / 1000;\n\n// jwt.sign({\n//   id: 'an id',\n//   exp: Math.floor(Date.now() / 1000) + (60 * 2),\n//   iat: Math.floor(Date.now())\n// }, 'secret')\n\n// in this example its 2 minutes.\n// You can also calculate:\n// (60 * minutes), (3600 * hours) or (86400 * days) for minutes, hours or days.\nexports.generateToken = generateToken;\nconst saveToken = async (token, userId, expires, type, blacklisted) => {\n  const tokenDoc = await _tokenModel.default.create({\n    token,\n    user: userId,\n    expires,\n    type,\n    blacklisted\n  });\n  return tokenDoc;\n};\nexports.saveToken = saveToken;\nconst promisify = fn => {\n  return (...args) => {\n    return new Promise((resolve, reject) => {\n      function customCallback(err, ...results) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(results.length === 1 ? results[0] : results);\n      }\n      args.push(customCallback);\n      fn.call(void 0, ...args);\n    });\n  };\n};\nconst validateToken = async (token, secret) => {\n  const payload = await promisify(_jsonwebtoken.default.verify)(token, secret);\n  return payload;\n};\nconst parseTokenAndGetUserId = async token => {\n  const decrypted = await (0, _Cryptor.Decrypt)(token);\n  const decoded = await validateToken(decrypted, accessSecret);\n  return decoded.sub || '';\n};\nexports.parseTokenAndGetUserId = parseTokenAndGetUserId;\nconst tokenfromheader = async req => {\n  const authHeader = req.headers['authorization'];\n  const bearerToken = authHeader.split(' ');\n  const token = bearerToken[1];\n  if (!token) return next(new _ApiErrors.default(401, 'Access Denied'));\n  const tokenfromheader = await (0, _Cryptor.Decrypt)(token);\n  return tokenfromheader;\n};\nexports.tokenfromheader = tokenfromheader;\nconst verifyAccessToken = async token => {\n  // const decrypted = await Decrypt(token);\n  const payload = await validateToken(token, accessSecret);\n  if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n  return payload;\n};\nexports.verifyAccessToken = verifyAccessToken;\nconst verifyDBToken = async (token, type) => {\n  try {\n    const decrypted = await (0, _Cryptor.Decrypt)(token);\n    const payload = await validateToken(decrypted, refreshSecret);\n    if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n    const tokenDoc = await _tokenModel.default.findOne({\n      token,\n      type,\n      user: payload.sub,\n      blacklisted: false\n    });\n    if (!tokenDoc) throw new Error('Refresh token not found in store');\n    return tokenDoc;\n  } catch (error) {\n    console.error('Token is not valid', error.message);\n    return null;\n  }\n};\n\n// exp: Math.floor(Date.now() / 1000) + (60 * 60),\nexports.verifyDBToken = verifyDBToken;\nconst generateAuthTokens = async user => {\n  // const accessTokenExpires = 30 * 60 * 1000; // 30 minutes\n  const accessTokenExpires = 1 * 30; // 30 sec\n\n  const accessToken = await generateToken(user.id, accessTokenExpires, _tokenTypes.default.ACCESS, accessSecret);\n  const refreshTokenExpires = 365 * 24 * 60 * 60; // 1 yr\n\n  const refreshToken = await generateToken(user.id, refreshTokenExpires, _tokenTypes.default.REFRESH, refreshSecret);\n  await _tokenModel.default.create({\n    token: refreshToken,\n    user: user.id,\n    expires: new Date(Date.now() + refreshTokenExpires),\n    type: _tokenTypes.default.REFRESH,\n    blacklisted: false\n  });\n  return {\n    access: accessToken,\n    accessExpires: accessTokenExpires,\n    refresh: refreshToken,\n    refreshExpires: refreshTokenExpires\n  };\n};\nexports.generateAuthTokens = generateAuthTokens;\nconst randomTokenString = async str => {\n  return _crypto.default.randomBytes(str).toString('hex');\n};\nexports.randomTokenString = randomTokenString;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3J5cHRvIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfanNvbndlYnRva2VuIiwiX3VzZXJNb2RlbCIsIl90b2tlbk1vZGVsIiwiX3Rva2VuVHlwZXMiLCJfQ3J5cHRvciIsIl9BcGlFcnJvcnMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImFjY2Vzc1NlY3JldCIsInJlZnJlc2hTZWNyZXQiLCJnZW5lcmF0ZVRva2VuIiwidXNlcklkIiwiZXhwaXJlcyIsInR5cGUiLCJzZWNyZXQiLCJwYXlsb2FkIiwic3ViIiwiZXhwIiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsImlhdCIsInZhbHVlT2YiLCJkb0VuY3J5cHQiLCJqd3QiLCJzaWduIiwidG9rZW4iLCJFbmNyeXB0IiwiZXhwb3J0cyIsInNhdmVUb2tlbiIsImJsYWNrbGlzdGVkIiwidG9rZW5Eb2MiLCJUb2tlbiIsImNyZWF0ZSIsInVzZXIiLCJwcm9taXNpZnkiLCJmbiIsImFyZ3MiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImN1c3RvbUNhbGxiYWNrIiwiZXJyIiwicmVzdWx0cyIsImxlbmd0aCIsInB1c2giLCJjYWxsIiwidmFsaWRhdGVUb2tlbiIsInZlcmlmeSIsInBhcnNlVG9rZW5BbmRHZXRVc2VySWQiLCJkZWNyeXB0ZWQiLCJEZWNyeXB0IiwiZGVjb2RlZCIsInRva2VuZnJvbWhlYWRlciIsInJlcSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYmVhcmVyVG9rZW4iLCJzcGxpdCIsIm5leHQiLCJBcGlFcnJvciIsInZlcmlmeUFjY2Vzc1Rva2VuIiwiRXJyb3IiLCJ2ZXJpZnlEQlRva2VuIiwiZmluZE9uZSIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJnZW5lcmF0ZUF1dGhUb2tlbnMiLCJhY2Nlc3NUb2tlbkV4cGlyZXMiLCJhY2Nlc3NUb2tlbiIsImlkIiwidG9rZW5UeXBlcyIsIkFDQ0VTUyIsInJlZnJlc2hUb2tlbkV4cGlyZXMiLCJyZWZyZXNoVG9rZW4iLCJSRUZSRVNIIiwiYWNjZXNzIiwiYWNjZXNzRXhwaXJlcyIsInJlZnJlc2giLCJyZWZyZXNoRXhwaXJlcyIsInJhbmRvbVRva2VuU3RyaW5nIiwic3RyIiwiY3J5cHRvIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL2hlbHBlcnMvIiwic291cmNlcyI6WyJ0b2tlbi1oZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXItbW9kZWwnO1xuaW1wb3J0IFRva2VuIGZyb20gJy4uL21vZGVscy90b2tlbi1tb2RlbCc7XG5pbXBvcnQgdG9rZW5UeXBlcyBmcm9tICcuLi9jb25maWcvdG9rZW5UeXBlcyc7XG5pbXBvcnQgeyBFbmNyeXB0LCBEZWNyeXB0IH0gZnJvbSAnLi4vdXRpbHMvQ3J5cHRvcic7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5cbmNvbnN0IGFjY2Vzc1NlY3JldCA9XG4gICd5SnpkV0lpT2lJMk5ETmlaR0UyWW1VeU1qRTFOVEUwTkRkbE1UZzJPVGNpTENKcFlYUWlPakUyT0RFMk5USXlPRGtzSW1WNGNDSTZNVFknO1xuY29uc3QgcmVmcmVzaFNlY3JldCA9XG4gICd5SnpkV0lpT2lJMk5ETmlaR0UyWW1VeU1qRTFOVEUwTkRkbE1UZzJPVGNpTENKcFlYUWlPakUyT0RFMk5USXlPRGtzSW1WNGNDSTZNVFknO1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUb2tlbiA9IGFzeW5jICh1c2VySWQsIGV4cGlyZXMsIHR5cGUsIHNlY3JldCkgPT4ge1xuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIHN1YjogdXNlcklkLFxuICAgIGV4cDogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyBleHBpcmVzLFxuICAgIGlhdDogRGF0ZS5ub3coKS52YWx1ZU9mKCkgLyAxMDAwLFxuICAgIHR5cGUsXG4gIH07XG5cbiAgLy8gY29uc3QgZHVyYXRpb24gPSB7IGV4cGlyZXNJbjogZXhwaXJlcyB9O1xuXG4gIGNvbnN0IGRvRW5jcnlwdCA9IGp3dC5zaWduKHBheWxvYWQsIHNlY3JldCk7XG5cbiAgY29uc3QgdG9rZW4gPSBhd2FpdCBFbmNyeXB0KGRvRW5jcnlwdCk7XG5cbiAgcmV0dXJuIHRva2VuO1xufTtcblxuLy8gY29uc3Qgbm93ID0gRGF0ZS5ub3coKS52YWx1ZU9mKCkgLyAxMDAwO1xuXG4vLyBqd3Quc2lnbih7XG4vLyAgIGlkOiAnYW4gaWQnLFxuLy8gICBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgKDYwICogMiksXG4vLyAgIGlhdDogTWF0aC5mbG9vcihEYXRlLm5vdygpKVxuLy8gfSwgJ3NlY3JldCcpXG5cbi8vIGluIHRoaXMgZXhhbXBsZSBpdOKAmXMgMiBtaW51dGVzLlxuLy8gWW91IGNhbiBhbHNvIGNhbGN1bGF0ZTpcbi8vICg2MCAqIG1pbnV0ZXMpLCAoMzYwMCAqIGhvdXJzKSBvciAoODY0MDAgKiBkYXlzKSBmb3IgbWludXRlcywgaG91cnMgb3IgZGF5cy5cblxuZXhwb3J0IGNvbnN0IHNhdmVUb2tlbiA9IGFzeW5jICh0b2tlbiwgdXNlcklkLCBleHBpcmVzLCB0eXBlLCBibGFja2xpc3RlZCkgPT4ge1xuICBjb25zdCB0b2tlbkRvYyA9IGF3YWl0IFRva2VuLmNyZWF0ZSh7XG4gICAgdG9rZW4sXG4gICAgdXNlcjogdXNlcklkLFxuICAgIGV4cGlyZXMsXG4gICAgdHlwZSxcbiAgICBibGFja2xpc3RlZCxcbiAgfSk7XG4gIHJldHVybiB0b2tlbkRvYztcbn07XG5cbmNvbnN0IHByb21pc2lmeSA9IChmbikgPT4ge1xuICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZnVuY3Rpb24gY3VzdG9tQ2FsbGJhY2soZXJyLCAuLi5yZXN1bHRzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzdWx0cy5sZW5ndGggPT09IDEgPyByZXN1bHRzWzBdIDogcmVzdWx0cyk7XG4gICAgICB9XG5cbiAgICAgIGFyZ3MucHVzaChjdXN0b21DYWxsYmFjayk7XG4gICAgICBmbi5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICAgIH0pO1xuICB9O1xufTtcblxuY29uc3QgdmFsaWRhdGVUb2tlbiA9IGFzeW5jICh0b2tlbiwgc2VjcmV0KSA9PiB7XG4gIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBwcm9taXNpZnkoand0LnZlcmlmeSkodG9rZW4sIHNlY3JldCk7XG4gIHJldHVybiBwYXlsb2FkO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlVG9rZW5BbmRHZXRVc2VySWQgPSBhc3luYyAodG9rZW4pID0+IHtcbiAgY29uc3QgZGVjcnlwdGVkID0gYXdhaXQgRGVjcnlwdCh0b2tlbik7XG4gIGNvbnN0IGRlY29kZWQgPSBhd2FpdCB2YWxpZGF0ZVRva2VuKGRlY3J5cHRlZCwgYWNjZXNzU2VjcmV0KTtcbiAgcmV0dXJuIGRlY29kZWQuc3ViIHx8ICcnO1xufTtcblxuZXhwb3J0IGNvbnN0IHRva2VuZnJvbWhlYWRlciA9IGFzeW5jIChyZXEpID0+IHtcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XG5cbiAgY29uc3QgYmVhcmVyVG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJyk7XG5cbiAgY29uc3QgdG9rZW4gPSBiZWFyZXJUb2tlblsxXTtcblxuICBpZiAoIXRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnQWNjZXNzIERlbmllZCcpKTtcblxuICBjb25zdCB0b2tlbmZyb21oZWFkZXIgPSBhd2FpdCBEZWNyeXB0KHRva2VuKTtcblxuICByZXR1cm4gdG9rZW5mcm9taGVhZGVyO1xufTtcblxuZXhwb3J0IGNvbnN0IHZlcmlmeUFjY2Vzc1Rva2VuID0gYXN5bmMgKHRva2VuKSA9PiB7XG4gIC8vIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IERlY3J5cHQodG9rZW4pO1xuICBjb25zdCBwYXlsb2FkID0gYXdhaXQgdmFsaWRhdGVUb2tlbih0b2tlbiwgYWNjZXNzU2VjcmV0KTtcblxuICBpZiAodHlwZW9mIHBheWxvYWQuc3ViICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKDQwMCwgJ2JhZCB1c2VyJyk7XG5cbiAgcmV0dXJuIHBheWxvYWQ7XG59O1xuXG5leHBvcnQgY29uc3QgdmVyaWZ5REJUb2tlbiA9IGFzeW5jICh0b2tlbiwgdHlwZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IERlY3J5cHQodG9rZW4pO1xuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2YWxpZGF0ZVRva2VuKGRlY3J5cHRlZCwgcmVmcmVzaFNlY3JldCk7XG5cbiAgICBpZiAodHlwZW9mIHBheWxvYWQuc3ViICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKDQwMCwgJ2JhZCB1c2VyJyk7XG5cbiAgICBjb25zdCB0b2tlbkRvYyA9IGF3YWl0IFRva2VuLmZpbmRPbmUoe1xuICAgICAgdG9rZW4sXG4gICAgICB0eXBlLFxuICAgICAgdXNlcjogcGF5bG9hZC5zdWIsXG4gICAgICBibGFja2xpc3RlZDogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBpZiAoIXRva2VuRG9jKSB0aHJvdyBuZXcgRXJyb3IoJ1JlZnJlc2ggdG9rZW4gbm90IGZvdW5kIGluIHN0b3JlJyk7XG5cbiAgICByZXR1cm4gdG9rZW5Eb2M7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVG9rZW4gaXMgbm90IHZhbGlkJywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbi8vIGV4cDogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyAoNjAgKiA2MCksXG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUF1dGhUb2tlbnMgPSBhc3luYyAodXNlcikgPT4ge1xuICAvLyBjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZXMgPSAzMCAqIDYwICogMTAwMDsgLy8gMzAgbWludXRlc1xuICBjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZXMgPSAxICogMzA7IC8vIDMwIHNlY1xuXG4gIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgZ2VuZXJhdGVUb2tlbihcbiAgICB1c2VyLmlkLFxuICAgIGFjY2Vzc1Rva2VuRXhwaXJlcyxcbiAgICB0b2tlblR5cGVzLkFDQ0VTUyxcbiAgICBhY2Nlc3NTZWNyZXRcbiAgKTtcblxuICBjb25zdCByZWZyZXNoVG9rZW5FeHBpcmVzID0gMzY1ICogMjQgKiA2MCAqIDYwOyAvLyAxIHlyXG5cbiAgY29uc3QgcmVmcmVzaFRva2VuID0gYXdhaXQgZ2VuZXJhdGVUb2tlbihcbiAgICB1c2VyLmlkLFxuICAgIHJlZnJlc2hUb2tlbkV4cGlyZXMsXG4gICAgdG9rZW5UeXBlcy5SRUZSRVNILFxuICAgIHJlZnJlc2hTZWNyZXRcbiAgKTtcblxuICBhd2FpdCBUb2tlbi5jcmVhdGUoe1xuICAgIHRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgdXNlcjogdXNlci5pZCxcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgcmVmcmVzaFRva2VuRXhwaXJlcyksXG4gICAgdHlwZTogdG9rZW5UeXBlcy5SRUZSRVNILFxuICAgIGJsYWNrbGlzdGVkOiBmYWxzZSxcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhY2Nlc3M6IGFjY2Vzc1Rva2VuLFxuICAgIGFjY2Vzc0V4cGlyZXM6IGFjY2Vzc1Rva2VuRXhwaXJlcyxcblxuICAgIHJlZnJlc2g6IHJlZnJlc2hUb2tlbixcbiAgICByZWZyZXNoRXhwaXJlczogcmVmcmVzaFRva2VuRXhwaXJlcyxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCByYW5kb21Ub2tlblN0cmluZyA9IGFzeW5jIChzdHIpID0+IHtcbiAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcyhzdHIpLnRvU3RyaW5nKCdoZXgnKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFVBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFdBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFdBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLFFBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLFVBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUEyQyxTQUFBRCx1QkFBQVEsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUUzQyxNQUFNRyxZQUFZLEdBQ2hCLGdGQUFnRjtBQUNsRixNQUFNQyxhQUFhLEdBQ2pCLGdGQUFnRjtBQUUzRSxNQUFNQyxhQUFhLEdBQUcsTUFBQUEsQ0FBT0MsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsTUFBTSxLQUFLO0VBQ3BFLE1BQU1DLE9BQU8sR0FBRztJQUNkQyxHQUFHLEVBQUVMLE1BQU07SUFDWE0sR0FBRyxFQUFFQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHVCxPQUFPO0lBQzVDVSxHQUFHLEVBQUVGLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQ0UsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJO0lBQ2hDVjtFQUNG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","map":{"version":3,"names":["_crypto","_interopRequireDefault","require","_jsonwebtoken","_userModel","_tokenModel","_tokenTypes","_Cryptor","_ApiErrors","obj","__esModule","default","accessSecret","refreshSecret","generateToken","userId","expires","type","secret","payload","sub","exp","Math","floor","Date","now","iat","valueOf","doEncrypt","jwt","sign","token","Encrypt","exports","saveToken","blacklisted","tokenDoc","Token","create","user","promisify","fn","args","Promise","resolve","reject","customCallback","err","results","length","push","call","validateToken","verify","parseTokenAndGetUserId","decrypted","Decrypt","decoded","tokenfromheader","req","authHeader","headers","bearerToken","split","next","ApiError","verifyAccessToken","Error","verifyDBToken","findOne","error","console","message","generateAuthTokens","accessTokenExpires","accessToken","id","tokenTypes","ACCESS","refreshTokenExpires","refreshToken","REFRESH","access","accessExpires","refresh","refreshExpires","randomTokenString","str","crypto","randomBytes","toString"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/helpers/","sources":["token-helper.js"],"sourcesContent":["import crypto from 'crypto';\nimport jwt from 'jsonwebtoken';\nimport User from '../models/user-model';\nimport Token from '../models/token-model';\nimport tokenTypes from '../config/tokenTypes';\nimport { Encrypt, Decrypt } from '../utils/Cryptor';\nimport ApiError from '../errors/ApiErrors';\n\nconst accessSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst refreshSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\n\nexport const generateToken = async (userId, expires, type, secret) => {\n  const payload = {\n    sub: userId,\n    exp: Math.floor(Date.now() / 1000) + expires,\n    iat: Date.now().valueOf() / 1000,\n    type,\n  };\n\n  // const duration = { expiresIn: expires };\n\n  const doEncrypt = jwt.sign(payload, secret);\n\n  const token = await Encrypt(doEncrypt);\n\n  return token;\n};\n\n// const now = Date.now().valueOf() / 1000;\n\n// jwt.sign({\n//   id: 'an id',\n//   exp: Math.floor(Date.now() / 1000) + (60 * 2),\n//   iat: Math.floor(Date.now())\n// }, 'secret')\n\n// in this example its 2 minutes.\n// You can also calculate:\n// (60 * minutes), (3600 * hours) or (86400 * days) for minutes, hours or days.\n\nexport const saveToken = async (token, userId, expires, type, blacklisted) => {\n  const tokenDoc = await Token.create({\n    token,\n    user: userId,\n    expires,\n    type,\n    blacklisted,\n  });\n  return tokenDoc;\n};\n\nconst promisify = (fn) => {\n  return (...args) => {\n    return new Promise((resolve, reject) => {\n      function customCallback(err, ...results) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(results.length === 1 ? results[0] : results);\n      }\n\n      args.push(customCallback);\n      fn.call(this, ...args);\n    });\n  };\n};\n\nconst validateToken = async (token, secret) => {\n  const payload = await promisify(jwt.verify)(token, secret);\n  return payload;\n};\n\nexport const parseTokenAndGetUserId = async (token) => {\n  const decrypted = await Decrypt(token);\n  const decoded = await validateToken(decrypted, accessSecret);\n  return decoded.sub || '';\n};\n\nexport const tokenfromheader = async (req) => {\n  const authHeader = req.headers['authorization'];\n\n  const bearerToken = authHeader.split(' ');\n\n  const token = bearerToken[1];\n\n  if (!token) return next(new ApiError(401, 'Access Denied'));\n\n  const tokenfromheader = await Decrypt(token);\n\n  return tokenfromheader;\n};\n\nexport const verifyAccessToken = async (token) => {\n  // const decrypted = await Decrypt(token);\n  const payload = await validateToken(token, accessSecret);\n\n  if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n\n  return payload;\n};\n\nexport const verifyDBToken = async (token, type) => {\n  try {\n    const decrypted = await Decrypt(token);\n    const payload = await validateToken(decrypted, refreshSecret);\n\n    if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n\n    const tokenDoc = await Token.findOne({\n      token,\n      type,\n      user: payload.sub,\n      blacklisted: false,\n    });\n\n    if (!tokenDoc) throw new Error('Refresh token not found in store');\n\n    return tokenDoc;\n  } catch (error) {\n    console.error('Token is not valid', error.message);\n    return null;\n  }\n};\n\n// exp: Math.floor(Date.now() / 1000) + (60 * 60),\n\nexport const generateAuthTokens = async (user) => {\n  // const accessTokenExpires = 30 * 60 * 1000; // 30 minutes\n  const accessTokenExpires = 1 * 30; // 30 sec\n\n  const accessToken = await generateToken(\n    user.id,\n    accessTokenExpires,\n    tokenTypes.ACCESS,\n    accessSecret\n  );\n\n  const refreshTokenExpires = 365 * 24 * 60 * 60; // 1 yr\n\n  const refreshToken = await generateToken(\n    user.id,\n    refreshTokenExpires,\n    tokenTypes.REFRESH,\n    refreshSecret\n  );\n\n  await Token.create({\n    token: refreshToken,\n    user: user.id,\n    expires: new Date(Date.now() + refreshTokenExpires),\n    type: tokenTypes.REFRESH,\n    blacklisted: false,\n  });\n\n  return {\n    access: accessToken,\n    accessExpires: accessTokenExpires,\n\n    refresh: refreshToken,\n    refreshExpires: refreshTokenExpires,\n  };\n};\n\nexport const randomTokenString = async (str) => {\n  return crypto.randomBytes(str).toString('hex');\n};\n"],"mappings":"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"}},"mtime":1690793052508},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/Cryptor.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Decrypt = Decrypt;\nexports.Encrypt = Encrypt;\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst secret = 'appSecretKey';\nconst rounds = 9921;\nconst keySize = 32;\nconst algorithm = 'aes-256-cbc';\nconst salt = _crypto.default.createHash('sha1').update(secret).digest('hex');\nasync function Encrypt(data) {\n  try {\n    let iv = _crypto.default.randomBytes(16);\n    let key = _crypto.default.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let cipher = _crypto.default.createCipheriv(algorithm, Buffer.from(key), iv);\n    let encryptedData = Buffer.concat([cipher.update(JSON.stringify(data)), cipher.final()]);\n    return iv.toString('base64') + ':' + encryptedData.toString('base64');\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\nasync function Decrypt(encData) {\n  try {\n    let textParts = encData.split(':');\n    let iv = Buffer.from(textParts.shift(), 'base64');\n    let encryptedData = Buffer.from(textParts.join(':'), 'base64');\n    let key = _crypto.default.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let decipher = _crypto.default.createDecipheriv(algorithm, Buffer.from(key), iv);\n    let decryptedData = decipher.update(encryptedData);\n    decryptedData = Buffer.concat([decryptedData, decipher.final()]);\n    return JSON.parse(decryptedData.toString());\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3J5cHRvIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInNlY3JldCIsInJvdW5kcyIsImtleVNpemUiLCJhbGdvcml0aG0iLCJzYWx0IiwiY3J5cHRvIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsIkVuY3J5cHQiLCJkYXRhIiwiaXYiLCJyYW5kb21CeXRlcyIsImtleSIsInBia2RmMlN5bmMiLCJjaXBoZXIiLCJjcmVhdGVDaXBoZXJpdiIsIkJ1ZmZlciIsImZyb20iLCJlbmNyeXB0ZWREYXRhIiwiY29uY2F0IiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbmFsIiwidG9TdHJpbmciLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJEZWNyeXB0IiwiZW5jRGF0YSIsInRleHRQYXJ0cyIsInNwbGl0Iiwic2hpZnQiLCJqb2luIiwiZGVjaXBoZXIiLCJjcmVhdGVEZWNpcGhlcml2IiwiZGVjcnlwdGVkRGF0YSIsInBhcnNlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJDcnlwdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuY29uc3Qgc2VjcmV0ID0gJ2FwcFNlY3JldEtleSc7XG5jb25zdCByb3VuZHMgPSA5OTIxO1xuY29uc3Qga2V5U2l6ZSA9IDMyO1xuY29uc3QgYWxnb3JpdGhtID0gJ2Flcy0yNTYtY2JjJztcbmNvbnN0IHNhbHQgPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShzZWNyZXQpLmRpZ2VzdCgnaGV4Jyk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBFbmNyeXB0KGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBsZXQgaXYgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMTYpO1xuICAgIGxldCBrZXkgPSBjcnlwdG8ucGJrZGYyU3luYyhzZWNyZXQsIHNhbHQsIHJvdW5kcywga2V5U2l6ZSwgJ3NoYTUxMicpO1xuICAgIGxldCBjaXBoZXIgPSBjcnlwdG8uY3JlYXRlQ2lwaGVyaXYoYWxnb3JpdGhtLCBCdWZmZXIuZnJvbShrZXkpLCBpdik7XG4gICAgbGV0IGVuY3J5cHRlZERhdGEgPSBCdWZmZXIuY29uY2F0KFtcbiAgICAgIGNpcGhlci51cGRhdGUoSlNPTi5zdHJpbmdpZnkoZGF0YSkpLFxuICAgICAgY2lwaGVyLmZpbmFsKCksXG4gICAgXSk7XG4gICAgcmV0dXJuIGl2LnRvU3RyaW5nKCdiYXNlNjQnKSArICc6JyArIGVuY3J5cHRlZERhdGEudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBEZWNyeXB0KGVuY0RhdGEpIHtcbiAgdHJ5IHtcbiAgICBsZXQgdGV4dFBhcnRzID0gZW5jRGF0YS5zcGxpdCgnOicpO1xuICAgIGxldCBpdiA9IEJ1ZmZlci5mcm9tKHRleHRQYXJ0cy5zaGlmdCgpLCAnYmFzZTY0Jyk7XG4gICAgbGV0IGVuY3J5cHRlZERhdGEgPSBCdWZmZXIuZnJvbSh0ZXh0UGFydHMuam9pbignOicpLCAnYmFzZTY0Jyk7XG4gICAgbGV0IGtleSA9IGNyeXB0by5wYmtkZjJTeW5jKHNlY3JldCwgc2FsdCwgcm91bmRzLCBrZXlTaXplLCAnc2hhNTEyJyk7XG4gICAgbGV0IGRlY2lwaGVyID0gY3J5cHRvLmNyZWF0ZURlY2lwaGVyaXYoYWxnb3JpdGhtLCBCdWZmZXIuZnJvbShrZXkpLCBpdik7XG4gICAgbGV0IGRlY3J5cHRlZERhdGEgPSBkZWNpcGhlci51cGRhdGUoZW5jcnlwdGVkRGF0YSk7XG4gICAgZGVjcnlwdGVkRGF0YSA9IEJ1ZmZlci5jb25jYXQoW2RlY3J5cHRlZERhdGEsIGRlY2lwaGVyLmZpbmFsKCldKTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShkZWNyeXB0ZWREYXRhLnRvU3RyaW5nKCkpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBNEIsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFNUIsTUFBTUcsTUFBTSxHQUFHLGNBQWM7QUFDN0IsTUFBTUMsTUFBTSxHQUFHLElBQUk7QUFDbkIsTUFBTUMsT0FBTyxHQUFHLEVBQUU7QUFDbEIsTUFBTUMsU0FBUyxHQUFHLGFBQWE7QUFDL0IsTUFBTUMsSUFBSSxHQUFHQyxlQUFNLENBQUNDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQ0MsTUFBTSxDQUFDUCxNQUFNLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUU1RCxlQUFlQyxPQUFPQSxDQUFDQyxJQUFJLEVBQUU7RUFDbEMsSUFBSTtJQUNGLElBQUlDLEVBQUUsR0FBR04sZUFBTSxDQUFDTyxXQUFXLENBQUMsRUFBRSxDQUFDO0lBQy9CLElBQUlDLEdBQUcsR0FBR1IsZUFBTSxDQUFDUyxVQUFVLENBQUNkLE1BQU0sRUFBRUksSUFBSSxFQUFFSCxNQUFNLEVBQUVDLE9BQU8sRUFBRSxRQUFRLENBQUM7SUFDcEUsSUFBSWEsTUFBTSxHQUFHVixlQUFNLENBQUNXLGNBQWMsQ0FBQ2IsU0FBUyxFQUFFYyxNQUFNLENBQUNDLElBQUksQ0FBQ0wsR0FBRyxDQUFDLEVBQUVGLEVBQUUsQ0FBQztJQUNuRSxJQUFJUSxhQUFhLEdBQUdGLE1BQU0sQ0FBQ0csTUFBTSxDQUFDLENBQ2hDTCxNQUFNLENBQUNSLE1BQU0sQ0FBQ2MsSUFBSSxDQUFDQyxTQUFTLENBQUNaLElBQUksQ0FBQyxDQUFDLEVBQ25DSyxNQUFNLENBQUNRLEtBQUssQ0FBQyxDQUFDLENBQ2YsQ0FBQztJQUNGLE9BQU9aLEVBQUUsQ0FBQ2EsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsR0FBR0wsYUFBYSxDQUFDSyxRQUFRLENBQUMsUUFBUSxDQUFDO0VBQ3ZFLENBQUMsQ0FBQyxPQUFPQyxHQUFHLEVBQUU7SUFDWkMsT0FBTyxDQUFDQyxLQUFLLENBQUNGLEdBQUcsQ0FBQztJQUNsQixPQUFPLEtBQUs7RUFDZDtBQUNGO0FBRU8sZUFBZUcsT0FBT0EsQ0FBQ0MsT0FBTyxFQUFFO0VBQ3JDLElBQUk7SUFDRixJQUFJQyxTQUFTLEdBQUdELE9BQU8sQ0FBQ0UsS0FBSyxDQUFDLEdBQUcsQ0FBQztJQUNsQyxJQUFJcEIsRUFBRSxHQUFHTSxNQUFNLENBQUNDLElBQUksQ0FBQ1ksU0FBUyxDQUFDRSxLQUFLLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQztJQUNqRCxJQUFJYixhQUFhLEdBQUdGLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDWSxTQUFTLENBQUNHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLENBQUM7SUFDOUQsSUFBSXBCLEdBQUcsR0FBR1IsZUFBTSxDQUFDUyxVQUFVLENBQUNkLE1BQU0sRUFBRUksSUFBSSxFQUFFSCxNQUFNLEVBQUVDLE9BQU8sRUFBRSxRQUFRLENBQUM7SUFDcEUsSUFBSWdDLFFBQVEsR0FBRzdCLGVBQU0sQ0FBQzhCLGdCQUFnQixDQUFDaEMsU0FBUyxFQUFFYyxNQUFNLENBQUNDLElBQUksQ0FBQ0wsR0FBRyxDQUFDLEVBQUVGLEVBQUUsQ0FBQztJQUN2RSxJQUFJeUIsYUFBYSxHQUFHRixRQUFRLENBQUMzQixNQUFNLENBQUNZLGFBQWEsQ0FBQztJQUNsRGlCLGFBQWEsR0FBR25CLE1BQU0sQ0FBQ0csTUFBTSxDQUFDLENBQUNnQixhQUFhLEVBQUVGLFFBQVEsQ0FBQ1gsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hFLE9BQU9GLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ0QsYUFBYSxDQUFDWixRQUFRLENBQUMsQ0FBQyxDQUFDO0VBQzdDLENBQUMsQ0FBQyxPQUFPQyxHQUFHLEVBQUU7SUFDWkMsT0FBTyxDQUFDQyxLQUFLLENBQUNGLEdBQUcsQ0FBQztJQUNsQixPQUFPLEtBQUs7RUFDZDtBQUNGIn0=","map":{"version":3,"names":["_crypto","_interopRequireDefault","require","obj","__esModule","default","secret","rounds","keySize","algorithm","salt","crypto","createHash","update","digest","Encrypt","data","iv","randomBytes","key","pbkdf2Sync","cipher","createCipheriv","Buffer","from","encryptedData","concat","JSON","stringify","final","toString","err","console","error","Decrypt","encData","textParts","split","shift","join","decipher","createDecipheriv","decryptedData","parse"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/","sources":["Cryptor.js"],"sourcesContent":["import crypto from 'crypto';\n\nconst secret = 'appSecretKey';\nconst rounds = 9921;\nconst keySize = 32;\nconst algorithm = 'aes-256-cbc';\nconst salt = crypto.createHash('sha1').update(secret).digest('hex');\n\nexport async function Encrypt(data) {\n  try {\n    let iv = crypto.randomBytes(16);\n    let key = crypto.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let cipher = crypto.createCipheriv(algorithm, Buffer.from(key), iv);\n    let encryptedData = Buffer.concat([\n      cipher.update(JSON.stringify(data)),\n      cipher.final(),\n    ]);\n    return iv.toString('base64') + ':' + encryptedData.toString('base64');\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n\nexport async function Decrypt(encData) {\n  try {\n    let textParts = encData.split(':');\n    let iv = Buffer.from(textParts.shift(), 'base64');\n    let encryptedData = Buffer.from(textParts.join(':'), 'base64');\n    let key = crypto.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let decipher = crypto.createDecipheriv(algorithm, Buffer.from(key), iv);\n    let decryptedData = decipher.update(encryptedData);\n    decryptedData = Buffer.concat([decryptedData, decipher.final()]);\n    return JSON.parse(decryptedData.toString());\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE5B,MAAMG,MAAM,GAAG,cAAc;AAC7B,MAAMC,MAAM,GAAG,IAAI;AACnB,MAAMC,OAAO,GAAG,EAAE;AAClB,MAAMC,SAAS,GAAG,aAAa;AAC/B,MAAMC,IAAI,GAAGC,eAAM,CAACC,UAAU,CAAC,MAAM,CAAC,CAACC,MAAM,CAACP,MAAM,CAAC,CAACQ,MAAM,CAAC,KAAK,CAAC;AAE5D,eAAeC,OAAOA,CAACC,IAAI,EAAE;EAClC,IAAI;IACF,IAAIC,EAAE,GAAGN,eAAM,CAACO,WAAW,CAAC,EAAE,CAAC;IAC/B,IAAIC,GAAG,GAAGR,eAAM,CAACS,UAAU,CAACd,MAAM,EAAEI,IAAI,EAAEH,MAAM,EAAEC,OAAO,EAAE,QAAQ,CAAC;IACpE,IAAIa,MAAM,GAAGV,eAAM,CAACW,cAAc,CAACb,SAAS,EAAEc,MAAM,CAACC,IAAI,CAACL,GAAG,CAAC,EAAEF,EAAE,CAAC;IACnE,IAAIQ,aAAa,GAAGF,MAAM,CAACG,MAAM,CAAC,CAChCL,MAAM,CAACR,MAAM,CAACc,IAAI,CAACC,SAAS,CAACZ,IAAI,CAAC,CAAC,EACnCK,MAAM,CAACQ,KAAK,CAAC,CAAC,CACf,CAAC;IACF,OAAOZ,EAAE,CAACa,QAAQ,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAGL,aAAa,CAACK,QAAQ,CAAC,QAAQ,CAAC;EACvE,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClB,OAAO,KAAK;EACd;AACF;AAEO,eAAeG,OAAOA,CAACC,OAAO,EAAE;EACrC,IAAI;IACF,IAAIC,SAAS,GAAGD,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC;IAClC,IAAIpB,EAAE,GAAGM,MAAM,CAACC,IAAI,CAACY,SAAS,CAACE,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC;IACjD,IAAIb,aAAa,GAAGF,MAAM,CAACC,IAAI,CAACY,SAAS,CAACG,IAAI,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC;IAC9D,IAAIpB,GAAG,GAAGR,eAAM,CAACS,UAAU,CAACd,MAAM,EAAEI,IAAI,EAAEH,MAAM,EAAEC,OAAO,EAAE,QAAQ,CAAC;IACpE,IAAIgC,QAAQ,GAAG7B,eAAM,CAAC8B,gBAAgB,CAAChC,SAAS,EAAEc,MAAM,CAACC,IAAI,CAACL,GAAG,CAAC,EAAEF,EAAE,CAAC;IACvE,IAAIyB,aAAa,GAAGF,QAAQ,CAAC3B,MAAM,CAACY,aAAa,CAAC;IAClDiB,aAAa,GAAGnB,MAAM,CAACG,MAAM,CAAC,CAACgB,aAAa,EAAEF,QAAQ,CAACX,KAAK,CAAC,CAAC,CAAC,CAAC;IAChE,OAAOF,IAAI,CAACgB,KAAK,CAACD,aAAa,CAACZ,QAAQ,CAAC,CAAC,CAAC;EAC7C,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClB,OAAO,KAAK;EACd;AACF"}},"mtime":1682522558000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/token-model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst tokenSchema = new _mongoose.default.Schema({\n  token: {\n    type: String,\n    required: true,\n    index: true\n  },\n  user: {\n    type: String,\n    ref: 'User',\n    required: true\n  },\n  blacklisted: {\n    type: Boolean,\n    default: false\n  }\n});\ntokenSchema.set('timestamps', false);\ntokenSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  }\n});\nconst Token = _mongoose.default.model('Token', tokenSchema);\nvar _default = Token;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidG9rZW5TY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsInRva2VuIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiaW5kZXgiLCJ1c2VyIiwicmVmIiwiYmxhY2tsaXN0ZWQiLCJCb29sZWFuIiwic2V0IiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwiaWQiLCJfaWQiLCJ0b0hleFN0cmluZyIsIl9fdiIsIlRva2VuIiwibW9kZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJ0b2tlbi1tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCB0b2tlblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICB0b2tlbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBpbmRleDogdHJ1ZSxcbiAgfSxcbiAgdXNlcjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZWY6ICdVc2VyJyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgYmxhY2tsaXN0ZWQ6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICB9LFxufSk7XG5cbnRva2VuU2NoZW1hLnNldCgndGltZXN0YW1wcycsIGZhbHNlKTtcblxudG9rZW5TY2hlbWEuc2V0KCd0b0pTT04nLCB7XG4gIHRyYW5zZm9ybTogZnVuY3Rpb24gKGRvYywgcmV0KSB7XG4gICAgcmV0LmlkID0gcmV0Ll9pZC50b0hleFN0cmluZygpO1xuICAgIGRlbGV0ZSByZXQuX2lkO1xuICAgIGRlbGV0ZSByZXQuX192O1xuICAgIHJldHVybiByZXQ7XG4gIH0sXG59KTtcblxuY29uc3QgVG9rZW4gPSBtb25nb29zZS5tb2RlbCgnVG9rZW4nLCB0b2tlblNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFRva2VuO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBZ0MsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFaEMsTUFBTUcsV0FBVyxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FBQztFQUN0Q0MsS0FBSyxFQUFFO0lBQ0xDLElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxLQUFLLEVBQUU7RUFDVCxDQUFDO0VBQ0RDLElBQUksRUFBRTtJQUNKSixJQUFJLEVBQUVDLE1BQU07SUFDWkksR0FBRyxFQUFFLE1BQU07SUFDWEgsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNESSxXQUFXLEVBQUU7SUFDWE4sSUFBSSxFQUFFTyxPQUFPO0lBQ2JaLE9BQU8sRUFBRTtFQUNYO0FBQ0YsQ0FBQyxDQUFDO0FBRUZDLFdBQVcsQ0FBQ1ksR0FBRyxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUM7QUFFcENaLFdBQVcsQ0FBQ1ksR0FBRyxDQUFDLFFBQVEsRUFBRTtFQUN4QkMsU0FBUyxFQUFFLFNBQUFBLENBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzdCQSxHQUFHLENBQUNDLEVBQUUsR0FBR0QsR0FBRyxDQUFDRSxHQUFHLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQzlCLE9BQU9ILEdBQUcsQ0FBQ0UsR0FBRztJQUNkLE9BQU9GLEdBQUcsQ0FBQ0ksR0FBRztJQUNkLE9BQU9KLEdBQUc7RUFDWjtBQUNGLENBQUMsQ0FBQztBQUVGLE1BQU1LLEtBQUssR0FBR25CLGlCQUFRLENBQUNvQixLQUFLLENBQUMsT0FBTyxFQUFFckIsV0FBVyxDQUFDO0FBQUMsSUFBQXNCLFFBQUEsR0FFcENGLEtBQUs7QUFBQUcsT0FBQSxDQUFBeEIsT0FBQSxHQUFBdUIsUUFBQSJ9","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","obj","__esModule","default","tokenSchema","mongoose","Schema","token","type","String","required","index","user","ref","blacklisted","Boolean","set","transform","doc","ret","id","_id","toHexString","__v","Token","model","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/models/","sources":["token-model.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst tokenSchema = new mongoose.Schema({\n  token: {\n    type: String,\n    required: true,\n    index: true,\n  },\n  user: {\n    type: String,\n    ref: 'User',\n    required: true,\n  },\n  blacklisted: {\n    type: Boolean,\n    default: false,\n  },\n});\n\ntokenSchema.set('timestamps', false);\n\ntokenSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  },\n});\n\nconst Token = mongoose.model('Token', tokenSchema);\n\nexport default Token;\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAgC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhC,MAAMG,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACtCC,KAAK,EAAE;IACLC,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdC,KAAK,EAAE;EACT,CAAC;EACDC,IAAI,EAAE;IACJJ,IAAI,EAAEC,MAAM;IACZI,GAAG,EAAE,MAAM;IACXH,QAAQ,EAAE;EACZ,CAAC;EACDI,WAAW,EAAE;IACXN,IAAI,EAAEO,OAAO;IACbZ,OAAO,EAAE;EACX;AACF,CAAC,CAAC;AAEFC,WAAW,CAACY,GAAG,CAAC,YAAY,EAAE,KAAK,CAAC;AAEpCZ,WAAW,CAACY,GAAG,CAAC,QAAQ,EAAE;EACxBC,SAAS,EAAE,SAAAA,CAAUC,GAAG,EAAEC,GAAG,EAAE;IAC7BA,GAAG,CAACC,EAAE,GAAGD,GAAG,CAACE,GAAG,CAACC,WAAW,CAAC,CAAC;IAC9B,OAAOH,GAAG,CAACE,GAAG;IACd,OAAOF,GAAG,CAACI,GAAG;IACd,OAAOJ,GAAG;EACZ;AACF,CAAC,CAAC;AAEF,MAAMK,KAAK,GAAGnB,iBAAQ,CAACoB,KAAK,CAAC,OAAO,EAAErB,WAAW,CAAC;AAAC,IAAAsB,QAAA,GAEpCF,KAAK;AAAAG,OAAA,CAAAxB,OAAA,GAAAuB,QAAA"}},"mtime":1689498391410},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/tokenTypes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  ACCESS: 'access',\n  REFRESH: 'refresh'\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBQ0NFU1MiLCJSRUZSRVNIIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJfZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL2NvbmZpZy8iLCJzb3VyY2VzIjpbInRva2VuVHlwZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICBBQ0NFU1M6ICdhY2Nlc3MnLFxuICBSRUZSRVNIOiAncmVmcmVzaCcsXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7ZUFBZTtFQUNiQSxNQUFNLEVBQUUsUUFBUTtFQUNoQkMsT0FBTyxFQUFFO0FBQ1gsQ0FBQztBQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FBQUMsUUFBQSJ9","map":{"version":3,"names":["ACCESS","REFRESH","exports","default","_default"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/","sources":["tokenTypes.js"],"sourcesContent":["export default {\n  ACCESS: 'access',\n  REFRESH: 'refresh',\n};\n"],"mappings":";;;;;;eAAe;EACbA,MAAM,EAAE,QAAQ;EAChBC,OAAO,EAAE;AACX,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAC,QAAA"}},"mtime":1689343210692},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/tokenTypes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  ACCESS: 'access',\n  REFRESH: 'refresh'\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBQ0NFU1MiLCJSRUZSRVNIIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJfZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9GVUxMLVNUQUNLLVNBTVBMRVMvc2VydmVyU2FtcGxlL0F1dGgvc3JjL2NvbmZpZy8iLCJzb3VyY2VzIjpbInRva2VuVHlwZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICBBQ0NFU1M6ICdhY2Nlc3MnLFxuICBSRUZSRVNIOiAncmVmcmVzaCcsXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7ZUFBZTtFQUNiQSxNQUFNLEVBQUUsUUFBUTtFQUNoQkMsT0FBTyxFQUFFO0FBQ1gsQ0FBQztBQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FBQUMsUUFBQSJ9","map":{"version":3,"names":["ACCESS","REFRESH","exports","default","_default"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/config/","sources":["tokenTypes.js"],"sourcesContent":["export default {\n  ACCESS: 'access',\n  REFRESH: 'refresh',\n};\n"],"mappings":";;;;;;eAAe;EACbA,MAAM,EAAE,QAAQ;EAChBC,OAAO,EAAE;AACX,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAC,QAAA"}},"mtime":1689343210692},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/Cryptor.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Decrypt = Decrypt;\nexports.Encrypt = Encrypt;\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst secret = 'appSecretKey';\nconst rounds = 9921;\nconst keySize = 32;\nconst algorithm = 'aes-256-cbc';\nconst salt = _crypto.default.createHash('sha1').update(secret).digest('hex');\nasync function Encrypt(data) {\n  try {\n    let iv = _crypto.default.randomBytes(16);\n    let key = _crypto.default.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let cipher = _crypto.default.createCipheriv(algorithm, Buffer.from(key), iv);\n    let encryptedData = Buffer.concat([cipher.update(JSON.stringify(data)), cipher.final()]);\n    return iv.toString('base64') + ':' + encryptedData.toString('base64');\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\nasync function Decrypt(encData) {\n  try {\n    let textParts = encData.split(':');\n    let iv = Buffer.from(textParts.shift(), 'base64');\n    let encryptedData = Buffer.from(textParts.join(':'), 'base64');\n    let key = _crypto.default.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let decipher = _crypto.default.createDecipheriv(algorithm, Buffer.from(key), iv);\n    let decryptedData = decipher.update(encryptedData);\n    decryptedData = Buffer.concat([decryptedData, decipher.final()]);\n    return JSON.parse(decryptedData.toString());\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3J5cHRvIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInNlY3JldCIsInJvdW5kcyIsImtleVNpemUiLCJhbGdvcml0aG0iLCJzYWx0IiwiY3J5cHRvIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsIkVuY3J5cHQiLCJkYXRhIiwiaXYiLCJyYW5kb21CeXRlcyIsImtleSIsInBia2RmMlN5bmMiLCJjaXBoZXIiLCJjcmVhdGVDaXBoZXJpdiIsIkJ1ZmZlciIsImZyb20iLCJlbmNyeXB0ZWREYXRhIiwiY29uY2F0IiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbmFsIiwidG9TdHJpbmciLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJEZWNyeXB0IiwiZW5jRGF0YSIsInRleHRQYXJ0cyIsInNwbGl0Iiwic2hpZnQiLCJqb2luIiwiZGVjaXBoZXIiLCJjcmVhdGVEZWNpcGhlcml2IiwiZGVjcnlwdGVkRGF0YSIsInBhcnNlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJDcnlwdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuY29uc3Qgc2VjcmV0ID0gJ2FwcFNlY3JldEtleSc7XG5jb25zdCByb3VuZHMgPSA5OTIxO1xuY29uc3Qga2V5U2l6ZSA9IDMyO1xuY29uc3QgYWxnb3JpdGhtID0gJ2Flcy0yNTYtY2JjJztcbmNvbnN0IHNhbHQgPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShzZWNyZXQpLmRpZ2VzdCgnaGV4Jyk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBFbmNyeXB0KGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBsZXQgaXYgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMTYpO1xuICAgIGxldCBrZXkgPSBjcnlwdG8ucGJrZGYyU3luYyhzZWNyZXQsIHNhbHQsIHJvdW5kcywga2V5U2l6ZSwgJ3NoYTUxMicpO1xuICAgIGxldCBjaXBoZXIgPSBjcnlwdG8uY3JlYXRlQ2lwaGVyaXYoYWxnb3JpdGhtLCBCdWZmZXIuZnJvbShrZXkpLCBpdik7XG4gICAgbGV0IGVuY3J5cHRlZERhdGEgPSBCdWZmZXIuY29uY2F0KFtcbiAgICAgIGNpcGhlci51cGRhdGUoSlNPTi5zdHJpbmdpZnkoZGF0YSkpLFxuICAgICAgY2lwaGVyLmZpbmFsKCksXG4gICAgXSk7XG4gICAgcmV0dXJuIGl2LnRvU3RyaW5nKCdiYXNlNjQnKSArICc6JyArIGVuY3J5cHRlZERhdGEudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBEZWNyeXB0KGVuY0RhdGEpIHtcbiAgdHJ5IHtcbiAgICBsZXQgdGV4dFBhcnRzID0gZW5jRGF0YS5zcGxpdCgnOicpO1xuICAgIGxldCBpdiA9IEJ1ZmZlci5mcm9tKHRleHRQYXJ0cy5zaGlmdCgpLCAnYmFzZTY0Jyk7XG4gICAgbGV0IGVuY3J5cHRlZERhdGEgPSBCdWZmZXIuZnJvbSh0ZXh0UGFydHMuam9pbignOicpLCAnYmFzZTY0Jyk7XG4gICAgbGV0IGtleSA9IGNyeXB0by5wYmtkZjJTeW5jKHNlY3JldCwgc2FsdCwgcm91bmRzLCBrZXlTaXplLCAnc2hhNTEyJyk7XG4gICAgbGV0IGRlY2lwaGVyID0gY3J5cHRvLmNyZWF0ZURlY2lwaGVyaXYoYWxnb3JpdGhtLCBCdWZmZXIuZnJvbShrZXkpLCBpdik7XG4gICAgbGV0IGRlY3J5cHRlZERhdGEgPSBkZWNpcGhlci51cGRhdGUoZW5jcnlwdGVkRGF0YSk7XG4gICAgZGVjcnlwdGVkRGF0YSA9IEJ1ZmZlci5jb25jYXQoW2RlY3J5cHRlZERhdGEsIGRlY2lwaGVyLmZpbmFsKCldKTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShkZWNyeXB0ZWREYXRhLnRvU3RyaW5nKCkpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBNEIsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFNUIsTUFBTUcsTUFBTSxHQUFHLGNBQWM7QUFDN0IsTUFBTUMsTUFBTSxHQUFHLElBQUk7QUFDbkIsTUFBTUMsT0FBTyxHQUFHLEVBQUU7QUFDbEIsTUFBTUMsU0FBUyxHQUFHLGFBQWE7QUFDL0IsTUFBTUMsSUFBSSxHQUFHQyxlQUFNLENBQUNDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQ0MsTUFBTSxDQUFDUCxNQUFNLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUU1RCxlQUFlQyxPQUFPQSxDQUFDQyxJQUFJLEVBQUU7RUFDbEMsSUFBSTtJQUNGLElBQUlDLEVBQUUsR0FBR04sZUFBTSxDQUFDTyxXQUFXLENBQUMsRUFBRSxDQUFDO0lBQy9CLElBQUlDLEdBQUcsR0FBR1IsZUFBTSxDQUFDUyxVQUFVLENBQUNkLE1BQU0sRUFBRUksSUFBSSxFQUFFSCxNQUFNLEVBQUVDLE9BQU8sRUFBRSxRQUFRLENBQUM7SUFDcEUsSUFBSWEsTUFBTSxHQUFHVixlQUFNLENBQUNXLGNBQWMsQ0FBQ2IsU0FBUyxFQUFFYyxNQUFNLENBQUNDLElBQUksQ0FBQ0wsR0FBRyxDQUFDLEVBQUVGLEVBQUUsQ0FBQztJQUNuRSxJQUFJUSxhQUFhLEdBQUdGLE1BQU0sQ0FBQ0csTUFBTSxDQUFDLENBQ2hDTCxNQUFNLENBQUNSLE1BQU0sQ0FBQ2MsSUFBSSxDQUFDQyxTQUFTLENBQUNaLElBQUksQ0FBQyxDQUFDLEVBQ25DSyxNQUFNLENBQUNRLEtBQUssQ0FBQyxDQUFDLENBQ2YsQ0FBQztJQUNGLE9BQU9aLEVBQUUsQ0FBQ2EsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsR0FBR0wsYUFBYSxDQUFDSyxRQUFRLENBQUMsUUFBUSxDQUFDO0VBQ3ZFLENBQUMsQ0FBQyxPQUFPQyxHQUFHLEVBQUU7SUFDWkMsT0FBTyxDQUFDQyxLQUFLLENBQUNGLEdBQUcsQ0FBQztJQUNsQixPQUFPLEtBQUs7RUFDZDtBQUNGO0FBRU8sZUFBZUcsT0FBT0EsQ0FBQ0MsT0FBTyxFQUFFO0VBQ3JDLElBQUk7SUFDRixJQUFJQyxTQUFTLEdBQUdELE9BQU8sQ0FBQ0UsS0FBSyxDQUFDLEdBQUcsQ0FBQztJQUNsQyxJQUFJcEIsRUFBRSxHQUFHTSxNQUFNLENBQUNDLElBQUksQ0FBQ1ksU0FBUyxDQUFDRSxLQUFLLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQztJQUNqRCxJQUFJYixhQUFhLEdBQUdGLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDWSxTQUFTLENBQUNHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLENBQUM7SUFDOUQsSUFBSXBCLEdBQUcsR0FBR1IsZUFBTSxDQUFDUyxVQUFVLENBQUNkLE1BQU0sRUFBRUksSUFBSSxFQUFFSCxNQUFNLEVBQUVDLE9BQU8sRUFBRSxRQUFRLENBQUM7SUFDcEUsSUFBSWdDLFFBQVEsR0FBRzdCLGVBQU0sQ0FBQzhCLGdCQUFnQixDQUFDaEMsU0FBUyxFQUFFYyxNQUFNLENBQUNDLElBQUksQ0FBQ0wsR0FBRyxDQUFDLEVBQUVGLEVBQUUsQ0FBQztJQUN2RSxJQUFJeUIsYUFBYSxHQUFHRixRQUFRLENBQUMzQixNQUFNLENBQUNZLGFBQWEsQ0FBQztJQUNsRGlCLGFBQWEsR0FBR25CLE1BQU0sQ0FBQ0csTUFBTSxDQUFDLENBQUNnQixhQUFhLEVBQUVGLFFBQVEsQ0FBQ1gsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hFLE9BQU9GLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ0QsYUFBYSxDQUFDWixRQUFRLENBQUMsQ0FBQyxDQUFDO0VBQzdDLENBQUMsQ0FBQyxPQUFPQyxHQUFHLEVBQUU7SUFDWkMsT0FBTyxDQUFDQyxLQUFLLENBQUNGLEdBQUcsQ0FBQztJQUNsQixPQUFPLEtBQUs7RUFDZDtBQUNGIn0=","map":{"version":3,"names":["_crypto","_interopRequireDefault","require","obj","__esModule","default","secret","rounds","keySize","algorithm","salt","crypto","createHash","update","digest","Encrypt","data","iv","randomBytes","key","pbkdf2Sync","cipher","createCipheriv","Buffer","from","encryptedData","concat","JSON","stringify","final","toString","err","console","error","Decrypt","encData","textParts","split","shift","join","decipher","createDecipheriv","decryptedData","parse"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/utils/","sources":["Cryptor.js"],"sourcesContent":["import crypto from 'crypto';\n\nconst secret = 'appSecretKey';\nconst rounds = 9921;\nconst keySize = 32;\nconst algorithm = 'aes-256-cbc';\nconst salt = crypto.createHash('sha1').update(secret).digest('hex');\n\nexport async function Encrypt(data) {\n  try {\n    let iv = crypto.randomBytes(16);\n    let key = crypto.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let cipher = crypto.createCipheriv(algorithm, Buffer.from(key), iv);\n    let encryptedData = Buffer.concat([\n      cipher.update(JSON.stringify(data)),\n      cipher.final(),\n    ]);\n    return iv.toString('base64') + ':' + encryptedData.toString('base64');\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n\nexport async function Decrypt(encData) {\n  try {\n    let textParts = encData.split(':');\n    let iv = Buffer.from(textParts.shift(), 'base64');\n    let encryptedData = Buffer.from(textParts.join(':'), 'base64');\n    let key = crypto.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let decipher = crypto.createDecipheriv(algorithm, Buffer.from(key), iv);\n    let decryptedData = decipher.update(encryptedData);\n    decryptedData = Buffer.concat([decryptedData, decipher.final()]);\n    return JSON.parse(decryptedData.toString());\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE5B,MAAMG,MAAM,GAAG,cAAc;AAC7B,MAAMC,MAAM,GAAG,IAAI;AACnB,MAAMC,OAAO,GAAG,EAAE;AAClB,MAAMC,SAAS,GAAG,aAAa;AAC/B,MAAMC,IAAI,GAAGC,eAAM,CAACC,UAAU,CAAC,MAAM,CAAC,CAACC,MAAM,CAACP,MAAM,CAAC,CAACQ,MAAM,CAAC,KAAK,CAAC;AAE5D,eAAeC,OAAOA,CAACC,IAAI,EAAE;EAClC,IAAI;IACF,IAAIC,EAAE,GAAGN,eAAM,CAACO,WAAW,CAAC,EAAE,CAAC;IAC/B,IAAIC,GAAG,GAAGR,eAAM,CAACS,UAAU,CAACd,MAAM,EAAEI,IAAI,EAAEH,MAAM,EAAEC,OAAO,EAAE,QAAQ,CAAC;IACpE,IAAIa,MAAM,GAAGV,eAAM,CAACW,cAAc,CAACb,SAAS,EAAEc,MAAM,CAACC,IAAI,CAACL,GAAG,CAAC,EAAEF,EAAE,CAAC;IACnE,IAAIQ,aAAa,GAAGF,MAAM,CAACG,MAAM,CAAC,CAChCL,MAAM,CAACR,MAAM,CAACc,IAAI,CAACC,SAAS,CAACZ,IAAI,CAAC,CAAC,EACnCK,MAAM,CAACQ,KAAK,CAAC,CAAC,CACf,CAAC;IACF,OAAOZ,EAAE,CAACa,QAAQ,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAGL,aAAa,CAACK,QAAQ,CAAC,QAAQ,CAAC;EACvE,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClB,OAAO,KAAK;EACd;AACF;AAEO,eAAeG,OAAOA,CAACC,OAAO,EAAE;EACrC,IAAI;IACF,IAAIC,SAAS,GAAGD,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC;IAClC,IAAIpB,EAAE,GAAGM,MAAM,CAACC,IAAI,CAACY,SAAS,CAACE,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC;IACjD,IAAIb,aAAa,GAAGF,MAAM,CAACC,IAAI,CAACY,SAAS,CAACG,IAAI,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC;IAC9D,IAAIpB,GAAG,GAAGR,eAAM,CAACS,UAAU,CAACd,MAAM,EAAEI,IAAI,EAAEH,MAAM,EAAEC,OAAO,EAAE,QAAQ,CAAC;IACpE,IAAIgC,QAAQ,GAAG7B,eAAM,CAAC8B,gBAAgB,CAAChC,SAAS,EAAEc,MAAM,CAACC,IAAI,CAACL,GAAG,CAAC,EAAEF,EAAE,CAAC;IACvE,IAAIyB,aAAa,GAAGF,QAAQ,CAAC3B,MAAM,CAACY,aAAa,CAAC;IAClDiB,aAAa,GAAGnB,MAAM,CAACG,MAAM,CAAC,CAACgB,aAAa,EAAEF,QAAQ,CAACX,KAAK,CAAC,CAAC,CAAC,CAAC;IAChE,OAAOF,IAAI,CAACgB,KAAK,CAACD,aAAa,CAACZ,QAAQ,CAAC,CAAC,CAAC;EAC7C,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClB,OAAO,KAAK;EACd;AACF"}},"mtime":1682522558000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/AuthRights.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst AccessTo = (roles = []) => {\n  /*\n   * roles param can be a single role string (e.g. Role.User or 'User')\n   * or an array of roles (e.g. [Role.Admin, Role.User] or ['Admin', 'User'])\n   */\n\n  if (typeof roles === 'string') {\n    roles = [roles];\n  }\n  return [\n  /* \n  *  authenticate JWT token and attach user to request object (req.user)\n  !  Please note: work only when AuthMiddleware already attach with any route\n  *  authorize based on user role\n  */\n\n  async (req, res, next) => {\n    // const authHeader = req.headers['authorization'];\n\n    // const bearerToken = authHeader.split(' ');\n\n    // const token = bearerToken[1];\n\n    // if (!token) return next(new ApiError(401, 'Access Denied'));\n\n    const token = await (0, _tokenHelper.tokenfromheader)(req);\n    if (!token) return next(new _ApiErrors.default(401, 'Access Denied'));\n    const payload = await (0, _tokenHelper.verifyAccessToken)(token);\n    if (typeof payload.exp === 'undefined') {\n      return next(new _ApiErrors.default(403, 'not logged in'));\n    }\n    const {\n      sub\n    } = payload;\n    const user = await _userModel.default.findById(sub);\n    if (!user) return next(new _ApiErrors.default(401, 'User not found'));\n\n    // user's role is not authorized\n    if (!user || roles.length && !roles.includes(user.role)) return next(new _ApiErrors.default(401, 'Unauthorized'));\n\n    // authentication and authorization successful\n    req.user = user;\n    req.user.role = user.role;\n    const refreshTokens = await _tokenModel.default.find({\n      user: user.id\n    }).populate('user');\n    req.user.ownsToken = token => !!refreshTokens.find(x => x.token === token);\n    next();\n  }];\n};\nvar _default = AccessTo; // router.get('/users', authorize([Roles.ADMIN]), getAll); // admin only can see all users\n// router.get('/users/:id', authorize(), getById);       // all authenticated users pass empty or pass [Roles.USER,Roles.ADMIN]\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlck1vZGVsIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdG9rZW5Nb2RlbCIsIl9BcGlFcnJvcnMiLCJfdG9rZW5IZWxwZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkFjY2Vzc1RvIiwicm9sZXMiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJ0b2tlbmZyb21oZWFkZXIiLCJBcGlFcnJvciIsInBheWxvYWQiLCJ2ZXJpZnlBY2Nlc3NUb2tlbiIsImV4cCIsInN1YiIsInVzZXIiLCJVc2VyIiwiZmluZEJ5SWQiLCJsZW5ndGgiLCJpbmNsdWRlcyIsInJvbGUiLCJyZWZyZXNoVG9rZW5zIiwiVG9rZW4iLCJmaW5kIiwiaWQiLCJwb3B1bGF0ZSIsIm93bnNUb2tlbiIsIngiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIkF1dGhSaWdodHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXItbW9kZWwnO1xuaW1wb3J0IFRva2VuIGZyb20gJy4uL21vZGVscy90b2tlbi1tb2RlbCc7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5pbXBvcnQgeyB0b2tlbmZyb21oZWFkZXIsIHZlcmlmeUFjY2Vzc1Rva2VuIH0gZnJvbSAnLi4vaGVscGVycy90b2tlbi1oZWxwZXInO1xuXG5jb25zdCBBY2Nlc3NUbyA9IChyb2xlcyA9IFtdKSA9PiB7XG4gIC8qXG4gICAqIHJvbGVzIHBhcmFtIGNhbiBiZSBhIHNpbmdsZSByb2xlIHN0cmluZyAoZS5nLiBSb2xlLlVzZXIgb3IgJ1VzZXInKVxuICAgKiBvciBhbiBhcnJheSBvZiByb2xlcyAoZS5nLiBbUm9sZS5BZG1pbiwgUm9sZS5Vc2VyXSBvciBbJ0FkbWluJywgJ1VzZXInXSlcbiAgICovXG5cbiAgaWYgKHR5cGVvZiByb2xlcyA9PT0gJ3N0cmluZycpIHtcbiAgICByb2xlcyA9IFtyb2xlc107XG4gIH1cblxuICByZXR1cm4gW1xuICAgIC8qIFxuICAgICogIGF1dGhlbnRpY2F0ZSBKV1QgdG9rZW4gYW5kIGF0dGFjaCB1c2VyIHRvIHJlcXVlc3Qgb2JqZWN0IChyZXEudXNlcilcbiAgICAhICBQbGVhc2Ugbm90ZTogd29yayBvbmx5IHdoZW4gQXV0aE1pZGRsZXdhcmUgYWxyZWFkeSBhdHRhY2ggd2l0aCBhbnkgcm91dGVcbiAgICAqICBhdXRob3JpemUgYmFzZWQgb24gdXNlciByb2xlXG4gICAgKi9cblxuICAgIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgLy8gY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XG5cbiAgICAgIC8vIGNvbnN0IGJlYXJlclRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpO1xuXG4gICAgICAvLyBjb25zdCB0b2tlbiA9IGJlYXJlclRva2VuWzFdO1xuXG4gICAgICAvLyBpZiAoIXRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnQWNjZXNzIERlbmllZCcpKTtcblxuICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0b2tlbmZyb21oZWFkZXIocmVxKTtcblxuICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ0FjY2VzcyBEZW5pZWQnKSk7XG5cbiAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlBY2Nlc3NUb2tlbih0b2tlbik7XG5cbiAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC5leHAgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDMsICdub3QgbG9nZ2VkIGluJykpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IHN1YiB9ID0gcGF5bG9hZDtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHN1Yik7XG5cbiAgICAgIGlmICghdXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICAvLyB1c2VyJ3Mgcm9sZSBpcyBub3QgYXV0aG9yaXplZFxuICAgICAgaWYgKCF1c2VyIHx8IChyb2xlcy5sZW5ndGggJiYgIXJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnVW5hdXRob3JpemVkJykpO1xuXG4gICAgICAvLyBhdXRoZW50aWNhdGlvbiBhbmQgYXV0aG9yaXphdGlvbiBzdWNjZXNzZnVsXG4gICAgICByZXEudXNlciA9IHVzZXI7XG4gICAgICByZXEudXNlci5yb2xlID0gdXNlci5yb2xlO1xuXG4gICAgICBjb25zdCByZWZyZXNoVG9rZW5zID0gYXdhaXQgVG9rZW4uZmluZCh7IHVzZXI6IHVzZXIuaWQgfSkucG9wdWxhdGUoXG4gICAgICAgICd1c2VyJ1xuICAgICAgKTtcblxuICAgICAgcmVxLnVzZXIub3duc1Rva2VuID0gKHRva2VuKSA9PlxuICAgICAgICAhIXJlZnJlc2hUb2tlbnMuZmluZCgoeCkgPT4geC50b2tlbiA9PT0gdG9rZW4pO1xuXG4gICAgICBuZXh0KCk7XG4gICAgfSxcbiAgXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFjY2Vzc1RvO1xuXG4vLyByb3V0ZXIuZ2V0KCcvdXNlcnMnLCBhdXRob3JpemUoW1JvbGVzLkFETUlOXSksIGdldEFsbCk7IC8vIGFkbWluIG9ubHkgY2FuIHNlZSBhbGwgdXNlcnNcblxuLy8gcm91dGVyLmdldCgnL3VzZXJzLzppZCcsIGF1dGhvcml6ZSgpLCBnZXRCeUlkKTsgICAgICAgLy8gYWxsIGF1dGhlbnRpY2F0ZWQgdXNlcnMgcGFzcyBlbXB0eSBvciBwYXNzIFtSb2xlcy5VU0VSLFJv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","map":{"version":3,"names":["_userModel","_interopRequireDefault","require","_tokenModel","_ApiErrors","_tokenHelper","obj","__esModule","default","AccessTo","roles","req","res","next","token","tokenfromheader","ApiError","payload","verifyAccessToken","exp","sub","user","User","findById","length","includes","role","refreshTokens","Token","find","id","populate","ownsToken","x","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/","sources":["AuthRights.js"],"sourcesContent":["import User from '../models/user-model';\nimport Token from '../models/token-model';\nimport ApiError from '../errors/ApiErrors';\nimport { tokenfromheader, verifyAccessToken } from '../helpers/token-helper';\n\nconst AccessTo = (roles = []) => {\n  /*\n   * roles param can be a single role string (e.g. Role.User or 'User')\n   * or an array of roles (e.g. [Role.Admin, Role.User] or ['Admin', 'User'])\n   */\n\n  if (typeof roles === 'string') {\n    roles = [roles];\n  }\n\n  return [\n    /* \n    *  authenticate JWT token and attach user to request object (req.user)\n    !  Please note: work only when AuthMiddleware already attach with any route\n    *  authorize based on user role\n    */\n\n    async (req, res, next) => {\n      // const authHeader = req.headers['authorization'];\n\n      // const bearerToken = authHeader.split(' ');\n\n      // const token = bearerToken[1];\n\n      // if (!token) return next(new ApiError(401, 'Access Denied'));\n\n      const token = await tokenfromheader(req);\n\n      if (!token) return next(new ApiError(401, 'Access Denied'));\n\n      const payload = await verifyAccessToken(token);\n\n      if (typeof payload.exp === 'undefined') {\n        return next(new ApiError(403, 'not logged in'));\n      }\n\n      const { sub } = payload;\n      const user = await User.findById(sub);\n\n      if (!user) return next(new ApiError(401, 'User not found'));\n\n      // user's role is not authorized\n      if (!user || (roles.length && !roles.includes(user.role)))\n        return next(new ApiError(401, 'Unauthorized'));\n\n      // authentication and authorization successful\n      req.user = user;\n      req.user.role = user.role;\n\n      const refreshTokens = await Token.find({ user: user.id }).populate(\n        'user'\n      );\n\n      req.user.ownsToken = (token) =>\n        !!refreshTokens.find((x) => x.token === token);\n\n      next();\n    },\n  ];\n};\n\nexport default AccessTo;\n\n// router.get('/users', authorize([Roles.ADMIN]), getAll); // admin only can see all users\n\n// router.get('/users/:id', authorize(), getById);       // all authenticated users pass empty or pass [Roles.USER,Roles.ADMIN]\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AAA6E,SAAAD,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE7E,MAAMG,QAAQ,GAAGA,CAACC,KAAK,GAAG,EAAE,KAAK;EAC/B;AACF;AACA;AACA;;EAEE,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7BA,KAAK,GAAG,CAACA,KAAK,CAAC;EACjB;EAEA,OAAO;EACL;AACJ;AACA;AACA;AACA;;EAEI,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;IACxB;;IAEA;;IAEA;;IAEA;;IAEA,MAAMC,KAAK,GAAG,MAAM,IAAAC,4BAAe,EAACJ,GAAG,CAAC;IAExC,IAAI,CAACG,KAAK,EAAE,OAAOD,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IAE3D,MAAMC,OAAO,GAAG,MAAM,IAAAC,8BAAiB,EAACJ,KAAK,CAAC;IAE9C,IAAI,OAAOG,OAAO,CAACE,GAAG,KAAK,WAAW,EAAE;MACtC,OAAON,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IACjD;IAEA,MAAM;MAAEI;IAAI,CAAC,GAAGH,OAAO;IACvB,MAAMI,IAAI,GAAG,MAAMC,kBAAI,CAACC,QAAQ,CAACH,GAAG,CAAC;IAErC,IAAI,CAACC,IAAI,EAAE,OAAOR,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;;IAE3D;IACA,IAAI,CAACK,IAAI,IAAKX,KAAK,CAACc,MAAM,IAAI,CAACd,KAAK,CAACe,QAAQ,CAACJ,IAAI,CAACK,IAAI,CAAE,EACvD,OAAOb,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;;IAEhD;IACAL,GAAG,CAACU,IAAI,GAAGA,IAAI;IACfV,GAAG,CAACU,IAAI,CAACK,IAAI,GAAGL,IAAI,CAACK,IAAI;IAEzB,MAAMC,aAAa,GAAG,MAAMC,mBAAK,CAACC,IAAI,CAAC;MAAER,IAAI,EAAEA,IAAI,CAACS;IAAG,CAAC,CAAC,CAACC,QAAQ,CAChE,MACF,CAAC;IAEDpB,GAAG,CAACU,IAAI,CAACW,SAAS,GAAIlB,KAAK,IACzB,CAAC,CAACa,aAAa,CAACE,IAAI,CAAEI,CAAC,IAAKA,CAAC,CAACnB,KAAK,KAAKA,KAAK,CAAC;IAEhDD,IAAI,CAAC,CAAC;EACR,CAAC,CACF;AACH,CAAC;AAAC,IAAAqB,QAAA,GAEazB,QAAQ,EAEvB;AAEA;AAAA0B,OAAA,CAAA3B,OAAA,GAAA0B,QAAA"}},"mtime":1690789729631},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/AuthRights.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst AccessTo = (roles = []) => {\n  /*\n   * roles param can be a single role string (e.g. Role.User or 'User')\n   * or an array of roles (e.g. [Role.Admin, Role.User] or ['Admin', 'User'])\n   */\n\n  if (typeof roles === 'string') {\n    roles = [roles];\n  }\n  return [\n  /* \n  *  authenticate JWT token and attach user to request object (req.user)\n  !  Please note: work only when AuthMiddleware already attach with any route\n  *  authorize based on user role\n  */\n\n  async (req, res, next) => {\n    // const authHeader = req.headers['authorization'];\n\n    // const bearerToken = authHeader.split(' ');\n\n    // const token = bearerToken[1];\n\n    // if (!token) return next(new ApiError(401, 'Access Denied'));\n\n    const token = await (0, _tokenHelper.tokenfromheader)(req);\n    if (!token) return next(new _ApiErrors.default(401, 'Access Denied'));\n    const payload = await (0, _tokenHelper.verifyAccessToken)(token);\n    if (typeof payload.exp === 'undefined') {\n      return next(new _ApiErrors.default(403, 'not logged in'));\n    }\n    const {\n      sub\n    } = payload;\n    const user = await _userModel.default.findById(sub);\n    if (!user) return next(new _ApiErrors.default(401, 'User not found'));\n\n    // user's role is not authorized\n    if (!user || roles.length && !roles.includes(user.role)) return next(new _ApiErrors.default(401, 'Unauthorized'));\n\n    // authentication and authorization successful\n    req.user = user;\n    req.user.role = user.role;\n    const refreshTokens = await _tokenModel.default.find({\n      user: user.id\n    }).populate('user');\n    req.user.ownsToken = token => !!refreshTokens.find(x => x.token === token);\n    next();\n  }];\n};\nvar _default = AccessTo; // router.get('/users', authorize([Roles.ADMIN]), getAll); // admin only can see all users\n// router.get('/users/:id', authorize(), getById);       // all authenticated users pass empty or pass [Roles.USER,Roles.ADMIN]\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlck1vZGVsIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdG9rZW5Nb2RlbCIsIl9BcGlFcnJvcnMiLCJfdG9rZW5IZWxwZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkFjY2Vzc1RvIiwicm9sZXMiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJ0b2tlbmZyb21oZWFkZXIiLCJBcGlFcnJvciIsInBheWxvYWQiLCJ2ZXJpZnlBY2Nlc3NUb2tlbiIsImV4cCIsInN1YiIsInVzZXIiLCJVc2VyIiwiZmluZEJ5SWQiLCJsZW5ndGgiLCJpbmNsdWRlcyIsInJvbGUiLCJyZWZyZXNoVG9rZW5zIiwiVG9rZW4iLCJmaW5kIiwiaWQiLCJwb3B1bGF0ZSIsIm93bnNUb2tlbiIsIngiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIkF1dGhSaWdodHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXItbW9kZWwnO1xuaW1wb3J0IFRva2VuIGZyb20gJy4uL21vZGVscy90b2tlbi1tb2RlbCc7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5pbXBvcnQgeyB0b2tlbmZyb21oZWFkZXIsIHZlcmlmeUFjY2Vzc1Rva2VuIH0gZnJvbSAnLi4vaGVscGVycy90b2tlbi1oZWxwZXInO1xuXG5jb25zdCBBY2Nlc3NUbyA9IChyb2xlcyA9IFtdKSA9PiB7XG4gIC8qXG4gICAqIHJvbGVzIHBhcmFtIGNhbiBiZSBhIHNpbmdsZSByb2xlIHN0cmluZyAoZS5nLiBSb2xlLlVzZXIgb3IgJ1VzZXInKVxuICAgKiBvciBhbiBhcnJheSBvZiByb2xlcyAoZS5nLiBbUm9sZS5BZG1pbiwgUm9sZS5Vc2VyXSBvciBbJ0FkbWluJywgJ1VzZXInXSlcbiAgICovXG5cbiAgaWYgKHR5cGVvZiByb2xlcyA9PT0gJ3N0cmluZycpIHtcbiAgICByb2xlcyA9IFtyb2xlc107XG4gIH1cblxuICByZXR1cm4gW1xuICAgIC8qIFxuICAgICogIGF1dGhlbnRpY2F0ZSBKV1QgdG9rZW4gYW5kIGF0dGFjaCB1c2VyIHRvIHJlcXVlc3Qgb2JqZWN0IChyZXEudXNlcilcbiAgICAhICBQbGVhc2Ugbm90ZTogd29yayBvbmx5IHdoZW4gQXV0aE1pZGRsZXdhcmUgYWxyZWFkeSBhdHRhY2ggd2l0aCBhbnkgcm91dGVcbiAgICAqICBhdXRob3JpemUgYmFzZWQgb24gdXNlciByb2xlXG4gICAgKi9cblxuICAgIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgLy8gY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XG5cbiAgICAgIC8vIGNvbnN0IGJlYXJlclRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpO1xuXG4gICAgICAvLyBjb25zdCB0b2tlbiA9IGJlYXJlclRva2VuWzFdO1xuXG4gICAgICAvLyBpZiAoIXRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnQWNjZXNzIERlbmllZCcpKTtcblxuICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0b2tlbmZyb21oZWFkZXIocmVxKTtcblxuICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ0FjY2VzcyBEZW5pZWQnKSk7XG5cbiAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlBY2Nlc3NUb2tlbih0b2tlbik7XG5cbiAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC5leHAgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDMsICdub3QgbG9nZ2VkIGluJykpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IHN1YiB9ID0gcGF5bG9hZDtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHN1Yik7XG5cbiAgICAgIGlmICghdXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICAvLyB1c2VyJ3Mgcm9sZSBpcyBub3QgYXV0aG9yaXplZFxuICAgICAgaWYgKCF1c2VyIHx8IChyb2xlcy5sZW5ndGggJiYgIXJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnVW5hdXRob3JpemVkJykpO1xuXG4gICAgICAvLyBhdXRoZW50aWNhdGlvbiBhbmQgYXV0aG9yaXphdGlvbiBzdWNjZXNzZnVsXG4gICAgICByZXEudXNlciA9IHVzZXI7XG4gICAgICByZXEudXNlci5yb2xlID0gdXNlci5yb2xlO1xuXG4gICAgICBjb25zdCByZWZyZXNoVG9rZW5zID0gYXdhaXQgVG9rZW4uZmluZCh7IHVzZXI6IHVzZXIuaWQgfSkucG9wdWxhdGUoXG4gICAgICAgICd1c2VyJ1xuICAgICAgKTtcblxuICAgICAgcmVxLnVzZXIub3duc1Rva2VuID0gKHRva2VuKSA9PlxuICAgICAgICAhIXJlZnJlc2hUb2tlbnMuZmluZCgoeCkgPT4geC50b2tlbiA9PT0gdG9rZW4pO1xuXG4gICAgICBuZXh0KCk7XG4gICAgfSxcbiAgXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFjY2Vzc1RvO1xuXG4vLyByb3V0ZXIuZ2V0KCcvdXNlcnMnLCBhdXRob3JpemUoW1JvbGVzLkFETUlOXSksIGdldEFsbCk7IC8vIGFkbWluIG9ubHkgY2FuIHNlZSBhbGwgdXNlcnNcblxuLy8gcm91dGVyLmdldCgnL3VzZXJzLzppZCcsIGF1dGhvcml6ZSgpLCBnZXRCeUlkKTsgICAgICAgLy8gYWxsIGF1dGhlbnRpY2F0ZWQgdXNlcnMgcGFzcyBlbXB0eSBvciBwYXNzIFtSb2xlcy5VU0VSLFJv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","map":{"version":3,"names":["_userModel","_interopRequireDefault","require","_tokenModel","_ApiErrors","_tokenHelper","obj","__esModule","default","AccessTo","roles","req","res","next","token","tokenfromheader","ApiError","payload","verifyAccessToken","exp","sub","user","User","findById","length","includes","role","refreshTokens","Token","find","id","populate","ownsToken","x","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/","sources":["AuthRights.js"],"sourcesContent":["import User from '../models/user-model';\nimport Token from '../models/token-model';\nimport ApiError from '../errors/ApiErrors';\nimport { tokenfromheader, verifyAccessToken } from '../helpers/token-helper';\n\nconst AccessTo = (roles = []) => {\n  /*\n   * roles param can be a single role string (e.g. Role.User or 'User')\n   * or an array of roles (e.g. [Role.Admin, Role.User] or ['Admin', 'User'])\n   */\n\n  if (typeof roles === 'string') {\n    roles = [roles];\n  }\n\n  return [\n    /* \n    *  authenticate JWT token and attach user to request object (req.user)\n    !  Please note: work only when AuthMiddleware already attach with any route\n    *  authorize based on user role\n    */\n\n    async (req, res, next) => {\n      // const authHeader = req.headers['authorization'];\n\n      // const bearerToken = authHeader.split(' ');\n\n      // const token = bearerToken[1];\n\n      // if (!token) return next(new ApiError(401, 'Access Denied'));\n\n      const token = await tokenfromheader(req);\n\n      if (!token) return next(new ApiError(401, 'Access Denied'));\n\n      const payload = await verifyAccessToken(token);\n\n      if (typeof payload.exp === 'undefined') {\n        return next(new ApiError(403, 'not logged in'));\n      }\n\n      const { sub } = payload;\n      const user = await User.findById(sub);\n\n      if (!user) return next(new ApiError(401, 'User not found'));\n\n      // user's role is not authorized\n      if (!user || (roles.length && !roles.includes(user.role)))\n        return next(new ApiError(401, 'Unauthorized'));\n\n      // authentication and authorization successful\n      req.user = user;\n      req.user.role = user.role;\n\n      const refreshTokens = await Token.find({ user: user.id }).populate(\n        'user'\n      );\n\n      req.user.ownsToken = (token) =>\n        !!refreshTokens.find((x) => x.token === token);\n\n      next();\n    },\n  ];\n};\n\nexport default AccessTo;\n\n// router.get('/users', authorize([Roles.ADMIN]), getAll); // admin only can see all users\n\n// router.get('/users/:id', authorize(), getById);       // all authenticated users pass empty or pass [Roles.USER,Roles.ADMIN]\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AAA6E,SAAAD,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE7E,MAAMG,QAAQ,GAAGA,CAACC,KAAK,GAAG,EAAE,KAAK;EAC/B;AACF;AACA;AACA;;EAEE,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7BA,KAAK,GAAG,CAACA,KAAK,CAAC;EACjB;EAEA,OAAO;EACL;AACJ;AACA;AACA;AACA;;EAEI,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;IACxB;;IAEA;;IAEA;;IAEA;;IAEA,MAAMC,KAAK,GAAG,MAAM,IAAAC,4BAAe,EAACJ,GAAG,CAAC;IAExC,IAAI,CAACG,KAAK,EAAE,OAAOD,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IAE3D,MAAMC,OAAO,GAAG,MAAM,IAAAC,8BAAiB,EAACJ,KAAK,CAAC;IAE9C,IAAI,OAAOG,OAAO,CAACE,GAAG,KAAK,WAAW,EAAE;MACtC,OAAON,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IACjD;IAEA,MAAM;MAAEI;IAAI,CAAC,GAAGH,OAAO;IACvB,MAAMI,IAAI,GAAG,MAAMC,kBAAI,CAACC,QAAQ,CAACH,GAAG,CAAC;IAErC,IAAI,CAACC,IAAI,EAAE,OAAOR,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;;IAE3D;IACA,IAAI,CAACK,IAAI,IAAKX,KAAK,CAACc,MAAM,IAAI,CAACd,KAAK,CAACe,QAAQ,CAACJ,IAAI,CAACK,IAAI,CAAE,EACvD,OAAOb,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;;IAEhD;IACAL,GAAG,CAACU,IAAI,GAAGA,IAAI;IACfV,GAAG,CAACU,IAAI,CAACK,IAAI,GAAGL,IAAI,CAACK,IAAI;IAEzB,MAAMC,aAAa,GAAG,MAAMC,mBAAK,CAACC,IAAI,CAAC;MAAER,IAAI,EAAEA,IAAI,CAACS;IAAG,CAAC,CAAC,CAACC,QAAQ,CAChE,MACF,CAAC;IAEDpB,GAAG,CAACU,IAAI,CAACW,SAAS,GAAIlB,KAAK,IACzB,CAAC,CAACa,aAAa,CAACE,IAAI,CAAEI,CAAC,IAAKA,CAAC,CAACnB,KAAK,KAAKA,KAAK,CAAC;IAEhDD,IAAI,CAAC,CAAC;EACR,CAAC,CACF;AACH,CAAC;AAAC,IAAAqB,QAAA,GAEazB,QAAQ,EAEvB;AAEA;AAAA0B,OAAA,CAAA3B,OAAA,GAAA0B,QAAA"}},"mtime":1690789729631},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isLoggedIn = exports.inputValidator = void 0;\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst isLoggedIn = async (req, res, next) => {\n  try {\n    const {\n      refreshToken\n    } = req.cookies;\n    if (!refreshToken) return next(new _ApiErrors.default(401, 'No refresh token provided'));\n    const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n    if (!verifiedRefToken) return next(new _ApiErrors.default(404, 'Token not found'));\n    const user = await _userModel.default.findById(verifiedRefToken.user, 'acceptTerms role _id').exec();\n    if (!user.acceptTerms || user.acceptTerms !== true) return next(new _ApiErrors.default(404, 'user not found'));\n    req.user = user;\n    const refreshTokens = await _tokenModel.default.find({\n      user: req.user.id\n    }).populate('user');\n    req.user.ownsToken = token => !!refreshTokens.find(x => x.token === token);\n    next();\n  } catch (error) {\n    next(error);\n  }\n};\nexports.isLoggedIn = isLoggedIn;\nconst isInvalidInput = input => {\n  const containsHtml = /<[^>]*>/;\n  const startsWithEqual = /^\\s*=/;\n  return containsHtml.test(input) || startsWithEqual.test(input);\n};\nconst inputValidator = (req, res, next) => {\n  let invalid_input_count = 0;\n  const obj = req.body;\n  const stack = [obj];\n  while (stack?.length > 0) {\n    const currentObj = stack.pop();\n    Object.keys(currentObj).forEach(key => {\n      if (typeof currentObj[key] === 'object' && currentObj[key] !== null) {\n        stack.push(currentObj[key]);\n      } else {\n        if (typeof currentObj[key] === 'string' && isInvalidInput(currentObj[key])) {\n          invalid_input_count++;\n        }\n      }\n    });\n  }\n  if (invalid_input_count === 0) {\n    return next();\n  } else {\n    return res.status(400).json({\n      success: false,\n      error_code: 'invalid_input'\n    });\n  }\n};\n\n// app.use(inputValidator);\nexports.inputValidator = inputValidator;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdG9rZW5UeXBlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX0FwaUVycm9ycyIsIl90b2tlbkhlbHBlciIsIl90b2tlbk1vZGVsIiwiX3VzZXJNb2RlbCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiaXNMb2dnZWRJbiIsInJlcSIsInJlcyIsIm5leHQiLCJyZWZyZXNoVG9rZW4iLCJjb29raWVzIiwiQXBpRXJyb3IiLCJ2ZXJpZmllZFJlZlRva2VuIiwidmVyaWZ5REJUb2tlbiIsInRva2VuVHlwZXMiLCJSRUZSRVNIIiwidXNlciIsIlVzZXIiLCJmaW5kQnlJZCIsImV4ZWMiLCJhY2NlcHRUZXJtcyIsInJlZnJlc2hUb2tlbnMiLCJUb2tlbiIsImZpbmQiLCJpZCIsInBvcHVsYXRlIiwib3duc1Rva2VuIiwidG9rZW4iLCJ4IiwiZXJyb3IiLCJleHBvcnRzIiwiaXNJbnZhbGlkSW5wdXQiLCJpbnB1dCIsImNvbnRhaW5zSHRtbCIsInN0YXJ0c1dpdGhFcXVhbCIsInRlc3QiLCJpbnB1dFZhbGlkYXRvciIsImludmFsaWRfaW5wdXRfY291bnQiLCJib2R5Iiwic3RhY2siLCJsZW5ndGgiLCJjdXJyZW50T2JqIiwicG9wIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJwdXNoIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvcl9jb2RlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdG9rZW5UeXBlcyBmcm9tICcuLi9jb25maWcvdG9rZW5UeXBlcyc7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5pbXBvcnQgeyB2ZXJpZnlEQlRva2VuIH0gZnJvbSAnLi4vaGVscGVycy90b2tlbi1oZWxwZXInO1xuaW1wb3J0IFRva2VuIGZyb20gJy4uL21vZGVscy90b2tlbi1tb2RlbCc7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlci1tb2RlbCc7XG5cbmV4cG9ydCBjb25zdCBpc0xvZ2dlZEluID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyByZWZyZXNoVG9rZW4gfSA9IHJlcS5jb29raWVzO1xuXG4gICAgaWYgKCFyZWZyZXNoVG9rZW4pXG4gICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnTm8gcmVmcmVzaCB0b2tlbiBwcm92aWRlZCcpKTtcblxuICAgIGNvbnN0IHZlcmlmaWVkUmVmVG9rZW4gPSBhd2FpdCB2ZXJpZnlEQlRva2VuKFxuICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgdG9rZW5UeXBlcy5SRUZSRVNIXG4gICAgKTtcblxuICAgIGlmICghdmVyaWZpZWRSZWZUb2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ1Rva2VuIG5vdCBmb3VuZCcpKTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKFxuICAgICAgdmVyaWZpZWRSZWZUb2tlbi51c2VyLFxuICAgICAgJ2FjY2VwdFRlcm1zIHJvbGUgX2lkJ1xuICAgICkuZXhlYygpO1xuXG4gICAgaWYgKCF1c2VyLmFjY2VwdFRlcm1zIHx8IHVzZXIuYWNjZXB0VGVybXMgIT09IHRydWUpXG4gICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAndXNlciBub3QgZm91bmQnKSk7XG5cbiAgICByZXEudXNlciA9IHVzZXI7XG5cbiAgICBjb25zdCByZWZyZXNoVG9rZW5zID0gYXdhaXQgVG9rZW4uZmluZCh7IHVzZXI6IHJlcS51c2VyLmlkIH0pLnBvcHVsYXRlKFxuICAgICAgJ3VzZXInXG4gICAgKTtcblxuICAgIHJlcS51c2VyLm93bnNUb2tlbiA9ICh0b2tlbikgPT5cbiAgICAgICEhcmVmcmVzaFRva2Vucy5maW5kKCh4KSA9PiB4LnRva2VuID09PSB0b2tlbik7XG5cbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbmV4dChlcnJvcik7XG4gIH1cbn07XG5cbmNvbnN0IGlzSW52YWxpZElucHV0ID0gKGlucHV0KSA9PiB7XG4gIGNvbnN0IGNvbnRhaW5zSHRtbCA9IC88W14+XSo+LztcbiAgY29uc3Qgc3RhcnRzV2l0aEVxdWFsID0gL15cXHMqPS87XG4gIHJldHVybiBjb250YWluc0h0bWwudGVzdChpbnB1dCkgfHwgc3RhcnRzV2l0aEVxdWFsLnRlc3QoaW5wdXQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGlucHV0VmFsaWRhdG9yID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxldCBpbnZhbGlkX2lucHV0X2NvdW50ID0gMDtcbiAgY29uc3Qgb2JqID0gcmVxLmJvZHk7XG4gIGNvbnN0IHN0YWNrID0gW29ial07XG4gIHdoaWxlIChzdGFjaz8ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGN1cnJlbnRPYmogPSBzdGFjay5wb3AoKTtcbiAgICBPYmplY3Qua2V5cyhjdXJyZW50T2JqKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY3VycmVudE9ialtrZXldID09PSAnb2JqZWN0JyAmJiBjdXJyZW50T2JqW2tleV0gIT09IG51bGwpIHtcbiAgICAgICAgc3RhY2sucHVzaChjdXJyZW50T2JqW2tleV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBjdXJyZW50T2JqW2tleV0gPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgaXNJbnZhbGlkSW5wdXQoY3VycmVudE9ialtrZXldKVxuICAgICAgICApIHtcbiAgICAgICAgICBpbnZhbGlkX2lucHV0X2NvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChpbnZhbGlkX2lucHV0X2NvdW50ID09PSAwKSB7XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmVzXG4gICAgICAuc3RhdHVzKDQwMClcbiAgICAgIC5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yX2NvZGU6ICdpbnZhbGlkX2lucHV0JyB9KTtcbiAgfVxufTtcblxuLy8gYXBwLnVzZShpbnB1dFZhbGlkYXRvcik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFlBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFdBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFVBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUF3QyxTQUFBRCx1QkFBQU0sR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVqQyxNQUFNRyxVQUFVLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNsRCxJQUFJO0lBQ0YsTUFBTTtNQUFFQztJQUFhLENBQUMsR0FBR0gsR0FBRyxDQUFDSSxPQUFPO0lBRXBDLElBQUksQ0FBQ0QsWUFBWSxFQUNmLE9BQU9ELElBQUksQ0FBQyxJQUFJRyxrQkFBUSxDQUFDLEdBQUcsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0lBRTdELE1BQU1DLGdCQUFnQixHQUFHLE1BQU0sSUFBQUMsMEJBQWEsRUFDMUNKLFlBQVksRUFDWkssbUJBQVUsQ0FBQ0MsT0FDYixDQUFDO0lBRUQsSUFBSSxDQUFDSCxnQkFBZ0IsRUFBRSxPQUFPSixJQUFJLENBQUMsSUFBSUcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUV4RSxNQUFNSyxJQUFJLEdBQUcsTUFBTUMsa0JBQUksQ0FBQ0MsUUFBUSxDQUM5Qk4sZ0JBQWdCLENBQUNJLElBQUksRUFDckIsc0JBQ0YsQ0FBQyxDQUFDRyxJQUFJLENBQUMsQ0FBQztJQUVSLElBQUksQ0FBQ0gsSUFBSSxDQUFDSSxXQUFXLElBQUlKLElBQUksQ0FBQ0ksV0FBVyxLQUFLLElBQUksRUFDaEQsT0FBT1osSUFBSSxDQUFDLElBQUlHLGtCQUFRLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFFbERMLEdBQUcsQ0FBQ1UsSUFBSSxHQUFHQSxJQUFJO0lBRWYsTUFBTUssYUFBYSxHQUFHLE1BQU1DLG1CQUFLLENBQUNDLElBQUksQ0FBQztNQUFFUCxJQUFJLEVBQUVWLEdBQUcsQ0FBQ1UsSUFBSSxDQUFDUTtJQUFHLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQ3BFLE1BQ0YsQ0FBQztJQUVEbkIsR0FBRyxDQUFDVSxJQUFJLENBQUNVLFNBQVMsR0FBSUMsS0FBSyxJQUN6QixDQUFDLENBQUNOLGFBQWEsQ0FBQ0UsSUFBSSxDQUFFSyxDQUFDLElBQUtBLENBQUMsQ0FBQ0QsS0FBSyxLQUFLQSxLQUFLLENBQUM7SUFFaERuQixJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQyxPQUFPcUIsS0FBSyxFQUFFO0lBQ2RyQixJQUFJLENBQUNxQixLQUFLLENBQUM7RUFDYjtBQUNGLENBQUM7QUFBQ0MsT0FBQSxDQUFBekIsVUFBQSxHQUFBQSxVQUFBO0FBRUYsTUFBTTBCLGNBQWMsR0FBSUMsS0FBSyxJQUFLO0VBQ2hDLE1BQU1DLFlBQVksR0FBRyxTQUFTO0VBQzlCLE1BQU1DLGVBQWUsR0FBRyxPQUFPO0VBQy9CLE9BQU9ELFlBQVksQ0FBQ0UsSUFBSSxDQUFDSCxLQUFLLENBQUMsSUFBSUUsZUFBZSxDQUFDQyxJQUFJLENBQUNILEtBQUssQ0FBQztBQUNoRSxDQUFDO0FBRU0sTUFBTUksY0FBYyxHQUFHQSxDQUFDOUIsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNoRCxJQUFJNkIsbUJBQW1CLEdBQUcsQ0FBQztFQUMzQixNQUFNbkMsR0FBRyxHQUFHSSxHQUFHLENBQUNnQyxJQUFJO0VBQ3BCLE1BQU1DLEtBQUssR0FBRyxDQUFDckMsR0FBRyxDQUFDO0VBQ25CLE9BQU9xQyxLQUFLLEVBQUVDLE1BQU0sR0FBRyxDQUFDLEVBQUU7SUFDeEIsTUFBTUMsVUFBVSxHQUFHRixLQUFLLENBQUNHLEdBQUcsQ0FBQyxDQUFDO0lBQzlCQyxNQUFNLENBQUNDLElBQUksQ0FBQ0gsVUFBVSxDQUFDLENBQUNJLE9BQU8sQ0FBRUMsR0FBRyxJQUFLO01BQ3ZDLElBQUksT0FBT0wsVUFBVSxDQUFDSyxHQUFHLENBQUMsS0FBSyxRQUFRLElBQUlMLFVBQVUsQ0FBQ0ssR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ25FUCxLQUFLLENBQUNRLElBQUksQ0FBQ04sVUFBVSxDQUFDSyxHQUFHLENBQUMsQ0FBQztNQUM3QixDQUFDLE1BQU07UUFDTCxJQUNFLE9BQU9MLFVBQVUsQ0FBQ0ssR0FBRyxDQUFDLEtBQUssUUFBUSxJQUNuQ2YsY0FBYyxDQUFDVSxVQUFVLENBQUNLLEdBQUcsQ0FBQyxDQUFDLEVBQy9CO1VBQ0FULG1CQUFtQixFQUFFO1FBQ3ZCO01BQ0Y7SUFDRixDQUFDLENBQUM7RUFDSjtFQUVBLElBQUlBLG1CQUFtQixLQUFLLENBQUMsRUFBRTtJQUM3QixPQUFPN0IsSUFBSSxDQUFDLENBQUM7RUFDZixDQUFDLE1BQU07SUFDTCxPQUFPRCxHQUFHLENBQ1B5QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1hDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUUsS0FBSztNQUFFQyxVQUFVLEVBQUU7SUFBZ0IsQ0FBQyxDQUFDO0VBQzFEO0FBQ0YsQ0FBQzs7QUFFRDtBQUFBckIsT0FBQSxDQUFBTSxjQUFBLEdBQUFBLGNBQUEifQ==","map":{"version":3,"names":["_tokenTypes","_interopRequireDefault","require","_ApiErrors","_tokenHelper","_tokenModel","_userModel","obj","__esModule","default","isLoggedIn","req","res","next","refreshToken","cookies","ApiError","verifiedRefToken","verifyDBToken","tokenTypes","REFRESH","user","User","findById","exec","acceptTerms","refreshTokens","Token","find","id","populate","ownsToken","token","x","error","exports","isInvalidInput","input","containsHtml","startsWithEqual","test","inputValidator","invalid_input_count","body","stack","length","currentObj","pop","Object","keys","forEach","key","push","status","json","success","error_code"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/","sources":["index.js"],"sourcesContent":["import tokenTypes from '../config/tokenTypes';\nimport ApiError from '../errors/ApiErrors';\nimport { verifyDBToken } from '../helpers/token-helper';\nimport Token from '../models/token-model';\nimport User from '../models/user-model';\n\nexport const isLoggedIn = async (req, res, next) => {\n  try {\n    const { refreshToken } = req.cookies;\n\n    if (!refreshToken)\n      return next(new ApiError(401, 'No refresh token provided'));\n\n    const verifiedRefToken = await verifyDBToken(\n      refreshToken,\n      tokenTypes.REFRESH\n    );\n\n    if (!verifiedRefToken) return next(new ApiError(404, 'Token not found'));\n\n    const user = await User.findById(\n      verifiedRefToken.user,\n      'acceptTerms role _id'\n    ).exec();\n\n    if (!user.acceptTerms || user.acceptTerms !== true)\n      return next(new ApiError(404, 'user not found'));\n\n    req.user = user;\n\n    const refreshTokens = await Token.find({ user: req.user.id }).populate(\n      'user'\n    );\n\n    req.user.ownsToken = (token) =>\n      !!refreshTokens.find((x) => x.token === token);\n\n    next();\n  } catch (error) {\n    next(error);\n  }\n};\n\nconst isInvalidInput = (input) => {\n  const containsHtml = /<[^>]*>/;\n  const startsWithEqual = /^\\s*=/;\n  return containsHtml.test(input) || startsWithEqual.test(input);\n};\n\nexport const inputValidator = (req, res, next) => {\n  let invalid_input_count = 0;\n  const obj = req.body;\n  const stack = [obj];\n  while (stack?.length > 0) {\n    const currentObj = stack.pop();\n    Object.keys(currentObj).forEach((key) => {\n      if (typeof currentObj[key] === 'object' && currentObj[key] !== null) {\n        stack.push(currentObj[key]);\n      } else {\n        if (\n          typeof currentObj[key] === 'string' &&\n          isInvalidInput(currentObj[key])\n        ) {\n          invalid_input_count++;\n        }\n      }\n    });\n  }\n\n  if (invalid_input_count === 0) {\n    return next();\n  } else {\n    return res\n      .status(400)\n      .json({ success: false, error_code: 'invalid_input' });\n  }\n};\n\n// app.use(inputValidator);\n"],"mappings":"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"}},"mtime":1690556769000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isLoggedIn = exports.inputValidator = void 0;\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst isLoggedIn = async (req, res, next) => {\n  try {\n    const {\n      refreshToken\n    } = req.cookies;\n    if (!refreshToken) return next(new _ApiErrors.default(401, 'No refresh token provided'));\n    const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n    if (!verifiedRefToken) return next(new _ApiErrors.default(404, 'Token not found'));\n    const user = await _userModel.default.findById(verifiedRefToken.user, 'acceptTerms role _id').exec();\n    if (!user.acceptTerms || user.acceptTerms !== true) return next(new _ApiErrors.default(404, 'user not found'));\n    req.user = user;\n    const refreshTokens = await _tokenModel.default.find({\n      user: req.user.id\n    }).populate('user');\n    req.user.ownsToken = token => !!refreshTokens.find(x => x.token === token);\n    next();\n  } catch (error) {\n    next(error);\n  }\n};\nexports.isLoggedIn = isLoggedIn;\nconst isInvalidInput = input => {\n  const containsHtml = /<[^>]*>/;\n  const startsWithEqual = /^\\s*=/;\n  return containsHtml.test(input) || startsWithEqual.test(input);\n};\nconst inputValidator = (req, res, next) => {\n  let invalid_input_count = 0;\n  const obj = req.body;\n  const stack = [obj];\n  while (stack?.length > 0) {\n    const currentObj = stack.pop();\n    Object.keys(currentObj).forEach(key => {\n      if (typeof currentObj[key] === 'object' && currentObj[key] !== null) {\n        stack.push(currentObj[key]);\n      } else {\n        if (typeof currentObj[key] === 'string' && isInvalidInput(currentObj[key])) {\n          invalid_input_count++;\n        }\n      }\n    });\n  }\n  if (invalid_input_count === 0) {\n    return next();\n  } else {\n    return res.status(400).json({\n      success: false,\n      error_code: 'invalid_input'\n    });\n  }\n};\n\n// app.use(inputValidator);\nexports.inputValidator = inputValidator;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdG9rZW5UeXBlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX0FwaUVycm9ycyIsIl90b2tlbkhlbHBlciIsIl90b2tlbk1vZGVsIiwiX3VzZXJNb2RlbCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiaXNMb2dnZWRJbiIsInJlcSIsInJlcyIsIm5leHQiLCJyZWZyZXNoVG9rZW4iLCJjb29raWVzIiwiQXBpRXJyb3IiLCJ2ZXJpZmllZFJlZlRva2VuIiwidmVyaWZ5REJUb2tlbiIsInRva2VuVHlwZXMiLCJSRUZSRVNIIiwidXNlciIsIlVzZXIiLCJmaW5kQnlJZCIsImV4ZWMiLCJhY2NlcHRUZXJtcyIsInJlZnJlc2hUb2tlbnMiLCJUb2tlbiIsImZpbmQiLCJpZCIsInBvcHVsYXRlIiwib3duc1Rva2VuIiwidG9rZW4iLCJ4IiwiZXJyb3IiLCJleHBvcnRzIiwiaXNJbnZhbGlkSW5wdXQiLCJpbnB1dCIsImNvbnRhaW5zSHRtbCIsInN0YXJ0c1dpdGhFcXVhbCIsInRlc3QiLCJpbnB1dFZhbGlkYXRvciIsImludmFsaWRfaW5wdXRfY291bnQiLCJib2R5Iiwic3RhY2siLCJsZW5ndGgiLCJjdXJyZW50T2JqIiwicG9wIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJwdXNoIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvcl9jb2RlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0ZVTEwtU1RBQ0stU0FNUExFUy9zZXJ2ZXJTYW1wbGUvQXV0aC9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdG9rZW5UeXBlcyBmcm9tICcuLi9jb25maWcvdG9rZW5UeXBlcyc7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5pbXBvcnQgeyB2ZXJpZnlEQlRva2VuIH0gZnJvbSAnLi4vaGVscGVycy90b2tlbi1oZWxwZXInO1xuaW1wb3J0IFRva2VuIGZyb20gJy4uL21vZGVscy90b2tlbi1tb2RlbCc7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlci1tb2RlbCc7XG5cbmV4cG9ydCBjb25zdCBpc0xvZ2dlZEluID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyByZWZyZXNoVG9rZW4gfSA9IHJlcS5jb29raWVzO1xuXG4gICAgaWYgKCFyZWZyZXNoVG9rZW4pXG4gICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnTm8gcmVmcmVzaCB0b2tlbiBwcm92aWRlZCcpKTtcblxuICAgIGNvbnN0IHZlcmlmaWVkUmVmVG9rZW4gPSBhd2FpdCB2ZXJpZnlEQlRva2VuKFxuICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgdG9rZW5UeXBlcy5SRUZSRVNIXG4gICAgKTtcblxuICAgIGlmICghdmVyaWZpZWRSZWZUb2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ1Rva2VuIG5vdCBmb3VuZCcpKTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKFxuICAgICAgdmVyaWZpZWRSZWZUb2tlbi51c2VyLFxuICAgICAgJ2FjY2VwdFRlcm1zIHJvbGUgX2lkJ1xuICAgICkuZXhlYygpO1xuXG4gICAgaWYgKCF1c2VyLmFjY2VwdFRlcm1zIHx8IHVzZXIuYWNjZXB0VGVybXMgIT09IHRydWUpXG4gICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAndXNlciBub3QgZm91bmQnKSk7XG5cbiAgICByZXEudXNlciA9IHVzZXI7XG5cbiAgICBjb25zdCByZWZyZXNoVG9rZW5zID0gYXdhaXQgVG9rZW4uZmluZCh7IHVzZXI6IHJlcS51c2VyLmlkIH0pLnBvcHVsYXRlKFxuICAgICAgJ3VzZXInXG4gICAgKTtcblxuICAgIHJlcS51c2VyLm93bnNUb2tlbiA9ICh0b2tlbikgPT5cbiAgICAgICEhcmVmcmVzaFRva2Vucy5maW5kKCh4KSA9PiB4LnRva2VuID09PSB0b2tlbik7XG5cbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbmV4dChlcnJvcik7XG4gIH1cbn07XG5cbmNvbnN0IGlzSW52YWxpZElucHV0ID0gKGlucHV0KSA9PiB7XG4gIGNvbnN0IGNvbnRhaW5zSHRtbCA9IC88W14+XSo+LztcbiAgY29uc3Qgc3RhcnRzV2l0aEVxdWFsID0gL15cXHMqPS87XG4gIHJldHVybiBjb250YWluc0h0bWwudGVzdChpbnB1dCkgfHwgc3RhcnRzV2l0aEVxdWFsLnRlc3QoaW5wdXQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGlucHV0VmFsaWRhdG9yID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxldCBpbnZhbGlkX2lucHV0X2NvdW50ID0gMDtcbiAgY29uc3Qgb2JqID0gcmVxLmJvZHk7XG4gIGNvbnN0IHN0YWNrID0gW29ial07XG4gIHdoaWxlIChzdGFjaz8ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGN1cnJlbnRPYmogPSBzdGFjay5wb3AoKTtcbiAgICBPYmplY3Qua2V5cyhjdXJyZW50T2JqKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY3VycmVudE9ialtrZXldID09PSAnb2JqZWN0JyAmJiBjdXJyZW50T2JqW2tleV0gIT09IG51bGwpIHtcbiAgICAgICAgc3RhY2sucHVzaChjdXJyZW50T2JqW2tleV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBjdXJyZW50T2JqW2tleV0gPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgaXNJbnZhbGlkSW5wdXQoY3VycmVudE9ialtrZXldKVxuICAgICAgICApIHtcbiAgICAgICAgICBpbnZhbGlkX2lucHV0X2NvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChpbnZhbGlkX2lucHV0X2NvdW50ID09PSAwKSB7XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmVzXG4gICAgICAuc3RhdHVzKDQwMClcbiAgICAgIC5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yX2NvZGU6ICdpbnZhbGlkX2lucHV0JyB9KTtcbiAgfVxufTtcblxuLy8gYXBwLnVzZShpbnB1dFZhbGlkYXRvcik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFlBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFdBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFVBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUF3QyxTQUFBRCx1QkFBQU0sR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVqQyxNQUFNRyxVQUFVLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNsRCxJQUFJO0lBQ0YsTUFBTTtNQUFFQztJQUFhLENBQUMsR0FBR0gsR0FBRyxDQUFDSSxPQUFPO0lBRXBDLElBQUksQ0FBQ0QsWUFBWSxFQUNmLE9BQU9ELElBQUksQ0FBQyxJQUFJRyxrQkFBUSxDQUFDLEdBQUcsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0lBRTdELE1BQU1DLGdCQUFnQixHQUFHLE1BQU0sSUFBQUMsMEJBQWEsRUFDMUNKLFlBQVksRUFDWkssbUJBQVUsQ0FBQ0MsT0FDYixDQUFDO0lBRUQsSUFBSSxDQUFDSCxnQkFBZ0IsRUFBRSxPQUFPSixJQUFJLENBQUMsSUFBSUcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUV4RSxNQUFNSyxJQUFJLEdBQUcsTUFBTUMsa0JBQUksQ0FBQ0MsUUFBUSxD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","map":{"version":3,"names":["_tokenTypes","_interopRequireDefault","require","_ApiErrors","_tokenHelper","_tokenModel","_userModel","obj","__esModule","default","isLoggedIn","req","res","next","refreshToken","cookies","ApiError","verifiedRefToken","verifyDBToken","tokenTypes","REFRESH","user","User","findById","exec","acceptTerms","refreshTokens","Token","find","id","populate","ownsToken","token","x","error","exports","isInvalidInput","input","containsHtml","startsWithEqual","test","inputValidator","invalid_input_count","body","stack","length","currentObj","pop","Object","keys","forEach","key","push","status","json","success","error_code"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/","sources":["index.js"],"sourcesContent":["import tokenTypes from '../config/tokenTypes';\nimport ApiError from '../errors/ApiErrors';\nimport { verifyDBToken } from '../helpers/token-helper';\nimport Token from '../models/token-model';\nimport User from '../models/user-model';\n\nexport const isLoggedIn = async (req, res, next) => {\n  try {\n    const { refreshToken } = req.cookies;\n\n    if (!refreshToken)\n      return next(new ApiError(401, 'No refresh token provided'));\n\n    const verifiedRefToken = await verifyDBToken(\n      refreshToken,\n      tokenTypes.REFRESH\n    );\n\n    if (!verifiedRefToken) return next(new ApiError(404, 'Token not found'));\n\n    const user = await User.findById(\n      verifiedRefToken.user,\n      'acceptTerms role _id'\n    ).exec();\n\n    if (!user.acceptTerms || user.acceptTerms !== true)\n      return next(new ApiError(404, 'user not found'));\n\n    req.user = user;\n\n    const refreshTokens = await Token.find({ user: req.user.id }).populate(\n      'user'\n    );\n\n    req.user.ownsToken = (token) =>\n      !!refreshTokens.find((x) => x.token === token);\n\n    next();\n  } catch (error) {\n    next(error);\n  }\n};\n\nconst isInvalidInput = (input) => {\n  const containsHtml = /<[^>]*>/;\n  const startsWithEqual = /^\\s*=/;\n  return containsHtml.test(input) || startsWithEqual.test(input);\n};\n\nexport const inputValidator = (req, res, next) => {\n  let invalid_input_count = 0;\n  const obj = req.body;\n  const stack = [obj];\n  while (stack?.length > 0) {\n    const currentObj = stack.pop();\n    Object.keys(currentObj).forEach((key) => {\n      if (typeof currentObj[key] === 'object' && currentObj[key] !== null) {\n        stack.push(currentObj[key]);\n      } else {\n        if (\n          typeof currentObj[key] === 'string' &&\n          isInvalidInput(currentObj[key])\n        ) {\n          invalid_input_count++;\n        }\n      }\n    });\n  }\n\n  if (invalid_input_count === 0) {\n    return next();\n  } else {\n    return res\n      .status(400)\n      .json({ success: false, error_code: 'invalid_input' });\n  }\n};\n\n// app.use(inputValidator);\n"],"mappings":"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"}},"mtime":1690556769000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/authenticateJWT.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _jsonwebtoken = require(\"jsonwebtoken\");\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst accessSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst authenticateJWT = async (req, res, next) => {\n  const token = await (0, _tokenHelper.tokenfromheader)(req);\n  (0, _jsonwebtoken.verify)(token, accessSecret, (err, user) => {\n    if (err instanceof _jsonwebtoken.TokenExpiredError) {\n      return next(new _ApiErrors.default(401, 'Unauthorized! Token expired'));\n    }\n    if (err instanceof _jsonwebtoken.NotBeforeError) {\n      return next(new _ApiErrors.default(401, 'jwt not active'));\n    }\n    if (err instanceof _jsonwebtoken.JsonWebTokenError) {\n      return next(new _ApiErrors.default(401, 'jwt malformed'));\n    }\n    req.user = user;\n    next();\n  });\n};\nvar _default = authenticateJWT;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwicmVxdWlyZSIsIl90b2tlbkhlbHBlciIsIl9BcGlFcnJvcnMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJhY2Nlc3NTZWNyZXQiLCJhdXRoZW50aWNhdGVKV1QiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJ0b2tlbmZyb21oZWFkZXIiLCJ2ZXJpZnkiLCJlcnIiLCJ1c2VyIiwiVG9rZW5FeHBpcmVkRXJyb3IiLCJBcGlFcnJvciIsIk5vdEJlZm9yZUVycm9yIiwiSnNvbldlYlRva2VuRXJyb3IiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZUpXVC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB2ZXJpZnksXG4gIEpzb25XZWJUb2tlbkVycm9yLFxuICBOb3RCZWZvcmVFcnJvcixcbiAgVG9rZW5FeHBpcmVkRXJyb3IsXG59IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyB0b2tlbmZyb21oZWFkZXIgfSBmcm9tICcuLi9oZWxwZXJzL3Rva2VuLWhlbHBlcic7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5cbmNvbnN0IGFjY2Vzc1NlY3JldCA9XG4gICd5SnpkV0lpT2lJMk5ETmlaR0UyWW1VeU1qRTFOVEUwTkRkbE1UZzJPVGNpTENKcFlYUWlPakUyT0RFMk5USXlPRGtzSW1WNGNDSTZNVFknO1xuXG5jb25zdCBhdXRoZW50aWNhdGVKV1QgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdG9rZW4gPSBhd2FpdCB0b2tlbmZyb21oZWFkZXIocmVxKTtcblxuICB2ZXJpZnkodG9rZW4sIGFjY2Vzc1NlY3JldCwgKGVyciwgdXNlcikgPT4ge1xuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBUb2tlbkV4cGlyZWRFcnJvcikge1xuICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ1VuYXV0aG9yaXplZCEgVG9rZW4gZXhwaXJlZCcpKTtcbiAgICB9XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIE5vdEJlZm9yZUVycm9yKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnand0IG5vdCBhY3RpdmUnKSk7XG4gICAgfVxuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBKc29uV2ViVG9rZW5FcnJvcikge1xuICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ2p3dCBtYWxmb3JtZWQnKSk7XG4gICAgfVxuICAgIHJlcS51c2VyID0gdXNlcjtcbiAgICBuZXh0KCk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYXV0aGVudGljYXRlSldUO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxhQUFBLEdBQUFDLE9BQUE7QUFNQSxJQUFBQyxZQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxVQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFBMkMsU0FBQUcsdUJBQUFDLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFM0MsTUFBTUcsWUFBWSxHQUNoQixnRkFBZ0Y7QUFFbEYsTUFBTUMsZUFBZSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDaEQsTUFBTUMsS0FBSyxHQUFHLE1BQU0sSUFBQUMsNEJBQWUsRUFBQ0osR0FBRyxDQUFDO0VBRXhDLElBQUFLLG9CQUFNLEVBQUNGLEtBQUssRUFBRUwsWUFBWSxFQUFFLENBQUNRLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQ3pDLElBQUlELEdBQUcsWUFBWUUsK0JBQWlCLEVBQUU7TUFDcEMsT0FBT04sSUFBSSxDQUFDLElBQUlPLGtCQUFRLENBQUMsR0FBRyxFQUFFLDZCQUE2QixDQUFDLENBQUM7SUFDL0Q7SUFDQSxJQUFJSCxHQUFHLFlBQVlJLDRCQUFjLEVBQUU7TUFDakMsT0FBT1IsSUFBSSxDQUFDLElBQUlPLGtCQUFRLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDbEQ7SUFDQSxJQUFJSCxHQUFHLFlBQVlLLCtCQUFpQixFQUFFO01BQ3BDLE9BQU9ULElBQUksQ0FBQyxJQUFJTyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUNqRDtJQUNBVCxHQUFHLENBQUNPLElBQUksR0FBR0EsSUFBSTtJQUNmTCxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQztBQUNKLENBQUM7QUFBQyxJQUFBVSxRQUFBLEdBRWFiLGVBQWU7QUFBQWMsT0FBQSxDQUFBaEIsT0FBQSxHQUFBZSxRQUFBIn0=","map":{"version":3,"names":["_jsonwebtoken","require","_tokenHelper","_ApiErrors","_interopRequireDefault","obj","__esModule","default","accessSecret","authenticateJWT","req","res","next","token","tokenfromheader","verify","err","user","TokenExpiredError","ApiError","NotBeforeError","JsonWebTokenError","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/","sources":["authenticateJWT.js"],"sourcesContent":["import {\n  verify,\n  JsonWebTokenError,\n  NotBeforeError,\n  TokenExpiredError,\n} from 'jsonwebtoken';\nimport { tokenfromheader } from '../helpers/token-helper';\nimport ApiError from '../errors/ApiErrors';\n\nconst accessSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\n\nconst authenticateJWT = async (req, res, next) => {\n  const token = await tokenfromheader(req);\n\n  verify(token, accessSecret, (err, user) => {\n    if (err instanceof TokenExpiredError) {\n      return next(new ApiError(401, 'Unauthorized! Token expired'));\n    }\n    if (err instanceof NotBeforeError) {\n      return next(new ApiError(401, 'jwt not active'));\n    }\n    if (err instanceof JsonWebTokenError) {\n      return next(new ApiError(401, 'jwt malformed'));\n    }\n    req.user = user;\n    next();\n  });\n};\n\nexport default authenticateJWT;\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AAMA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAC,sBAAA,CAAAH,OAAA;AAA2C,SAAAG,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3C,MAAMG,YAAY,GAChB,gFAAgF;AAElF,MAAMC,eAAe,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChD,MAAMC,KAAK,GAAG,MAAM,IAAAC,4BAAe,EAACJ,GAAG,CAAC;EAExC,IAAAK,oBAAM,EAACF,KAAK,EAAEL,YAAY,EAAE,CAACQ,GAAG,EAAEC,IAAI,KAAK;IACzC,IAAID,GAAG,YAAYE,+BAAiB,EAAE;MACpC,OAAON,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,6BAA6B,CAAC,CAAC;IAC/D;IACA,IAAIH,GAAG,YAAYI,4BAAc,EAAE;MACjC,OAAOR,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;IAClD;IACA,IAAIH,GAAG,YAAYK,+BAAiB,EAAE;MACpC,OAAOT,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IACjD;IACAT,GAAG,CAACO,IAAI,GAAGA,IAAI;IACfL,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;AACJ,CAAC;AAAC,IAAAU,QAAA,GAEab,eAAe;AAAAc,OAAA,CAAAhB,OAAA,GAAAe,QAAA"}},"mtime":1690790177039},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"filename\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/authenticateJWT.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _jsonwebtoken = require(\"jsonwebtoken\");\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst accessSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst authenticateJWT = async (req, res, next) => {\n  const token = await (0, _tokenHelper.tokenfromheader)(req);\n  (0, _jsonwebtoken.verify)(token, accessSecret, (err, user) => {\n    if (err instanceof _jsonwebtoken.TokenExpiredError) {\n      return next(new _ApiErrors.default(401, 'Unauthorized! Token expired'));\n    }\n    if (err instanceof _jsonwebtoken.NotBeforeError) {\n      return next(new _ApiErrors.default(401, 'jwt not active'));\n    }\n    if (err instanceof _jsonwebtoken.JsonWebTokenError) {\n      return next(new _ApiErrors.default(401, 'jwt malformed'));\n    }\n    req.user = user;\n    next();\n  });\n};\nvar _default = authenticateJWT;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwicmVxdWlyZSIsIl90b2tlbkhlbHBlciIsIl9BcGlFcnJvcnMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJhY2Nlc3NTZWNyZXQiLCJhdXRoZW50aWNhdGVKV1QiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJ0b2tlbmZyb21oZWFkZXIiLCJ2ZXJpZnkiLCJlcnIiLCJ1c2VyIiwiVG9rZW5FeHBpcmVkRXJyb3IiLCJBcGlFcnJvciIsIk5vdEJlZm9yZUVycm9yIiwiSnNvbldlYlRva2VuRXJyb3IiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvRlVMTC1TVEFDSy1TQU1QTEVTL3NlcnZlclNhbXBsZS9BdXRoL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZUpXVC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB2ZXJpZnksXG4gIEpzb25XZWJUb2tlbkVycm9yLFxuICBOb3RCZWZvcmVFcnJvcixcbiAgVG9rZW5FeHBpcmVkRXJyb3IsXG59IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyB0b2tlbmZyb21oZWFkZXIgfSBmcm9tICcuLi9oZWxwZXJzL3Rva2VuLWhlbHBlcic7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi4vZXJyb3JzL0FwaUVycm9ycyc7XG5cbmNvbnN0IGFjY2Vzc1NlY3JldCA9XG4gICd5SnpkV0lpT2lJMk5ETmlaR0UyWW1VeU1qRTFOVEUwTkRkbE1UZzJPVGNpTENKcFlYUWlPakUyT0RFMk5USXlPRGtzSW1WNGNDSTZNVFknO1xuXG5jb25zdCBhdXRoZW50aWNhdGVKV1QgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdG9rZW4gPSBhd2FpdCB0b2tlbmZyb21oZWFkZXIocmVxKTtcblxuICB2ZXJpZnkodG9rZW4sIGFjY2Vzc1NlY3JldCwgKGVyciwgdXNlcikgPT4ge1xuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBUb2tlbkV4cGlyZWRFcnJvcikge1xuICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ1VuYXV0aG9yaXplZCEgVG9rZW4gZXhwaXJlZCcpKTtcbiAgICB9XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIE5vdEJlZm9yZUVycm9yKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnand0IG5vdCBhY3RpdmUnKSk7XG4gICAgfVxuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBKc29uV2ViVG9rZW5FcnJvcikge1xuICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ2p3dCBtYWxmb3JtZWQnKSk7XG4gICAgfVxuICAgIHJlcS51c2VyID0gdXNlcjtcbiAgICBuZXh0KCk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYXV0aGVudGljYXRlSldUO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxhQUFBLEdBQUFDLE9BQUE7QUFNQSxJQUFBQyxZQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxVQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFBMkMsU0FBQUcsdUJBQUFDLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFM0MsTUFBTUcsWUFBWSxHQUNoQixnRkFBZ0Y7QUFFbEYsTUFBTUMsZUFBZSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDaEQsTUFBTUMsS0FBSyxHQUFHLE1BQU0sSUFBQUMsNEJBQWUsRUFBQ0osR0FBRyxDQUFDO0VBRXhDLElBQUFLLG9CQUFNLEVBQUNGLEtBQUssRUFBRUwsWUFBWSxFQUFFLENBQUNRLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQ3pDLElBQUlELEdBQUcsWUFBWUUsK0JBQWlCLEVBQUU7TUFDcEMsT0FBT04sSUFBSSxDQUFDLElBQUlPLGtCQUFRLENBQUMsR0FBRyxFQUFFLDZCQUE2QixDQUFDLENBQUM7SUFDL0Q7SUFDQSxJQUFJSCxHQUFHLFlBQVlJLDRCQUFjLEVBQUU7TUFDakMsT0FBT1IsSUFBSSxDQUFDLElBQUlPLGtCQUFRLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDbEQ7SUFDQSxJQUFJSCxHQUFHLFlBQVlLLCtCQUFpQixFQUFFO01BQ3BDLE9BQU9ULElBQUksQ0FBQyxJQUFJTyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUNqRDtJQUNBVCxHQUFHLENBQUNPLElBQUksR0FBR0EsSUFBSTtJQUNmTCxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQztBQUNKLENBQUM7QUFBQyxJQUFBVSxRQUFBLEdBRWFiLGVBQWU7QUFBQWMsT0FBQSxDQUFBaEIsT0FBQSxHQUFBZSxRQUFBIn0=","map":{"version":3,"names":["_jsonwebtoken","require","_tokenHelper","_ApiErrors","_interopRequireDefault","obj","__esModule","default","accessSecret","authenticateJWT","req","res","next","token","tokenfromheader","verify","err","user","TokenExpiredError","ApiError","NotBeforeError","JsonWebTokenError","_default","exports"],"sourceRoot":"/home/raj/Documents/FULL-STACK-SAMPLES/serverSample/Auth/src/middlewares/","sources":["authenticateJWT.js"],"sourcesContent":["import {\n  verify,\n  JsonWebTokenError,\n  NotBeforeError,\n  TokenExpiredError,\n} from 'jsonwebtoken';\nimport { tokenfromheader } from '../helpers/token-helper';\nimport ApiError from '../errors/ApiErrors';\n\nconst accessSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\n\nconst authenticateJWT = async (req, res, next) => {\n  const token = await tokenfromheader(req);\n\n  verify(token, accessSecret, (err, user) => {\n    if (err instanceof TokenExpiredError) {\n      return next(new ApiError(401, 'Unauthorized! Token expired'));\n    }\n    if (err instanceof NotBeforeError) {\n      return next(new ApiError(401, 'jwt not active'));\n    }\n    if (err instanceof JsonWebTokenError) {\n      return next(new ApiError(401, 'jwt malformed'));\n    }\n    req.user = user;\n    next();\n  });\n};\n\nexport default authenticateJWT;\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AAMA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAC,sBAAA,CAAAH,OAAA;AAA2C,SAAAG,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3C,MAAMG,YAAY,GAChB,gFAAgF;AAElF,MAAMC,eAAe,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChD,MAAMC,KAAK,GAAG,MAAM,IAAAC,4BAAe,EAACJ,GAAG,CAAC;EAExC,IAAAK,oBAAM,EAACF,KAAK,EAAEL,YAAY,EAAE,CAACQ,GAAG,EAAEC,IAAI,KAAK;IACzC,IAAID,GAAG,YAAYE,+BAAiB,EAAE;MACpC,OAAON,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,6BAA6B,CAAC,CAAC;IAC/D;IACA,IAAIH,GAAG,YAAYI,4BAAc,EAAE;MACjC,OAAOR,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;IAClD;IACA,IAAIH,GAAG,YAAYK,+BAAiB,EAAE;MACpC,OAAOT,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IACjD;IACAT,GAAG,CAACO,IAAI,GAAGA,IAAI;IACfL,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;AACJ,CAAC;AAAC,IAAAU,QAAA,GAEab,eAAe;AAAAc,OAAA,CAAAhB,OAAA,GAAAe,QAAA"}},"mtime":1690790177039},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressMongoSanitize = _interopRequireDefault(require(\"express-mongo-sanitize\"));\nvar _compression = _interopRequireDefault(require(\"compression\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\nvar _routes = _interopRequireDefault(require(\"./routes\"));\nvar _config = _interopRequireDefault(require(\"./config/config\"));\nvar _error = require(\"./errors/error\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst app = (0, _express.default)();\nconst port = _config.default.port;\n\n// connect to mongodb\nrequire('./database/dbConn');\n\n// Remove Express header\nif (_config.default.env !== 'development') {\n  app.disable('x-powered-by');\n}\napp.set('etag', false);\napp.set('trust proxy', true);\nif (_config.default.env !== 'test') {\n  app.use((0, _morgan.default)('dev', {\n    skip: function (req, res) {\n      return res.statusCode < 400;\n    }\n  }));\n}\n\n// enable cors\nlet whitelist = ['http://localhost:3000'];\nconst origin = (origin, callback) => {\n  // allow requests with no origin\n  if (!origin) return callback(null, true);\n  if (whitelist.indexOf(origin) === -1) {\n    const message = 'The CORS policy for this origin does not allow access from a specific origin.';\n    return callback(new Error(message), false);\n  }\n  return callback(null, true);\n};\napp.use((0, _cors.default)({\n  origin,\n  credentials: true,\n  optionsSuccessStatus: 200\n}));\n\n// parse json request body\napp.use(_express.default.json());\n\n// parse urlencoded request body\napp.use(_express.default.urlencoded({\n  extended: false\n}));\n\n// parse cookies\napp.use((0, _cookieParser.default)());\n\n// sanitize request data\napp.use((0, _expressMongoSanitize.default)({\n  replaceWith: '_'\n}));\n\n// gzip compression\napp.use((0, _compression.default)());\n\n// Register app routes\n(0, _routes.default)(app);\napp.use(_error.notFound);\n\n// convert error to ApiError, if needed\napp.use(_error.errorConverter);\n\n// handle error\napp.use(_error.errorHandler);\n\n// error handler middleware\napp.use(_error.finalError);\nconst server = app.listen(port, () => console.log(`Server up on port ${port}!`));\nprocess.on('unhandledRejection', err => {\n  console.log(`Error: ${err.message}`);\n  server.close(() => process.exit(1));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2V4cHJlc3NNb25nb1Nhbml0aXplIiwiX2NvbXByZXNzaW9uIiwiX2NvcnMiLCJfbW9yZ2FuIiwiX2Nvb2tpZVBhcnNlciIsIl9yb3V0ZXMiLCJfY29uZmlnIiwiX2Vycm9yIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJhcHAiLCJleHByZXNzIiwicG9ydCIsImNvbmZpZyIsImVudiIsImRpc2FibGUiLCJzZXQiLCJ1c2UiLCJtb3JnYW4iLCJza2lwIiwicmVxIiwicmVzIiwic3RhdHVzQ29kZSIsIndoaXRlbGlzdCIsIm9yaWdpbiIsImNhbGxiYWNrIiwiaW5kZXhPZiIsIm1lc3NhZ2UiLCJFcnJvciIsImNvcnMiLCJjcmVkZW50aWFscyIsIm9wdGlvbnNTdWNjZXNzU3RhdHVzIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImNvb2tpZVBhcnNlciIsIkV4cHJlc3NNb25nb1Nhbml0aXplIiwicmVwbGFjZVdpdGgiLCJjb21wcmVzc2lvbiIsImFwcFJvdXRlcyIsIm5vdEZvdW5kIiwiZXJyb3JDb252ZXJ0ZXIiLCJlcnJvckhhbmRsZXIiLCJmaW5hbEVycm9yIiwic2VydmVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJvbiIsImVyciIsImNsb3NlIiwiZXhpdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgRXhwcmVzc01vbmdvU2FuaXRpemUgZnJvbSAnZXhwcmVzcy1tb25nby1zYW5pdGl6ZSc7XG5pbXBvcnQgY29tcHJlc3Npb24gZnJvbSAnY29tcHJlc3Npb24nO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgbW9yZ2FuIGZyb20gJ21vcmdhbic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuXG5pbXBvcnQgYXBwUm91dGVzIGZyb20gJy4vcm91dGVzJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcvY29uZmlnJztcbmltcG9ydCB7XG4gIGVycm9yQ29udmVydGVyLFxuICBlcnJvckhhbmRsZXIsXG4gIG5vdEZvdW5kLFxuICBmaW5hbEVycm9yLFxufSBmcm9tICcuL2Vycm9ycy9lcnJvcic7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbmNvbnN0IHBvcnQgPSBjb25maWcucG9ydDtcblxuLy8gY29ubmVjdCB0byBtb25nb2RiXG5yZXF1aXJlKCcuL2RhdGFiYXNlL2RiQ29ubicpO1xuXG4vLyBSZW1vdmUgRXhwcmVzcyBoZWFkZXJcbmlmIChjb25maWcuZW52ICE9PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIGFwcC5kaXNhYmxlKCd4LXBvd2VyZWQtYnknKTtcbn1cblxuYXBwLnNldCgnZXRhZycsIGZhbHNlKTtcbmFwcC5zZXQoJ3RydXN0IHByb3h5JywgdHJ1ZSk7XG5cbmlmIChjb25maWcuZW52ICE9PSAndGVzdCcpIHtcbiAgYXBwLnVzZShcbiAgICBtb3JnYW4oJ2RldicsIHtcbiAgICAgIHNraXA6IGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1c0NvZGUgPCA0MDA7XG4gICAgICB9LFxuICAgIH0pXG4gICk7XG59XG5cbi8vIGVuYWJsZSBjb3JzXG5sZXQgd2hpdGVsaXN0ID0gWydodHRwOi8vbG9jYWxob3N0OjMwMDAnXTtcbmNvbnN0IG9yaWdpbiA9IChvcmlnaW4sIGNhbGxiYWNrKSA9PiB7XG4gIC8vIGFsbG93IHJlcXVlc3RzIHdpdGggbm8gb3JpZ2luXG4gIGlmICghb3JpZ2luKSByZXR1cm4gY2FsbGJhY2sobnVsbCwgdHJ1ZSk7XG4gIGlmICh3aGl0ZWxpc3QuaW5kZXhPZihvcmlnaW4pID09PSAtMSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgJ1RoZSBDT1JTIHBvbGljeSBmb3IgdGhpcyBvcmlnaW4gZG9lcyBub3QgYWxsb3cgYWNjZXNzIGZyb20gYSBzcGVjaWZpYyBvcmlnaW4uJztcblxuICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IobWVzc2FnZSksIGZhbHNlKTtcbiAgfVxuICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdHJ1ZSk7XG59O1xuYXBwLnVzZShjb3JzKHsgb3JpZ2luLCBjcmVkZW50aWFsczogdHJ1ZSwgb3B0aW9uc1N1Y2Nlc3NTdGF0dXM6IDIwMCB9KSk7XG5cbi8vIHBhcnNlIGpzb24gcmVxdWVzdCBib2R5XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcblxuLy8gcGFyc2UgdXJsZW5jb2RlZCByZXF1ZXN0IGJvZHlcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcblxuLy8gcGFyc2UgY29va2llc1xuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG5cbi8vIHNhbml0aXplIHJlcXVlc3QgZGF0YVxuYXBwLnVzZShFeHByZXNzTW9uZ29TYW5pdGl6ZSh7IHJlcGxhY2VXaXRoOiAnXycgfSkpO1xuXG4vLyBnemlwIGNvbXByZXNzaW9uXG5hcHAudXNlKGNvbXByZXNzaW9uKCkpO1xuXG4vLyBSZWdpc3RlciBhcHAgcm91dGVzXG5hcHBSb3V0ZXMoYXBwKTtcblxuYXBwLnVzZShub3RGb3VuZCk7XG5cbi8vIGNvbnZlcnQgZXJyb3IgdG8gQXBpRXJyb3IsIGlmIG5lZWRlZFxuYXBwLnVzZShlcnJvckNvbnZlcnRlcik7XG5cbi8vIGhhbmRsZSBlcnJvclxuYXBwLnVzZShlcnJvckhhbmRsZXIpO1xuXG4vLyBlcnJvciBoYW5kbGVyIG1pZGRsZXdhcmVcbmFwcC51c2UoZmluYWxFcnJvcik7XG5cbmNvbnN0IHNlcnZlciA9IGFwcC5saXN0ZW4ocG9ydCwgKCkgPT5cbiAgY29uc29sZS5sb2coYFNlcnZlciB1cCBvbiBwb3J0ICR7cG9ydH0hYClcbik7XG5cbnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coYEVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICBzZXJ2ZXIuY2xvc2UoKCkgPT4gcHJvY2Vzcy5leGl0KDEpKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLHFCQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxPQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxhQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBTSxPQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTyxPQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBUSxNQUFBLEdBQUFSLE9BQUE7QUFLd0IsU0FBQUQsdUJBQUFVLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFeEIsTUFBTUcsR0FBRyxHQUFHLElBQUFDLGdCQUFPLEVBQUMsQ0FBQztBQUNyQixNQUFNQyxJQUFJLEdBQUdDLGVBQU0sQ0FBQ0QsSUFBSTs7QUFFeEI7QUFDQWQsT0FBTyxDQUFDLG1CQUFtQixDQUFDOztBQUU1QjtBQUNBLElBQUllLGVBQU0sQ0FBQ0MsR0FBRyxLQUFLLGFBQWEsRUFBRTtFQUNoQ0osR0FBRyxDQUFDSyxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQzdCO0FBRUFMLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7QUFDdEJOLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLGFB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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_expressMongoSanitize","_compression","_cors","_morgan","_cookieParser","_routes","_config","_error","obj","__esModule","default","app","express","port","config","env","disable","set","use","morgan","skip","req","res","statusCode","whitelist","origin","callback","indexOf","message","Error","cors","credentials","optionsSuccessStatus","json","urlencoded","extended","cookieParser","ExpressMongoSanitize","replaceWith","compression","appRoutes","notFound","errorConverter","errorHandler","finalError","server","listen","console","log","process","on","err","close","exit"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/","sources":["app.js"],"sourcesContent":["import express from 'express';\nimport ExpressMongoSanitize from 'express-mongo-sanitize';\nimport compression from 'compression';\nimport cors from 'cors';\nimport morgan from 'morgan';\nimport cookieParser from 'cookie-parser';\n\nimport appRoutes from './routes';\nimport config from './config/config';\nimport {\n  errorConverter,\n  errorHandler,\n  notFound,\n  finalError,\n} from './errors/error';\n\nconst app = express();\nconst port = config.port;\n\n// connect to mongodb\nrequire('./database/dbConn');\n\n// Remove Express header\nif (config.env !== 'development') {\n  app.disable('x-powered-by');\n}\n\napp.set('etag', false);\napp.set('trust proxy', true);\n\nif (config.env !== 'test') {\n  app.use(\n    morgan('dev', {\n      skip: function (req, res) {\n        return res.statusCode < 400;\n      },\n    })\n  );\n}\n\n// enable cors\nlet whitelist = ['http://localhost:3000'];\nconst origin = (origin, callback) => {\n  // allow requests with no origin\n  if (!origin) return callback(null, true);\n  if (whitelist.indexOf(origin) === -1) {\n    const message =\n      'The CORS policy for this origin does not allow access from a specific origin.';\n\n    return callback(new Error(message), false);\n  }\n  return callback(null, true);\n};\napp.use(cors({ origin, credentials: true, optionsSuccessStatus: 200 }));\n\n// parse json request body\napp.use(express.json());\n\n// parse urlencoded request body\napp.use(express.urlencoded({ extended: false }));\n\n// parse cookies\napp.use(cookieParser());\n\n// sanitize request data\napp.use(ExpressMongoSanitize({ replaceWith: '_' }));\n\n// gzip compression\napp.use(compression());\n\n// Register app routes\nappRoutes(app);\n\napp.use(notFound);\n\n// convert error to ApiError, if needed\napp.use(errorConverter);\n\n// handle error\napp.use(errorHandler);\n\n// error handler middleware\napp.use(finalError);\n\nconst server = app.listen(port, () =>\n  console.log(`Server up on port ${port}!`)\n);\n\nprocess.on('unhandledRejection', (err) => {\n  console.log(`Error: ${err.message}`);\n  server.close(() => process.exit(1));\n});\n"],"mappings":"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"}},"mtime":1689262102000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authRoutes = _interopRequireDefault(require(\"./auth-routes\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = app => {\n  (0, _authRoutes.default)(app);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXV0aFJvdXRlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfZGVmYXVsdCIsImFwcCIsImF1dGhSb3V0ZXMiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0NvbXBsZXRlZC9tZXJuLXN0YWNrLWF1dGgvU2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXV0aFJvdXRlcyBmcm9tICcuL2F1dGgtcm91dGVzJztcblxuZXhwb3J0IGRlZmF1bHQgKGFwcCkgPT4ge1xuICBhdXRoUm91dGVzKGFwcCk7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBdUMsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFBQSxJQUFBRyxRQUFBLEdBRXZCQyxHQUFHLElBQUs7RUFDdEIsSUFBQUMsbUJBQVUsRUFBQ0QsR0FBRyxDQUFDO0FBQ2pCLENBQUM7QUFBQUUsT0FBQSxDQUFBSixPQUFBLEdBQUFDLFFBQUEifQ==","map":{"version":3,"names":["_authRoutes","_interopRequireDefault","require","obj","__esModule","default","_default","app","authRoutes","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/","sources":["index.js"],"sourcesContent":["import authRoutes from './auth-routes';\n\nexport default (app) => {\n  authRoutes(app);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAuC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,IAAAG,QAAA,GAEvBC,GAAG,IAAK;EACtB,IAAAC,mBAAU,EAACD,GAAG,CAAC;AACjB,CAAC;AAAAE,OAAA,CAAAJ,OAAA,GAAAC,QAAA"}},"mtime":1689261410000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/auth-routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authController = _interopRequireDefault(require(\"../controllers/auth-controller\"));\nvar _JoiValidate = _interopRequireDefault(require(\"../middlewares/JoiValidate\"));\nvar _authValidation = _interopRequireDefault(require(\"../validation/auth-validation\"));\nvar _AuthRights = _interopRequireDefault(require(\"../middlewares/AuthRights\"));\nvar _middlewares = require(\"../middlewares\");\nvar _authenticateJWT = _interopRequireDefault(require(\"../middlewares/authenticateJWT\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = app => {\n  app.post('/signup', (0, _JoiValidate.default)(_authValidation.default.register), _authController.default.postRegisterUser);\n  app.post('/login/email', (0, _JoiValidate.default)(_authValidation.default.loginWithEmail), _authController.default.postLoginUserWithEmail);\n  app.post('/login/username', (0, _JoiValidate.default)(_authValidation.default.loginWithUsername), _authController.default.postLoginUserWithUsername);\n  app.post('/login/phone', (0, _JoiValidate.default)(_authValidation.default.loginWithPhone), _authController.default.postLoginUserWithPhone);\n  app.get('/logout', _middlewares.isLoggedIn, _authController.default.postLogoutUser);\n  app.post('/revoke-all-tokens', _middlewares.isLoggedIn, _authController.default.postLogoutUserFromAllScreens);\n  app.get('/refresh', _middlewares.isLoggedIn, _authController.default.getNewTokens);\n  app.get('/me', _authenticateJWT.default, _middlewares.isLoggedIn, (0, _AuthRights.default)(), _authController.default.getUserCredentials);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXV0aENvbnRyb2xsZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9Kb2lWYWxpZGF0ZSIsIl9hdXRoVmFsaWRhdGlvbiIsIl9BdXRoUmlnaHRzIiwiX21pZGRsZXdhcmVzIiwiX2F1dGhlbnRpY2F0ZUpXVCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2RlZmF1bHQiLCJhcHAiLCJwb3N0IiwiSm9pVmFsaWRhdGUiLCJhdXRoVmFsaWRhdGlvbiIsInJlZ2lzdGVyIiwiYXV0aENvbnRyb2xsZXIiLCJwb3N0UmVnaXN0ZXJVc2VyIiwibG9naW5XaXRoRW1haWwiLCJwb3N0TG9naW5Vc2VyV2l0aEVtYWlsIiwibG9naW5XaXRoVXNlcm5hbWUiLCJwb3N0TG9naW5Vc2VyV2l0aFVzZXJuYW1lIiwibG9naW5XaXRoUGhvbmUiLCJwb3N0TG9naW5Vc2VyV2l0aFBob25lIiwiZ2V0IiwiaXNMb2dnZWRJbiIsInBvc3RMb2dvdXRVc2VyIiwicG9zdExvZ291dFVzZXJGcm9tQWxsU2NyZWVucyIsImdldE5ld1Rva2VucyIsImF1dGhlbnRpY2F0ZUpXVCIsIkFjY2Vzc1RvIiwiZ2V0VXNlckNyZWRlbnRpYWxzIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsiYXV0aC1yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF1dGhDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2F1dGgtY29udHJvbGxlcic7XG5pbXBvcnQgSm9pVmFsaWRhdGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvSm9pVmFsaWRhdGUnO1xuaW1wb3J0IGF1dGhWYWxpZGF0aW9uIGZyb20gJy4uL3ZhbGlkYXRpb24vYXV0aC12YWxpZGF0aW9uJztcbmltcG9ydCBBY2Nlc3NUbyBmcm9tICcuLi9taWRkbGV3YXJlcy9BdXRoUmlnaHRzJztcbmltcG9ydCB7IGlzTG9nZ2VkSW4gfSBmcm9tICcuLi9taWRkbGV3YXJlcyc7XG5pbXBvcnQgYXV0aGVudGljYXRlSldUIGZyb20gJy4uL21pZGRsZXdhcmVzL2F1dGhlbnRpY2F0ZUpXVCc7XG5cbmV4cG9ydCBkZWZhdWx0IChhcHApID0+IHtcbiAgYXBwLnBvc3QoXG4gICAgJy9zaWdudXAnLFxuICAgIEpvaVZhbGlkYXRlKGF1dGhWYWxpZGF0aW9uLnJlZ2lzdGVyKSxcbiAgICBhdXRoQ29udHJvbGxlci5wb3N0UmVnaXN0ZXJVc2VyXG4gICk7XG5cbiAgYXBwLnBvc3QoXG4gICAgJy9sb2dpbi9lbWFpbCcsXG4gICAgSm9pVmFsaWRhdGUoYXV0aFZhbGlkYXRpb24ubG9naW5XaXRoRW1haWwpLFxuICAgIGF1dGhDb250cm9sbGVyLnBvc3RMb2dpblVzZXJXaXRoRW1haWxcbiAgKTtcblxuICBhcHAucG9zdChcbiAgICAnL2xvZ2luL3VzZXJuYW1lJyxcbiAgICBKb2lWYWxpZGF0ZShhdXRoVmFsaWRhdGlvbi5sb2dpbldpdGhVc2VybmFtZSksXG4gICAgYXV0aENvbnRyb2xsZXIucG9zdExvZ2luVXNlcldpdGhVc2VybmFtZVxuICApO1xuXG4gIGFwcC5wb3N0KFxuICAgICcvbG9naW4vcGhvbmUnLFxuICAgIEpvaVZhbGlkYXRlKGF1dGhWYWxpZGF0aW9uLmxvZ2luV2l0aFBob25lKSxcbiAgICBhdXRoQ29udHJvbGxlci5wb3N0TG9naW5Vc2VyV2l0aFBob25lXG4gICk7XG5cbiAgYXBwLmdldCgnL2xvZ291dCcsIGlzTG9nZ2VkSW4sIGF1dGhDb250cm9sbGVyLnBvc3RMb2dvdXRVc2VyKTtcbiAgYXBwLnBvc3QoXG4gICAgJy9yZXZva2UtYWxsLXRva2VucycsXG4gICAgaXNMb2dnZWRJbixcbiAgICBhdXRoQ29udHJvbGxlci5wb3N0TG9nb3V0VXNlckZyb21BbGxTY3JlZW5zXG4gICk7XG4gIGFwcC5nZXQoJy9yZWZyZXNoJywgaXNMb2dnZWRJbiwgYXV0aENvbnRyb2xsZXIuZ2V0TmV3VG9rZW5zKTtcblxuICBhcHAuZ2V0KFxuICAgICcvbWUnLFxuICAgIGF1dGhlbnRpY2F0ZUpXVCxcbiAgICBpc0xvZ2dlZEluLFxuICAgIEFjY2Vzc1RvKCksXG4gICAgYXV0aENvbnRyb2xsZXIuZ2V0VXNlckNyZWRlbnRpYWxzXG4gICk7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxlQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxlQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxZQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxnQkFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQTZELFNBQUFELHVCQUFBTyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBQUEsSUFBQUcsUUFBQSxHQUU3Q0MsR0FBRyxJQUFLO0VBQ3RCQSxHQUFHLENBQUNDLElBQUksQ0FDTixTQUFTLEVBQ1QsSUFBQUMsb0JBQVcsRUFBQ0MsdUJBQWMsQ0FBQ0MsUUFBUSxDQUFDLEVBQ3BDQyx1QkFBYyxDQUFDQyxnQkFDakIsQ0FBQztFQUVETixHQUFHLENBQUNDLElBQUksQ0FDTixjQUFjLEVBQ2QsSUFBQUMsb0JBQVcsRUFBQ0MsdUJBQWMsQ0FBQ0ksY0FBYyxDQUFDLEVBQzFDRix1QkFBYyxDQUFDRyxzQkFDakIsQ0FBQztFQUVEUixHQUFHLENBQUNDLElBQUksQ0FDTixpQkFBaUIsRUFDakIsSUFBQUMsb0JBQVcsRUFBQ0MsdUJBQWMsQ0FBQ00saUJBQWlCLENBQUMsRUFDN0NKLHVCQUFjLENBQUNLLHlCQUNqQixDQUFDO0VBRURWLEdBQUcsQ0FBQ0MsSUFBSSxDQUNOLGNBQWMsRUFDZCxJQUFBQyxvQkFBVyxFQUFDQyx1QkFBYyxDQUFDUSxjQUFjLENBQUMsRUFDMUNOLHVCQUFjLENBQUNPLHNCQUNqQixDQUFDO0VBRURaLEdBQUcsQ0FBQ2EsR0FBRyxDQUFDLFNBQVMsRUFBRUMsdUJBQVUsRUFBRVQsdUJBQWMsQ0FBQ1UsY0FBYyxDQUFDO0VBQzdEZixHQUFHLENBQUNDLElBQUksQ0FDTixvQkFBb0IsRUFDcEJhLHVCQUFVLEVBQ1ZULHVCQUFjLENBQUNXLDRCQUNqQixDQUFDO0VBQ0RoQixHQUFHLENBQUNhLEdBQUcsQ0FBQyxVQUFVLEVBQUVDLHVCQUFVLEVBQUVULHVCQUFjLENBQUNZLFlBQVksQ0FBQztFQUU1RGpCLEdBQUcsQ0FBQ2EsR0FBRyxDQUNMLEtBQUssRUFDTEssd0JBQWUsRUFDZkosdUJBQVUsRUFDVixJQUFBSyxtQkFBUSxFQUFDLENBQUMsRUFDVmQsdUJBQWMsQ0FBQ2Usa0JBQ2pCLENBQUM7QUFDSCxDQUFDO0FBQUFDLE9BQUEsQ0FBQXZCLE9BQUEsR0FBQUMsUUFBQSJ9","map":{"version":3,"names":["_authController","_interopRequireDefault","require","_JoiValidate","_authValidation","_AuthRights","_middlewares","_authenticateJWT","obj","__esModule","default","_default","app","post","JoiValidate","authValidation","register","authController","postRegisterUser","loginWithEmail","postLoginUserWithEmail","loginWithUsername","postLoginUserWithUsername","loginWithPhone","postLoginUserWithPhone","get","isLoggedIn","postLogoutUser","postLogoutUserFromAllScreens","getNewTokens","authenticateJWT","AccessTo","getUserCredentials","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/","sources":["auth-routes.js"],"sourcesContent":["import authController from '../controllers/auth-controller';\nimport JoiValidate from '../middlewares/JoiValidate';\nimport authValidation from '../validation/auth-validation';\nimport AccessTo from '../middlewares/AuthRights';\nimport { isLoggedIn } from '../middlewares';\nimport authenticateJWT from '../middlewares/authenticateJWT';\n\nexport default (app) => {\n  app.post(\n    '/signup',\n    JoiValidate(authValidation.register),\n    authController.postRegisterUser\n  );\n\n  app.post(\n    '/login/email',\n    JoiValidate(authValidation.loginWithEmail),\n    authController.postLoginUserWithEmail\n  );\n\n  app.post(\n    '/login/username',\n    JoiValidate(authValidation.loginWithUsername),\n    authController.postLoginUserWithUsername\n  );\n\n  app.post(\n    '/login/phone',\n    JoiValidate(authValidation.loginWithPhone),\n    authController.postLoginUserWithPhone\n  );\n\n  app.get('/logout', isLoggedIn, authController.postLogoutUser);\n  app.post(\n    '/revoke-all-tokens',\n    isLoggedIn,\n    authController.postLogoutUserFromAllScreens\n  );\n  app.get('/refresh', isLoggedIn, authController.getNewTokens);\n\n  app.get(\n    '/me',\n    authenticateJWT,\n    isLoggedIn,\n    AccessTo(),\n    authController.getUserCredentials\n  );\n};\n"],"mappings":";;;;;;AAAA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,eAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,YAAA,GAAAJ,OAAA;AACA,IAAAK,gBAAA,GAAAN,sBAAA,CAAAC,OAAA;AAA6D,SAAAD,uBAAAO,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,IAAAG,QAAA,GAE7CC,GAAG,IAAK;EACtBA,GAAG,CAACC,IAAI,CACN,SAAS,EACT,IAAAC,oBAAW,EAACC,uBAAc,CAACC,QAAQ,CAAC,EACpCC,uBAAc,CAACC,gBACjB,CAAC;EAEDN,GAAG,CAACC,IAAI,CACN,cAAc,EACd,IAAAC,oBAAW,EAACC,uBAAc,CAACI,cAAc,CAAC,EAC1CF,uBAAc,CAACG,sBACjB,CAAC;EAEDR,GAAG,CAACC,IAAI,CACN,iBAAiB,EACjB,IAAAC,oBAAW,EAACC,uBAAc,CAACM,iBAAiB,CAAC,EAC7CJ,uBAAc,CAACK,yBACjB,CAAC;EAEDV,GAAG,CAACC,IAAI,CACN,cAAc,EACd,IAAAC,oBAAW,EAACC,uBAAc,CAACQ,cAAc,CAAC,EAC1CN,uBAAc,CAACO,sBACjB,CAAC;EAEDZ,GAAG,CAACa,GAAG,CAAC,SAAS,EAAEC,uBAAU,EAAET,uBAAc,CAACU,cAAc,CAAC;EAC7Df,GAAG,CAACC,IAAI,CACN,oBAAoB,EACpBa,uBAAU,EACVT,uBAAc,CAACW,4BACjB,CAAC;EACDhB,GAAG,CAACa,GAAG,CAAC,UAAU,EAAEC,uBAAU,EAAET,uBAAc,CAACY,YAAY,CAAC;EAE5DjB,GAAG,CAACa,GAAG,CACL,KAAK,EACLK,wBAAe,EACfJ,uBAAU,EACV,IAAAK,mBAAQ,EAAC,CAAC,EACVd,uBAAc,CAACe,kBACjB,CAAC;AACH,CAAC;AAAAC,OAAA,CAAAvB,OAAA,GAAAC,QAAA"}},"mtime":1690644035000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/controllers/auth-controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _mongoHelpers = require(\"../database/mongoHelpers\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = {\n  postRegisterUser: async (req, res, next) => {\n    try {\n      const {\n        name,\n        email,\n        phone,\n        username,\n        password,\n        confirmPassword,\n        acceptTerms\n      } = req.body;\n      if (await _userModel.default.isEmailTaken(email)) return next(new _ApiErrors.default(400, `Email ${email} already registered`));\n      const user = new _userModel.default();\n\n      // first registered account is an admin\n      const isFirstAccount = (await (0, _mongoHelpers.countDocuments)(_userModel.default)) === 0;\n      user.role = isFirstAccount ? _roles.default.Admin : _roles.default.User;\n      user.name = name;\n      user.email = email;\n      user.username = username;\n      user.phone = phone;\n      user.password = password;\n      user.confirmPassword = confirmPassword;\n      user.acceptTerms = acceptTerms;\n      await user.save();\n      res.status(201).json({\n        message: 'User successfully registered!'\n      });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithEmail: async (req, res, next) => {\n    const {\n      email,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        email: email\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithUsername: async (req, res, next) => {\n    const {\n      username,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        username: username\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithPhone: async (req, res, next) => {\n    const {\n      phone,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        phone: phone\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUser: async (req, res, next) => {\n    // accept token from cookie\n    const {\n      refreshToken\n    } = req.cookies;\n    try {\n      if (!refreshToken) return next(new _ApiErrors.default(400, 'Token is required'));\n      const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n      if (!verifiedRefToken) return next(new _ApiErrors.default(404, 'Token not found'));\n      if (!(0, _mongoHelpers.isValidId)(req.user.id)) return next(new _ApiErrors.default(400, 'User not found'));\n      const user = await _userModel.default.findById(req.user.id);\n      if (!user) return next(new _ApiErrors.default(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(refreshToken) && req.user.role !== _roles.default.Admin) return next(new _ApiErrors.default(401, 'Unauthorized'));\n      const refreshTokenInDb = await _tokenModel.default.findOne({\n        refreshToken,\n        type: _tokenTypes.default.REFRESH,\n        blacklisted: false\n      });\n      if (!refreshTokenInDb) return next(new _ApiErrors.default(404, 'Not found'));\n      await refreshTokenInDb.deleteOne();\n      return res.status(200).clearCookie('refreshToken', {\n        httpOnly: true\n      }).end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUserFromAllScreens: async (req, res, next) => {\n    const token = req.body.token || req.cookies.refreshToken;\n    try {\n      if (!token) return next(new _ApiErrors.default(400, 'Token is required'));\n      if (!(0, _mongoHelpers.isValidId)(req.user.id)) return next(new _ApiErrors.default(400, 'User not found'));\n      const user = await _userModel.default.findById(req.user.id);\n      if (!user) return next(new _ApiErrors.default(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(token) && req.user.role !== _roles.default.Admin) return next(new _ApiErrors.default(401, 'Unauthorized'));\n\n      // return refresh tokens for user\n      const refreshToken = await _tokenModel.default.find({\n        user: req.user.id,\n        type: _tokenTypes.default.REFRESH,\n        blacklisted: false\n      });\n      if (!refreshToken) return next(new _ApiErrors.default(404, 'Not found'));\n      await _tokenModel.default.deleteMany({\n        refreshToken\n      });\n      return res.status(200).clearCookie('refreshToken', {\n        httpOnly: true\n      }).end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getNewTokens: async (req, res, next) => {\n    const {\n      refreshToken\n    } = req.cookies;\n    try {\n      if (!refreshToken) return next(new _ApiErrors.default(401, 'No refresh token provided'));\n      const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n      const user = await _userModel.default.findById(verifiedRefToken.user).exec();\n      if (!user) return next(new _ApiErrors.default(404, 'User not found'));\n      const refTokenInDb = await _tokenModel.default.findOne({\n        user: user.id,\n        token: refreshToken\n      });\n      if (!refTokenInDb) return next(new _ApiErrors.default(401, 'Invalid refresh token'));\n      await verifiedRefToken.deleteOne();\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: false\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ user, tokens });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getUserCredentials: async (req, res, next) => {\n    try {\n      const user = req.user;\n      if (!user) return next(new _ApiErrors.default(404, 'User not found'));\n      const foundUser = await _userModel.default.findById(user.id).select('-password -acceptTerms -createdAt -updatedAt -__v');\n      if (!foundUser) return next(new _ApiErrors.default(404, 'User not found'));\n      res.status(200).send(foundUser);\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  }\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcm9sZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl90b2tlblR5cGVzIiwiX21vbmdvSGVscGVycyIsIl9BcGlFcnJvcnMiLCJfdG9rZW5IZWxwZXIiLCJfdG9rZW5Nb2RlbCIsIl91c2VyTW9kZWwiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9kZWZhdWx0IiwicG9zdFJlZ2lzdGVyVXNlciIsInJlcSIsInJlcyIsIm5leHQiLCJuYW1lIiwiZW1haWwiLCJwaG9uZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJhY2NlcHRUZXJtcyIsImJvZHkiLCJVc2VyIiwiaXNFbWFpbFRha2VuIiwiQXBpRXJyb3IiLCJ1c2VyIiwiaXNGaXJzdEFjY291bnQiLCJjb3VudERvY3VtZW50cyIsInJvbGUiLCJSb2xlIiwiQWRtaW4iLCJzYXZlIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJwb3N0TG9naW5Vc2VyV2l0aEVtYWlsIiwiZmluZE9uZSIsImlzUGFzc3dvcmRNYXRjaCIsInRva2VucyIsImdlbmVyYXRlQXV0aFRva2VucyIsImNvb2tpZSIsInJlZnJlc2giLCJodHRwT25seSIsInNhbWVTaXRlIiwibWF4QWdlIiwicmVmcmVzaEV4cGlyZXMiLCJleHBpcmVzIiwiRGF0ZSIsIm5vdyIsInNlY3VyZSIsImhlYWRlciIsImFjY2VzcyIsInNlbmQiLCJhY2Nlc3NUb2tlbiIsInBvc3RMb2dpblVzZXJXaXRoVXNlcm5hbWUiLCJwb3N0TG9naW5Vc2VyV2l0aFBob25lIiwicG9zdExvZ291dFVzZXIiLCJyZWZyZXNoVG9rZW4iLCJjb29raWVzIiwidmVyaWZpZWRSZWZUb2tlbiIsInZlcmlmeURCVG9rZW4iLCJ0b2tlblR5cGVzIiwiUkVGUkVTSCIsImlzVmFsaWRJZCIsImlkIiwiZmluZEJ5SWQiLCJvd25zVG9rZW4iLCJyZWZyZXNoVG9rZW5JbkRiIiwiVG9rZW4iLCJ0eXBlIiwiYmxhY2tsaXN0ZWQiLCJkZWxldGVPbmUiLCJjbGVhckNvb2tpZSIsImVuZCIsInBvc3RMb2dvdXRVc2VyRnJvbUFsbFNjcmVlbnMiLCJ0b2tlbiIsImZpbmQiLCJkZWxldGVNYW55IiwiZ2V0TmV3VG9rZW5zIiwiZXhlYyIsInJlZlRva2VuSW5EYiIsImdldFVzZXJDcmVkZW50aWFscyIsImZvdW5kVXNlciIsInNlbGVjdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiYXV0aC1jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb2xlIGZyb20gJy4uL2NvbmZpZy9yb2xlcyc7XG5pbXBvcnQgdG9rZW5UeXBlcyBmcm9tICcuLi9jb25maWcvdG9rZW5UeXBlcyc7XG5pbXBvcnQgeyBjb3VudERvY3VtZW50cywgaXNWYWxpZElkIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9uZ29IZWxwZXJzJztcbmltcG9ydCBBcGlFcnJvciBmcm9tICcuLi9lcnJvcnMvQXBpRXJyb3JzJztcbmltcG9ydCB7IGdlbmVyYXRlQXV0aFRva2VucywgdmVyaWZ5REJUb2tlbiB9IGZyb20gJy4uL2hlbHBlcnMvdG9rZW4taGVscGVyJztcbmltcG9ydCBUb2tlbiBmcm9tICcuLi9tb2RlbHMvdG9rZW4tbW9kZWwnO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXItbW9kZWwnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHBvc3RSZWdpc3RlclVzZXI6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwaG9uZSxcbiAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICBjb25maXJtUGFzc3dvcmQsXG4gICAgICAgIGFjY2VwdFRlcm1zLFxuICAgICAgfSA9IHJlcS5ib2R5O1xuXG4gICAgICBpZiAoYXdhaXQgVXNlci5pc0VtYWlsVGFrZW4oZW1haWwpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCBgRW1haWwgJHtlbWFpbH0gYWxyZWFkeSByZWdpc3RlcmVkYCkpO1xuXG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoKTtcblxuICAgICAgLy8gZmlyc3QgcmVnaXN0ZXJlZCBhY2NvdW50IGlzIGFuIGFkbWluXG4gICAgICBjb25zdCBpc0ZpcnN0QWNjb3VudCA9IChhd2FpdCBjb3VudERvY3VtZW50cyhVc2VyKSkgPT09IDA7XG4gICAgICB1c2VyLnJvbGUgPSBpc0ZpcnN0QWNjb3VudCA/IFJvbGUuQWRtaW4gOiBSb2xlLlVzZXI7XG5cbiAgICAgIHVzZXIubmFtZSA9IG5hbWU7XG4gICAgICB1c2VyLmVtYWlsID0gZW1haWw7XG4gICAgICB1c2VyLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgICB1c2VyLnBob25lID0gcGhvbmU7XG4gICAgICB1c2VyLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICB1c2VyLmNvbmZpcm1QYXNzd29yZCA9IGNvbmZpcm1QYXNzd29yZDtcbiAgICAgIHVzZXIuYWNjZXB0VGVybXMgPSBhY2NlcHRUZXJtcztcblxuICAgICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQhJyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dpblVzZXJXaXRoRW1haWw6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlciB8fCAhKGF3YWl0IHVzZXIuaXNQYXNzd29yZE1hdGNoKHBhc3N3b3JkKSkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIGNyZWRlbnRpYWxzJykpO1xuXG4gICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLmNvb2tpZSgncmVmcmVzaFRva2VuJywgdG9rZW5zLnJlZnJlc2gsIHtcbiAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDApLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQoeyBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICAgIC8vIC5qc29uKHsgLyp1c2VyLCovIGFjY2VzczogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dpblVzZXJXaXRoVXNlcm5hbWU6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlciB8fCAhKGF3YWl0IHVzZXIuaXNQYXNzd29yZE1hdGNoKHBhc3N3b3JkKSkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIGNyZWRlbnRpYWxzJykpO1xuXG4gICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLmNvb2tpZSgncmVmcmVzaFRva2VuJywgdG9rZW5zLnJlZnJlc2gsIHtcbiAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDApLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQoeyBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICAgIC8vIC5qc29uKHsgLyp1c2VyLCovIGFjY2VzczogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dpblVzZXJXaXRoUGhvbmU6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgcGhvbmUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgcGhvbmU6IHBob25lLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlciB8fCAhKGF3YWl0IHVzZXIuaXNQYXNzd29yZE1hdGNoKHBhc3N3b3JkKSkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIGNyZWRlbnRpYWxzJykpO1xuXG4gICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLmNvb2tpZSgncmVmcmVzaFRva2VuJywgdG9rZW5zLnJlZnJlc2gsIHtcbiAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDApLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQoeyBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICAgIC8vIC5qc29uKHsgLyp1c2VyLCovIGFjY2VzczogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dvdXRVc2VyOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAvLyBhY2NlcHQgdG9rZW4gZnJvbSBjb29raWVcbiAgICBjb25zdCB7IHJlZnJlc2hUb2tlbiB9ID0gcmVxLmNvb2tpZXM7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghcmVmcmVzaFRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVG9rZW4gaXMgcmVxdWlyZWQnKSk7XG5cbiAgICAgIGNvbnN0IHZlcmlmaWVkUmVmVG9rZW4gPSBhd2FpdCB2ZXJpZnlEQlRva2VuKFxuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIHRva2VuVHlwZXMuUkVGUkVTSFxuICAgICAgKTtcblxuICAgICAgaWYgKCF2ZXJpZmllZFJlZlRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnVG9rZW4gbm90IGZvdW5kJykpO1xuXG4gICAgICBpZiAoIWlzVmFsaWRJZChyZXEudXNlci5pZCkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdVc2VyIG5vdCBmb3VuZCcpKTtcblxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuaWQpO1xuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIC8vIHVzZXJzIGNhbiByZXZva2UgdGhlaXIgb3duIHRva2VucyBhbmQgYWRtaW5zIGNhbiByZXZva2UgYW55IHRva2Vuc1xuICAgICAgaWYgKCFyZXEudXNlci5vd25zVG9rZW4ocmVmcmVzaFRva2VuKSAmJiByZXEudXNlci5yb2xlICE9PSBSb2xlLkFkbWluKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnVW5hdXRob3JpemVkJykpO1xuXG4gICAgICBjb25zdCByZWZyZXNoVG9rZW5JbkRiID0gYXdhaXQgVG9rZW4uZmluZE9uZSh7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5SRUZSRVNILFxuICAgICAgICBibGFja2xpc3RlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVmcmVzaFRva2VuSW5EYikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ05vdCBmb3VuZCcpKTtcblxuICAgICAgYXdhaXQgcmVmcmVzaFRva2VuSW5EYi5kZWxldGVPbmUoKTtcblxuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgLmNsZWFyQ29va2llKCdyZWZyZXNoVG9rZW4nLCB7IGh0dHBPbmx5OiB0cnVlIH0pXG4gICAgICAgIC5lbmQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dvdXRVc2VyRnJvbUFsbFNjcmVlbnM6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmJvZHkudG9rZW4gfHwgcmVxLmNvb2tpZXMucmVmcmVzaFRva2VuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmICghdG9rZW4pIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdUb2tlbiBpcyByZXF1aXJlZCcpKTtcblxuICAgICAgaWYgKCFpc1ZhbGlkSWQocmVxLnVzZXIuaWQpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLmlkKTtcbiAgICAgIGlmICghdXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICAvLyB1c2VycyBjYW4gcmV2b2tlIHRoZWlyIG93biB0b2tlbnMgYW5kIGFkbWlucyBjYW4gcmV2b2tlIGFueSB0b2tlbnNcbiAgICAgIGlmICghcmVxLnVzZXIub3duc1Rva2VuKHRva2VuKSAmJiByZXEudXNlci5yb2xlICE9PSBSb2xlLkFkbWluKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnVW5hdXRob3JpemVkJykpO1xuXG4gICAgICAvLyByZXR1cm4gcmVmcmVzaCB0b2tlbnMgZm9yIHVzZXJcbiAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGF3YWl0IFRva2VuLmZpbmQoe1xuICAgICAgICB1c2VyOiByZXEudXNlci5pZCxcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5SRUZSRVNILFxuICAgICAgICBibGFja2xpc3RlZDogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZWZyZXNoVG9rZW4pIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdOb3QgZm91bmQnKSk7XG4gICAgICBhd2FpdCBUb2tlbi5kZWxldGVNYW55KHsgcmVmcmVzaFRva2VuIH0pO1xuXG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAuY2xlYXJDb29raWUoJ3JlZnJlc2hUb2tlbicsIHsgaHR0cE9ubHk6IHRydWUgfSlcbiAgICAgICAgLmVuZCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgZ2V0TmV3VG9rZW5zOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCB7IHJlZnJlc2hUb2tlbiB9ID0gcmVxLmNvb2tpZXM7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFyZWZyZXNoVG9rZW4pXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdObyByZWZyZXNoIHRva2VuIHByb3ZpZGVkJykpO1xuXG4gICAgICBjb25zdCB2ZXJpZmllZFJlZlRva2VuID0gYXdhaXQgdmVyaWZ5REJUb2tlbihcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICB0b2tlblR5cGVzLlJFRlJFU0hcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHZlcmlmaWVkUmVmVG9rZW4udXNlcikuZXhlYygpO1xuXG4gICAgICBpZiAoIXVzZXIpIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdVc2VyIG5vdCBmb3VuZCcpKTtcblxuICAgICAgY29uc3QgcmVmVG9rZW5JbkRiID0gYXdhaXQgVG9rZW4uZmluZE9uZSh7XG4gICAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICAgIHRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZWZUb2tlbkluRGIpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIHJlZnJlc2ggdG9rZW4nKSk7XG5cbiAgICAgIGF3YWl0IHZlcmlmaWVkUmVmVG9rZW4uZGVsZXRlT25lKCk7XG5cbiAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IGdlbmVyYXRlQXV0aFRva2Vucyh1c2VyKTtcblxuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuY29va2llKCdyZWZyZXNoVG9rZW4nLCB0b2tlbnMucmVmcmVzaCwge1xuICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgICBtYXhBZ2U6IHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDAsIC8vIGFsd2F5cyBjYWxjdWxhdGUgdGltZSBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgdG9rZW5zLnJlZnJlc2hFeHBpcmVzICogMTAwMCksIC8vIGFsd2F5cyBjYWxjdWxhdGUgdGltZSBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICBzZWN1cmU6IGZhbHNlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQoeyBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICAgIC8vIC5qc29uKHsgdXNlciwgdG9rZW5zIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgZ2V0VXNlckNyZWRlbnRpYWxzOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIGNvbnN0IGZvdW5kVXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlci5pZCkuc2VsZWN0KFxuICAgICAgICAnLXBhc3N3b3JkIC1hY2NlcHRUZXJtcyAtY3JlYXRlZEF0IC11cGRhdGVkQXQgLV9fdidcbiAgICAgICk7XG4gICAgICBpZiAoIWZvdW5kVXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChmb3VuZFVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFdBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGFBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFVBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFlBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLFdBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLFVBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUF3QyxTQUFBRCx1QkFBQVEsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLElBQUFHLFFBQUEsR0FFekI7RUFDYkMsZ0JBQWdCLEVBQUUsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUMxQyxJQUFJO01BQ0YsTUFBTTtRQUNKQyxJQUFJO1FBQ0pDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsZUFBZTtRQUNmQztNQUNGLENBQUMsR0FBR1QsR0FBRyxDQUFDVSxJQUFJO01BRVosSUFBSSxNQUFNQyxrQkFBSSxDQUFDQyxZQUFZLENBQUNSLEtBQUssQ0FBQyxFQUNoQyxPQUFPRixJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUcsU0FBUVQsS0FBTSxxQkFBb0IsQ0FBQyxDQUFDO01BRXJFLE1BQU1VLElBQUksR0FBRyxJQUFJSCxrQkFBSSxDQUFDLENBQUM7O01BRXZCO01BQ0EsTUFBTUksY0FBYyxHQUFHLENBQUMsTUFBTSxJQUFBQyw0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","map":{"version":3,"names":["_roles","_interopRequireDefault","require","_tokenTypes","_mongoHelpers","_ApiErrors","_tokenHelper","_tokenModel","_userModel","obj","__esModule","default","_default","postRegisterUser","req","res","next","name","email","phone","username","password","confirmPassword","acceptTerms","body","User","isEmailTaken","ApiError","user","isFirstAccount","countDocuments","role","Role","Admin","save","status","json","message","error","console","log","postLoginUserWithEmail","findOne","isPasswordMatch","tokens","generateAuthTokens","cookie","refresh","httpOnly","sameSite","maxAge","refreshExpires","expires","Date","now","secure","header","access","send","accessToken","postLoginUserWithUsername","postLoginUserWithPhone","postLogoutUser","refreshToken","cookies","verifiedRefToken","verifyDBToken","tokenTypes","REFRESH","isValidId","id","findById","ownsToken","refreshTokenInDb","Token","type","blacklisted","deleteOne","clearCookie","end","postLogoutUserFromAllScreens","token","find","deleteMany","getNewTokens","exec","refTokenInDb","getUserCredentials","foundUser","select","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/controllers/","sources":["auth-controller.js"],"sourcesContent":["import Role from '../config/roles';\nimport tokenTypes from '../config/tokenTypes';\nimport { countDocuments, isValidId } from '../database/mongoHelpers';\nimport ApiError from '../errors/ApiErrors';\nimport { generateAuthTokens, verifyDBToken } from '../helpers/token-helper';\nimport Token from '../models/token-model';\nimport User from '../models/user-model';\n\nexport default {\n  postRegisterUser: async (req, res, next) => {\n    try {\n      const {\n        name,\n        email,\n        phone,\n        username,\n        password,\n        confirmPassword,\n        acceptTerms,\n      } = req.body;\n\n      if (await User.isEmailTaken(email))\n        return next(new ApiError(400, `Email ${email} already registered`));\n\n      const user = new User();\n\n      // first registered account is an admin\n      const isFirstAccount = (await countDocuments(User)) === 0;\n      user.role = isFirstAccount ? Role.Admin : Role.User;\n\n      user.name = name;\n      user.email = email;\n      user.username = username;\n      user.phone = phone;\n      user.password = password;\n      user.confirmPassword = confirmPassword;\n      user.acceptTerms = acceptTerms;\n\n      await user.save();\n\n      res.status(201).json({ message: 'User successfully registered!' });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithEmail: async (req, res, next) => {\n    const { email, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        email: email,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithUsername: async (req, res, next) => {\n    const { username, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        username: username,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithPhone: async (req, res, next) => {\n    const { phone, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        phone: phone,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUser: async (req, res, next) => {\n    // accept token from cookie\n    const { refreshToken } = req.cookies;\n    try {\n      if (!refreshToken) return next(new ApiError(400, 'Token is required'));\n\n      const verifiedRefToken = await verifyDBToken(\n        refreshToken,\n        tokenTypes.REFRESH\n      );\n\n      if (!verifiedRefToken) return next(new ApiError(404, 'Token not found'));\n\n      if (!isValidId(req.user.id))\n        return next(new ApiError(400, 'User not found'));\n\n      const user = await User.findById(req.user.id);\n      if (!user) return next(new ApiError(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(refreshToken) && req.user.role !== Role.Admin)\n        return next(new ApiError(401, 'Unauthorized'));\n\n      const refreshTokenInDb = await Token.findOne({\n        refreshToken,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n      });\n      if (!refreshTokenInDb) return next(new ApiError(404, 'Not found'));\n\n      await refreshTokenInDb.deleteOne();\n\n      return res\n        .status(200)\n        .clearCookie('refreshToken', { httpOnly: true })\n        .end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUserFromAllScreens: async (req, res, next) => {\n    const token = req.body.token || req.cookies.refreshToken;\n\n    try {\n      if (!token) return next(new ApiError(400, 'Token is required'));\n\n      if (!isValidId(req.user.id))\n        return next(new ApiError(400, 'User not found'));\n\n      const user = await User.findById(req.user.id);\n      if (!user) return next(new ApiError(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(token) && req.user.role !== Role.Admin)\n        return next(new ApiError(401, 'Unauthorized'));\n\n      // return refresh tokens for user\n      const refreshToken = await Token.find({\n        user: req.user.id,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n      });\n\n      if (!refreshToken) return next(new ApiError(404, 'Not found'));\n      await Token.deleteMany({ refreshToken });\n\n      return res\n        .status(200)\n        .clearCookie('refreshToken', { httpOnly: true })\n        .end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getNewTokens: async (req, res, next) => {\n    const { refreshToken } = req.cookies;\n\n    try {\n      if (!refreshToken)\n        return next(new ApiError(401, 'No refresh token provided'));\n\n      const verifiedRefToken = await verifyDBToken(\n        refreshToken,\n        tokenTypes.REFRESH\n      );\n\n      const user = await User.findById(verifiedRefToken.user).exec();\n\n      if (!user) return next(new ApiError(404, 'User not found'));\n\n      const refTokenInDb = await Token.findOne({\n        user: user.id,\n        token: refreshToken,\n      });\n\n      if (!refTokenInDb)\n        return next(new ApiError(401, 'Invalid refresh token'));\n\n      await verifiedRefToken.deleteOne();\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: false,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ user, tokens });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getUserCredentials: async (req, res, next) => {\n    try {\n      const user = req.user;\n      if (!user) return next(new ApiError(404, 'User not found'));\n\n      const foundUser = await User.findById(user.id).select(\n        '-password -acceptTerms -createdAt -updatedAt -__v'\n      );\n      if (!foundUser) return next(new ApiError(404, 'User not found'));\n\n      res.status(200).send(foundUser);\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n};\n"],"mappings":"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"}},"mtime":1690965853076},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst Role = {\n  Admin: 'Admin',\n  User: 'User'\n};\nvar _default = Role;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb2xlIiwiQWRtaW4iLCJVc2VyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsicm9sZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUm9sZSA9IHtcbiAgQWRtaW46ICdBZG1pbicsXG4gIFVzZXI6ICdVc2VyJyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJvbGU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLElBQUksR0FBRztFQUNYQyxLQUFLLEVBQUUsT0FBTztFQUNkQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUVhSCxJQUFJO0FBQUFJLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBIn0=","map":{"version":3,"names":["Role","Admin","User","_default","exports","default"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/","sources":["roles.js"],"sourcesContent":["const Role = {\n  Admin: 'Admin',\n  User: 'User',\n};\n\nexport default Role;\n"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAG;EACXC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE;AACR,CAAC;AAAC,IAAAC,QAAA,GAEaH,IAAI;AAAAI,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689247652000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/tokenTypes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  ACCESS: 'access',\n  REFRESH: 'refresh'\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBQ0NFU1MiLCJSRUZSRVNIIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJfZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsidG9rZW5UeXBlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gIEFDQ0VTUzogJ2FjY2VzcycsXG4gIFJFRlJFU0g6ICdyZWZyZXNoJyxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztlQUFlO0VBQ2JBLE1BQU0sRUFBRSxRQUFRO0VBQ2hCQyxPQUFPLEVBQUU7QUFDWCxDQUFDO0FBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUFBQyxRQUFBIn0=","map":{"version":3,"names":["ACCESS","REFRESH","exports","default","_default"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/","sources":["tokenTypes.js"],"sourcesContent":["export default {\n  ACCESS: 'access',\n  REFRESH: 'refresh',\n};\n"],"mappings":";;;;;;eAAe;EACbA,MAAM,EAAE,QAAQ;EAChBC,OAAO,EAAE;AACX,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAC,QAAA"}},"mtime":1689343210000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/database/mongoHelpers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidId = exports.countDocumentsWithKey = exports.countDocuments = void 0;\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nconst isValidId = id => {\n  return _mongoose.Types.ObjectId.isValid(id);\n};\n\n// if (!isValidId(id)) throw 'User not found';\nexports.isValidId = isValidId;\nconst countDocuments = async modelName => {\n  return await modelName.countDocuments({});\n};\n\n// await countDocuments(User)\nexports.countDocuments = countDocuments;\nconst countDocumentsWithKey = async (modelName, value) => {\n  return await modelName.countDocuments(value);\n};\n\n// const count = await countDocumentsWithKey(User, { role: Role.Admin });\nexports.countDocumentsWithKey = countDocumentsWithKey;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJub2RlSW50ZXJvcCIsIldlYWtNYXAiLCJjYWNoZUJhYmVsSW50ZXJvcCIsImNhY2hlTm9kZUludGVyb3AiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiaXNWYWxpZElkIiwiaWQiLCJUeXBlcyIsIk9iamVjdElkIiwiaXNWYWxpZCIsImV4cG9ydHMiLCJjb3VudERvY3VtZW50cyIsIm1vZGVsTmFtZSIsImNvdW50RG9jdW1lbnRzV2l0aEtleSIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0NvbXBsZXRlZC9tZXJuLXN0YWNrLWF1dGgvU2VydmVyL3NyYy9kYXRhYmFzZS8iLCJzb3VyY2VzIjpbIm1vbmdvSGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgVHlwZXMgfSBmcm9tICdtb25nb29zZSc7XG5cbmV4cG9ydCBjb25zdCBpc1ZhbGlkSWQgPSAoaWQpID0+IHtcbiAgcmV0dXJuIFR5cGVzLk9iamVjdElkLmlzVmFsaWQoaWQpO1xufTtcblxuLy8gaWYgKCFpc1ZhbGlkSWQoaWQpKSB0aHJvdyAnVXNlciBub3QgZm91bmQnO1xuXG5leHBvcnQgY29uc3QgY291bnREb2N1bWVudHMgPSBhc3luYyAobW9kZWxOYW1lKSA9PiB7XG4gIHJldHVybiBhd2FpdCBtb2RlbE5hbWUuY291bnREb2N1bWVudHMoe30pO1xufTtcblxuLy8gYXdhaXQgY291bnREb2N1bWVudHMoVXNlcilcblxuZXhwb3J0IGNvbnN0IGNvdW50RG9jdW1lbnRzV2l0aEtleSA9IGFzeW5jIChtb2RlbE5hbWUsIHZhbHVlKSA9PiB7XG4gIHJldHVybiBhd2FpdCBtb2RlbE5hbWUuY291bnREb2N1bWVudHModmFsdWUpO1xufTtcblxuLy8gY29uc3QgY291bnQgPSBhd2FpdCBjb3VudERvY3VtZW50c1dpdGhLZXkoVXNlciwgeyByb2xlOiBSb2xlLkFkbWluIH0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFBZ0MsU0FBQUMseUJBQUFDLFdBQUEsZUFBQUMsT0FBQSxrQ0FBQUMsaUJBQUEsT0FBQUQsT0FBQSxRQUFBRSxnQkFBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLENBQUFDLFdBQUEsV0FBQUEsV0FBQSxHQUFBRyxnQkFBQSxHQUFBRCxpQkFBQSxLQUFBRixXQUFBO0FBQUEsU0FBQUgsd0JBQUFPLEdBQUEsRUFBQUosV0FBQSxTQUFBQSxXQUFBLElBQUFJLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLFdBQUFELEdBQUEsUUFBQUEsR0FBQSxvQkFBQUEsR0FBQSx3QkFBQUEsR0FBQSw0QkFBQUUsT0FBQSxFQUFBRixHQUFBLFVBQUFHLEtBQUEsR0FBQVIsd0JBQUEsQ0FBQUMsV0FBQSxPQUFBTyxLQUFBLElBQUFBLEtBQUEsQ0FBQUMsR0FBQSxDQUFBSixHQUFBLFlBQUFHLEtBQUEsQ0FBQUUsR0FBQSxDQUFBTCxHQUFBLFNBQUFNLE1BQUEsV0FBQUMscUJBQUEsR0FBQUMsTUFBQSxDQUFBQyxjQUFBLElBQUFELE1BQUEsQ0FBQUUsd0JBQUEsV0FBQUMsR0FBQSxJQUFBWCxHQUFBLFFBQUFXLEdBQUEsa0JBQUFILE1BQUEsQ0FBQUksU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWQsR0FBQSxFQUFBVyxHQUFBLFNBQUFJLElBQUEsR0FBQVIscUJBQUEsR0FBQUMsTUFBQSxDQUFBRSx3QkFBQSxDQUFBVixHQUFBLEVBQUFXLEdBQUEsY0FBQUksSUFBQSxLQUFBQSxJQUFBLENBQUFWLEdBQUEsSUFBQVUsSUFBQSxDQUFBQyxHQUFBLEtBQUFSLE1BQUEsQ0FBQUMsY0FBQSxDQUFBSCxNQUFBLEVBQUFLLEdBQUEsRUFBQUksSUFBQSxZQUFBVCxNQUFBLENBQUFLLEdBQUEsSUFBQVgsR0FBQSxDQUFBVyxHQUFBLFNBQUFMLE1BQUEsQ0FBQUosT0FBQSxHQUFBRixHQUFBLE1BQUFHLEtBQUEsSUFBQUEsS0FBQSxDQUFBYSxHQUFBLENBQUFoQixHQUFBLEVBQUFNLE1BQUEsWUFBQUEsTUFBQTtBQUd6QixNQUFNVyxTQUFTLEdBQUlDLEVBQUUsSUFBSztFQUMvQixPQUFPQyxlQUFLLENBQUNDLFFBQVEsQ0FBQ0MsT0FBTyxDQUFDSCxFQUFFLENBQUM7QUFDbkMsQ0FBQzs7QUFFRDtBQUFBSSxPQUFBLENBQUFMLFNBQUEsR0FBQUEsU0FBQTtBQUVPLE1BQU1NLGNBQWMsR0FBRyxNQUFPQyxTQUFTLElBQUs7RUFDakQsT0FBTyxNQUFNQSxTQUFTLENBQUNELGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzQyxDQUFDOztBQUVEO0FBQUFELE9BQUEsQ0FBQUMsY0FBQSxHQUFBQSxjQUFBO0FBRU8sTUFBTUUscUJBQXFCLEdBQUcsTUFBQUEsQ0FBT0QsU0FBUyxFQUFFRSxLQUFLLEtBQUs7RUFDL0QsT0FBTyxNQUFNRixTQUFTLENBQUNELGNBQWMsQ0FBQ0csS0FBSyxDQUFDO0FBQzlDLENBQUM7O0FBRUQ7QUFBQUosT0FBQSxDQUFBRyxxQkFBQSxHQUFBQSxxQkFBQSJ9","map":{"version":3,"names":["_mongoose","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","isValidId","id","Types","ObjectId","isValid","exports","countDocuments","modelName","countDocumentsWithKey","value"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/database/","sources":["mongoHelpers.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport { Types } from 'mongoose';\n\nexport const isValidId = (id) => {\n  return Types.ObjectId.isValid(id);\n};\n\n// if (!isValidId(id)) throw 'User not found';\n\nexport const countDocuments = async (modelName) => {\n  return await modelName.countDocuments({});\n};\n\n// await countDocuments(User)\n\nexport const countDocumentsWithKey = async (modelName, value) => {\n  return await modelName.countDocuments(value);\n};\n\n// const count = await countDocumentsWithKey(User, { role: Role.Admin });\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,uBAAA,CAAAC,OAAA;AAAgC,SAAAC,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAH,wBAAAO,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAGzB,MAAMW,SAAS,GAAIC,EAAE,IAAK;EAC/B,OAAOC,eAAK,CAACC,QAAQ,CAACC,OAAO,CAACH,EAAE,CAAC;AACnC,CAAC;;AAED;AAAAI,OAAA,CAAAL,SAAA,GAAAA,SAAA;AAEO,MAAMM,cAAc,GAAG,MAAOC,SAAS,IAAK;EACjD,OAAO,MAAMA,SAAS,CAACD,cAAc,CAAC,CAAC,CAAC,CAAC;AAC3C,CAAC;;AAED;AAAAD,OAAA,CAAAC,cAAA,GAAAA,cAAA;AAEO,MAAME,qBAAqB,GAAG,MAAAA,CAAOD,SAAS,EAAEE,KAAK,KAAK;EAC/D,OAAO,MAAMF,SAAS,CAACD,cAAc,CAACG,KAAK,CAAC;AAC9C,CAAC;;AAED;AAAAJ,OAAA,CAAAG,qBAAA,GAAAA,qBAAA"}},"mtime":1689349300000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/errors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/errors/ApiErrors.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nclass ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\nvar _default = ApiError;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcGlFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsImlzT3BlcmF0aW9uYWwiLCJzdGFjayIsImNhcHR1cmVTdGFja1RyYWNlIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvZXJyb3JzLyIsInNvdXJjZXMiOlsiQXBpRXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzdGF0dXNDb2RlLCBtZXNzYWdlLCBpc09wZXJhdGlvbmFsID0gdHJ1ZSwgc3RhY2sgPSAnJykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgdGhpcy5pc09wZXJhdGlvbmFsID0gaXNPcGVyYXRpb25hbDtcbiAgICBpZiAoc3RhY2spIHtcbiAgICAgIHRoaXMuc3RhY2sgPSBzdGFjaztcbiAgICB9IGVsc2Uge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaUVycm9yO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxRQUFRLFNBQVNDLEtBQUssQ0FBQztFQUMzQkMsV0FBV0EsQ0FBQ0MsVUFBVSxFQUFFQyxPQUFPLEVBQUVDLGFBQWEsR0FBRyxJQUFJLEVBQUVDLEtBQUssR0FBRyxFQUFFLEVBQUU7SUFDakUsS0FBSyxDQUFDRixPQUFPLENBQUM7SUFDZCxJQUFJLENBQUNELFVBQVUsR0FBR0EsVUFBVTtJQUM1QixJQUFJLENBQUNFLGFBQWEsR0FBR0EsYUFBYTtJQUNsQyxJQUFJQyxLQUFLLEVBQUU7TUFDVCxJQUFJLENBQUNBLEtBQUssR0FBR0EsS0FBSztJQUNwQixDQUFDLE1BQU07TUFDTEwsS0FBSyxDQUFDTSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDTCxXQUFXLENBQUM7SUFDakQ7RUFDRjtBQUNGO0FBQUMsSUFBQU0sUUFBQSxHQUVjUixRQUFRO0FBQUFTLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBIn0=","map":{"version":3,"names":["ApiError","Error","constructor","statusCode","message","isOperational","stack","captureStackTrace","_default","exports","default"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/errors/","sources":["ApiErrors.js"],"sourcesContent":["class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport default ApiError;\n"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,SAASC,KAAK,CAAC;EAC3BC,WAAWA,CAACC,UAAU,EAAEC,OAAO,EAAEC,aAAa,GAAG,IAAI,EAAEC,KAAK,GAAG,EAAE,EAAE;IACjE,KAAK,CAACF,OAAO,CAAC;IACd,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,aAAa,GAAGA,aAAa;IAClC,IAAIC,KAAK,EAAE;MACT,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,MAAM;MACLL,KAAK,CAACM,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACL,WAAW,CAAC;IACjD;EACF;AACF;AAAC,IAAAM,QAAA,GAEcR,QAAQ;AAAAS,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689326817000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/helpers/token-helper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyDBToken = exports.verifyAccessToken = exports.tokenfromheader = exports.saveToken = exports.randomTokenString = exports.parseTokenAndGetUserId = exports.generateToken = exports.generateAuthTokens = void 0;\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _util = require(\"util\");\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _Cryptor = require(\"../utils/Cryptor\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst accessSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst refreshSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst generateToken = async (userId, expires, type, secret) => {\n  const payload = {\n    sub: userId,\n    exp: Math.floor(Date.now() / 1000) + expires,\n    iat: Date.now().valueOf() / 1000,\n    type\n  };\n  const doEncrypt = _jsonwebtoken.default.sign(payload, secret);\n  const token = await (0, _Cryptor.Encrypt)(doEncrypt);\n  return token;\n};\nexports.generateToken = generateToken;\nconst saveToken = async (token, userId, expires, type, blacklisted) => {\n  const tokenDoc = await _tokenModel.default.create({\n    token,\n    user: userId,\n    expires,\n    type,\n    blacklisted\n  });\n  return tokenDoc;\n};\nexports.saveToken = saveToken;\nconst validateToken = async (token, secret) => {\n  const payload = await (0, _util.promisify)(_jsonwebtoken.default.verify)(token, secret);\n  return payload;\n};\nconst parseTokenAndGetUserId = async token => {\n  const decrypted = await (0, _Cryptor.Decrypt)(token);\n  const decoded = await validateToken(decrypted, accessSecret);\n  return decoded.sub || '';\n};\nexports.parseTokenAndGetUserId = parseTokenAndGetUserId;\nconst tokenfromheader = async req => {\n  const authHeader = req.headers['authorization'];\n  const bearerToken = authHeader.split(' ');\n  const token = bearerToken[1];\n  if (!token) return next(new _ApiErrors.default(401, 'Access Denied'));\n  const tokenfromheader = await (0, _Cryptor.Decrypt)(token);\n  return tokenfromheader;\n};\nexports.tokenfromheader = tokenfromheader;\nconst verifyAccessToken = async token => {\n  // const decrypted = await Decrypt(token);\n  const payload = await validateToken(token, accessSecret);\n  if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n  return payload;\n};\nexports.verifyAccessToken = verifyAccessToken;\nconst verifyDBToken = async (token, type) => {\n  try {\n    const decrypted = await (0, _Cryptor.Decrypt)(token);\n    const payload = await validateToken(decrypted, refreshSecret);\n    if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n    const tokenDoc = await _tokenModel.default.findOne({\n      token,\n      type,\n      user: payload.sub,\n      blacklisted: false\n    });\n    if (!tokenDoc) throw new Error('Refresh token not found in store');\n    return tokenDoc;\n  } catch (error) {\n    console.error('Token is not valid', error.message);\n    return null;\n  }\n};\n\n// exp: Math.floor(Date.now() / 1000) + (60 * 60),\nexports.verifyDBToken = verifyDBToken;\nconst generateAuthTokens = async user => {\n  // const accessTokenExpires = 30 * 60 // 30 minutes\n  const accessTokenExpires = 1 * 30; // 30 sec\n\n  const accessToken = await generateToken(user.id, accessTokenExpires, _tokenTypes.default.ACCESS, accessSecret);\n  const refreshTokenExpires = 365 * 24 * 60 * 60; // 1 yr\n\n  const refreshToken = await generateToken(user.id, refreshTokenExpires, _tokenTypes.default.REFRESH, refreshSecret);\n  await _tokenModel.default.create({\n    token: refreshToken,\n    user: user.id,\n    expires: new Date(Date.now() + refreshTokenExpires),\n    type: _tokenTypes.default.REFRESH,\n    blacklisted: false\n  });\n  return {\n    access: accessToken,\n    accessExpires: accessTokenExpires,\n    refresh: refreshToken,\n    refreshExpires: refreshTokenExpires\n  };\n};\nexports.generateAuthTokens = generateAuthTokens;\nconst randomTokenString = async str => {\n  return _crypto.default.randomBytes(str).toString('hex');\n};\nexports.randomTokenString = randomTokenString;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3J5cHRvIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfanNvbndlYnRva2VuIiwiX3V0aWwiLCJfdG9rZW5Nb2RlbCIsIl90b2tlblR5cGVzIiwiX0NyeXB0b3IiLCJfQXBpRXJyb3JzIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJhY2Nlc3NTZWNyZXQiLCJyZWZyZXNoU2VjcmV0IiwiZ2VuZXJhdGVUb2tlbiIsInVzZXJJZCIsImV4cGlyZXMiLCJ0eXBlIiwic2VjcmV0IiwicGF5bG9hZCIsInN1YiIsImV4cCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJpYXQiLCJ2YWx1ZU9mIiwiZG9FbmNyeXB0Iiwiand0Iiwic2lnbiIsInRva2VuIiwiRW5jcnlwdCIsImV4cG9ydHMiLCJzYXZlVG9rZW4iLCJibGFja2xpc3RlZCIsInRva2VuRG9jIiwiVG9rZW4iLCJjcmVhdGUiLCJ1c2VyIiwidmFsaWRhdGVUb2tlbiIsInByb21pc2lmeSIsInZlcmlmeSIsInBhcnNlVG9rZW5BbmRHZXRVc2VySWQiLCJkZWNyeXB0ZWQiLCJEZWNyeXB0IiwiZGVjb2RlZCIsInRva2VuZnJvbWhlYWRlciIsInJlcSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYmVhcmVyVG9rZW4iLCJzcGxpdCIsIm5leHQiLCJBcGlFcnJvciIsInZlcmlmeUFjY2Vzc1Rva2VuIiwiRXJyb3IiLCJ2ZXJpZnlEQlRva2VuIiwiZmluZE9uZSIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJnZW5lcmF0ZUF1dGhUb2tlbnMiLCJhY2Nlc3NUb2tlbkV4cGlyZXMiLCJhY2Nlc3NUb2tlbiIsImlkIiwidG9rZW5UeXBlcyIsIkFDQ0VTUyIsInJlZnJlc2hUb2tlbkV4cGlyZXMiLCJyZWZyZXNoVG9rZW4iLCJSRUZSRVNIIiwiYWNjZXNzIiwiYWNjZXNzRXhwaXJlcyIsInJlZnJlc2giLCJyZWZyZXNoRXhwaXJlcyIsInJhbmRvbVRva2VuU3RyaW5nIiwic3RyIiwiY3J5cHRvIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvaGVscGVycy8iLCJzb3VyY2VzIjpbInRva2VuLWhlbHBlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcbmltcG9ydCBUb2tlbiBmcm9tICcuLi9tb2RlbHMvdG9rZW4tbW9kZWwnO1xuaW1wb3J0IHRva2VuVHlwZXMgZnJvbSAnLi4vY29uZmlnL3Rva2VuVHlwZXMnO1xuaW1wb3J0IHsgRW5jcnlwdCwgRGVjcnlwdCB9IGZyb20gJy4uL3V0aWxzL0NyeXB0b3InO1xuaW1wb3J0IEFwaUVycm9yIGZyb20gJy4uL2Vycm9ycy9BcGlFcnJvcnMnO1xuXG5jb25zdCBhY2Nlc3NTZWNyZXQgPVxuICAneUp6ZFdJaU9pSTJORE5pWkdFMlltVXlNakUxTlRFME5EZGxNVGcyT1RjaUxDSnBZWFFpT2pFMk9ERTJOVEl5T0Rrc0ltVjRjQ0k2TVRZJztcbmNvbnN0IHJlZnJlc2hTZWNyZXQgPVxuICAneUp6ZFdJaU9pSTJORE5pWkdFMlltVXlNakUxTlRFME5EZGxNVGcyT1RjaUxDSnBZWFFpT2pFMk9ERTJOVEl5T0Rrc0ltVjRjQ0k2TVRZJztcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlVG9rZW4gPSBhc3luYyAodXNlcklkLCBleHBpcmVzLCB0eXBlLCBzZWNyZXQpID0+IHtcbiAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICBzdWI6IHVzZXJJZCxcbiAgICBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgZXhwaXJlcyxcbiAgICBpYXQ6IERhdGUubm93KCkudmFsdWVPZigpIC8gMTAwMCxcbiAgICB0eXBlLFxuICB9O1xuXG4gIGNvbnN0IGRvRW5jcnlwdCA9IGp3dC5zaWduKHBheWxvYWQsIHNlY3JldCk7XG5cbiAgY29uc3QgdG9rZW4gPSBhd2FpdCBFbmNyeXB0KGRvRW5jcnlwdCk7XG5cbiAgcmV0dXJuIHRva2VuO1xufTtcblxuZXhwb3J0IGNvbnN0IHNhdmVUb2tlbiA9IGFzeW5jICh0b2tlbiwgdXNlcklkLCBleHBpcmVzLCB0eXBlLCBibGFja2xpc3RlZCkgPT4ge1xuICBjb25zdCB0b2tlbkRvYyA9IGF3YWl0IFRva2VuLmNyZWF0ZSh7XG4gICAgdG9rZW4sXG4gICAgdXNlcjogdXNlcklkLFxuICAgIGV4cGlyZXMsXG4gICAgdHlwZSxcbiAgICBibGFja2xpc3RlZCxcbiAgfSk7XG4gIHJldHVybiB0b2tlbkRvYztcbn07XG5cbmNvbnN0IHZhbGlkYXRlVG9rZW4gPSBhc3luYyAodG9rZW4sIHNlY3JldCkgPT4ge1xuICBjb25zdCBwYXlsb2FkID0gYXdhaXQgcHJvbWlzaWZ5KGp3dC52ZXJpZnkpKHRva2VuLCBzZWNyZXQpO1xuICByZXR1cm4gcGF5bG9hZDtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZVRva2VuQW5kR2V0VXNlcklkID0gYXN5bmMgKHRva2VuKSA9PiB7XG4gIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IERlY3J5cHQodG9rZW4pO1xuICBjb25zdCBkZWNvZGVkID0gYXdhaXQgdmFsaWRhdGVUb2tlbihkZWNyeXB0ZWQsIGFjY2Vzc1NlY3JldCk7XG4gIHJldHVybiBkZWNvZGVkLnN1YiB8fCAnJztcbn07XG5cbmV4cG9ydCBjb25zdCB0b2tlbmZyb21oZWFkZXIgPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xuXG4gIGNvbnN0IGJlYXJlclRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpO1xuXG4gIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW5bMV07XG5cbiAgaWYgKCF0b2tlbikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMSwgJ0FjY2VzcyBEZW5pZWQnKSk7XG5cbiAgY29uc3QgdG9rZW5mcm9taGVhZGVyID0gYXdhaXQgRGVjcnlwdCh0b2tlbik7XG5cbiAgcmV0dXJuIHRva2VuZnJvbWhlYWRlcjtcbn07XG5cbmV4cG9ydCBjb25zdCB2ZXJpZnlBY2Nlc3NUb2tlbiA9IGFzeW5jICh0b2tlbikgPT4ge1xuICAvLyBjb25zdCBkZWNyeXB0ZWQgPSBhd2FpdCBEZWNyeXB0KHRva2VuKTtcbiAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZhbGlkYXRlVG9rZW4odG9rZW4sIGFjY2Vzc1NlY3JldCk7XG5cbiAgaWYgKHR5cGVvZiBwYXlsb2FkLnN1YiAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcig0MDAsICdiYWQgdXNlcicpO1xuXG4gIHJldHVybiBwYXlsb2FkO1xufTtcblxuZXhwb3J0IGNvbnN0IHZlcmlmeURCVG9rZW4gPSBhc3luYyAodG9rZW4sIHR5cGUpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNyeXB0ZWQgPSBhd2FpdCBEZWNyeXB0KHRva2VuKTtcbiAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgdmFsaWRhdGVUb2tlbihkZWNyeXB0ZWQsIHJlZnJlc2hTZWNyZXQpO1xuXG4gICAgaWYgKHR5cGVvZiBwYXlsb2FkLnN1YiAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcig0MDAsICdiYWQgdXNlcicpO1xuXG4gICAgY29uc3QgdG9rZW5Eb2MgPSBhd2FpdCBUb2tlbi5maW5kT25lKHtcbiAgICAgIHRva2VuLFxuICAgICAgdHlwZSxcbiAgICAgIHVzZXI6IHBheWxvYWQuc3ViLFxuICAgICAgYmxhY2tsaXN0ZWQ6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgaWYgKCF0b2tlbkRvYykgdGhyb3cgbmV3IEVycm9yKCdSZWZyZXNoIHRva2VuIG5vdCBmb3VuZCBpbiBzdG9yZScpO1xuXG4gICAgcmV0dXJuIHRva2VuRG9jO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIGlzIG5vdCB2YWxpZCcsIGVycm9yLm1lc3NhZ2UpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG4vLyBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgKDYwICogNjApLFxuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVBdXRoVG9rZW5zID0gYXN5bmMgKHVzZXIpID0+IHtcbiAgLy8gY29uc3QgYWNjZXNzVG9rZW5FeHBpcmVzID0gMzAgKiA2MCAvLyAzMCBtaW51dGVzXG4gIGNvbnN0IGFjY2Vzc1Rva2VuRXhwaXJlcyA9IDEgKiAzMDsgLy8gMzAgc2VjXG5cbiAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCBnZW5lcmF0ZVRva2VuKFxuICAgIHVzZXIuaWQsXG4gICAgYWNjZXNzVG9rZW5FeHBpcmVzLFxuICAgIHRva2VuVHlwZXMuQUNDRVNTLFxuICAgIGFjY2Vzc1NlY3JldFxuICApO1xuXG4gIGNvbnN0IHJlZnJlc2hUb2tlbkV4cGlyZXMgPSAzNjUgKiAyNCAqIDYwICogNjA7IC8vIDEgeXJcblxuICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCBnZW5lcmF0ZVRva2VuKFxuICAgIHVzZXIuaWQsXG4gICAgcmVmcmVzaFRva2VuRXhwaXJlcyxcbiAgICB0b2tlblR5cGVzLlJFRlJFU0gsXG4gICAgcmVmcmVzaFNlY3JldFxuICApO1xuXG4gIGF3YWl0IFRva2VuLmNyZWF0ZSh7XG4gICAgdG9rZW46IHJlZnJlc2hUb2tlbixcbiAgICB1c2VyOiB1c2VyLmlkLFxuICAgIGV4cGlyZXM6IG5ldyBEYXRlKERhdGUubm93KCkgKyByZWZyZXNoVG9rZW5FeHBpcmVzKSxcbiAgICB0eXBlOiB0b2tlblR5cGVzLlJFRlJFU0gsXG4gICAgYmxhY2tsaXN0ZWQ6IGZhbHNlLFxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGFjY2VzczogYWNjZXNzVG9rZW4sXG4gICAgYWNjZXNzRXhwaXJlczogYWNjZXNzVG9rZW5FeHBpcmVzLFxuXG4gICAgcmVmcmVzaDogcmVmcmVzaFRva2VuLFxuICAgIHJlZnJlc2hFeHBpcmVzOiByZWZyZXNoVG9rZW5FeHBpcmVzLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IHJhbmRvbVRva2VuU3RyaW5nID0gYXN5bmMgKHN0cikgPT4ge1xuICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKHN0cikudG9TdHJpbmcoJ2hleCcpO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsS0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsV0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksV0FBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssUUFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sVUFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQTJDLFNBQUFELHVCQUFBUSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRTNDLE1BQU1HLFlBQVksR0FDaEIsZ0ZBQWdGO0FBQ2xGLE1BQU1DLGFBQWEsR0FDakIsZ0ZBQWdGO0FBRTNFLE1BQU1DLGFBQWEsR0FBRyxNQUFBQSxDQUFPQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxNQUFNLEtBQUs7RUFDcEUsTUFBTUMsT0FBTyxHQUFHO0lBQ2RDLEdBQUcsRUFBRUwsTUFBTTtJQUNYTSxHQUFHLEVBQUVDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUdULE9BQU87SUFDNUNVLEdBQUcsRUFBRUYsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDRSxPQUFPLENBQUMsQ0FBQyxHQUFHLElBQUk7SUFDaENWO0VB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","map":{"version":3,"names":["_crypto","_interopRequireDefault","require","_jsonwebtoken","_util","_tokenModel","_tokenTypes","_Cryptor","_ApiErrors","obj","__esModule","default","accessSecret","refreshSecret","generateToken","userId","expires","type","secret","payload","sub","exp","Math","floor","Date","now","iat","valueOf","doEncrypt","jwt","sign","token","Encrypt","exports","saveToken","blacklisted","tokenDoc","Token","create","user","validateToken","promisify","verify","parseTokenAndGetUserId","decrypted","Decrypt","decoded","tokenfromheader","req","authHeader","headers","bearerToken","split","next","ApiError","verifyAccessToken","Error","verifyDBToken","findOne","error","console","message","generateAuthTokens","accessTokenExpires","accessToken","id","tokenTypes","ACCESS","refreshTokenExpires","refreshToken","REFRESH","access","accessExpires","refresh","refreshExpires","randomTokenString","str","crypto","randomBytes","toString"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/helpers/","sources":["token-helper.js"],"sourcesContent":["import crypto from 'crypto';\nimport jwt from 'jsonwebtoken';\nimport { promisify } from 'util';\nimport Token from '../models/token-model';\nimport tokenTypes from '../config/tokenTypes';\nimport { Encrypt, Decrypt } from '../utils/Cryptor';\nimport ApiError from '../errors/ApiErrors';\n\nconst accessSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst refreshSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\n\nexport const generateToken = async (userId, expires, type, secret) => {\n  const payload = {\n    sub: userId,\n    exp: Math.floor(Date.now() / 1000) + expires,\n    iat: Date.now().valueOf() / 1000,\n    type,\n  };\n\n  const doEncrypt = jwt.sign(payload, secret);\n\n  const token = await Encrypt(doEncrypt);\n\n  return token;\n};\n\nexport const saveToken = async (token, userId, expires, type, blacklisted) => {\n  const tokenDoc = await Token.create({\n    token,\n    user: userId,\n    expires,\n    type,\n    blacklisted,\n  });\n  return tokenDoc;\n};\n\nconst validateToken = async (token, secret) => {\n  const payload = await promisify(jwt.verify)(token, secret);\n  return payload;\n};\n\nexport const parseTokenAndGetUserId = async (token) => {\n  const decrypted = await Decrypt(token);\n  const decoded = await validateToken(decrypted, accessSecret);\n  return decoded.sub || '';\n};\n\nexport const tokenfromheader = async (req) => {\n  const authHeader = req.headers['authorization'];\n\n  const bearerToken = authHeader.split(' ');\n\n  const token = bearerToken[1];\n\n  if (!token) return next(new ApiError(401, 'Access Denied'));\n\n  const tokenfromheader = await Decrypt(token);\n\n  return tokenfromheader;\n};\n\nexport const verifyAccessToken = async (token) => {\n  // const decrypted = await Decrypt(token);\n  const payload = await validateToken(token, accessSecret);\n\n  if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n\n  return payload;\n};\n\nexport const verifyDBToken = async (token, type) => {\n  try {\n    const decrypted = await Decrypt(token);\n    const payload = await validateToken(decrypted, refreshSecret);\n\n    if (typeof payload.sub !== 'string') throw new Error(400, 'bad user');\n\n    const tokenDoc = await Token.findOne({\n      token,\n      type,\n      user: payload.sub,\n      blacklisted: false,\n    });\n\n    if (!tokenDoc) throw new Error('Refresh token not found in store');\n\n    return tokenDoc;\n  } catch (error) {\n    console.error('Token is not valid', error.message);\n    return null;\n  }\n};\n\n// exp: Math.floor(Date.now() / 1000) + (60 * 60),\n\nexport const generateAuthTokens = async (user) => {\n  // const accessTokenExpires = 30 * 60 // 30 minutes\n  const accessTokenExpires = 1 * 30; // 30 sec\n\n  const accessToken = await generateToken(\n    user.id,\n    accessTokenExpires,\n    tokenTypes.ACCESS,\n    accessSecret\n  );\n\n  const refreshTokenExpires = 365 * 24 * 60 * 60; // 1 yr\n\n  const refreshToken = await generateToken(\n    user.id,\n    refreshTokenExpires,\n    tokenTypes.REFRESH,\n    refreshSecret\n  );\n\n  await Token.create({\n    token: refreshToken,\n    user: user.id,\n    expires: new Date(Date.now() + refreshTokenExpires),\n    type: tokenTypes.REFRESH,\n    blacklisted: false,\n  });\n\n  return {\n    access: accessToken,\n    accessExpires: accessTokenExpires,\n\n    refresh: refreshToken,\n    refreshExpires: refreshTokenExpires,\n  };\n};\n\nexport const randomTokenString = async (str) => {\n  return crypto.randomBytes(str).toString('hex');\n};\n"],"mappings":"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"}},"mtime":1690966927631},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/models/user-model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _validator = _interopRequireDefault(require(\"validator\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: [true, 'User name required'],\n    trim: true\n  },\n  email: {\n    type: String,\n    required: [true, 'User email required'],\n    unique: true,\n    trim: true,\n    lowercase: true,\n    validate(value) {\n      if (!_validator.default.isEmail(value)) {\n        throw new Error('Invalid email');\n      }\n    }\n  },\n  username: {\n    type: String,\n    required: [true, 'User username required'],\n    unique: true,\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)) {\n        throw new Error('Username must contain at least one letter and one number');\n      }\n    }\n  },\n  phone: {\n    type: String,\n    unique: true,\n    trim: true,\n    maxlength: 10,\n    validate(value) {\n      if (!value.match(/[6-9]{1}[0-9]{9}/)) {\n        throw new Error('Not a valid phone number');\n      }\n    },\n    required: [true, 'User phone number required']\n  },\n  password: {\n    type: String,\n    required: [true, 'User password required'],\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/)) {\n        throw new Error('Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character');\n      }\n    }\n  },\n  role: {\n    type: String,\n    enum: Object.keys(_roles.default),\n    default: _roles.default.User,\n    required: [true, 'Please specify user role']\n  },\n  acceptTerms: {\n    type: Boolean,\n    default: false,\n    required: [true, 'Please accept terms']\n  }\n});\nuserSchema.set('timestamps', true);\nuserSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  }\n});\nuserSchema.static('isEmailTaken', async function (email, excludeUserId) {\n  const user = await this.findOne({\n    email,\n    _id: {\n      $ne: excludeUserId\n    }\n  });\n  return !!user;\n});\nuserSchema.method('isPasswordMatch', async function (password) {\n  const user = this;\n  return _bcrypt.default.compare(password, user.password);\n});\nuserSchema.pre('save', async function (next) {\n  const user = this;\n  if (user.isModified('password')) {\n    user.password = await _bcrypt.default.hash(user.password, 8);\n  }\n  next();\n});\nconst User = _mongoose.default.model('User', userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl92YWxpZGF0b3IiLCJfYmNyeXB0IiwiX3JvbGVzIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidHJpbSIsImVtYWlsIiwidW5pcXVlIiwibG93ZXJjYXNlIiwidmFsaWRhdGUiLCJ2YWx1ZSIsInZhbGlkYXRvciIsImlzRW1haWwiLCJFcnJvciIsInVzZXJuYW1lIiwibWlubGVuZ3RoIiwibWF0Y2giLCJwaG9uZSIsIm1heGxlbmd0aCIsInBhc3N3b3JkIiwicm9sZSIsImVudW0iLCJPYmplY3QiLCJrZXlzIiwiUm9sZXMiLCJVc2VyIiwiYWNjZXB0VGVybXMiLCJCb29sZWFuIiwic2V0IiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwiaWQiLCJfaWQiLCJ0b0hleFN0cmluZyIsIl9fdiIsInN0YXRpYyIsImV4Y2x1ZGVVc2VySWQiLCJ1c2VyIiwiZmluZE9uZSIsIiRuZSIsIm1ldGhvZCIsImJjcnlwdCIsImNvbXBhcmUiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsImhhc2giLCJtb2RlbCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlci1tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHZhbGlkYXRvciBmcm9tICd2YWxpZGF0b3InO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuaW1wb3J0IFJvbGVzIGZyb20gJy4uL2NvbmZpZy9yb2xlcyc7XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdVc2VyIG5hbWUgcmVxdWlyZWQnXSxcbiAgICB0cmltOiB0cnVlLFxuICB9LFxuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdVc2VyIGVtYWlsIHJlcXVpcmVkJ10sXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIHRyaW06IHRydWUsXG4gICAgbG93ZXJjYXNlOiB0cnVlLFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBpZiAoIXZhbGlkYXRvci5pc0VtYWlsKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW1haWwnKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuICB1c2VybmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdVc2VyIHVzZXJuYW1lIHJlcXVpcmVkJ10sXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIHRyaW06IHRydWUsXG4gICAgbWlubGVuZ3RoOiA4LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBpZiAoIXZhbHVlLm1hdGNoKC9eKD89LipbMC05XSkoPz0uKlthLXpBLVpdKShbYS16QS1aMC05XSspJC8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnVXNlcm5hbWUgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBsZXR0ZXIgYW5kIG9uZSBudW1iZXInXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgcGhvbmU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIHRyaW06IHRydWUsXG4gICAgbWF4bGVuZ3RoOiAxMCxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgaWYgKCF2YWx1ZS5tYXRjaCgvWzYtOV17MX1bMC05XXs5fS8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgdmFsaWQgcGhvbmUgbnVtYmVyJyk7XG4gICAgICB9XG4gICAgfSxcbiAgICByZXF1aXJlZDogW3RydWUsICdVc2VyIHBob25lIG51bWJlciByZXF1aXJlZCddLFxuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdVc2VyIHBhc3N3b3JkIHJlcXVpcmVkJ10sXG4gICAgdHJpbTogdHJ1ZSxcbiAgICBtaW5sZW5ndGg6IDgsXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXZhbHVlLm1hdGNoKFxuICAgICAgICAgIC9eKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qXFxkKSg/PS4qWyMkQCElJio/XSlbQS1aYS16XFxkIyRAISUmKj9dezgsMzB9JC9cbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnQXRsZWFzdCAxIGxldHRlciwgMSBudW1iZXIsIDEgc3BlY2lhbCBjaGFyYWN0ZXIgYW5kIFNIT1VMRCBOT1Qgc3RhcnQgd2l0aCBhIHNwZWNpYWwgY2hhcmFjdGVyJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIHJvbGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogT2JqZWN0LmtleXMoUm9sZXMpLFxuICAgIGRlZmF1bHQ6IFJvbGVzLlVzZXIsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIHNwZWNpZnkgdXNlciByb2xlJ10sXG4gIH0sXG4gIGFjY2VwdFRlcm1zOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgYWNjZXB0IHRlcm1zJ10sXG4gIH0sXG59KTtcblxudXNlclNjaGVtYS5zZXQoJ3RpbWVzdGFtcHMnLCB0cnVlKTtcblxudXNlclNjaGVtYS5zZXQoJ3RvSlNPTicsIHtcbiAgdHJhbnNmb3JtOiBmdW5jdGlvbiAoZG9jLCByZXQpIHtcbiAgICByZXQuaWQgPSByZXQuX2lkLnRvSGV4U3RyaW5nKCk7XG4gICAgZGVsZXRlIHJldC5faWQ7XG4gICAgZGVsZXRlIHJldC5fX3Y7XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbn0pO1xuXG51c2VyU2NoZW1hLnN0YXRpYygnaXNFbWFpbFRha2VuJywgYXN5bmMgZnVuY3Rpb24gKGVtYWlsLCBleGNsdWRlVXNlcklkKSB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyBlbWFpbCwgX2lkOiB7ICRuZTogZXhjbHVkZVVzZXJJZCB9IH0pO1xuICByZXR1cm4gISF1c2VyO1xufSk7XG5cbnVzZXJTY2hlbWEubWV0aG9kKCdpc1Bhc3N3b3JkTWF0Y2gnLCBhc3luYyBmdW5jdGlvbiAocGFzc3dvcmQpIHtcbiAgY29uc3QgdXNlciA9IHRoaXM7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XG59KTtcblxudXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbiAobmV4dCkge1xuICBjb25zdCB1c2VyID0gdGhpcztcbiAgaWYgKHVzZXIuaXNNb2RpZmllZCgncGFzc3dvcmQnKSkge1xuICAgIHVzZXIucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh1c2VyLnBhc3N3b3JkLCA4KTtcbiAgfVxuICBuZXh0KCk7XG59KTtcblxuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgdXNlclNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLE1B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","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_validator","_bcrypt","_roles","obj","__esModule","default","userSchema","mongoose","Schema","name","type","String","required","trim","email","unique","lowercase","validate","value","validator","isEmail","Error","username","minlength","match","phone","maxlength","password","role","enum","Object","keys","Roles","User","acceptTerms","Boolean","set","transform","doc","ret","id","_id","toHexString","__v","static","excludeUserId","user","findOne","$ne","method","bcrypt","compare","pre","next","isModified","hash","model","_default","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/models/","sources":["user-model.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport validator from 'validator';\nimport bcrypt from 'bcrypt';\nimport Roles from '../config/roles';\n\nconst userSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: [true, 'User name required'],\n    trim: true,\n  },\n  email: {\n    type: String,\n    required: [true, 'User email required'],\n    unique: true,\n    trim: true,\n    lowercase: true,\n    validate(value) {\n      if (!validator.isEmail(value)) {\n        throw new Error('Invalid email');\n      }\n    },\n  },\n  username: {\n    type: String,\n    required: [true, 'User username required'],\n    unique: true,\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (!value.match(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)) {\n        throw new Error(\n          'Username must contain at least one letter and one number'\n        );\n      }\n    },\n  },\n  phone: {\n    type: String,\n    unique: true,\n    trim: true,\n    maxlength: 10,\n    validate(value) {\n      if (!value.match(/[6-9]{1}[0-9]{9}/)) {\n        throw new Error('Not a valid phone number');\n      }\n    },\n    required: [true, 'User phone number required'],\n  },\n  password: {\n    type: String,\n    required: [true, 'User password required'],\n    trim: true,\n    minlength: 8,\n    validate(value) {\n      if (\n        !value.match(\n          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/\n        )\n      ) {\n        throw new Error(\n          'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character'\n        );\n      }\n    },\n  },\n  role: {\n    type: String,\n    enum: Object.keys(Roles),\n    default: Roles.User,\n    required: [true, 'Please specify user role'],\n  },\n  acceptTerms: {\n    type: Boolean,\n    default: false,\n    required: [true, 'Please accept terms'],\n  },\n});\n\nuserSchema.set('timestamps', true);\n\nuserSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  },\n});\n\nuserSchema.static('isEmailTaken', async function (email, excludeUserId) {\n  const user = await this.findOne({ email, _id: { $ne: excludeUserId } });\n  return !!user;\n});\n\nuserSchema.method('isPasswordMatch', async function (password) {\n  const user = this;\n  return bcrypt.compare(password, user.password);\n});\n\nuserSchema.pre('save', async function (next) {\n  const user = this;\n  if (user.isModified('password')) {\n    user.password = await bcrypt.hash(user.password, 8);\n  }\n  next();\n});\n\nconst User = mongoose.model('User', userSchema);\n\nexport default User;\n"],"mappings":"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"}},"mtime":1689338818000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/models/token-model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst tokenSchema = new _mongoose.default.Schema({\n  token: {\n    type: String,\n    required: true,\n    index: true\n  },\n  user: {\n    type: String,\n    ref: 'User',\n    required: true\n  },\n  blacklisted: {\n    type: Boolean,\n    default: false\n  }\n});\ntokenSchema.set('timestamps', false);\ntokenSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  }\n});\nconst Token = _mongoose.default.model('Token', tokenSchema);\nvar _default = Token;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidG9rZW5TY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsInRva2VuIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiaW5kZXgiLCJ1c2VyIiwicmVmIiwiYmxhY2tsaXN0ZWQiLCJCb29sZWFuIiwic2V0IiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwiaWQiLCJfaWQiLCJ0b0hleFN0cmluZyIsIl9fdiIsIlRva2VuIiwibW9kZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInRva2VuLW1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IHRva2VuU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHRva2VuOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIGluZGV4OiB0cnVlLFxuICB9LFxuICB1c2VyOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlZjogJ1VzZXInLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBibGFja2xpc3RlZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gIH0sXG59KTtcblxudG9rZW5TY2hlbWEuc2V0KCd0aW1lc3RhbXBzJywgZmFsc2UpO1xuXG50b2tlblNjaGVtYS5zZXQoJ3RvSlNPTicsIHtcbiAgdHJhbnNmb3JtOiBmdW5jdGlvbiAoZG9jLCByZXQpIHtcbiAgICByZXQuaWQgPSByZXQuX2lkLnRvSGV4U3RyaW5nKCk7XG4gICAgZGVsZXRlIHJldC5faWQ7XG4gICAgZGVsZXRlIHJldC5fX3Y7XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbn0pO1xuXG5jb25zdCBUb2tlbiA9IG1vbmdvb3NlLm1vZGVsKCdUb2tlbicsIHRva2VuU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgVG9rZW47XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUFnQyxTQUFBRCx1QkFBQUUsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVoQyxNQUFNRyxXQUFXLEdBQUcsSUFBSUMsaUJBQVEsQ0FBQ0MsTUFBTSxDQUFDO0VBQ3RDQyxLQUFLLEVBQUU7SUFDTEMsSUFBSSxFQUFFQyxNQUFNO0lBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2RDLEtBQUssRUFBRTtFQUNULENBQUM7RUFDREMsSUFBSSxFQUFFO0lBQ0pKLElBQUksRUFBRUMsTUFBTTtJQUNaSSxHQUFHLEVBQUUsTUFBTTtJQUNYSCxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RJLFdBQVcsRUFBRTtJQUNYTixJQUFJLEVBQUVPLE9BQU87SUFDYlosT0FBTyxFQUFFO0VBQ1g7QUFDRixDQUFDLENBQUM7QUFFRkMsV0FBVyxDQUFDWSxHQUFHLENBQUMsWUFBWSxFQUFFLEtBQUssQ0FBQztBQUVwQ1osV0FBVyxDQUFDWSxHQUFHLENBQUMsUUFBUSxFQUFFO0VBQ3hCQyxTQUFTLEVBQUUsU0FBQUEsQ0FBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDN0JBLEdBQUcsQ0FBQ0MsRUFBRSxHQUFHRCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0MsV0FBVyxDQUFDLENBQUM7SUFDOUIsT0FBT0gsR0FBRyxDQUFDRSxHQUFHO0lBQ2QsT0FBT0YsR0FBRyxDQUFDSSxHQUFHO0lBQ2QsT0FBT0osR0FBRztFQUNaO0FBQ0YsQ0FBQyxDQUFDO0FBRUYsTUFBTUssS0FBSyxHQUFHbkIsaUJBQVEsQ0FBQ29CLEtBQUssQ0FBQyxPQUFPLEVBQUVyQixXQUFXLENBQUM7QUFBQyxJQUFBc0IsUUFBQSxHQUVwQ0YsS0FBSztBQUFBRyxPQUFBLENBQUF4QixPQUFBLEdBQUF1QixRQUFBIn0=","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","obj","__esModule","default","tokenSchema","mongoose","Schema","token","type","String","required","index","user","ref","blacklisted","Boolean","set","transform","doc","ret","id","_id","toHexString","__v","Token","model","_default","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/models/","sources":["token-model.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst tokenSchema = new mongoose.Schema({\n  token: {\n    type: String,\n    required: true,\n    index: true,\n  },\n  user: {\n    type: String,\n    ref: 'User',\n    required: true,\n  },\n  blacklisted: {\n    type: Boolean,\n    default: false,\n  },\n});\n\ntokenSchema.set('timestamps', false);\n\ntokenSchema.set('toJSON', {\n  transform: function (doc, ret) {\n    ret.id = ret._id.toHexString();\n    delete ret._id;\n    delete ret.__v;\n    return ret;\n  },\n});\n\nconst Token = mongoose.model('Token', tokenSchema);\n\nexport default Token;\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAgC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhC,MAAMG,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACtCC,KAAK,EAAE;IACLC,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdC,KAAK,EAAE;EACT,CAAC;EACDC,IAAI,EAAE;IACJJ,IAAI,EAAEC,MAAM;IACZI,GAAG,EAAE,MAAM;IACXH,QAAQ,EAAE;EACZ,CAAC;EACDI,WAAW,EAAE;IACXN,IAAI,EAAEO,OAAO;IACbZ,OAAO,EAAE;EACX;AACF,CAAC,CAAC;AAEFC,WAAW,CAACY,GAAG,CAAC,YAAY,EAAE,KAAK,CAAC;AAEpCZ,WAAW,CAACY,GAAG,CAAC,QAAQ,EAAE;EACxBC,SAAS,EAAE,SAAAA,CAAUC,GAAG,EAAEC,GAAG,EAAE;IAC7BA,GAAG,CAACC,EAAE,GAAGD,GAAG,CAACE,GAAG,CAACC,WAAW,CAAC,CAAC;IAC9B,OAAOH,GAAG,CAACE,GAAG;IACd,OAAOF,GAAG,CAACI,GAAG;IACd,OAAOJ,GAAG;EACZ;AACF,CAAC,CAAC;AAEF,MAAMK,KAAK,GAAGnB,iBAAQ,CAACoB,KAAK,CAAC,OAAO,EAAErB,WAAW,CAAC;AAAC,IAAAsB,QAAA,GAEpCF,KAAK;AAAAG,OAAA,CAAAxB,OAAA,GAAAuB,QAAA"}},"mtime":1689498391000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/Cryptor.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Decrypt = Decrypt;\nexports.Encrypt = Encrypt;\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst secret = 'appSecretKey';\nconst rounds = 9921;\nconst keySize = 32;\nconst algorithm = 'aes-256-cbc';\nconst salt = _crypto.default.createHash('sha1').update(secret).digest('hex');\nasync function Encrypt(data) {\n  try {\n    let iv = _crypto.default.randomBytes(16);\n    let key = _crypto.default.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let cipher = _crypto.default.createCipheriv(algorithm, Buffer.from(key), iv);\n    let encryptedData = Buffer.concat([cipher.update(JSON.stringify(data)), cipher.final()]);\n    return iv.toString('base64') + ':' + encryptedData.toString('base64');\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\nasync function Decrypt(encData) {\n  try {\n    let textParts = encData.split(':');\n    let iv = Buffer.from(textParts.shift(), 'base64');\n    let encryptedData = Buffer.from(textParts.join(':'), 'base64');\n    let key = _crypto.default.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let decipher = _crypto.default.createDecipheriv(algorithm, Buffer.from(key), iv);\n    let decryptedData = decipher.update(encryptedData);\n    decryptedData = Buffer.concat([decryptedData, decipher.final()]);\n    return JSON.parse(decryptedData.toString());\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3J5cHRvIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInNlY3JldCIsInJvdW5kcyIsImtleVNpemUiLCJhbGdvcml0aG0iLCJzYWx0IiwiY3J5cHRvIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsIkVuY3J5cHQiLCJkYXRhIiwiaXYiLCJyYW5kb21CeXRlcyIsImtleSIsInBia2RmMlN5bmMiLCJjaXBoZXIiLCJjcmVhdGVDaXBoZXJpdiIsIkJ1ZmZlciIsImZyb20iLCJlbmNyeXB0ZWREYXRhIiwiY29uY2F0IiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbmFsIiwidG9TdHJpbmciLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJEZWNyeXB0IiwiZW5jRGF0YSIsInRleHRQYXJ0cyIsInNwbGl0Iiwic2hpZnQiLCJqb2luIiwiZGVjaXBoZXIiLCJjcmVhdGVEZWNpcGhlcml2IiwiZGVjcnlwdGVkRGF0YSIsInBhcnNlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0NvbXBsZXRlZC9tZXJuLXN0YWNrLWF1dGgvU2VydmVyL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbIkNyeXB0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuXG5jb25zdCBzZWNyZXQgPSAnYXBwU2VjcmV0S2V5JztcbmNvbnN0IHJvdW5kcyA9IDk5MjE7XG5jb25zdCBrZXlTaXplID0gMzI7XG5jb25zdCBhbGdvcml0aG0gPSAnYWVzLTI1Ni1jYmMnO1xuY29uc3Qgc2FsdCA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGExJykudXBkYXRlKHNlY3JldCkuZGlnZXN0KCdoZXgnKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEVuY3J5cHQoZGF0YSkge1xuICB0cnkge1xuICAgIGxldCBpdiA9IGNyeXB0by5yYW5kb21CeXRlcygxNik7XG4gICAgbGV0IGtleSA9IGNyeXB0by5wYmtkZjJTeW5jKHNlY3JldCwgc2FsdCwgcm91bmRzLCBrZXlTaXplLCAnc2hhNTEyJyk7XG4gICAgbGV0IGNpcGhlciA9IGNyeXB0by5jcmVhdGVDaXBoZXJpdihhbGdvcml0aG0sIEJ1ZmZlci5mcm9tKGtleSksIGl2KTtcbiAgICBsZXQgZW5jcnlwdGVkRGF0YSA9IEJ1ZmZlci5jb25jYXQoW1xuICAgICAgY2lwaGVyLnVwZGF0ZShKU09OLnN0cmluZ2lmeShkYXRhKSksXG4gICAgICBjaXBoZXIuZmluYWwoKSxcbiAgICBdKTtcbiAgICByZXR1cm4gaXYudG9TdHJpbmcoJ2Jhc2U2NCcpICsgJzonICsgZW5jcnlwdGVkRGF0YS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERlY3J5cHQoZW5jRGF0YSkge1xuICB0cnkge1xuICAgIGxldCB0ZXh0UGFydHMgPSBlbmNEYXRhLnNwbGl0KCc6Jyk7XG4gICAgbGV0IGl2ID0gQnVmZmVyLmZyb20odGV4dFBhcnRzLnNoaWZ0KCksICdiYXNlNjQnKTtcbiAgICBsZXQgZW5jcnlwdGVkRGF0YSA9IEJ1ZmZlci5mcm9tKHRleHRQYXJ0cy5qb2luKCc6JyksICdiYXNlNjQnKTtcbiAgICBsZXQga2V5ID0gY3J5cHRvLnBia2RmMlN5bmMoc2VjcmV0LCBzYWx0LCByb3VuZHMsIGtleVNpemUsICdzaGE1MTInKTtcbiAgICBsZXQgZGVjaXBoZXIgPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXJpdihhbGdvcml0aG0sIEJ1ZmZlci5mcm9tKGtleSksIGl2KTtcbiAgICBsZXQgZGVjcnlwdGVkRGF0YSA9IGRlY2lwaGVyLnVwZGF0ZShlbmNyeXB0ZWREYXRhKTtcbiAgICBkZWNyeXB0ZWREYXRhID0gQnVmZmVyLmNvbmNhdChbZGVjcnlwdGVkRGF0YSwgZGVjaXBoZXIuZmluYWwoKV0pO1xuICAgIHJldHVybiBKU09OLnBhcnNlKGRlY3J5cHRlZERhdGEudG9TdHJpbmcoKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUE0QixTQUFBRCx1QkFBQUUsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUU1QixNQUFNRyxNQUFNLEdBQUcsY0FBYztBQUM3QixNQUFNQyxNQUFNLEdBQUcsSUFBSTtBQUNuQixNQUFNQyxPQUFPLEdBQUcsRUFBRTtBQUNsQixNQUFNQyxTQUFTLEdBQUcsYUFBYTtBQUMvQixNQUFNQyxJQUFJLEdBQUdDLGVBQU0sQ0FBQ0MsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDQyxNQUFNLENBQUNQLE1BQU0sQ0FBQyxDQUFDUSxNQUFNLENBQUMsS0FBSyxDQUFDO0FBRTVELGVBQWVDLE9BQU9BLENBQUNDLElBQUksRUFBRTtFQUNsQyxJQUFJO0lBQ0YsSUFBSUMsRUFBRSxHQUFHTixlQUFNLENBQUNPLFdBQVcsQ0FBQyxFQUFFLENBQUM7SUFDL0IsSUFBSUMsR0FBRyxHQUFHUixlQUFNLENBQUNTLFVBQVUsQ0FBQ2QsTUFBTSxFQUFFSSxJQUFJLEVBQUVILE1BQU0sRUFBRUMsT0FBTyxFQUFFLFFBQVEsQ0FBQztJQUNwRSxJQUFJYSxNQUFNLEdBQUdWLGVBQU0sQ0FBQ1csY0FBYyxDQUFDYixTQUFTLEVBQUVjLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDTCxHQUFHLENBQUMsRUFBRUYsRUFBRSxDQUFDO0lBQ25FLElBQUlRLGFBQWEsR0FBR0YsTUFBTSxDQUFDRyxNQUFNLENBQUMsQ0FDaENMLE1BQU0sQ0FBQ1IsTUFBTSxDQUFDYyxJQUFJLENBQUNDLFNBQVMsQ0FBQ1osSUFBSSxDQUFDLENBQUMsRUFDbkNLLE1BQU0sQ0FBQ1EsS0FBSyxDQUFDLENBQUMsQ0FDZixDQUFDO0lBQ0YsT0FBT1osRUFBRSxDQUFDYSxRQUFRLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxHQUFHTCxhQUFhLENBQUNLLFFBQVEsQ0FBQyxRQUFRLENBQUM7RUFDdkUsQ0FBQyxDQUFDLE9BQU9DLEdBQUcsRUFBRTtJQUNaQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0YsR0FBRyxDQUFDO0lBQ2xCLE9BQU8sS0FBSztFQUNkO0FBQ0Y7QUFFTyxlQUFlRyxPQUFPQSxDQUFDQyxPQUFPLEVBQUU7RUFDckMsSUFBSTtJQUNGLElBQUlDLFNBQVMsR0FBR0QsT0FBTyxDQUFDRSxLQUFLLENBQUMsR0FBRyxDQUFDO0lBQ2xDLElBQUlwQixFQUFFLEdBQUdNLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDWSxTQUFTLENBQUNFLEtBQUssQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDO0lBQ2pELElBQUliLGFBQWEsR0FBR0YsTUFBTSxDQUFDQyxJQUFJLENBQUNZLFNBQVMsQ0FBQ0csSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsQ0FBQztJQUM5RCxJQUFJcEIsR0FBRyxHQUFHUixlQUFNLENBQUNTLFVBQVUsQ0FBQ2QsTUFBTSxFQUFFSSxJQUFJLEVBQUVILE1BQU0sRUFBRUMsT0FBTyxFQUFFLFFBQVEsQ0FBQztJQUNwRSxJQUFJZ0MsUUFBUSxHQUFHN0IsZUFBTSxDQUFDOEIsZ0JBQWdCLENBQUNoQyxTQUFTLEVBQUVjLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDTCxHQUFHLENBQUMsRUFBRUYsRUFBRSxDQUFDO0lBQ3ZFLElBQUl5QixhQUFhLEdBQUdGLFFBQVEsQ0FBQzNCLE1BQU0sQ0FBQ1ksYUFBYSxDQUFDO0lBQ2xEaUIsYUFBYSxHQUFHbkIsTUFBTSxDQUFDRyxNQUFNLENBQUMsQ0FBQ2dCLGFBQWEsRUFBRUYsUUFBUSxDQUFDWCxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEUsT0FBT0YsSUFBSSxDQUFDZ0IsS0FBSyxDQUFDRCxhQUFhLENBQUNaLFFBQVEsQ0FBQyxDQUFDLENBQUM7RUFDN0MsQ0FBQyxDQUFDLE9BQU9DLEdBQUcsRUFBRTtJQUNaQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0YsR0FBRyxDQUFDO0lBQ2xCLE9BQU8sS0FBSztFQUNkO0FBQ0YifQ==","map":{"version":3,"names":["_crypto","_interopRequireDefault","require","obj","__esModule","default","secret","rounds","keySize","algorithm","salt","crypto","createHash","update","digest","Encrypt","data","iv","randomBytes","key","pbkdf2Sync","cipher","createCipheriv","Buffer","from","encryptedData","concat","JSON","stringify","final","toString","err","console","error","Decrypt","encData","textParts","split","shift","join","decipher","createDecipheriv","decryptedData","parse"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/","sources":["Cryptor.js"],"sourcesContent":["import crypto from 'crypto';\n\nconst secret = 'appSecretKey';\nconst rounds = 9921;\nconst keySize = 32;\nconst algorithm = 'aes-256-cbc';\nconst salt = crypto.createHash('sha1').update(secret).digest('hex');\n\nexport async function Encrypt(data) {\n  try {\n    let iv = crypto.randomBytes(16);\n    let key = crypto.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let cipher = crypto.createCipheriv(algorithm, Buffer.from(key), iv);\n    let encryptedData = Buffer.concat([\n      cipher.update(JSON.stringify(data)),\n      cipher.final(),\n    ]);\n    return iv.toString('base64') + ':' + encryptedData.toString('base64');\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n\nexport async function Decrypt(encData) {\n  try {\n    let textParts = encData.split(':');\n    let iv = Buffer.from(textParts.shift(), 'base64');\n    let encryptedData = Buffer.from(textParts.join(':'), 'base64');\n    let key = crypto.pbkdf2Sync(secret, salt, rounds, keySize, 'sha512');\n    let decipher = crypto.createDecipheriv(algorithm, Buffer.from(key), iv);\n    let decryptedData = decipher.update(encryptedData);\n    decryptedData = Buffer.concat([decryptedData, decipher.final()]);\n    return JSON.parse(decryptedData.toString());\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE5B,MAAMG,MAAM,GAAG,cAAc;AAC7B,MAAMC,MAAM,GAAG,IAAI;AACnB,MAAMC,OAAO,GAAG,EAAE;AAClB,MAAMC,SAAS,GAAG,aAAa;AAC/B,MAAMC,IAAI,GAAGC,eAAM,CAACC,UAAU,CAAC,MAAM,CAAC,CAACC,MAAM,CAACP,MAAM,CAAC,CAACQ,MAAM,CAAC,KAAK,CAAC;AAE5D,eAAeC,OAAOA,CAACC,IAAI,EAAE;EAClC,IAAI;IACF,IAAIC,EAAE,GAAGN,eAAM,CAACO,WAAW,CAAC,EAAE,CAAC;IAC/B,IAAIC,GAAG,GAAGR,eAAM,CAACS,UAAU,CAACd,MAAM,EAAEI,IAAI,EAAEH,MAAM,EAAEC,OAAO,EAAE,QAAQ,CAAC;IACpE,IAAIa,MAAM,GAAGV,eAAM,CAACW,cAAc,CAACb,SAAS,EAAEc,MAAM,CAACC,IAAI,CAACL,GAAG,CAAC,EAAEF,EAAE,CAAC;IACnE,IAAIQ,aAAa,GAAGF,MAAM,CAACG,MAAM,CAAC,CAChCL,MAAM,CAACR,MAAM,CAACc,IAAI,CAACC,SAAS,CAACZ,IAAI,CAAC,CAAC,EACnCK,MAAM,CAACQ,KAAK,CAAC,CAAC,CACf,CAAC;IACF,OAAOZ,EAAE,CAACa,QAAQ,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAGL,aAAa,CAACK,QAAQ,CAAC,QAAQ,CAAC;EACvE,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClB,OAAO,KAAK;EACd;AACF;AAEO,eAAeG,OAAOA,CAACC,OAAO,EAAE;EACrC,IAAI;IACF,IAAIC,SAAS,GAAGD,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC;IAClC,IAAIpB,EAAE,GAAGM,MAAM,CAACC,IAAI,CAACY,SAAS,CAACE,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC;IACjD,IAAIb,aAAa,GAAGF,MAAM,CAACC,IAAI,CAACY,SAAS,CAACG,IAAI,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC;IAC9D,IAAIpB,GAAG,GAAGR,eAAM,CAACS,UAAU,CAACd,MAAM,EAAEI,IAAI,EAAEH,MAAM,EAAEC,OAAO,EAAE,QAAQ,CAAC;IACpE,IAAIgC,QAAQ,GAAG7B,eAAM,CAAC8B,gBAAgB,CAAChC,SAAS,EAAEc,MAAM,CAACC,IAAI,CAACL,GAAG,CAAC,EAAEF,EAAE,CAAC;IACvE,IAAIyB,aAAa,GAAGF,QAAQ,CAAC3B,MAAM,CAACY,aAAa,CAAC;IAClDiB,aAAa,GAAGnB,MAAM,CAACG,MAAM,CAAC,CAACgB,aAAa,EAAEF,QAAQ,CAACX,KAAK,CAAC,CAAC,CAAC,CAAC;IAChE,OAAOF,IAAI,CAACgB,KAAK,CAACD,aAAa,CAACZ,QAAQ,CAAC,CAAC,CAAC;EAC7C,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClB,OAAO,KAAK;EACd;AACF"}},"mtime":1682522558000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/JoiValidate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst JoiValiate = schema => (req, res, next) => {\n  const validSchema = (0, _utils.pick)(schema, ['params', 'query', 'body']);\n  const object = (0, _utils.pick)(req, Object.keys(validSchema));\n  const {\n    value,\n    error\n  } = _joi.default.compile(validSchema).prefs({\n    errors: {\n      label: 'key'\n    },\n    abortEarly: false,\n    allowUnknown: true,\n    stripUnknown: true\n  }).validate(object);\n  if (error) {\n    const errorMessage = error.details.map(details => details.message.replace(/['\"]/g, ''));\n    return res.status(400).send(errorMessage);\n  }\n  Object.assign(req, value);\n  return next();\n};\nvar _default = JoiValiate;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbHMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkpvaVZhbGlhdGUiLCJzY2hlbWEiLCJyZXEiLCJyZXMiLCJuZXh0IiwidmFsaWRTY2hlbWEiLCJwaWNrIiwib2JqZWN0IiwiT2JqZWN0Iiwia2V5cyIsInZhbHVlIiwiZXJyb3IiLCJKb2kiLCJjb21waWxlIiwicHJlZnMiLCJlcnJvcnMiLCJsYWJlbCIsImFib3J0RWFybHkiLCJhbGxvd1Vua25vd24iLCJzdHJpcFVua25vd24iLCJ2YWxpZGF0ZSIsImVycm9yTWVzc2FnZSIsImRldGFpbHMiLCJtYXAiLCJtZXNzYWdlIiwicmVwbGFjZSIsInN0YXR1cyIsInNlbmQiLCJhc3NpZ24iLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiSm9pVmFsaWRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgcGljayB9IGZyb20gJy4uL3V0aWxzJztcblxuY29uc3QgSm9pVmFsaWF0ZSA9IChzY2hlbWEpID0+IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IHBpY2soc2NoZW1hLCBbJ3BhcmFtcycsICdxdWVyeScsICdib2R5J10pO1xuICBjb25zdCBvYmplY3QgPSBwaWNrKHJlcSwgT2JqZWN0LmtleXModmFsaWRTY2hlbWEpKTtcbiAgY29uc3QgeyB2YWx1ZSwgZXJyb3IgfSA9IEpvaS5jb21waWxlKHZhbGlkU2NoZW1hKVxuICAgIC5wcmVmcyh7XG4gICAgICBlcnJvcnM6IHsgbGFiZWw6ICdrZXknIH0sXG4gICAgICBhYm9ydEVhcmx5OiBmYWxzZSxcbiAgICAgIGFsbG93VW5rbm93bjogdHJ1ZSxcbiAgICAgIHN0cmlwVW5rbm93bjogdHJ1ZSxcbiAgICB9KVxuICAgIC52YWxpZGF0ZShvYmplY3QpO1xuXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLmRldGFpbHMubWFwKChkZXRhaWxzKSA9PlxuICAgICAgZGV0YWlscy5tZXNzYWdlLnJlcGxhY2UoL1snXCJdL2csICcnKVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3JNZXNzYWdlKTtcbiAgfVxuICBPYmplY3QuYXNzaWduKHJlcSwgdmFsdWUpO1xuICByZXR1cm4gbmV4dCgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgSm9pVmFsaWF0ZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsSUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQWdDLFNBQUFELHVCQUFBRyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRWhDLE1BQU1HLFVBQVUsR0FBSUMsTUFBTSxJQUFLLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDakQsTUFBTUMsV0FBVyxHQUFHLElBQUFDLFdBQUksRUFBQ0wsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztFQUM3RCxNQUFNTSxNQUFNLEdBQUcsSUFBQUQsV0FBSSxFQUFDSixHQUFHLEVBQUVNLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDSixXQUFXLENBQUMsQ0FBQztFQUNsRCxNQUFNO0lBQUVLLEtBQUs7SUFBRUM7RUFBTSxDQUFDLEdBQUdDLFlBQUcsQ0FBQ0MsT0FBTyxDQUFDUixXQUFXLENBQUMsQ0FDOUNTLEtBQUssQ0FBQztJQUNMQyxNQUFNLEVBQUU7TUFBRUMsS0FBSyxFQUFFO0lBQU0sQ0FBQztJQUN4QkMsVUFBVSxFQUFFLEtBQUs7SUFDakJDLFlBQVksRUFBRSxJQUFJO0lBQ2xCQyxZQUFZLEVBQUU7RUFDaEIsQ0FBQyxDQUFDLENBQ0RDLFFBQVEsQ0FBQ2IsTUFBTSxDQUFDO0VBRW5CLElBQUlJLEtBQUssRUFBRTtJQUNULE1BQU1VLFlBQVksR0FBR1YsS0FBSyxDQUFDVyxPQUFPLENBQUNDLEdBQUcsQ0FBRUQsT0FBTyxJQUM3Q0EsT0FBTyxDQUFDRSxPQUFPLENBQUNDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUNyQyxDQUFDO0lBRUQsT0FBT3RCLEdBQUcsQ0FBQ3VCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTixZQUFZLENBQUM7RUFDM0M7RUFDQWIsTUFBTSxDQUFDb0IsTUFBTSxDQUFDMUIsR0FBRyxFQUFFUSxLQUFLLENBQUM7RUFDekIsT0FBT04sSUFBSSxDQUFDLENBQUM7QUFDZixDQUFDO0FBQUMsSUFBQXlCLFFBQUEsR0FFYTdCLFVBQVU7QUFBQThCLE9BQUEsQ0FBQS9CLE9BQUEsR0FBQThCLFFBQUEifQ==","map":{"version":3,"names":["_joi","_interopRequireDefault","require","_utils","obj","__esModule","default","JoiValiate","schema","req","res","next","validSchema","pick","object","Object","keys","value","error","Joi","compile","prefs","errors","label","abortEarly","allowUnknown","stripUnknown","validate","errorMessage","details","map","message","replace","status","send","assign","_default","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/","sources":["JoiValidate.js"],"sourcesContent":["import Joi from 'joi';\nimport { pick } from '../utils';\n\nconst JoiValiate = (schema) => (req, res, next) => {\n  const validSchema = pick(schema, ['params', 'query', 'body']);\n  const object = pick(req, Object.keys(validSchema));\n  const { value, error } = Joi.compile(validSchema)\n    .prefs({\n      errors: { label: 'key' },\n      abortEarly: false,\n      allowUnknown: true,\n      stripUnknown: true,\n    })\n    .validate(object);\n\n  if (error) {\n    const errorMessage = error.details.map((details) =>\n      details.message.replace(/['\"]/g, '')\n    );\n\n    return res.status(400).send(errorMessage);\n  }\n  Object.assign(req, value);\n  return next();\n};\n\nexport default JoiValiate;\n"],"mappings":";;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAAgC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhC,MAAMG,UAAU,GAAIC,MAAM,IAAK,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACjD,MAAMC,WAAW,GAAG,IAAAC,WAAI,EAACL,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;EAC7D,MAAMM,MAAM,GAAG,IAAAD,WAAI,EAACJ,GAAG,EAAEM,MAAM,CAACC,IAAI,CAACJ,WAAW,CAAC,CAAC;EAClD,MAAM;IAAEK,KAAK;IAAEC;EAAM,CAAC,GAAGC,YAAG,CAACC,OAAO,CAACR,WAAW,CAAC,CAC9CS,KAAK,CAAC;IACLC,MAAM,EAAE;MAAEC,KAAK,EAAE;IAAM,CAAC;IACxBC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,IAAI;IAClBC,YAAY,EAAE;EAChB,CAAC,CAAC,CACDC,QAAQ,CAACb,MAAM,CAAC;EAEnB,IAAII,KAAK,EAAE;IACT,MAAMU,YAAY,GAAGV,KAAK,CAACW,OAAO,CAACC,GAAG,CAAED,OAAO,IAC7CA,OAAO,CAACE,OAAO,CAACC,OAAO,CAAC,OAAO,EAAE,EAAE,CACrC,CAAC;IAED,OAAOtB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACN,YAAY,CAAC;EAC3C;EACAb,MAAM,CAACoB,MAAM,CAAC1B,GAAG,EAAEQ,KAAK,CAAC;EACzB,OAAON,IAAI,CAAC,CAAC;AACf,CAAC;AAAC,IAAAyB,QAAA,GAEa7B,UAAU;AAAA8B,OAAA,CAAA/B,OAAA,GAAA8B,QAAA"}},"mtime":1689327239000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.promisify = exports.pick = void 0;\nconst pick = (object, keys) => keys.reduce((obj, key) => {\n  if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n    // eslint-disable-next-line no-param-reassign\n    obj[key] = object[key];\n  }\n  return obj;\n}, {});\nexports.pick = pick;\nconst promisify = fn => {\n  return (...args) => {\n    return new Promise((resolve, reject) => {\n      function customCallback(err, ...results) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(results.length === 1 ? results[0] : results);\n      }\n      args.push(customCallback);\n      fn.call(void 0, ...args);\n    });\n  };\n};\nexports.promisify = promisify;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaWNrIiwib2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsIm9iaiIsImtleSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImV4cG9ydHMiLCJwcm9taXNpZnkiLCJmbiIsImFyZ3MiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImN1c3RvbUNhbGxiYWNrIiwiZXJyIiwicmVzdWx0cyIsImxlbmd0aCIsInB1c2giXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHBpY2sgPSAob2JqZWN0LCBrZXlzKSA9PlxuICBrZXlzLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcbiAgICBpZiAob2JqZWN0ICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgb2JqW2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xuXG5leHBvcnQgY29uc3QgcHJvbWlzaWZ5ID0gKGZuKSA9PiB7XG4gIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmdW5jdGlvbiBjdXN0b21DYWxsYmFjayhlcnIsIC4uLnJlc3VsdHMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXN1bHRzLmxlbmd0aCA9PT0gMSA/IHJlc3VsdHNbMF0gOiByZXN1bHRzKTtcbiAgICAgIH1cblxuICAgICAgYXJncy5wdXNoKGN1c3RvbUNhbGxiYWNrKTtcbiAgICAgIGZuLmNhbGwodGhpcywgLi4uYXJncyk7XG4gICAgfSk7XG4gIH07XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxJQUFJLEdBQUdBLENBQUNDLE1BQU0sRUFBRUMsSUFBSSxLQUMvQkEsSUFBSSxDQUFDQyxNQUFNLENBQUMsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDeEIsSUFBSUosTUFBTSxJQUFJSyxNQUFNLENBQUNDLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNSLE1BQU0sRUFBRUksR0FBRyxDQUFDLEVBQUU7SUFDL0Q7SUFDQUQsR0FBRyxDQUFDQyxHQUFHLENBQUMsR0FBR0osTUFBTSxDQUFDSSxHQUFHLENBQUM7RUFDeEI7RUFDQSxPQUFPRCxHQUFHO0FBQ1osQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQUNNLE9BQUEsQ0FBQVYsSUFBQSxHQUFBQSxJQUFBO0FBRUYsTUFBTVcsU0FBUyxHQUFJQyxFQUFFLElBQUs7RUFDL0IsT0FBTyxDQUFDLEdBQUdDLElBQUksS0FBSztJQUNsQixPQUFPLElBQUlDLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBSztNQUN0QyxTQUFTQyxjQUFjQSxDQUFDQyxHQUFHLEVBQUUsR0FBR0MsT0FBTyxFQUFFO1FBQ3ZDLElBQUlELEdBQUcsRUFBRTtVQUNQLE9BQU9GLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDO1FBQ3BCO1FBQ0EsT0FBT0gsT0FBTyxDQUFDSSxPQUFPLENBQUNDLE1BQU0sS0FBSyxDQUFDLEdBQUdELE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBR0EsT0FBTyxDQUFDO01BQzdEO01BRUFOLElBQUksQ0FBQ1EsSUFBSSxDQUFDSixjQUFjLENBQUM7TUFDekJMLEVBQUUsQ0FBQ0gsSUFBSSxTQUFPLEdBQUdJLElBQUksQ0FBQztJQUN4QixDQUFDLENBQUM7RUFDSixDQUFDO0FBQ0gsQ0FBQztBQUFDSCxPQUFBLENBQUFDLFNBQUEsR0FBQUEsU0FBQSJ9","map":{"version":3,"names":["pick","object","keys","reduce","obj","key","Object","prototype","hasOwnProperty","call","exports","promisify","fn","args","Promise","resolve","reject","customCallback","err","results","length","push"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/","sources":["index.js"],"sourcesContent":["export const pick = (object, keys) =>\n  keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n\nexport const promisify = (fn) => {\n  return (...args) => {\n    return new Promise((resolve, reject) => {\n      function customCallback(err, ...results) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(results.length === 1 ? results[0] : results);\n      }\n\n      args.push(customCallback);\n      fn.call(this, ...args);\n    });\n  };\n};\n"],"mappings":";;;;;;AAAO,MAAMA,IAAI,GAAGA,CAACC,MAAM,EAAEC,IAAI,KAC/BA,IAAI,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;EACxB,IAAIJ,MAAM,IAAIK,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,MAAM,EAAEI,GAAG,CAAC,EAAE;IAC/D;IACAD,GAAG,CAACC,GAAG,CAAC,GAAGJ,MAAM,CAACI,GAAG,CAAC;EACxB;EACA,OAAOD,GAAG;AACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AAACM,OAAA,CAAAV,IAAA,GAAAA,IAAA;AAEF,MAAMW,SAAS,GAAIC,EAAE,IAAK;EAC/B,OAAO,CAAC,GAAGC,IAAI,KAAK;IAClB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,SAASC,cAAcA,CAACC,GAAG,EAAE,GAAGC,OAAO,EAAE;QACvC,IAAID,GAAG,EAAE;UACP,OAAOF,MAAM,CAACE,GAAG,CAAC;QACpB;QACA,OAAOH,OAAO,CAACI,OAAO,CAACC,MAAM,KAAK,CAAC,GAAGD,OAAO,CAAC,CAAC,CAAC,GAAGA,OAAO,CAAC;MAC7D;MAEAN,IAAI,CAACQ,IAAI,CAACJ,cAAc,CAAC;MACzBL,EAAE,CAACH,IAAI,SAAO,GAAGI,IAAI,CAAC;IACxB,CAAC,CAAC;EACJ,CAAC;AACH,CAAC;AAACH,OAAA,CAAAC,SAAA,GAAAA,SAAA"}},"mtime":1690966271812},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/validation/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/validation/auth-validation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar J = _interopRequireWildcard(require(\"../helpers/validation-helper\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar _default = {\n  register: {\n    body: J.ObjectKeys({\n      name: J.name.min(5).max(30).trim(true).escapeHTML().required(),\n      username: J.username.min(8).max(30).trim(true).escapeHTML().required(),\n      phone: J.phone.trim(true).escapeHTML().required(),\n      email: J.email.email().trim(true).escapeHTML().required(),\n      password: J.password.custom(J.checkPassword).min(8).max(30).trim(true).escapeHTML().required(),\n      confirmPassword: J.confirmPassword.trim(true).escapeHTML().required(),\n      acceptTerms: J.acceptTerms.required()\n    })\n  },\n  loginWithEmail: {\n    body: J.ObjectKeys({\n      email: J.email.email().trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  },\n  loginWithUsername: {\n    body: J.ObjectKeys({\n      username: J.username.min(8).max(30).trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  },\n  loginWithPhone: {\n    body: J.ObjectKeys({\n      phone: J.phone.trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML()\n    })\n  }\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwibm9kZUludGVyb3AiLCJXZWFrTWFwIiwiY2FjaGVCYWJlbEludGVyb3AiLCJjYWNoZU5vZGVJbnRlcm9wIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjYWNoZSIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsIl9kZWZhdWx0IiwicmVnaXN0ZXIiLCJib2R5IiwiT2JqZWN0S2V5cyIsIm5hbWUiLCJtaW4iLCJtYXgiLCJ0cmltIiwiZXNjYXBlSFRNTCIsInJlcXVpcmVkIiwidXNlcm5hbWUiLCJwaG9uZSIsImVtYWlsIiwicGFzc3dvcmQiLCJjdXN0b20iLCJjaGVja1Bhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiYWNjZXB0VGVybXMiLCJsb2dpbldpdGhFbWFpbCIsIm9wdGlvbmFsIiwibG9naW5XaXRoVXNlcm5hbWUiLCJsb2dpbldpdGhQaG9uZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL3ZhbGlkYXRpb24vIiwic291cmNlcyI6WyJhdXRoLXZhbGlkYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgSiBmcm9tICcuLi9oZWxwZXJzL3ZhbGlkYXRpb24taGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICByZWdpc3Rlcjoge1xuICAgIGJvZHk6IEouT2JqZWN0S2V5cyh7XG4gICAgICBuYW1lOiBKLm5hbWUubWluKDUpLm1heCgzMCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkucmVxdWlyZWQoKSxcbiAgICAgIHVzZXJuYW1lOiBKLnVzZXJuYW1lLm1pbig4KS5tYXgoMzApLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLnJlcXVpcmVkKCksXG4gICAgICBwaG9uZTogSi5waG9uZS50cmltKHRydWUpLmVzY2FwZUhUTUwoKS5yZXF1aXJlZCgpLFxuICAgICAgZW1haWw6IEouZW1haWwuZW1haWwoKS50cmltKHRydWUpLmVzY2FwZUhUTUwoKS5yZXF1aXJlZCgpLFxuICAgICAgcGFzc3dvcmQ6IEoucGFzc3dvcmRcbiAgICAgICAgLmN1c3RvbShKLmNoZWNrUGFzc3dvcmQpXG4gICAgICAgIC5taW4oOClcbiAgICAgICAgLm1heCgzMClcbiAgICAgICAgLnRyaW0odHJ1ZSlcbiAgICAgICAgLmVzY2FwZUhUTUwoKVxuICAgICAgICAucmVxdWlyZWQoKSxcbiAgICAgIGNvbmZpcm1QYXNzd29yZDogSi5jb25maXJtUGFzc3dvcmQudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkucmVxdWlyZWQoKSxcbiAgICAgIGFjY2VwdFRlcm1zOiBKLmFjY2VwdFRlcm1zLnJlcXVpcmVkKCksXG4gICAgfSksXG4gIH0sXG4gIGxvZ2luV2l0aEVtYWlsOiB7XG4gICAgYm9keTogSi5PYmplY3RLZXlzKHtcbiAgICAgIGVtYWlsOiBKLmVtYWlsLmVtYWlsKCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCkub3B0aW9uYWwoKSxcbiAgICAgIHBhc3N3b3JkOiBKLnBhc3N3b3JkLm1pbig4KS5tYXgoMzApLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLFxuICAgIH0pLFxuICB9LFxuICBsb2dpbldpdGhVc2VybmFtZToge1xuICAgIGJvZHk6IEouT2JqZWN0S2V5cyh7XG4gICAgICB1c2VybmFtZTogSi51c2VybmFtZS5taW4oOCkubWF4KDMwKS50cmltKHRydWUpLmVzY2FwZUhUTUwoKS5vcHRpb25hbCgpLFxuICAgICAgcGFzc3dvcmQ6IEoucGFzc3dvcmQubWluKDgpLm1heCgzMCkudHJpbSh0cnVlKS5lc2NhcGVIVE1MKCksXG4gICAgfSksXG4gIH0sXG4gIGxvZ2luV2l0aFBob25lOiB7XG4gICAgYm9keTogSi5PYmplY3RLZXlzKHtcbiAgICAgIHBob25lOiBKLnBob25lLnRyaW0odHJ1ZSkuZXNjYXBlSFRNTCgpLm9wdGlvbmFsKCksXG4gICAgICBwYXNzd29yZDogSi5wYXNzd29yZC5taW4oOCkubWF4KDMwKS50cmltKHRydWUpLmVzY2FwZUhUTUwoKSxcbiAgICB9KSxcbiAgfSxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLENBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUFrRCxTQUFBQyx5QkFBQUMsV0FBQSxlQUFBQyxPQUFBLGtDQUFBQyxpQkFBQSxPQUFBRCxPQUFBLFFBQUFFLGdCQUFBLE9BQUFGLE9BQUEsWUFBQUYsd0JBQUEsWUFBQUEsQ0FBQUMsV0FBQSxXQUFBQSxXQUFBLEdBQUFHLGdCQUFBLEdBQUFELGlCQUFBLEtBQUFGLFdBQUE7QUFBQSxTQUFBSCx3QkFBQU8sR0FBQSxFQUFBSixXQUFBLFNBQUFBLFdBQUEsSUFBQUksR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsV0FBQUQsR0FBQSxRQUFBQSxHQUFBLG9CQUFBQSxHQUFBLHdCQUFBQSxHQUFBLDRCQUFBRSxPQUFBLEVBQUFGLEdBQUEsVUFBQUcsS0FBQSxHQUFBUix3QkFBQSxDQUFBQyxXQUFBLE9BQUFPLEtBQUEsSUFBQUEsS0FBQSxDQUFBQyxHQUFBLENBQUFKLEdBQUEsWUFBQUcsS0FBQSxDQUFBRSxHQUFBLENBQUFMLEdBQUEsU0FBQU0sTUFBQSxXQUFBQyxxQkFBQSxHQUFBQyxNQUFBLENBQUFDLGNBQUEsSUFBQUQsTUFBQSxDQUFBRSx3QkFBQSxXQUFBQyxHQUFBLElBQUFYLEdBQUEsUUFBQVcsR0FBQSxrQkFBQUgsTUFBQSxDQUFBSSxTQUFBLENBQUFDLGNBQUEsQ0FBQUMsSUFBQSxDQUFBZCxHQUFBLEVBQUFXLEdBQUEsU0FBQUksSUFBQSxHQUFBUixxQkFBQSxHQUFB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","map":{"version":3,"names":["J","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_default","register","body","ObjectKeys","name","min","max","trim","escapeHTML","required","username","phone","email","password","custom","checkPassword","confirmPassword","acceptTerms","loginWithEmail","optional","loginWithUsername","loginWithPhone","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/validation/","sources":["auth-validation.js"],"sourcesContent":["import * as J from '../helpers/validation-helper';\n\nexport default {\n  register: {\n    body: J.ObjectKeys({\n      name: J.name.min(5).max(30).trim(true).escapeHTML().required(),\n      username: J.username.min(8).max(30).trim(true).escapeHTML().required(),\n      phone: J.phone.trim(true).escapeHTML().required(),\n      email: J.email.email().trim(true).escapeHTML().required(),\n      password: J.password\n        .custom(J.checkPassword)\n        .min(8)\n        .max(30)\n        .trim(true)\n        .escapeHTML()\n        .required(),\n      confirmPassword: J.confirmPassword.trim(true).escapeHTML().required(),\n      acceptTerms: J.acceptTerms.required(),\n    }),\n  },\n  loginWithEmail: {\n    body: J.ObjectKeys({\n      email: J.email.email().trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n  loginWithUsername: {\n    body: J.ObjectKeys({\n      username: J.username.min(8).max(30).trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n  loginWithPhone: {\n    body: J.ObjectKeys({\n      phone: J.phone.trim(true).escapeHTML().optional(),\n      password: J.password.min(8).max(30).trim(true).escapeHTML(),\n    }),\n  },\n};\n"],"mappings":"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"}},"mtime":1690033078000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/helpers/validation-helper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.username = exports.token = exports.role = exports.revokeToken = exports.refreshToken = exports.phone = exports.password = exports.objectId = exports.name = exports.id = exports.email = exports.confirmPassword = exports.checkPassword = exports.acceptTerms = exports.UpdRole = exports.UpdPassword = exports.UpdName = exports.UpdEmail = exports.UpdConfirmPassword = exports.ObjectKeys = void 0;\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nvar _customJoi = _interopRequireDefault(require(\"../utils/customJoi\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst checkPassword = (value, helpers) => {\n  if (value.length < 8) {\n    return helpers.message({\n      custom: 'password must be at least 8 characters'\n    });\n  } else if (!value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/)) {\n    return helpers.message({\n      custom: 'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character'\n    });\n  }\n  return value;\n};\nexports.checkPassword = checkPassword;\nconst objectId = (value, helpers) => {\n  if (!value.match(/^[0-9a-fA-F]{24}$/)) {\n    return helpers.message({\n      custom: '\"{{#label}}\" must be a valid mongo id'\n    });\n  }\n  return value;\n};\nexports.objectId = objectId;\nconst id = _customJoi.default.string().custom(objectId);\nexports.id = id;\nconst email = _customJoi.default.string();\nexports.email = email;\nconst password = _customJoi.default.string().required();\nexports.password = password;\nconst confirmPassword = _customJoi.default.string().valid(_customJoi.default.ref('password')).required().messages({\n  'any.only': 'Both passwords must match'\n});\n\n// .label('Confirm password')\n// .options({ messages: { 'any.only': 'Both passwords must match' } });\n// .messages({ 'any.only': '{{#label}} does not match' });\nexports.confirmPassword = confirmPassword;\nconst name = _customJoi.default.string().required();\nexports.name = name;\nconst username = _customJoi.default.string().pattern(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/).messages({\n  'string.pattern.base': 'At least 1 letter and 1 number'\n});\nexports.username = username;\nconst phone = _customJoi.default.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).messages({\n  'string.pattern.base': 'Not a valid phone number'\n});\nexports.phone = phone;\nconst token = _customJoi.default.string().required();\nexports.token = token;\nconst refreshToken = _customJoi.default.string().required();\nexports.refreshToken = refreshToken;\nconst revokeToken = _customJoi.default.string().empty('');\nexports.revokeToken = revokeToken;\nconst acceptTerms = _customJoi.default.boolean().valid(true).required().messages({\n  'any.only': 'Please accept terms'\n});\nexports.acceptTerms = acceptTerms;\nconst role = _customJoi.default.string().valid(_roles.default.Admin, _roles.default.User).required();\nexports.role = role;\nconst ObjectKeys = keys => {\n  return _customJoi.default.object().keys({\n    ...keys\n  });\n};\n\n// name: J.name,\n//     email: J.email.email(),\n//     password: J.password.custom(J.checkPassword),\n//     confirmPassword: J.confirmPassword,\n//     acceptTerms: J.acceptTerms,\n//     role: J.role,\nexports.ObjectKeys = ObjectKeys;\nconst UpdName = _customJoi.default.string().empty('');\nexports.UpdName = UpdName;\nconst UpdEmail = _customJoi.default.string().empty('');\nexports.UpdEmail = UpdEmail;\nconst UpdPassword = _customJoi.default.string().empty('');\nexports.UpdPassword = UpdPassword;\nconst UpdConfirmPassword = _customJoi.default.string().valid(_customJoi.default.ref('password')).messages({\n  'any.only': 'Both passwords must match'\n}).empty('');\nexports.UpdConfirmPassword = UpdConfirmPassword;\nconst UpdRole = _customJoi.default.string().valid(_roles.default.Admin, _roles.default.User).empty('');\n\n// const validation = joi.object({\n//   userName: joi.string().alphanum().min(3).max(25).trim(true).required(),\n//   email: joi.string().email().trim(true).required(),\n//   password: joi.string().min(8).trim(true).required(),\n//   mobileNumber: joi.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).required(),\n//   birthYear: joi.number().integer().min(1920).max(2000),\n//   skillSet: joi.array().items(joi.string().alphanum().trim(true))\n// .default([]),\n//  is_active: joi.boolean().default(true),\n\n// export const lessonSchema = Joi.object().keys({\n//   courseId: Joi.number().integer().required(),\n//   url: Joi.string().trim().uri().required(),\n//   description: Joi.string().trim(),\n//   thumbnailUrl: Joi.string().uri(),\n//   title: Joi.string().trim().required(),\n//   duration: Joi.string(),\n//   seqNo: Joi.number(),\n//   createdAt: Joi.date(),\n//   updatedAt: Joi.date()\n// });\nexports.UpdRole = UpdRole;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcm9sZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jdXN0b21Kb2kiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNoZWNrUGFzc3dvcmQiLCJ2YWx1ZSIsImhlbHBlcnMiLCJsZW5ndGgiLCJtZXNzYWdlIiwiY3VzdG9tIiwibWF0Y2giLCJleHBvcnRzIiwib2JqZWN0SWQiLCJpZCIsImN1c3RvbUpvaSIsInN0cmluZyIsImVtYWlsIiwicGFzc3dvcmQiLCJyZXF1aXJlZCIsImNvbmZpcm1QYXNzd29yZCIsInZhbGlkIiwicmVmIiwibWVzc2FnZXMiLCJuYW1lIiwidXNlcm5hbWUiLCJwYXR0ZXJuIiwicGhvbmUiLCJ0b2tlbiIsInJlZnJlc2hUb2tlbiIsInJldm9rZVRva2VuIiwiZW1wdHkiLCJhY2NlcHRUZXJtcyIsImJvb2xlYW4iLCJyb2xlIiwiUm9sZSIsIkFkbWluIiwiVXNlciIsIk9iamVjdEtleXMiLCJrZXlzIiwib2JqZWN0IiwiVXBkTmFtZSIsIlVwZEVtYWlsIiwiVXBkUGFzc3dvcmQiLCJVcGRDb25maXJtUGFzc3dvcmQiLCJVcGRSb2xlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0NvbXBsZXRlZC9tZXJuLXN0YWNrLWF1dGgvU2VydmVyL3NyYy9oZWxwZXJzLyIsInNvdXJjZXMiOlsidmFsaWRhdGlvbi1oZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvbGUgZnJvbSAnLi4vY29uZmlnL3JvbGVzJztcbmltcG9ydCBjdXN0b21Kb2kgZnJvbSAnLi4vdXRpbHMvY3VzdG9tSm9pJztcblxuZXhwb3J0IGNvbnN0IGNoZWNrUGFzc3dvcmQgPSAodmFsdWUsIGhlbHBlcnMpID0+IHtcbiAgaWYgKHZhbHVlLmxlbmd0aCA8IDgpIHtcbiAgICByZXR1cm4gaGVscGVycy5tZXNzYWdlKHtcbiAgICAgIGN1c3RvbTogJ3Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzJyxcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChcbiAgICAhdmFsdWUubWF0Y2goXG4gICAgICAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlxcZCkoPz0uKlsjJEAhJSYqP10pW0EtWmEtelxcZCMkQCElJio/XXs4LDMwfSQvXG4gICAgKVxuICApIHtcbiAgICByZXR1cm4gaGVscGVycy5tZXNzYWdlKHtcbiAgICAgIGN1c3RvbTpcbiAgICAgICAgJ0F0bGVhc3QgMSBsZXR0ZXIsIDEgbnVtYmVyLCAxIHNwZWNpYWwgY2hhcmFjdGVyIGFuZCBTSE9VTEQgTk9UIHN0YXJ0IHdpdGggYSBzcGVjaWFsIGNoYXJhY3RlcicsXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuZXhwb3J0IGNvbnN0IG9iamVjdElkID0gKHZhbHVlLCBoZWxwZXJzKSA9PiB7XG4gIGlmICghdmFsdWUubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLykpIHtcbiAgICByZXR1cm4gaGVscGVycy5tZXNzYWdlKHsgY3VzdG9tOiAnXCJ7eyNsYWJlbH19XCIgbXVzdCBiZSBhIHZhbGlkIG1vbmdvIGlkJyB9KTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG5leHBvcnQgY29uc3QgaWQgPSBjdXN0b21Kb2kuc3RyaW5nKCkuY3VzdG9tKG9iamVjdElkKTtcblxuZXhwb3J0IGNvbnN0IGVtYWlsID0gY3VzdG9tSm9pLnN0cmluZygpO1xuXG5leHBvcnQgY29uc3QgcGFzc3dvcmQgPSBjdXN0b21Kb2kuc3RyaW5nKCkucmVxdWlyZWQoKTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpcm1QYXNzd29yZCA9IGN1c3RvbUpvaVxuICAuc3RyaW5nKClcbiAgLnZhbGlkKGN1c3RvbUpvaS5yZWYoJ3Bhc3N3b3JkJykpXG4gIC5yZXF1aXJlZCgpXG4gIC5tZXNzYWdlcyh7ICdhbnkub25seSc6ICdCb3RoIHBhc3N3b3JkcyBtdXN0IG1hdGNoJyB9KTtcblxuLy8gLmxhYmVsKCdDb25maXJtIHBhc3N3b3JkJylcbi8vIC5vcHRpb25zKHsgbWVzc2FnZXM6IHsgJ2FueS5vbmx5JzogJ0JvdGggcGFzc3dvcmRzIG11c3QgbWF0Y2gnIH0gfSk7XG4vLyAubWVzc2FnZXMoeyAnYW55Lm9ubHknOiAne3sjbGFiZWx9fSBkb2VzIG5vdCBtYXRjaCcgfSk7XG5cbmV4cG9ydCBjb25zdCBuYW1lID0gY3VzdG9tSm9pLnN0cmluZygpLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCBjb25zdCB1c2VybmFtZSA9IGN1c3RvbUpvaVxuICAuc3RyaW5nKClcbiAgLnBhdHRlcm4oL14oPz0uKlswLTldKSg/PS4qW2EtekEtWl0pKFthLXpBLVowLTldKykkLylcbiAgLm1lc3NhZ2VzKHsgJ3N0cmluZy5wYXR0ZXJuLmJhc2UnOiAnQXQgbGVhc3QgMSBsZXR0ZXIgYW5kIDEgbnVtYmVyJyB9KTtcblxuZXhwb3J0IGNvbnN0IHBob25lID0gY3VzdG9tSm9pXG4gIC5zdHJpbmcoKVxuICAubGVuZ3RoKDEwKVxuICAucGF0dGVybigvWzYtOV17MX1bMC05XXs5fS8pXG4gIC5tZXNzYWdlcyh7ICdzdHJpbmcucGF0dGVybi5iYXNlJzogJ05vdCBhIHZhbGlkIHBob25lIG51bWJlcicgfSk7XG5cbmV4cG9ydCBjb25zdCB0b2tlbiA9IGN1c3RvbUpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpO1xuXG5leHBvcnQgY29uc3QgcmVmcmVzaFRva2VuID0gY3VzdG9tSm9pLnN0cmluZygpLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCBjb25zdCByZXZva2VUb2tlbiA9IGN1c3RvbUpvaS5zdHJpbmcoKS5lbXB0eSgnJyk7XG5cbmV4cG9ydCBjb25zdCBhY2NlcHRUZXJtcyA9IGN1c3RvbUpvaVxuICAuYm9vbGVhbigpXG4gIC52YWxpZCh0cnVlKVxuICAucmVxdWlyZWQoKVxuICAubWVzc2FnZXMoeyAnYW55Lm9ubHknOiAnUGxlYXNlIGFjY2VwdCB0ZXJtcycgfSk7XG5cbmV4cG9ydCBjb25zdCByb2xlID0gY3VzdG9tSm9pLnN0cmluZygpLnZhbGlkKFJvbGUuQWRtaW4sIFJvbGUuVXNlcikucmVxdWlyZWQoKTtcblxuZXhwb3J0IGNvbnN0IE9iamVjdEtleXMgPSAoa2V5cykgPT4ge1xuICByZXR1cm4gY3VzdG9tSm9pLm9iamVjdCgpLmtleXMoeyAuLi5rZXlzIH0pO1xufTtcblxuLy8gbmFtZTogSi5uYW1lLFxuLy8gICAgIGVtYWlsOiBKLmVtYWlsLmVtYWlsKCksXG4vLyAgICAgcGFzc3dvcmQ6IEoucGFzc3dvcmQuY3VzdG9tKEouY2hlY2tQYXNzd29yZCksXG4vLyAgICAgY29uZmlybVBhc3N3b3JkOiBKLmNvbmZpcm1QYXNzd29yZCxcbi8vICAgICBhY2NlcHRUZXJtczogSi5hY2NlcHRUZXJtcyxcbi8vICAgICByb2xlOiBKLnJvbGUsXG5cbmV4cG9ydCBjb25zdCBVcGROYW1lID0gY3VzdG9tSm9pLnN0cmluZygpLmVtcHR5KCcnKTtcbmV4cG9ydCBjb25zdCBVcGRFbWFpbCA9IGN1c3RvbUpvaS5zdHJpbmcoKS5lbXB0eSgnJyk7XG5leHBvcnQgY29uc3QgVXBkUGFzc3dvcmQgPSBjdXN0b21Kb2kuc3RyaW5nKCkuZW1wdHkoJycpO1xuZXhwb3J0IGNvbnN0IFVwZENvbmZpcm1QYXNzd29yZCA9IGN1c3RvbUpvaVxuICAuc3RyaW5nKClcbiAgLnZhbGlkKGN1c3RvbUpvaS5yZWYoJ3Bhc3N3b3JkJykpXG4gIC5tZXNzYWdlcyh7ICdhbnkub25seSc6ICdCb3RoIHBhc3N3b3JkcyBtdXN0IG1hdGNoJyB9KVxuICAuZW1wdHkoJycpO1xuZXhwb3J0IGNvbnN0IFVwZFJvbGUgPSBjdXN0b21Kb2lcbiAgLnN0cmluZygpXG4gIC52YWxpZChSb2xlLkFkbWluLCBSb2xlLlVzZXIpXG4gIC5lbXB0eSgnJyk7XG5cbi8vIGNvbnN0IHZhbGlkYXRpb24gPSBqb2kub2JqZWN0KHtcbi8vICAgdXNlck5hbWU6IGpvaS5zdHJpbmcoKS5hbHBoYW51bSgpLm1pbigzKS5tYXgoMjUpLnRyaW0odHJ1ZSkucmVxdWlyZWQoKSxcbi8vICAgZW1haWw6IGpvaS5zdHJpbmcoKS5lbWFpbCgpLnRyaW0odHJ1ZSkucmVxdWlyZWQoKSxcbi8vICAgcGFzc3dvcmQ6IGpvaS5zdHJpbmcoKS5taW4oOCkudHJpbSh0cnVlKS5yZXF1aXJlZCgpLFxuLy8gICBtb2JpbGVOdW1iZXI6IGpvaS5zdHJpbmcoKS5sZW5ndGgoMTApLnBhdHRlcm4oL1s2LTldezF9WzAtOV17OX0vKS5yZXF1aXJlZCgpLFxuLy8gICBiaXJ0aFllYXI6IGpvaS5udW1iZXIoKS5pbnRlZ2VyKCkubWluKDE5MjApLm1heCgyMDAwKSxcbi8vICAgc2tpbGxTZXQ6IGpvaS5hcnJheSgpLml0ZW1zKGpvaS5zdHJpbmcoKS5hbHBoYW51bSgpLnRyaW0odHJ1ZSkpXG4vLyAuZGVmYXVsdChbXSksXG4vLyAgaXNfYWN0aXZlOiBqb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG5cbi8vIGV4cG9ydCBjb25zdCBsZXNzb25TY2hlbWEgPSBKb2kub2JqZWN0KCkua2V5cyh7XG4vLyAgIGNvdXJzZUlkOiBKb2kubnVtYmVyKCkuaW50ZWdlcigpLnJlcXVpcmVkKCksXG4vLyAgIHVybDogSm9pLnN0cmluZygpLnRyaW0oKS51cmkoKS5yZXF1aXJlZCgpLFxuLy8gICBkZXNjcmlwdGlvbjogSm9pLnN0cmluZygpLnRyaW0oKSxcbi8vICAgdGh1bWJuYWlsVXJsOiBKb2kuc3RyaW5nKCkudXJpKCksXG4vLyAgIHRpdGxlOiBKb2kuc3RyaW5nKCkudHJpbSgpLnJlcXVpcmVkKCksXG4vLyAgIGR1cmF0aW9uOiBKb2kuc3RyaW5nKCksXG4vLyAgIHNlcU5vOiBKb2kubnVtYmVyKCksXG4vLyAgIGNyZWF0ZWRBdDogSm9pLmRhdGUoKSxcbi8vICAgdXBkYXRlZEF0OiBKb2kuZGF0ZSgpXG4vLyB9KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQTJDLFNBQUFELHVCQUFBRyxHQUFB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","map":{"version":3,"names":["_roles","_interopRequireDefault","require","_customJoi","obj","__esModule","default","checkPassword","value","helpers","length","message","custom","match","exports","objectId","id","customJoi","string","email","password","required","confirmPassword","valid","ref","messages","name","username","pattern","phone","token","refreshToken","revokeToken","empty","acceptTerms","boolean","role","Role","Admin","User","ObjectKeys","keys","object","UpdName","UpdEmail","UpdPassword","UpdConfirmPassword","UpdRole"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/helpers/","sources":["validation-helper.js"],"sourcesContent":["import Role from '../config/roles';\nimport customJoi from '../utils/customJoi';\n\nexport const checkPassword = (value, helpers) => {\n  if (value.length < 8) {\n    return helpers.message({\n      custom: 'password must be at least 8 characters',\n    });\n  } else if (\n    !value.match(\n      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/\n    )\n  ) {\n    return helpers.message({\n      custom:\n        'Atleast 1 letter, 1 number, 1 special character and SHOULD NOT start with a special character',\n    });\n  }\n  return value;\n};\n\nexport const objectId = (value, helpers) => {\n  if (!value.match(/^[0-9a-fA-F]{24}$/)) {\n    return helpers.message({ custom: '\"{{#label}}\" must be a valid mongo id' });\n  }\n  return value;\n};\n\nexport const id = customJoi.string().custom(objectId);\n\nexport const email = customJoi.string();\n\nexport const password = customJoi.string().required();\n\nexport const confirmPassword = customJoi\n  .string()\n  .valid(customJoi.ref('password'))\n  .required()\n  .messages({ 'any.only': 'Both passwords must match' });\n\n// .label('Confirm password')\n// .options({ messages: { 'any.only': 'Both passwords must match' } });\n// .messages({ 'any.only': '{{#label}} does not match' });\n\nexport const name = customJoi.string().required();\n\nexport const username = customJoi\n  .string()\n  .pattern(/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/)\n  .messages({ 'string.pattern.base': 'At least 1 letter and 1 number' });\n\nexport const phone = customJoi\n  .string()\n  .length(10)\n  .pattern(/[6-9]{1}[0-9]{9}/)\n  .messages({ 'string.pattern.base': 'Not a valid phone number' });\n\nexport const token = customJoi.string().required();\n\nexport const refreshToken = customJoi.string().required();\n\nexport const revokeToken = customJoi.string().empty('');\n\nexport const acceptTerms = customJoi\n  .boolean()\n  .valid(true)\n  .required()\n  .messages({ 'any.only': 'Please accept terms' });\n\nexport const role = customJoi.string().valid(Role.Admin, Role.User).required();\n\nexport const ObjectKeys = (keys) => {\n  return customJoi.object().keys({ ...keys });\n};\n\n// name: J.name,\n//     email: J.email.email(),\n//     password: J.password.custom(J.checkPassword),\n//     confirmPassword: J.confirmPassword,\n//     acceptTerms: J.acceptTerms,\n//     role: J.role,\n\nexport const UpdName = customJoi.string().empty('');\nexport const UpdEmail = customJoi.string().empty('');\nexport const UpdPassword = customJoi.string().empty('');\nexport const UpdConfirmPassword = customJoi\n  .string()\n  .valid(customJoi.ref('password'))\n  .messages({ 'any.only': 'Both passwords must match' })\n  .empty('');\nexport const UpdRole = customJoi\n  .string()\n  .valid(Role.Admin, Role.User)\n  .empty('');\n\n// const validation = joi.object({\n//   userName: joi.string().alphanum().min(3).max(25).trim(true).required(),\n//   email: joi.string().email().trim(true).required(),\n//   password: joi.string().min(8).trim(true).required(),\n//   mobileNumber: joi.string().length(10).pattern(/[6-9]{1}[0-9]{9}/).required(),\n//   birthYear: joi.number().integer().min(1920).max(2000),\n//   skillSet: joi.array().items(joi.string().alphanum().trim(true))\n// .default([]),\n//  is_active: joi.boolean().default(true),\n\n// export const lessonSchema = Joi.object().keys({\n//   courseId: Joi.number().integer().required(),\n//   url: Joi.string().trim().uri().required(),\n//   description: Joi.string().trim(),\n//   thumbnailUrl: Joi.string().uri(),\n//   title: Joi.string().trim().required(),\n//   duration: Joi.string(),\n//   seqNo: Joi.number(),\n//   createdAt: Joi.date(),\n//   updatedAt: Joi.date()\n// });\n"],"mappings":"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"}},"mtime":1689926403000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/customJoi.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sanitizeHtml = _interopRequireDefault(require(\"sanitize-html\"));\nvar _joi = _interopRequireDefault(require(\"joi\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst customJoi = _joi.default.extend(joi => ({\n  type: 'string',\n  base: joi.string(),\n  messages: {\n    'string.escapeHTML': '{{#label}} not contain any html tags'\n  },\n  rules: {\n    escapeHTML: {\n      validate(value, helpers) {\n        const clean = (0, _sanitizeHtml.default)(value, {\n          allowedTags: [],\n          allowedAttributes: {}\n        });\n        if (clean !== value) return helpers.error('string.escapeHTML', {\n          value\n        });\n        return clean;\n      }\n    }\n  }\n}));\nvar _default = customJoi;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2FuaXRpemVIdG1sIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfam9pIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjdXN0b21Kb2kiLCJKb2kiLCJleHRlbmQiLCJqb2kiLCJ0eXBlIiwiYmFzZSIsInN0cmluZyIsIm1lc3NhZ2VzIiwicnVsZXMiLCJlc2NhcGVIVE1MIiwidmFsaWRhdGUiLCJ2YWx1ZSIsImhlbHBlcnMiLCJjbGVhbiIsInNhbml0aXplSHRtbCIsImFsbG93ZWRUYWdzIiwiYWxsb3dlZEF0dHJpYnV0ZXMiLCJlcnJvciIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJjdXN0b21Kb2kuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNhbml0aXplSHRtbCBmcm9tICdzYW5pdGl6ZS1odG1sJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcblxuY29uc3QgY3VzdG9tSm9pID0gSm9pLmV4dGVuZCgoam9pKSA9PiAoe1xuICB0eXBlOiAnc3RyaW5nJyxcbiAgYmFzZTogam9pLnN0cmluZygpLFxuICBtZXNzYWdlczoge1xuICAgICdzdHJpbmcuZXNjYXBlSFRNTCc6ICd7eyNsYWJlbH19IG5vdCBjb250YWluIGFueSBodG1sIHRhZ3MnLFxuICB9LFxuICBydWxlczoge1xuICAgIGVzY2FwZUhUTUw6IHtcbiAgICAgIHZhbGlkYXRlKHZhbHVlLCBoZWxwZXJzKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuID0gc2FuaXRpemVIdG1sKHZhbHVlLCB7XG4gICAgICAgICAgYWxsb3dlZFRhZ3M6IFtdLFxuICAgICAgICAgIGFsbG93ZWRBdHRyaWJ1dGVzOiB7fSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGNsZWFuICE9PSB2YWx1ZSlcbiAgICAgICAgICByZXR1cm4gaGVscGVycy5lcnJvcignc3RyaW5nLmVzY2FwZUhUTUwnLCB7IHZhbHVlIH0pO1xuICAgICAgICByZXR1cm4gY2xlYW47XG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG59KSk7XG5cbmV4cG9ydCBkZWZhdWx0IGN1c3RvbUpvaTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsSUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQXNCLFNBQUFELHVCQUFBRyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRXRCLE1BQU1HLFNBQVMsR0FBR0MsWUFBRyxDQUFDQyxNQUFNLENBQUVDLEdBQUcsS0FBTTtFQUNyQ0MsSUFBSSxFQUFFLFFBQVE7RUFDZEMsSUFBSSxFQUFFRixHQUFHLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0VBQ2xCQyxRQUFRLEVBQUU7SUFDUixtQkFBbUIsRUFBRTtFQUN2QixDQUFDO0VBQ0RDLEtBQUssRUFBRTtJQUNMQyxVQUFVLEVBQUU7TUFDVkMsUUFBUUEsQ0FBQ0MsS0FBSyxFQUFFQyxPQUFPLEVBQUU7UUFDdkIsTUFBTUMsS0FBSyxHQUFHLElBQUFDLHFCQUFZLEVBQUNILEtBQUssRUFBRTtVQUNoQ0ksV0FBVyxFQUFFLEVBQUU7VUFDZkMsaUJBQWlCLEVBQUUsQ0FBQztRQUN0QixDQUFDLENBQUM7UUFFRixJQUFJSCxLQUFLLEtBQUtGLEtBQUssRUFDakIsT0FBT0MsT0FBTyxDQUFDSyxLQUFLLENBQUMsbUJBQW1CLEVBQUU7VUFBRU47UUFBTSxDQUFDLENBQUM7UUFDdEQsT0FBT0UsS0FBSztNQUNkO0lBQ0Y7RUFDRjtBQUNGLENBQUMsQ0FBQyxDQUFDO0FBQUMsSUFBQUssUUFBQSxHQUVXbEIsU0FBUztBQUFBbUIsT0FBQSxDQUFBcEIsT0FBQSxHQUFBbUIsUUFBQSJ9","map":{"version":3,"names":["_sanitizeHtml","_interopRequireDefault","require","_joi","obj","__esModule","default","customJoi","Joi","extend","joi","type","base","string","messages","rules","escapeHTML","validate","value","helpers","clean","sanitizeHtml","allowedTags","allowedAttributes","error","_default","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/utils/","sources":["customJoi.js"],"sourcesContent":["import sanitizeHtml from 'sanitize-html';\nimport Joi from 'joi';\n\nconst customJoi = Joi.extend((joi) => ({\n  type: 'string',\n  base: joi.string(),\n  messages: {\n    'string.escapeHTML': '{{#label}} not contain any html tags',\n  },\n  rules: {\n    escapeHTML: {\n      validate(value, helpers) {\n        const clean = sanitizeHtml(value, {\n          allowedTags: [],\n          allowedAttributes: {},\n        });\n\n        if (clean !== value)\n          return helpers.error('string.escapeHTML', { value });\n        return clean;\n      },\n    },\n  },\n}));\n\nexport default customJoi;\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsB,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtB,MAAMG,SAAS,GAAGC,YAAG,CAACC,MAAM,CAAEC,GAAG,KAAM;EACrCC,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAEF,GAAG,CAACG,MAAM,CAAC,CAAC;EAClBC,QAAQ,EAAE;IACR,mBAAmB,EAAE;EACvB,CAAC;EACDC,KAAK,EAAE;IACLC,UAAU,EAAE;MACVC,QAAQA,CAACC,KAAK,EAAEC,OAAO,EAAE;QACvB,MAAMC,KAAK,GAAG,IAAAC,qBAAY,EAACH,KAAK,EAAE;UAChCI,WAAW,EAAE,EAAE;UACfC,iBAAiB,EAAE,CAAC;QACtB,CAAC,CAAC;QAEF,IAAIH,KAAK,KAAKF,KAAK,EACjB,OAAOC,OAAO,CAACK,KAAK,CAAC,mBAAmB,EAAE;UAAEN;QAAM,CAAC,CAAC;QACtD,OAAOE,KAAK;MACd;IACF;EACF;AACF,CAAC,CAAC,CAAC;AAAC,IAAAK,QAAA,GAEWlB,SAAS;AAAAmB,OAAA,CAAApB,OAAA,GAAAmB,QAAA"}},"mtime":1690966672108},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/AuthRights.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst AccessTo = (roles = []) => {\n  /*\n   * roles param can be a single role string (e.g. Role.User or 'User')\n   * or an array of roles (e.g. [Role.Admin, Role.User] or ['Admin', 'User'])\n   */\n\n  if (typeof roles === 'string') {\n    roles = [roles];\n  }\n  return [\n  /* \n  *  authenticate JWT token and attach user to request object (req.user)\n  !  Please note: work only when AuthMiddleware already attach with any route\n  *  authorize based on user role\n  */\n\n  async (req, res, next) => {\n    const token = await (0, _tokenHelper.tokenfromheader)(req);\n    if (!token) return next(new _ApiErrors.default(401, 'Access Denied'));\n    const payload = await (0, _tokenHelper.verifyAccessToken)(token);\n    if (typeof payload.exp === 'undefined') {\n      return next(new _ApiErrors.default(403, 'not logged in'));\n    }\n    const {\n      sub\n    } = payload;\n    const user = await _userModel.default.findById(sub);\n    if (!user) return next(new _ApiErrors.default(401, 'User not found'));\n\n    // user's role is not authorized\n    if (!user || roles.length && !roles.includes(user.role)) return next(new _ApiErrors.default(401, 'Unauthorized'));\n\n    // authentication and authorization successful\n    req.user = user;\n    req.user.role = user.role;\n    const refreshTokens = await _tokenModel.default.find({\n      user: user.id\n    }).populate('user');\n    req.user.ownsToken = token => !!refreshTokens.find(x => x.token === token);\n    next();\n  }];\n};\nvar _default = AccessTo; // router.get('/users', authorize([Roles.ADMIN]), getAll); // admin only can see all users\n// router.get('/users/:id', authorize(), getById);       // all authenticated users pass empty or pass [Roles.USER,Roles.ADMIN]\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlck1vZGVsIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdG9rZW5Nb2RlbCIsIl9BcGlFcnJvcnMiLCJfdG9rZW5IZWxwZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkFjY2Vzc1RvIiwicm9sZXMiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJ0b2tlbmZyb21oZWFkZXIiLCJBcGlFcnJvciIsInBheWxvYWQiLCJ2ZXJpZnlBY2Nlc3NUb2tlbiIsImV4cCIsInN1YiIsInVzZXIiLCJVc2VyIiwiZmluZEJ5SWQiLCJsZW5ndGgiLCJpbmNsdWRlcyIsInJvbGUiLCJyZWZyZXNoVG9rZW5zIiwiVG9rZW4iLCJmaW5kIiwiaWQiLCJwb3B1bGF0ZSIsIm93bnNUb2tlbiIsIngiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiQXV0aFJpZ2h0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlci1tb2RlbCc7XG5pbXBvcnQgVG9rZW4gZnJvbSAnLi4vbW9kZWxzL3Rva2VuLW1vZGVsJztcbmltcG9ydCBBcGlFcnJvciBmcm9tICcuLi9lcnJvcnMvQXBpRXJyb3JzJztcbmltcG9ydCB7IHRva2VuZnJvbWhlYWRlciwgdmVyaWZ5QWNjZXNzVG9rZW4gfSBmcm9tICcuLi9oZWxwZXJzL3Rva2VuLWhlbHBlcic7XG5cbmNvbnN0IEFjY2Vzc1RvID0gKHJvbGVzID0gW10pID0+IHtcbiAgLypcbiAgICogcm9sZXMgcGFyYW0gY2FuIGJlIGEgc2luZ2xlIHJvbGUgc3RyaW5nIChlLmcuIFJvbGUuVXNlciBvciAnVXNlcicpXG4gICAqIG9yIGFuIGFycmF5IG9mIHJvbGVzIChlLmcuIFtSb2xlLkFkbWluLCBSb2xlLlVzZXJdIG9yIFsnQWRtaW4nLCAnVXNlciddKVxuICAgKi9cblxuICBpZiAodHlwZW9mIHJvbGVzID09PSAnc3RyaW5nJykge1xuICAgIHJvbGVzID0gW3JvbGVzXTtcbiAgfVxuXG4gIHJldHVybiBbXG4gICAgLyogXG4gICAgKiAgYXV0aGVudGljYXRlIEpXVCB0b2tlbiBhbmQgYXR0YWNoIHVzZXIgdG8gcmVxdWVzdCBvYmplY3QgKHJlcS51c2VyKVxuICAgICEgIFBsZWFzZSBub3RlOiB3b3JrIG9ubHkgd2hlbiBBdXRoTWlkZGxld2FyZSBhbHJlYWR5IGF0dGFjaCB3aXRoIGFueSByb3V0ZVxuICAgICogIGF1dGhvcml6ZSBiYXNlZCBvbiB1c2VyIHJvbGVcbiAgICAqL1xuXG4gICAgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRva2VuZnJvbWhlYWRlcihyZXEpO1xuXG4gICAgICBpZiAoIXRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnQWNjZXNzIERlbmllZCcpKTtcblxuICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeUFjY2Vzc1Rva2VuKHRva2VuKTtcblxuICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkLmV4cCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMywgJ25vdCBsb2dnZWQgaW4nKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgc3ViIH0gPSBwYXlsb2FkO1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoc3ViKTtcblxuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIC8vIHVzZXIncyByb2xlIGlzIG5vdCBhdXRob3JpemVkXG4gICAgICBpZiAoIXVzZXIgfHwgKHJvbGVzLmxlbmd0aCAmJiAhcm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdVbmF1dGhvcml6ZWQnKSk7XG5cbiAgICAgIC8vIGF1dGhlbnRpY2F0aW9uIGFuZCBhdXRob3JpemF0aW9uIHN1Y2Nlc3NmdWxcbiAgICAgIHJlcS51c2VyID0gdXNlcjtcbiAgICAgIHJlcS51c2VyLnJvbGUgPSB1c2VyLnJvbGU7XG5cbiAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbnMgPSBhd2FpdCBUb2tlbi5maW5kKHsgdXNlcjogdXNlci5pZCB9KS5wb3B1bGF0ZShcbiAgICAgICAgJ3VzZXInXG4gICAgICApO1xuXG4gICAgICByZXEudXNlci5vd25zVG9rZW4gPSAodG9rZW4pID0+XG4gICAgICAgICEhcmVmcmVzaFRva2Vucy5maW5kKCh4KSA9PiB4LnRva2VuID09PSB0b2tlbik7XG5cbiAgICAgIG5leHQoKTtcbiAgICB9LFxuICBdO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQWNjZXNzVG87XG5cbi8vIHJvdXRlci5nZXQoJy91c2VycycsIGF1dGhvcml6ZShbUm9sZXMuQURNSU5dKSwgZ2V0QWxsKTsgLy8gYWRtaW4gb25seSBjYW4gc2VlIGFsbCB1c2Vyc1xuXG4vLyByb3V0ZXIuZ2V0KCcvdXNlcnMvOmlkJywgYXV0aG9yaXplKCksIGdldEJ5SWQpOyAgICAgICAvLyBhbGwgYXV0aGVudGljYXRlZCB1c2VycyBwYXNzIGVtcHR5IG9yIHBhc3MgW1JvbGVzLlVTRVIsUm9sZXMuQURNSU5dXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFdBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFVBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFlBQUEsR0FBQUgsT0FBQTtBQUE2RSxTQUFBRCx1QkFBQUssR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUU3RSxNQUFNRyxRQUFRLEdBQUdBLENBQUNDLEtBQUssR0FBRyxFQUFFLEtBQUs7RUFDL0I7QUFDRjtBQUNBO0FBQ0E7O0VBRUUsSUFBSSxPQUFPQSxLQUFLLEtBQUssUUFBUSxFQUFFO0lBQzdCQSxLQUFLLEdBQUcsQ0FBQ0EsS0FBSyxDQUFDO0VBQ2pCO0VBRUEsT0FBTztFQUNMO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0VBRUksT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUN4QixNQUFNQyxLQUFLLEdBQUcsTUFBTSxJQUFBQyw0QkFBZSxFQUFDSixHQUFHLENBQUM7SUFFeEMsSUFBSSxDQUFDRyxLQUFLLEVBQUUsT0FBT0QsSUFBSSxDQUFDLElBQUlHLGtCQUFRLENBQUMsR0FBRyxFQUFFLGVBQWUsQ0FBQyxDQUFDO0lBRTNELE1BQU1DLE9BQU8sR0FBRyxNQUFNLElBQUFDLDhCQUFpQixFQUFDSixLQUFLLENBQUM7SUFFOUMsSUFBSSxPQUFPRyxPQUFPLENBQUNFLEdBQUcsS0FBSyxXQUFXLEVBQUU7TUFDdEMsT0FBT04sSUFBSSxDQUFDLElBQUlHLGtCQUFRLENBQUMsR0FBRyxFQUFFLGVBQWUsQ0FBQyxDQUFDO0lBQ2pEO0lBRUEsTUFBTTtNQUFFSTtJQUFJLENBQUMsR0FBR0gsT0FBTztJQUN2QixNQUFNSSxJQUFJLEdBQUcsTUFBTUMsa0JBQUksQ0FBQ0MsUUFBUSxDQUFDSCxHQUFHLENBQUM7SUFFckMsSUFBSSxDQUFDQyxJQUFJLEVBQUUsT0FBT1IsSUFBSSxDQUFDLElBQUlHLGtCQUFRLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7O0lBRTNEO0lBQ0EsSUFBSSxDQUFDSyxJQUFJLElBQUtYLEtBQUssQ0FBQ2MsTUFBTSxJQUFJLENBQUNkLEtBQUssQ0FBQ2UsUUFBUSxDQUFDSixJQUFJLENBQUNLLElBQUksQ0FBRSxFQUN2RCxPQUFPYixJQUFJLENBQUMsSUFBSUcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsY0FBYyxDQUFDLENBQUM7O0lBRWhEO0lBQ0FMLEdBQUcsQ0FBQ1UsSUFBSSxHQUFHQSxJQUFJO0lBQ2ZWLEdBQUcsQ0FBQ1UsSUFBSSxDQUFDSyxJQUFJLEdBQUdMLElBQUksQ0FBQ0ssSUFBSTtJQUV6QixNQUFNQyxhQUFhLEdBQUcsTUFBTUMsbUJBQUssQ0FBQ0MsSUFBSSxDQUFDO01BQUVSLElBQUksRUFBRUEsSUFBSSxDQUFDUztJQUFHLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQ2hFLE1BQ0YsQ0FBQztJQUVEcEIsR0FBRyxDQUFDVSxJQUFJLENBQUNXLFNBQVMsR0FBSWxCLEtBQUssSUFDekIsQ0FBQyxDQUFDYSxhQUFhLENBQUNFLElBQUksQ0FBRUksQ0FBQyxJQUFLQSxDQUFDLENBQUNuQixLQUFLLEtBQUtBLEtBQUssQ0FBQztJQUVoREQsSUFBSSxDQUFDLENBQUM7RUFDUixDQUFDLENBQ0Y7QUFDSCxDQUFDO0FBQUMsSUFBQXFCLFFBQUEsR0FFYXpCLFFBQVEsRUFFdkI7QUFFQTtBQUFBMEIsT0FBQSxDQUFBM0IsT0FBQSxHQUFBMEIsUUFBQSJ9","map":{"version":3,"names":["_userModel","_interopRequireDefault","require","_tokenModel","_ApiErrors","_tokenHelper","obj","__esModule","default","AccessTo","roles","req","res","next","token","tokenfromheader","ApiError","payload","verifyAccessToken","exp","sub","user","User","findById","length","includes","role","refreshTokens","Token","find","id","populate","ownsToken","x","_default","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/","sources":["AuthRights.js"],"sourcesContent":["import User from '../models/user-model';\nimport Token from '../models/token-model';\nimport ApiError from '../errors/ApiErrors';\nimport { tokenfromheader, verifyAccessToken } from '../helpers/token-helper';\n\nconst AccessTo = (roles = []) => {\n  /*\n   * roles param can be a single role string (e.g. Role.User or 'User')\n   * or an array of roles (e.g. [Role.Admin, Role.User] or ['Admin', 'User'])\n   */\n\n  if (typeof roles === 'string') {\n    roles = [roles];\n  }\n\n  return [\n    /* \n    *  authenticate JWT token and attach user to request object (req.user)\n    !  Please note: work only when AuthMiddleware already attach with any route\n    *  authorize based on user role\n    */\n\n    async (req, res, next) => {\n      const token = await tokenfromheader(req);\n\n      if (!token) return next(new ApiError(401, 'Access Denied'));\n\n      const payload = await verifyAccessToken(token);\n\n      if (typeof payload.exp === 'undefined') {\n        return next(new ApiError(403, 'not logged in'));\n      }\n\n      const { sub } = payload;\n      const user = await User.findById(sub);\n\n      if (!user) return next(new ApiError(401, 'User not found'));\n\n      // user's role is not authorized\n      if (!user || (roles.length && !roles.includes(user.role)))\n        return next(new ApiError(401, 'Unauthorized'));\n\n      // authentication and authorization successful\n      req.user = user;\n      req.user.role = user.role;\n\n      const refreshTokens = await Token.find({ user: user.id }).populate(\n        'user'\n      );\n\n      req.user.ownsToken = (token) =>\n        !!refreshTokens.find((x) => x.token === token);\n\n      next();\n    },\n  ];\n};\n\nexport default AccessTo;\n\n// router.get('/users', authorize([Roles.ADMIN]), getAll); // admin only can see all users\n\n// router.get('/users/:id', authorize(), getById);       // all authenticated users pass empty or pass [Roles.USER,Roles.ADMIN]\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AAA6E,SAAAD,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE7E,MAAMG,QAAQ,GAAGA,CAACC,KAAK,GAAG,EAAE,KAAK;EAC/B;AACF;AACA;AACA;;EAEE,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7BA,KAAK,GAAG,CAACA,KAAK,CAAC;EACjB;EAEA,OAAO;EACL;AACJ;AACA;AACA;AACA;;EAEI,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;IACxB,MAAMC,KAAK,GAAG,MAAM,IAAAC,4BAAe,EAACJ,GAAG,CAAC;IAExC,IAAI,CAACG,KAAK,EAAE,OAAOD,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IAE3D,MAAMC,OAAO,GAAG,MAAM,IAAAC,8BAAiB,EAACJ,KAAK,CAAC;IAE9C,IAAI,OAAOG,OAAO,CAACE,GAAG,KAAK,WAAW,EAAE;MACtC,OAAON,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IACjD;IAEA,MAAM;MAAEI;IAAI,CAAC,GAAGH,OAAO;IACvB,MAAMI,IAAI,GAAG,MAAMC,kBAAI,CAACC,QAAQ,CAACH,GAAG,CAAC;IAErC,IAAI,CAACC,IAAI,EAAE,OAAOR,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;;IAE3D;IACA,IAAI,CAACK,IAAI,IAAKX,KAAK,CAACc,MAAM,IAAI,CAACd,KAAK,CAACe,QAAQ,CAACJ,IAAI,CAACK,IAAI,CAAE,EACvD,OAAOb,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;;IAEhD;IACAL,GAAG,CAACU,IAAI,GAAGA,IAAI;IACfV,GAAG,CAACU,IAAI,CAACK,IAAI,GAAGL,IAAI,CAACK,IAAI;IAEzB,MAAMC,aAAa,GAAG,MAAMC,mBAAK,CAACC,IAAI,CAAC;MAAER,IAAI,EAAEA,IAAI,CAACS;IAAG,CAAC,CAAC,CAACC,QAAQ,CAChE,MACF,CAAC;IAEDpB,GAAG,CAACU,IAAI,CAACW,SAAS,GAAIlB,KAAK,IACzB,CAAC,CAACa,aAAa,CAACE,IAAI,CAAEI,CAAC,IAAKA,CAAC,CAACnB,KAAK,KAAKA,KAAK,CAAC;IAEhDD,IAAI,CAAC,CAAC;EACR,CAAC,CACF;AACH,CAAC;AAAC,IAAAqB,QAAA,GAEazB,QAAQ,EAEvB;AAEA;AAAA0B,OAAA,CAAA3B,OAAA,GAAA0B,QAAA"}},"mtime":1690966504436},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isLoggedIn = void 0;\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst isLoggedIn = async (req, res, next) => {\n  try {\n    const {\n      refreshToken\n    } = req.cookies;\n    if (!refreshToken) return next(new _ApiErrors.default(401, 'No refresh token provided'));\n    const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n    if (!verifiedRefToken) return next(new _ApiErrors.default(404, 'Token not found'));\n    const user = await _userModel.default.findById(verifiedRefToken.user, 'acceptTerms role _id').exec();\n    if (!user.acceptTerms || user.acceptTerms !== true) return next(new _ApiErrors.default(404, 'user not found'));\n    req.user = user;\n    const refreshTokens = await _tokenModel.default.find({\n      user: req.user.id\n    }).populate('user');\n    req.user.ownsToken = token => !!refreshTokens.find(x => x.token === token);\n    next();\n  } catch (error) {\n    next(error);\n  }\n};\nexports.isLoggedIn = isLoggedIn;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdG9rZW5UeXBlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX0FwaUVycm9ycyIsIl90b2tlbkhlbHBlciIsIl90b2tlbk1vZGVsIiwiX3VzZXJNb2RlbCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiaXNMb2dnZWRJbiIsInJlcSIsInJlcyIsIm5leHQiLCJyZWZyZXNoVG9rZW4iLCJjb29raWVzIiwiQXBpRXJyb3IiLCJ2ZXJpZmllZFJlZlRva2VuIiwidmVyaWZ5REJUb2tlbiIsInRva2VuVHlwZXMiLCJSRUZSRVNIIiwidXNlciIsIlVzZXIiLCJmaW5kQnlJZCIsImV4ZWMiLCJhY2NlcHRUZXJtcyIsInJlZnJlc2hUb2tlbnMiLCJUb2tlbiIsImZpbmQiLCJpZCIsInBvcHVsYXRlIiwib3duc1Rva2VuIiwidG9rZW4iLCJ4IiwiZXJyb3IiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0NvbXBsZXRlZC9tZXJuLXN0YWNrLWF1dGgvU2VydmVyL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0b2tlblR5cGVzIGZyb20gJy4uL2NvbmZpZy90b2tlblR5cGVzJztcbmltcG9ydCBBcGlFcnJvciBmcm9tICcuLi9lcnJvcnMvQXBpRXJyb3JzJztcbmltcG9ydCB7IHZlcmlmeURCVG9rZW4gfSBmcm9tICcuLi9oZWxwZXJzL3Rva2VuLWhlbHBlcic7XG5pbXBvcnQgVG9rZW4gZnJvbSAnLi4vbW9kZWxzL3Rva2VuLW1vZGVsJztcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyLW1vZGVsJztcblxuZXhwb3J0IGNvbnN0IGlzTG9nZ2VkSW4gPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJlZnJlc2hUb2tlbiB9ID0gcmVxLmNvb2tpZXM7XG5cbiAgICBpZiAoIXJlZnJlc2hUb2tlbilcbiAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdObyByZWZyZXNoIHRva2VuIHByb3ZpZGVkJykpO1xuXG4gICAgY29uc3QgdmVyaWZpZWRSZWZUb2tlbiA9IGF3YWl0IHZlcmlmeURCVG9rZW4oXG4gICAgICByZWZyZXNoVG9rZW4sXG4gICAgICB0b2tlblR5cGVzLlJFRlJFU0hcbiAgICApO1xuXG4gICAgaWYgKCF2ZXJpZmllZFJlZlRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnVG9rZW4gbm90IGZvdW5kJykpO1xuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoXG4gICAgICB2ZXJpZmllZFJlZlRva2VuLnVzZXIsXG4gICAgICAnYWNjZXB0VGVybXMgcm9sZSBfaWQnXG4gICAgKS5leGVjKCk7XG5cbiAgICBpZiAoIXVzZXIuYWNjZXB0VGVybXMgfHwgdXNlci5hY2NlcHRUZXJtcyAhPT0gdHJ1ZSlcbiAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICd1c2VyIG5vdCBmb3VuZCcpKTtcblxuICAgIHJlcS51c2VyID0gdXNlcjtcblxuICAgIGNvbnN0IHJlZnJlc2hUb2tlbnMgPSBhd2FpdCBUb2tlbi5maW5kKHsgdXNlcjogcmVxLnVzZXIuaWQgfSkucG9wdWxhdGUoXG4gICAgICAndXNlcidcbiAgICApO1xuXG4gICAgcmVxLnVzZXIub3duc1Rva2VuID0gKHRva2VuKSA9PlxuICAgICAgISFyZWZyZXNoVG9rZW5zLmZpbmQoKHgpID0+IHgudG9rZW4gPT09IHRva2VuKTtcblxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBuZXh0KGVycm9yKTtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsV0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsWUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsV0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksVUFBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQXdDLFNBQUFELHVCQUFBTSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRWpDLE1BQU1HLFVBQVUsR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2xELElBQUk7SUFDRixNQUFNO01BQUVDO0lBQWEsQ0FBQyxHQUFHSCxHQUFHLENBQUNJLE9BQU87SUFFcEMsSUFBSSxDQUFDRCxZQUFZLEVBQ2YsT0FBT0QsSUFBSSxDQUFDLElBQUlHLGtCQUFRLENBQUMsR0FBRyxFQUFFLDJCQUEyQixDQUFDLENBQUM7SUFFN0QsTUFBTUMsZ0JBQWdCLEdBQUcsTUFBTSxJQUFBQywwQkFBYSxFQUMxQ0osWUFBWSxFQUNaSyxtQkFBVSxDQUFDQyxPQUNiLENBQUM7SUFFRCxJQUFJLENBQUNILGdCQUFnQixFQUFFLE9BQU9KLElBQUksQ0FBQyxJQUFJRyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0lBRXhFLE1BQU1LLElBQUksR0FBRyxNQUFNQyxrQkFBSSxDQUFDQyxRQUFRLENBQzlCTixnQkFBZ0IsQ0FBQ0ksSUFBSSxFQUNyQixzQkFDRixDQUFDLENBQUNHLElBQUksQ0FBQyxDQUFDO0lBRVIsSUFBSSxDQUFDSCxJQUFJLENBQUNJLFdBQVcsSUFBSUosSUFBSSxDQUFDSSxXQUFXLEtBQUssSUFBSSxFQUNoRCxPQUFPWixJQUFJLENBQUMsSUFBSUcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUVsREwsR0FBRyxDQUFDVSxJQUFJLEdBQUdBLElBQUk7SUFFZixNQUFNSyxhQUFhLEdBQUcsTUFBTUMsbUJBQUssQ0FBQ0MsSUFBSSxDQUFDO01BQUVQLElBQUksRUFBRVYsR0FBRyxDQUFDVSxJQUFJLENBQUNRO0lBQUcsQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FDcEUsTUFDRixDQUFDO0lBRURuQixHQUFHLENBQUNVLElBQUksQ0FBQ1UsU0FBUyxHQUFJQyxLQUFLLElBQ3pCLENBQUMsQ0FBQ04sYUFBYSxDQUFDRSxJQUFJLENBQUVLLENBQUMsSUFBS0EsQ0FBQyxDQUFDRCxLQUFLLEtBQUtBLEtBQUssQ0FBQztJQUVoRG5CLElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDLE9BQU9xQixLQUFLLEVBQUU7SUFDZHJCLElBQUksQ0FBQ3FCLEtBQUssQ0FBQztFQUNiO0FBQ0YsQ0FBQztBQUFDQyxPQUFBLENBQUF6QixVQUFBLEdBQUFBLFVBQUEifQ==","map":{"version":3,"names":["_tokenTypes","_interopRequireDefault","require","_ApiErrors","_tokenHelper","_tokenModel","_userModel","obj","__esModule","default","isLoggedIn","req","res","next","refreshToken","cookies","ApiError","verifiedRefToken","verifyDBToken","tokenTypes","REFRESH","user","User","findById","exec","acceptTerms","refreshTokens","Token","find","id","populate","ownsToken","token","x","error","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/","sources":["index.js"],"sourcesContent":["import tokenTypes from '../config/tokenTypes';\nimport ApiError from '../errors/ApiErrors';\nimport { verifyDBToken } from '../helpers/token-helper';\nimport Token from '../models/token-model';\nimport User from '../models/user-model';\n\nexport const isLoggedIn = async (req, res, next) => {\n  try {\n    const { refreshToken } = req.cookies;\n\n    if (!refreshToken)\n      return next(new ApiError(401, 'No refresh token provided'));\n\n    const verifiedRefToken = await verifyDBToken(\n      refreshToken,\n      tokenTypes.REFRESH\n    );\n\n    if (!verifiedRefToken) return next(new ApiError(404, 'Token not found'));\n\n    const user = await User.findById(\n      verifiedRefToken.user,\n      'acceptTerms role _id'\n    ).exec();\n\n    if (!user.acceptTerms || user.acceptTerms !== true)\n      return next(new ApiError(404, 'user not found'));\n\n    req.user = user;\n\n    const refreshTokens = await Token.find({ user: req.user.id }).populate(\n      'user'\n    );\n\n    req.user.ownsToken = (token) =>\n      !!refreshTokens.find((x) => x.token === token);\n\n    next();\n  } catch (error) {\n    next(error);\n  }\n};\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,UAAA,GAAAL,sBAAA,CAAAC,OAAA;AAAwC,SAAAD,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEjC,MAAMG,UAAU,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAClD,IAAI;IACF,MAAM;MAAEC;IAAa,CAAC,GAAGH,GAAG,CAACI,OAAO;IAEpC,IAAI,CAACD,YAAY,EACf,OAAOD,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,2BAA2B,CAAC,CAAC;IAE7D,MAAMC,gBAAgB,GAAG,MAAM,IAAAC,0BAAa,EAC1CJ,YAAY,EACZK,mBAAU,CAACC,OACb,CAAC;IAED,IAAI,CAACH,gBAAgB,EAAE,OAAOJ,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC;IAExE,MAAMK,IAAI,GAAG,MAAMC,kBAAI,CAACC,QAAQ,CAC9BN,gBAAgB,CAACI,IAAI,EACrB,sBACF,CAAC,CAACG,IAAI,CAAC,CAAC;IAER,IAAI,CAACH,IAAI,CAACI,WAAW,IAAIJ,IAAI,CAACI,WAAW,KAAK,IAAI,EAChD,OAAOZ,IAAI,CAAC,IAAIG,kBAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;IAElDL,GAAG,CAACU,IAAI,GAAGA,IAAI;IAEf,MAAMK,aAAa,GAAG,MAAMC,mBAAK,CAACC,IAAI,CAAC;MAAEP,IAAI,EAAEV,GAAG,CAACU,IAAI,CAACQ;IAAG,CAAC,CAAC,CAACC,QAAQ,CACpE,MACF,CAAC;IAEDnB,GAAG,CAACU,IAAI,CAACU,SAAS,GAAIC,KAAK,IACzB,CAAC,CAACN,aAAa,CAACE,IAAI,CAAEK,CAAC,IAAKA,CAAC,CAACD,KAAK,KAAKA,KAAK,CAAC;IAEhDnB,IAAI,CAAC,CAAC;EACR,CAAC,CAAC,OAAOqB,KAAK,EAAE;IACdrB,IAAI,CAACqB,KAAK,CAAC;EACb;AACF,CAAC;AAACC,OAAA,CAAAzB,UAAA,GAAAA,UAAA"}},"mtime":1690966602214},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/authenticateJWT.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _jsonwebtoken = require(\"jsonwebtoken\");\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst accessSecret = 'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\nconst authenticateJWT = async (req, res, next) => {\n  const token = await (0, _tokenHelper.tokenfromheader)(req);\n  (0, _jsonwebtoken.verify)(token, accessSecret, (err, user) => {\n    if (err instanceof _jsonwebtoken.TokenExpiredError) {\n      return next(new _ApiErrors.default(401, 'Unauthorized! Token expired'));\n    }\n    if (err instanceof _jsonwebtoken.NotBeforeError) {\n      return next(new _ApiErrors.default(401, 'jwt not active'));\n    }\n    if (err instanceof _jsonwebtoken.JsonWebTokenError) {\n      return next(new _ApiErrors.default(401, 'jwt malformed'));\n    }\n    req.user = user;\n    next();\n  });\n};\nvar _default = authenticateJWT;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwicmVxdWlyZSIsIl90b2tlbkhlbHBlciIsIl9BcGlFcnJvcnMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJhY2Nlc3NTZWNyZXQiLCJhdXRoZW50aWNhdGVKV1QiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJ0b2tlbmZyb21oZWFkZXIiLCJ2ZXJpZnkiLCJlcnIiLCJ1c2VyIiwiVG9rZW5FeHBpcmVkRXJyb3IiLCJBcGlFcnJvciIsIk5vdEJlZm9yZUVycm9yIiwiSnNvbldlYlRva2VuRXJyb3IiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiYXV0aGVudGljYXRlSldULmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHZlcmlmeSxcbiAgSnNvbldlYlRva2VuRXJyb3IsXG4gIE5vdEJlZm9yZUVycm9yLFxuICBUb2tlbkV4cGlyZWRFcnJvcixcbn0gZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IHRva2VuZnJvbWhlYWRlciB9IGZyb20gJy4uL2hlbHBlcnMvdG9rZW4taGVscGVyJztcbmltcG9ydCBBcGlFcnJvciBmcm9tICcuLi9lcnJvcnMvQXBpRXJyb3JzJztcblxuY29uc3QgYWNjZXNzU2VjcmV0ID1cbiAgJ3lKemRXSWlPaUkyTkROaVpHRTJZbVV5TWpFMU5URTBORGRsTVRnMk9UY2lMQ0pwWVhRaU9qRTJPREUyTlRJeU9Ea3NJbVY0Y0NJNk1UWSc7XG5cbmNvbnN0IGF1dGhlbnRpY2F0ZUpXVCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IHRva2VuZnJvbWhlYWRlcihyZXEpO1xuXG4gIHZlcmlmeSh0b2tlbiwgYWNjZXNzU2VjcmV0LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFRva2VuRXhwaXJlZEVycm9yKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnVW5hdXRob3JpemVkISBUb2tlbiBleHBpcmVkJykpO1xuICAgIH1cbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgTm90QmVmb3JlRXJyb3IpIHtcbiAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdqd3Qgbm90IGFjdGl2ZScpKTtcbiAgICB9XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIEpzb25XZWJUb2tlbkVycm9yKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnand0IG1hbGZvcm1lZCcpKTtcbiAgICB9XG4gICAgcmVxLnVzZXIgPSB1c2VyO1xuICAgIG5leHQoKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhdXRoZW50aWNhdGVKV1Q7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsT0FBQTtBQU1BLElBQUFDLFlBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFVBQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUEyQyxTQUFBRyx1QkFBQUMsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUUzQyxNQUFNRyxZQUFZLEdBQ2hCLGdGQUFnRjtBQUVsRixNQUFNQyxlQUFlLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNoRCxNQUFNQyxLQUFLLEdBQUcsTUFBTSxJQUFBQyw0QkFBZSxFQUFDSixHQUFHLENBQUM7RUFFeEMsSUFBQUssb0JBQU0sRUFBQ0YsS0FBSyxFQUFFTCxZQUFZLEVBQUUsQ0FBQ1EsR0FBRyxFQUFFQyxJQUFJLEtBQUs7SUFDekMsSUFBSUQsR0FBRyxZQUFZRSwrQkFBaUIsRUFBRTtNQUNwQyxPQUFPTixJQUFJLENBQUMsSUFBSU8sa0JBQVEsQ0FBQyxHQUFHLEVBQUUsNkJBQTZCLENBQUMsQ0FBQztJQUMvRDtJQUNBLElBQUlILEdBQUcsWUFBWUksNEJBQWMsRUFBRTtNQUNqQyxPQUFPUixJQUFJLENBQUMsSUFBSU8sa0JBQVEsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUNsRDtJQUNBLElBQUlILEdBQUcsWUFBWUssK0JBQWlCLEVBQUU7TUFDcEMsT0FBT1QsSUFBSSxDQUFDLElBQUlPLGtCQUFRLENBQUMsR0FBRyxFQUFFLGVBQWUsQ0FBQyxDQUFDO0lBQ2pEO0lBQ0FULEdBQUcsQ0FBQ08sSUFBSSxHQUFHQSxJQUFJO0lBQ2ZMLElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUFDLElBQUFVLFFBQUEsR0FFYWIsZUFBZTtBQUFBYyxPQUFBLENBQUFoQixPQUFBLEdBQUFlLFFBQUEifQ==","map":{"version":3,"names":["_jsonwebtoken","require","_tokenHelper","_ApiErrors","_interopRequireDefault","obj","__esModule","default","accessSecret","authenticateJWT","req","res","next","token","tokenfromheader","verify","err","user","TokenExpiredError","ApiError","NotBeforeError","JsonWebTokenError","_default","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/middlewares/","sources":["authenticateJWT.js"],"sourcesContent":["import {\n  verify,\n  JsonWebTokenError,\n  NotBeforeError,\n  TokenExpiredError,\n} from 'jsonwebtoken';\nimport { tokenfromheader } from '../helpers/token-helper';\nimport ApiError from '../errors/ApiErrors';\n\nconst accessSecret =\n  'yJzdWIiOiI2NDNiZGE2YmUyMjE1NTE0NDdlMTg2OTciLCJpYXQiOjE2ODE2NTIyODksImV4cCI6MTY';\n\nconst authenticateJWT = async (req, res, next) => {\n  const token = await tokenfromheader(req);\n\n  verify(token, accessSecret, (err, user) => {\n    if (err instanceof TokenExpiredError) {\n      return next(new ApiError(401, 'Unauthorized! Token expired'));\n    }\n    if (err instanceof NotBeforeError) {\n      return next(new ApiError(401, 'jwt not active'));\n    }\n    if (err instanceof JsonWebTokenError) {\n      return next(new ApiError(401, 'jwt malformed'));\n    }\n    req.user = user;\n    next();\n  });\n};\n\nexport default authenticateJWT;\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AAMA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAC,sBAAA,CAAAH,OAAA;AAA2C,SAAAG,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3C,MAAMG,YAAY,GAChB,gFAAgF;AAElF,MAAMC,eAAe,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChD,MAAMC,KAAK,GAAG,MAAM,IAAAC,4BAAe,EAACJ,GAAG,CAAC;EAExC,IAAAK,oBAAM,EAACF,KAAK,EAAEL,YAAY,EAAE,CAACQ,GAAG,EAAEC,IAAI,KAAK;IACzC,IAAID,GAAG,YAAYE,+BAAiB,EAAE;MACpC,OAAON,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,6BAA6B,CAAC,CAAC;IAC/D;IACA,IAAIH,GAAG,YAAYI,4BAAc,EAAE;MACjC,OAAOR,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;IAClD;IACA,IAAIH,GAAG,YAAYK,+BAAiB,EAAE;MACpC,OAAOT,IAAI,CAAC,IAAIO,kBAAQ,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;IACjD;IACAT,GAAG,CAACO,IAAI,GAAGA,IAAI;IACfL,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;AACJ,CAAC;AAAC,IAAAU,QAAA,GAEab,eAAe;AAAAc,OAAA,CAAAhB,OAAA,GAAAe,QAAA"}},"mtime":1690790177000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _joi = _interopRequireDefault(require(\"joi\"));\nrequire(\"dotenv/config\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst envVarsSchema = _joi.default.object().keys({\n  NODE_ENV: _joi.default.string().valid('production', 'development', 'test').lowercase().required(),\n  PORT: _joi.default.number().default(4000),\n  SERVER_NAME: _joi.default.string().required(),\n  API_URL: _joi.default.string().required().description('Api url'),\n  CLIENT_URL: _joi.default.string().required().description('Client url'),\n  MONGO_INITDB_ROOT_USERNAME: _joi.default.string().required(),\n  MONGO_INITDB_ROOT_PASSWORD: _joi.default.string().required(),\n  MONGO_INITDB_DATABASE: _joi.default.string().required(),\n  DB_LOCAL_PORT: _joi.default.string().required(),\n  DB_DOCKER_PORT: _joi.default.string().required(),\n  DB_HOST: _joi.default.string().ip().required(),\n  // JWT_SECRET: Joi.string().required().description('JWT secret key'),\n  JWT_ACCESS_EXPIRATION_MINUTES: _joi.default.number().default(30).description('minutes after which access tokens expire'),\n  JWT_REFRESH_EXPIRATION_DAYS: _joi.default.number().default(30).description('days after which refresh tokens expire')\n}).unknown();\nconst {\n  value: envVars,\n  error\n} = envVarsSchema.prefs({\n  errors: {\n    label: 'key'\n  }\n}).validate(process.env);\nif (error) {\n  throw new Error(`Config validation error: ${error.message}`);\n}\nconst config = {\n  dev: process.env.NODE_ENV !== 'production',\n  env: envVars.NODE_ENV,\n  port: envVars.PORT,\n  clientUrl: envVars.CLIENT_URL,\n  mongoose: {\n    url: `mongodb://${envVars.MONGO_INITDB_ROOT_USERNAME}:${envVars.MONGO_INITDB_ROOT_PASSWORD}@${envVars.DB_HOST}:${envVars.DB_LOCAL_PORT}/${envVars.MONGO_INITDB_DATABASE}?authSource=admin`,\n    options: {\n      useNewUrlParser: true\n    }\n  },\n  authentication: {\n    accessToken: {\n      secret: envVars.JWT_ACCESS_SECRET,\n      expiresIn: envVars.JWT_ACCESS_EXPIRATION_MINUTES\n    },\n    refreshToken: {\n      secret: envVars.JWT_REFRESH_SECRET,\n      expiresIn: envVars.JWT_REFRESH_EXPIRATION_DAYS\n    }\n  }\n};\nvar _default = config;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfam9pIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImVudlZhcnNTY2hlbWEiLCJKb2kiLCJvYmplY3QiLCJrZXlzIiwiTk9ERV9FTlYiLCJzdHJpbmciLCJ2YWxpZCIsImxvd2VyY2FzZSIsInJlcXVpcmVkIiwiUE9SVCIsIm51bWJlciIsIlNFUlZFUl9OQU1FIiwiQVBJX1VSTCIsImRlc2NyaXB0aW9uIiwiQ0xJRU5UX1VSTCIsIk1PTkdPX0lOSVREQl9ST09UX1VTRVJOQU1FIiwiTU9OR09fSU5JVERCX1JPT1RfUEFTU1dPUkQiLCJNT05HT19JTklUREJfREFUQUJBU0UiLCJEQl9MT0NBTF9QT1JUIiwiREJfRE9DS0VSX1BPUlQiLCJEQl9IT1NUIiwiaXAiLCJKV1RfQUNDRVNTX0VYUElSQVRJT05fTUlOVVRFUyIsIkpXVF9SRUZSRVNIX0VYUElSQVRJT05fREFZUyIsInVua25vd24iLCJ2YWx1ZSIsImVudlZhcnMiLCJlcnJvciIsInByZWZzIiwiZXJyb3JzIiwibGFiZWwiLCJ2YWxpZGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsIm1lc3NhZ2UiLCJjb25maWciLCJkZXYiLCJwb3J0IiwiY2xpZW50VXJsIiwibW9uZ29vc2UiLCJ1cmwiLCJvcHRpb25zIiwidXNlTmV3VXJsUGFyc2VyIiwiYXV0aGVudGljYXRpb24iLCJhY2Nlc3NUb2tlbiIsInNlY3JldCIsIkpXVF9BQ0NFU1NfU0VDUkVUIiwiZXhwaXJlc0luIiwicmVmcmVzaFRva2VuIiwiSldUX1JFRlJFU0hfU0VDUkVUIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0NvbXBsZXRlZC9tZXJuLXN0YWNrLWF1dGgvU2VydmVyL3NyYy9jb25maWcvIiwic291cmNlcyI6WyJjb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0ICdkb3RlbnYvY29uZmlnJztcblxuY29uc3QgZW52VmFyc1NjaGVtYSA9IEpvaS5vYmplY3QoKVxuICAua2V5cyh7XG4gICAgTk9ERV9FTlY6IEpvaS5zdHJpbmcoKVxuICAgICAgLnZhbGlkKCdwcm9kdWN0aW9uJywgJ2RldmVsb3BtZW50JywgJ3Rlc3QnKVxuICAgICAgLmxvd2VyY2FzZSgpXG4gICAgICAucmVxdWlyZWQoKSxcbiAgICBQT1JUOiBKb2kubnVtYmVyKCkuZGVmYXVsdCg0MDAwKSxcbiAgICBTRVJWRVJfTkFNRTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgQVBJX1VSTDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCkuZGVzY3JpcHRpb24oJ0FwaSB1cmwnKSxcbiAgICBDTElFTlRfVVJMOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKS5kZXNjcmlwdGlvbignQ2xpZW50IHVybCcpLFxuICAgIE1PTkdPX0lOSVREQl9ST09UX1VTRVJOQU1FOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICBNT05HT19JTklUREJfUk9PVF9QQVNTV09SRDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgTU9OR09fSU5JVERCX0RBVEFCQVNFOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICBEQl9MT0NBTF9QT1JUOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICBEQl9ET0NLRVJfUE9SVDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgREJfSE9TVDogSm9pLnN0cmluZygpLmlwKCkucmVxdWlyZWQoKSxcblxuICAgIC8vIEpXVF9TRUNSRVQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLmRlc2NyaXB0aW9uKCdKV1Qgc2VjcmV0IGtleScpLFxuICAgIEpXVF9BQ0NFU1NfRVhQSVJBVElPTl9NSU5VVEVTOiBKb2kubnVtYmVyKClcbiAgICAgIC5kZWZhdWx0KDMwKVxuICAgICAgLmRlc2NyaXB0aW9uKCdtaW51dGVzIGFmdGVyIHdoaWNoIGFjY2VzcyB0b2tlbnMgZXhwaXJlJyksXG4gICAgSldUX1JFRlJFU0hfRVhQSVJBVElPTl9EQVlTOiBKb2kubnVtYmVyKClcbiAgICAgIC5kZWZhdWx0KDMwKVxuICAgICAgLmRlc2NyaXB0aW9uKCdkYXlzIGFmdGVyIHdoaWNoIHJlZnJlc2ggdG9rZW5zIGV4cGlyZScpLFxuICB9KVxuICAudW5rbm93bigpO1xuXG5jb25zdCB7IHZhbHVlOiBlbnZWYXJzLCBlcnJvciB9ID0gZW52VmFyc1NjaGVtYVxuICAucHJlZnMoeyBlcnJvcnM6IHsgbGFiZWw6ICdrZXknIH0gfSlcbiAgLnZhbGlkYXRlKHByb2Nlc3MuZW52KTtcblxuaWYgKGVycm9yKSB7XG4gIHRocm93IG5ldyBFcnJvcihgQ29uZmlnIHZhbGlkYXRpb24gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbn1cblxuY29uc3QgY29uZmlnID0ge1xuICBkZXY6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG4gIGVudjogZW52VmFycy5OT0RFX0VOVixcbiAgcG9ydDogZW52VmFycy5QT1JULFxuICBjbGllbnRVcmw6IGVudlZhcnMuQ0xJRU5UX1VSTCxcbiAgbW9uZ29vc2U6IHtcbiAgICB1cmw6IGBtb25nb2RiOi8vJHtlbnZWYXJzLk1PTkdPX0lOSVREQl9ST09UX1VTRVJOQU1FfToke2VudlZhcnMuTU9OR09fSU5JVERCX1JPT1RfUEFTU1dPUkR9QCR7ZW52VmFycy5EQl9IT1NUfToke2VudlZhcnMuREJfTE9DQUxfUE9SVH0vJHtlbnZWYXJzLk1PTkdPX0lOSVREQl9EQVRBQkFTRX0/YXV0aFNvdXJjZT1hZG1pbmAsXG4gICAgb3B0aW9uczoge1xuICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgIH0sXG4gIH0sXG4gIGF1dGhlbnRpY2F0aW9uOiB7XG4gICAgYWNjZXNzVG9rZW46IHtcbiAgICAgIHNlY3JldDogZW52VmFycy5KV1RfQUNDRVNTX1NFQ1JFVCxcbiAgICAgIGV4cGlyZXNJbjogZW52VmFycy5KV1RfQUNDRVNTX0VYUElSQVRJT05fTUlOVVRFUyxcbiAgICB9LFxuICAgIHJlZnJlc2hUb2tlbjoge1xuICAgICAgc2VjcmV0OiBlbnZWYXJzLkpXVF9SRUZSRVNIX1NFQ1JFVCxcbiAgICAgIGV4cGlyZXNJbjogZW52VmFycy5KV1RfUkVGUkVTSF9FWFBJUkFUSU9OX0RBWVMsXG4gICAgfSxcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbmZpZztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsSUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0FBLE9BQUE7QUFBdUIsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFdkIsTUFBTUcsYUFBYSxHQUFHQyxZQUFHLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQy9CQyxJQUFJLENBQUM7RUFDSkMsUUFBUSxFQUFFSCxZQUFHLENBQUNJLE1BQU0sQ0FBQyxDQUFDLENBQ25CQyxLQUFLLENBQUMsWUFBWSxFQUFFLGFBQWEsRUFBRSxNQUFNLENBQUMsQ0FDMUNDLFNBQVMsQ0FBQyxDQUFDLENBQ1hDLFFBQVEsQ0FBQyxDQUFDO0VBQ2JDLElBQUksRUFBRVIsWUFBRyxDQUFDUyxNQUFNLENBQUMsQ0FBQyxDQUFDWCxPQUFPLENBQUMsSUFBSSxDQUFDO0VBQ2hDWSxXQUFXLEVBQUVWLFlBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0csUUFBUSxDQUFDLENBQUM7RUFDcENJLE9BQU8sRUFBRVgsWUFBRyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxDQUFDRyxRQUFRLENBQUMsQ0FBQyxDQUFDSyxXQUFXLENBQUMsU0FBUyxDQUFDO0VBQ3ZEQyxVQUFVLEVBQUViLFlBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0csUUFBUSxDQUFDLENBQUMsQ0FBQ0ssV0FBVyxDQUFDLFlBQVksQ0FBQztFQUM3REUsMEJBQTBCLEVBQUVk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","map":{"version":3,"names":["_joi","_interopRequireDefault","require","obj","__esModule","default","envVarsSchema","Joi","object","keys","NODE_ENV","string","valid","lowercase","required","PORT","number","SERVER_NAME","API_URL","description","CLIENT_URL","MONGO_INITDB_ROOT_USERNAME","MONGO_INITDB_ROOT_PASSWORD","MONGO_INITDB_DATABASE","DB_LOCAL_PORT","DB_DOCKER_PORT","DB_HOST","ip","JWT_ACCESS_EXPIRATION_MINUTES","JWT_REFRESH_EXPIRATION_DAYS","unknown","value","envVars","error","prefs","errors","label","validate","process","env","Error","message","config","dev","port","clientUrl","mongoose","url","options","useNewUrlParser","authentication","accessToken","secret","JWT_ACCESS_SECRET","expiresIn","refreshToken","JWT_REFRESH_SECRET","_default","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/","sources":["config.js"],"sourcesContent":["import Joi from 'joi';\nimport 'dotenv/config';\n\nconst envVarsSchema = Joi.object()\n  .keys({\n    NODE_ENV: Joi.string()\n      .valid('production', 'development', 'test')\n      .lowercase()\n      .required(),\n    PORT: Joi.number().default(4000),\n    SERVER_NAME: Joi.string().required(),\n    API_URL: Joi.string().required().description('Api url'),\n    CLIENT_URL: Joi.string().required().description('Client url'),\n    MONGO_INITDB_ROOT_USERNAME: Joi.string().required(),\n    MONGO_INITDB_ROOT_PASSWORD: Joi.string().required(),\n    MONGO_INITDB_DATABASE: Joi.string().required(),\n    DB_LOCAL_PORT: Joi.string().required(),\n    DB_DOCKER_PORT: Joi.string().required(),\n    DB_HOST: Joi.string().ip().required(),\n\n    // JWT_SECRET: Joi.string().required().description('JWT secret key'),\n    JWT_ACCESS_EXPIRATION_MINUTES: Joi.number()\n      .default(30)\n      .description('minutes after which access tokens expire'),\n    JWT_REFRESH_EXPIRATION_DAYS: Joi.number()\n      .default(30)\n      .description('days after which refresh tokens expire'),\n  })\n  .unknown();\n\nconst { value: envVars, error } = envVarsSchema\n  .prefs({ errors: { label: 'key' } })\n  .validate(process.env);\n\nif (error) {\n  throw new Error(`Config validation error: ${error.message}`);\n}\n\nconst config = {\n  dev: process.env.NODE_ENV !== 'production',\n  env: envVars.NODE_ENV,\n  port: envVars.PORT,\n  clientUrl: envVars.CLIENT_URL,\n  mongoose: {\n    url: `mongodb://${envVars.MONGO_INITDB_ROOT_USERNAME}:${envVars.MONGO_INITDB_ROOT_PASSWORD}@${envVars.DB_HOST}:${envVars.DB_LOCAL_PORT}/${envVars.MONGO_INITDB_DATABASE}?authSource=admin`,\n    options: {\n      useNewUrlParser: true,\n    },\n  },\n  authentication: {\n    accessToken: {\n      secret: envVars.JWT_ACCESS_SECRET,\n      expiresIn: envVars.JWT_ACCESS_EXPIRATION_MINUTES,\n    },\n    refreshToken: {\n      secret: envVars.JWT_REFRESH_SECRET,\n      expiresIn: envVars.JWT_REFRESH_EXPIRATION_DAYS,\n    },\n  },\n};\n\nexport default config;\n"],"mappings":"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"}},"mtime":1689254649000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/errors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/errors/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.notFound = exports.finalError = exports.errorHandler = exports.errorConverter = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _ApiErrors = _interopRequireDefault(require(\"./ApiErrors\"));\nvar _config = _interopRequireDefault(require(\"../config/config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst errorConverter = (err, req, res, next) => {\n  let error = err;\n  if (!(error instanceof _ApiErrors.default)) {\n    const statusCode = error.statusCode || error instanceof _mongoose.default.Error ? 400 : 500;\n    const message = error.message || `${httpStatus[statusCode]}`;\n    error = new _ApiErrors.default(statusCode, message, false, err.stack);\n  }\n  next(error);\n};\nexports.errorConverter = errorConverter;\nconst errorHandler = (err, req, res, next) => {\n  let {\n    statusCode,\n    message\n  } = err;\n  if (_config.default.env === 'production' && !err.isOperational) {\n    statusCode = 500;\n    message = 'Internal Server Error';\n  }\n  res.locals['errorMessage'] = err.message;\n  const response = {\n    code: statusCode,\n    message,\n    ...(_config.default.env === 'development' && {\n      stack: err.stack\n    })\n  };\n  if (_config.default.env === 'development') {\n    console.error(err);\n  }\n  res.status(statusCode).send(response);\n};\nexports.errorHandler = errorHandler;\nconst notFound = (req, res, next) => {\n  next(new _ApiErrors.default(404, 'Not found'));\n};\nexports.notFound = notFound;\nconst finalError = (error, req, res, next) => {\n  res.status(error.status || 500).json({\n    error: {\n      status: error.status || 500,\n      message: error.message || 'Internal Server Error',\n      stack: _config.default.dev ? error.stack : ''\n    }\n  });\n};\nexports.finalError = finalError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9BcGlFcnJvcnMiLCJfY29uZmlnIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJlcnJvckNvbnZlcnRlciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJlcnJvciIsIkFwaUVycm9yIiwic3RhdHVzQ29kZSIsIm1vbmdvb3NlIiwiRXJyb3IiLCJtZXNzYWdlIiwiaHR0cFN0YXR1cyIsInN0YWNrIiwiZXhwb3J0cyIsImVycm9ySGFuZGxlciIsImNvbmZpZyIsImVudiIsImlzT3BlcmF0aW9uYWwiLCJsb2NhbHMiLCJyZXNwb25zZSIsImNvZGUiLCJjb25zb2xlIiwic3RhdHVzIiwic2VuZCIsIm5vdEZvdW5kIiwiZmluYWxFcnJvciIsImpzb24iLCJkZXYiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL2Vycm9ycy8iLCJzb3VyY2VzIjpbImVycm9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi9BcGlFcnJvcnMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcvY29uZmlnJztcblxuZXhwb3J0IGNvbnN0IGVycm9yQ29udmVydGVyID0gKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgbGV0IGVycm9yID0gZXJyO1xuICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIEFwaUVycm9yKSkge1xuICAgIGNvbnN0IHN0YXR1c0NvZGUgPVxuICAgICAgZXJyb3Iuc3RhdHVzQ29kZSB8fCBlcnJvciBpbnN0YW5jZW9mIG1vbmdvb3NlLkVycm9yID8gNDAwIDogNTAwO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlIHx8IGAke2h0dHBTdGF0dXNbc3RhdHVzQ29kZV19YDtcbiAgICBlcnJvciA9IG5ldyBBcGlFcnJvcihzdGF0dXNDb2RlLCBtZXNzYWdlLCBmYWxzZSwgZXJyLnN0YWNrKTtcbiAgfVxuICBuZXh0KGVycm9yKTtcbn07XG5cbmV4cG9ydCBjb25zdCBlcnJvckhhbmRsZXIgPSAoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICBsZXQgeyBzdGF0dXNDb2RlLCBtZXNzYWdlIH0gPSBlcnI7XG4gIGlmIChjb25maWcuZW52ID09PSAncHJvZHVjdGlvbicgJiYgIWVyci5pc09wZXJhdGlvbmFsKSB7XG4gICAgc3RhdHVzQ29kZSA9IDUwMDtcbiAgICBtZXNzYWdlID0gJ0ludGVybmFsIFNlcnZlciBFcnJvcic7XG4gIH1cblxuICByZXMubG9jYWxzWydlcnJvck1lc3NhZ2UnXSA9IGVyci5tZXNzYWdlO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgIGNvZGU6IHN0YXR1c0NvZGUsXG4gICAgbWVzc2FnZSxcbiAgICAuLi4oY29uZmlnLmVudiA9PT0gJ2RldmVsb3BtZW50JyAmJiB7IHN0YWNrOiBlcnIuc3RhY2sgfSksXG4gIH07XG5cbiAgaWYgKGNvbmZpZy5lbnYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH1cblxuICByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLnNlbmQocmVzcG9uc2UpO1xufTtcblxuZXhwb3J0IGNvbnN0IG5vdEZvdW5kID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ05vdCBmb3VuZCcpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5hbEVycm9yID0gKGVycm9yLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICByZXMuc3RhdHVzKGVycm9yLnN0YXR1cyB8fCA1MDApLmpzb24oe1xuICAgIGVycm9yOiB7XG4gICAgICBzdGF0dXM6IGVycm9yLnN0YXR1cyB8fCA1MDAsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InLFxuICAgICAgc3RhY2s6IGNvbmZpZy5kZXYgPyBlcnJvci5zdGFjayA6ICcnLFxuICAgIH0sXG4gIH0pO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQXNDLFNBQUFELHVCQUFBSSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRS9CLE1BQU1HLGNBQWMsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3JELElBQUlDLEtBQUssR0FBR0osR0FBRztFQUNmLElBQUksRUFBRUksS0FBSyxZQUFZQyxrQkFBUSxDQUFDLEVBQUU7SUFDaEMsTUFBTUMsVUFBVSxHQUNkRixLQUFLLENBQUNFLFVBQVUsSUFBSUYsS0FBSyxZQUFZRyxpQkFBUSxDQUFDQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEdBQUc7SUFDakUsTUFBTUMsT0FBTyxHQUFHTCxLQUFLLENBQUNLLE9BQU8sSUFBSyxHQUFFQyxVQUFVLENBQUNKLFVBQVUsQ0FBRSxFQUFDO0lBQzVERixLQUFLLEdBQUcsSUFBSUMsa0JBQVEsQ0FBQ0MsVUFBVSxFQUFFRyxPQUFPLEVBQUUsS0FBSyxFQUFFVCxHQUFHLENBQUNXLEtBQUssQ0FBQztFQUM3RDtFQUNBUixJQUFJLENBQUNDLEtBQUssQ0FBQztBQUNiLENBQUM7QUFBQ1EsT0FBQSxDQUFBYixjQUFBLEdBQUFBLGNBQUE7QUFFSyxNQUFNYyxZQUFZLEdBQUdBLENBQUNiLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNuRCxJQUFJO0lBQUVHLFVBQVU7SUFBRUc7RUFBUSxDQUFDLEdBQUdULEdBQUc7RUFDakMsSUFBSWMsZUFBTSxDQUFDQyxHQUFHLEtBQUssWUFBWSxJQUFJLENBQUNmLEdBQUcsQ0FBQ2dCLGFBQWEsRUFBRTtJQUNyRFYsVUFBVSxHQUFHLEdBQUc7SUFDaEJHLE9BQU8sR0FBRyx1QkFBdUI7RUFDbkM7RUFFQVAsR0FBRyxDQUFDZSxNQUFNLENBQUMsY0FBYyxDQUFDLEdBQUdqQixHQUFHLENBQUNTLE9BQU87RUFFeEMsTUFBTVMsUUFBUSxHQUFHO0lBQ2ZDLElBQUksRUFBRWIsVUFBVTtJQUNoQkcsT0FBTztJQUNQLElBQUlLLGVBQU0sQ0FBQ0MsR0FBRyxLQUFLLGFBQWEsSUFBSTtNQUFFSixLQUFLLEVBQUVYLEdBQUcsQ0FBQ1c7SUFBTSxDQUFDO0VBQzFELENBQUM7RUFFRCxJQUFJRyxlQUFNLENBQUNDLEdBQUcsS0FBSyxhQUFhLEVBQUU7SUFDaENLLE9BQU8sQ0FBQ2hCLEtBQUssQ0FBQ0osR0FBRyxDQUFDO0VBQ3BCO0VBRUFFLEdBQUcsQ0FBQ21CLE1BQU0sQ0FBQ2YsVUFBVSxDQUFDLENBQUNnQixJQUFJLENBQUNKLFFBQVEsQ0FBQztBQUN2QyxDQUFDO0FBQUNOLE9BQUEsQ0FBQUMsWUFBQSxHQUFBQSxZQUFBO0FBRUssTUFBTVUsUUFBUSxHQUFHQSxDQUFDdEIsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUMxQ0EsSUFBSSxDQUFDLElBQUlFLGtCQUFRLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3RDLENBQUM7QUFBQ08sT0FBQSxDQUFBVyxRQUFBLEdBQUFBLFFBQUE7QUFFSyxNQUFNQyxVQUFVLEdBQUdBLENBQUNwQixLQUFLLEVBQUVILEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDbkRELEdBQUcsQ0FBQ21CLE1BQU0sQ0FBQ2pCLEtBQUssQ0FBQ2lCLE1BQU0sSUFBSSxHQUFHLENBQUMsQ0FBQ0ksSUFBSSxDQUFDO0lBQ25DckIsS0FBSyxFQUFFO01BQ0xpQixNQUFNLEVBQUVqQixLQUFLLENBQUNpQixNQUFNLElBQUksR0FBRztNQUMzQlosT0FBTyxFQUFFTCxLQUFLLENBQUNLLE9BQU8sSUFBSSx1QkFBdUI7TUFDakRFLEtBQUssRUFBRUcsZUFBTSxDQUFDWSxHQUFHLEdBQUd0QixLQUFLLENBQUNPLEtBQUssR0FBRztJQUNwQztFQUNGLENBQUMsQ0FBQztBQUNKLENBQUM7QUFBQ0MsT0FBQSxDQUFBWSxVQUFBLEdBQUFBLFVBQUEifQ==","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_ApiErrors","_config","obj","__esModule","default","errorConverter","err","req","res","next","error","ApiError","statusCode","mongoose","Error","message","httpStatus","stack","exports","errorHandler","config","env","isOperational","locals","response","code","console","status","send","notFound","finalError","json","dev"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/errors/","sources":["error.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport ApiError from './ApiErrors';\nimport config from '../config/config';\n\nexport const errorConverter = (err, req, res, next) => {\n  let error = err;\n  if (!(error instanceof ApiError)) {\n    const statusCode =\n      error.statusCode || error instanceof mongoose.Error ? 400 : 500;\n    const message = error.message || `${httpStatus[statusCode]}`;\n    error = new ApiError(statusCode, message, false, err.stack);\n  }\n  next(error);\n};\n\nexport const errorHandler = (err, req, res, next) => {\n  let { statusCode, message } = err;\n  if (config.env === 'production' && !err.isOperational) {\n    statusCode = 500;\n    message = 'Internal Server Error';\n  }\n\n  res.locals['errorMessage'] = err.message;\n\n  const response = {\n    code: statusCode,\n    message,\n    ...(config.env === 'development' && { stack: err.stack }),\n  };\n\n  if (config.env === 'development') {\n    console.error(err);\n  }\n\n  res.status(statusCode).send(response);\n};\n\nexport const notFound = (req, res, next) => {\n  next(new ApiError(404, 'Not found'));\n};\n\nexport const finalError = (error, req, res, next) => {\n  res.status(error.status || 500).json({\n    error: {\n      status: error.status || 500,\n      message: error.message || 'Internal Server Error',\n      stack: config.dev ? error.stack : '',\n    },\n  });\n};\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE/B,MAAMG,cAAc,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACrD,IAAIC,KAAK,GAAGJ,GAAG;EACf,IAAI,EAAEI,KAAK,YAAYC,kBAAQ,CAAC,EAAE;IAChC,MAAMC,UAAU,GACdF,KAAK,CAACE,UAAU,IAAIF,KAAK,YAAYG,iBAAQ,CAACC,KAAK,GAAG,GAAG,GAAG,GAAG;IACjE,MAAMC,OAAO,GAAGL,KAAK,CAACK,OAAO,IAAK,GAAEC,UAAU,CAACJ,UAAU,CAAE,EAAC;IAC5DF,KAAK,GAAG,IAAIC,kBAAQ,CAACC,UAAU,EAAEG,OAAO,EAAE,KAAK,EAAET,GAAG,CAACW,KAAK,CAAC;EAC7D;EACAR,IAAI,CAACC,KAAK,CAAC;AACb,CAAC;AAACQ,OAAA,CAAAb,cAAA,GAAAA,cAAA;AAEK,MAAMc,YAAY,GAAGA,CAACb,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACnD,IAAI;IAAEG,UAAU;IAAEG;EAAQ,CAAC,GAAGT,GAAG;EACjC,IAAIc,eAAM,CAACC,GAAG,KAAK,YAAY,IAAI,CAACf,GAAG,CAACgB,aAAa,EAAE;IACrDV,UAAU,GAAG,GAAG;IAChBG,OAAO,GAAG,uBAAuB;EACnC;EAEAP,GAAG,CAACe,MAAM,CAAC,cAAc,CAAC,GAAGjB,GAAG,CAACS,OAAO;EAExC,MAAMS,QAAQ,GAAG;IACfC,IAAI,EAAEb,UAAU;IAChBG,OAAO;IACP,IAAIK,eAAM,CAACC,GAAG,KAAK,aAAa,IAAI;MAAEJ,KAAK,EAAEX,GAAG,CAACW;IAAM,CAAC;EAC1D,CAAC;EAED,IAAIG,eAAM,CAACC,GAAG,KAAK,aAAa,EAAE;IAChCK,OAAO,CAAChB,KAAK,CAACJ,GAAG,CAAC;EACpB;EAEAE,GAAG,CAACmB,MAAM,CAACf,UAAU,CAAC,CAACgB,IAAI,CAACJ,QAAQ,CAAC;AACvC,CAAC;AAACN,OAAA,CAAAC,YAAA,GAAAA,YAAA;AAEK,MAAMU,QAAQ,GAAGA,CAACtB,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC1CA,IAAI,CAAC,IAAIE,kBAAQ,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;AACtC,CAAC;AAACO,OAAA,CAAAW,QAAA,GAAAA,QAAA;AAEK,MAAMC,UAAU,GAAGA,CAACpB,KAAK,EAAEH,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACnDD,GAAG,CAACmB,MAAM,CAACjB,KAAK,CAACiB,MAAM,IAAI,GAAG,CAAC,CAACI,IAAI,CAAC;IACnCrB,KAAK,EAAE;MACLiB,MAAM,EAAEjB,KAAK,CAACiB,MAAM,IAAI,GAAG;MAC3BZ,OAAO,EAAEL,KAAK,CAACK,OAAO,IAAI,uBAAuB;MACjDE,KAAK,EAAEG,eAAM,CAACY,GAAG,GAAGtB,KAAK,CAACO,KAAK,GAAG;IACpC;EACF,CAAC,CAAC;AACJ,CAAC;AAACC,OAAA,CAAAY,UAAA,GAAAA,UAAA"}},"mtime":1690644355000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/database/dbConn.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"'use strict';\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _config = _interopRequireDefault(require(\"../config/config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_mongoose.default.Promise = global.Promise;\n\n// in dev environment\n_mongoose.default.set('debug', true);\n_mongoose.default.set('strictQuery', true);\nfunction onError(err) {\n  console.error(`MongoDB connection error: ${err}`);\n  _mongoose.default.connection.on('error', console.error.bind(console, 'connection error'));\n}\nfunction onConnected() {\n  _mongoose.default.connection.once('open', function callback() {\n    // mongoose.set('debug', true);\n    // print mongoose logs in dev env\n    if (_config.default.dev) {\n      _mongoose.default.set('debug', true);\n    }\n    console.log('Connected to MongoDB!');\n  });\n}\n_mongoose.default.connection.on('disconnected', () => {\n  console.warn('Mongoose connection is disconnected');\n});\nfunction onReconnected() {\n  console.warn('MongoDB reconnected!');\n}\nconst onSIGINT = async () => {\n  console.warn('MongoDB default connection disconnected through app termination!');\n  await _mongoose.default.connection.close();\n  process.exit(0);\n};\n(async () => {\n  await _mongoose.default.connect(_config.default.mongoose.url, _config.default.mongoose.options);\n})();\nconst db = _mongoose.default.connection;\ndb.on('error', onError);\ndb.on('connected', onConnected);\ndb.on('reconnected', onReconnected);\nprocess.on('SIGINT', onSIGINT);\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jb25maWciLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm1vbmdvb3NlIiwiUHJvbWlzZSIsImdsb2JhbCIsInNldCIsIm9uRXJyb3IiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25uZWN0aW9uIiwib24iLCJiaW5kIiwib25Db25uZWN0ZWQiLCJvbmNlIiwiY2FsbGJhY2siLCJjb25maWciLCJkZXYiLCJsb2ciLCJ3YXJuIiwib25SZWNvbm5lY3RlZCIsIm9uU0lHSU5UIiwiY2xvc2UiLCJwcm9jZXNzIiwiZXhpdCIsImNvbm5lY3QiLCJ1cmwiLCJvcHRpb25zIiwiZGIiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0NvbXBsZXRlZC9tZXJuLXN0YWNrLWF1dGgvU2VydmVyL3NyYy9kYXRhYmFzZS8iLCJzb3VyY2VzIjpbImRiQ29ubi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZy9jb25maWcnO1xuXG5tb25nb29zZS5Qcm9taXNlID0gZ2xvYmFsLlByb21pc2U7XG5cbi8vIGluIGRldiBlbnZpcm9ubWVudFxubW9uZ29vc2Uuc2V0KCdkZWJ1ZycsIHRydWUpO1xubW9uZ29vc2Uuc2V0KCdzdHJpY3RRdWVyeScsIHRydWUpO1xuXG5mdW5jdGlvbiBvbkVycm9yKGVycikge1xuICBjb25zb2xlLmVycm9yKGBNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6ICR7ZXJyfWApO1xuICBtb25nb29zZS5jb25uZWN0aW9uLm9uKFxuICAgICdlcnJvcicsXG4gICAgY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUsICdjb25uZWN0aW9uIGVycm9yJylcbiAgKTtcbn1cblxuZnVuY3Rpb24gb25Db25uZWN0ZWQoKSB7XG4gIG1vbmdvb3NlLmNvbm5lY3Rpb24ub25jZSgnb3BlbicsIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgIC8vIG1vbmdvb3NlLnNldCgnZGVidWcnLCB0cnVlKTtcbiAgICAvLyBwcmludCBtb25nb29zZSBsb2dzIGluIGRldiBlbnZcbiAgICBpZiAoY29uZmlnLmRldikge1xuICAgICAgbW9uZ29vc2Uuc2V0KCdkZWJ1ZycsIHRydWUpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIE1vbmdvREIhJyk7XG4gIH0pO1xufVxuXG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG4gIGNvbnNvbGUud2FybignTW9uZ29vc2UgY29ubmVjdGlvbiBpcyBkaXNjb25uZWN0ZWQnKTtcbn0pO1xuXG5mdW5jdGlvbiBvblJlY29ubmVjdGVkKCkge1xuICBjb25zb2xlLndhcm4oJ01vbmdvREIgcmVjb25uZWN0ZWQhJyk7XG59XG5cbmNvbnN0IG9uU0lHSU5UID0gYXN5bmMgKCkgPT4ge1xuICBjb25zb2xlLndhcm4oXG4gICAgJ01vbmdvREIgZGVmYXVsdCBjb25uZWN0aW9uIGRpc2Nvbm5lY3RlZCB0aHJvdWdoIGFwcCB0ZXJtaW5hdGlvbiEnXG4gICk7XG4gIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgcHJvY2Vzcy5leGl0KDApO1xufTtcblxuKGFzeW5jICgpID0+IHtcbiAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChjb25maWcubW9uZ29vc2UudXJsLCBjb25maWcubW9uZ29vc2Uub3B0aW9ucyk7XG59KSgpO1xuXG5jb25zdCBkYiA9IG1vbmdvb3NlLmNvbm5lY3Rpb247XG5cbmRiLm9uKCdlcnJvcicsIG9uRXJyb3IpO1xuZGIub24oJ2Nvbm5lY3RlZCcsIG9uQ29ubmVjdGVkKTtcbmRiLm9uKCdyZWNvbm5lY3RlZCcsIG9uUmVjb25uZWN0ZWQpO1xuXG5wcm9jZXNzLm9uKCdT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","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_config","obj","__esModule","default","mongoose","Promise","global","set","onError","err","console","error","connection","on","bind","onConnected","once","callback","config","dev","log","warn","onReconnected","onSIGINT","close","process","exit","connect","url","options","db","module","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/database/","sources":["dbConn.js"],"sourcesContent":["'use strict';\n\nimport mongoose from 'mongoose';\nimport config from '../config/config';\n\nmongoose.Promise = global.Promise;\n\n// in dev environment\nmongoose.set('debug', true);\nmongoose.set('strictQuery', true);\n\nfunction onError(err) {\n  console.error(`MongoDB connection error: ${err}`);\n  mongoose.connection.on(\n    'error',\n    console.error.bind(console, 'connection error')\n  );\n}\n\nfunction onConnected() {\n  mongoose.connection.once('open', function callback() {\n    // mongoose.set('debug', true);\n    // print mongoose logs in dev env\n    if (config.dev) {\n      mongoose.set('debug', true);\n    }\n    console.log('Connected to MongoDB!');\n  });\n}\n\nmongoose.connection.on('disconnected', () => {\n  console.warn('Mongoose connection is disconnected');\n});\n\nfunction onReconnected() {\n  console.warn('MongoDB reconnected!');\n}\n\nconst onSIGINT = async () => {\n  console.warn(\n    'MongoDB default connection disconnected through app termination!'\n  );\n  await mongoose.connection.close();\n  process.exit(0);\n};\n\n(async () => {\n  await mongoose.connect(config.mongoose.url, config.mongoose.options);\n})();\n\nconst db = mongoose.connection;\n\ndb.on('error', onError);\ndb.on('connected', onConnected);\ndb.on('reconnected', onReconnected);\n\nprocess.on('SIGINT', onSIGINT);\n\nmodule.exports = db;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtCG,iBAAQ,CAACC,OAAO,GAAGC,MAAM,CAACD,OAAO;;AAEjC;AACAD,iBAAQ,CAACG,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC;AAC3BH,iBAAQ,CAACG,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC;AAEjC,SAASC,OAAOA,CAACC,GAAG,EAAE;EACpBC,OAAO,CAACC,KAAK,CAAE,6BAA4BF,GAAI,EAAC,CAAC;EACjDL,iBAAQ,CAACQ,UAAU,CAACC,EAAE,CACpB,OAAO,EACPH,OAAO,CAACC,KAAK,CAACG,IAAI,CAACJ,OAAO,EAAE,kBAAkB,CAChD,CAAC;AACH;AAEA,SAASK,WAAWA,CAAA,EAAG;EACrBX,iBAAQ,CAACQ,UAAU,CAACI,IAAI,CAAC,MAAM,EAAE,SAASC,QAAQA,CAAA,EAAG;IACnD;IACA;IACA,IAAIC,eAAM,CAACC,GAAG,EAAE;MACdf,iBAAQ,CAACG,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC;IAC7B;IACAG,OAAO,CAACU,GAAG,CAAC,uBAAuB,CAAC;EACtC,CAAC,CAAC;AACJ;AAEAhB,iBAAQ,CAACQ,UAAU,CAACC,EAAE,CAAC,cAAc,EAAE,MAAM;EAC3CH,OAAO,CAACW,IAAI,CAAC,qCAAqC,CAAC;AACrD,CAAC,CAAC;AAEF,SAASC,aAAaA,CAAA,EAAG;EACvBZ,OAAO,CAACW,IAAI,CAAC,sBAAsB,CAAC;AACtC;AAEA,MAAME,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAC3Bb,OAAO,CAACW,IAAI,CACV,kEACF,CAAC;EACD,MAAMjB,iBAAQ,CAACQ,UAAU,CAACY,KAAK,CAAC,CAAC;EACjCC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;AACjB,CAAC;AAED,CAAC,YAAY;EACX,MAAMtB,iBAAQ,CAACuB,OAAO,CAACT,eAAM,CAACd,QAAQ,CAACwB,GAAG,EAAEV,eAAM,CAACd,QAAQ,CAACyB,OAAO,CAAC;AACtE,CAAC,EAAE,CAAC;AAEJ,MAAMC,EAAE,GAAG1B,iBAAQ,CAACQ,UAAU;AAE9BkB,EAAE,CAACjB,EAAE,CAAC,OAAO,EAAEL,OAAO,CAAC;AACvBsB,EAAE,CAACjB,EAAE,CAAC,WAAW,EAAEE,WAAW,CAAC;AAC/Be,EAAE,CAACjB,EAAE,CAAC,aAAa,EAAES,aAAa,CAAC;AAEnCG,OAAO,CAACZ,EAAE,CAAC,QAAQ,EAAEU,QAAQ,CAAC;AAE9BQ,MAAM,CAACC,OAAO,GAAGF,EAAE"}},"mtime":1689257411000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authRoutes = _interopRequireDefault(require(\"./auth-routes\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = app => {\n  (0, _authRoutes.default)(app);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXV0aFJvdXRlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfZGVmYXVsdCIsImFwcCIsImF1dGhSb3V0ZXMiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yYWovRG9jdW1lbnRzL0NvbXBsZXRlZC9tZXJuLXN0YWNrLWF1dGgvU2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXV0aFJvdXRlcyBmcm9tICcuL2F1dGgtcm91dGVzJztcblxuZXhwb3J0IGRlZmF1bHQgKGFwcCkgPT4ge1xuICBhdXRoUm91dGVzKGFwcCk7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBdUMsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFBQSxJQUFBRyxRQUFBLEdBRXZCQyxHQUFHLElBQUs7RUFDdEIsSUFBQUMsbUJBQVUsRUFBQ0QsR0FBRyxDQUFDO0FBQ2pCLENBQUM7QUFBQUUsT0FBQSxDQUFBSixPQUFBLEdBQUFDLFFBQUEifQ==","map":{"version":3,"names":["_authRoutes","_interopRequireDefault","require","obj","__esModule","default","_default","app","authRoutes","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/","sources":["index.js"],"sourcesContent":["import authRoutes from './auth-routes';\n\nexport default (app) => {\n  authRoutes(app);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAuC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,IAAAG,QAAA,GAEvBC,GAAG,IAAK;EACtB,IAAAC,mBAAU,EAACD,GAAG,CAAC;AACjB,CAAC;AAAAE,OAAA,CAAAJ,OAAA,GAAAC,QAAA"}},"mtime":1689261410000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/auth-routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authController = _interopRequireDefault(require(\"../controllers/auth-controller\"));\nvar _JoiValidate = _interopRequireDefault(require(\"../middlewares/JoiValidate\"));\nvar _authValidation = _interopRequireDefault(require(\"../validation/auth-validation\"));\nvar _AuthRights = _interopRequireDefault(require(\"../middlewares/AuthRights\"));\nvar _middlewares = require(\"../middlewares\");\nvar _authenticateJWT = _interopRequireDefault(require(\"../middlewares/authenticateJWT\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = app => {\n  app.post('/signup', (0, _JoiValidate.default)(_authValidation.default.register), _authController.default.postRegisterUser);\n  app.post('/login/email', (0, _JoiValidate.default)(_authValidation.default.loginWithEmail), _authController.default.postLoginUserWithEmail);\n  app.post('/login/username', (0, _JoiValidate.default)(_authValidation.default.loginWithUsername), _authController.default.postLoginUserWithUsername);\n  app.post('/login/phone', (0, _JoiValidate.default)(_authValidation.default.loginWithPhone), _authController.default.postLoginUserWithPhone);\n  app.get('/logout', _middlewares.isLoggedIn, _authController.default.postLogoutUser);\n  app.post('/revoke-all-tokens', _middlewares.isLoggedIn, _authController.default.postLogoutUserFromAllScreens);\n  app.get('/refresh', _middlewares.isLoggedIn, _authController.default.getNewTokens);\n  app.get('/me', _authenticateJWT.default, _middlewares.isLoggedIn, (0, _AuthRights.default)(), _authController.default.getUserCredentials);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXV0aENvbnRyb2xsZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9Kb2lWYWxpZGF0ZSIsIl9hdXRoVmFsaWRhdGlvbiIsIl9BdXRoUmlnaHRzIiwiX21pZGRsZXdhcmVzIiwiX2F1dGhlbnRpY2F0ZUpXVCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2RlZmF1bHQiLCJhcHAiLCJwb3N0IiwiSm9pVmFsaWRhdGUiLCJhdXRoVmFsaWRhdGlvbiIsInJlZ2lzdGVyIiwiYXV0aENvbnRyb2xsZXIiLCJwb3N0UmVnaXN0ZXJVc2VyIiwibG9naW5XaXRoRW1haWwiLCJwb3N0TG9naW5Vc2VyV2l0aEVtYWlsIiwibG9naW5XaXRoVXNlcm5hbWUiLCJwb3N0TG9naW5Vc2VyV2l0aFVzZXJuYW1lIiwibG9naW5XaXRoUGhvbmUiLCJwb3N0TG9naW5Vc2VyV2l0aFBob25lIiwiZ2V0IiwiaXNMb2dnZWRJbiIsInBvc3RMb2dvdXRVc2VyIiwicG9zdExvZ291dFVzZXJGcm9tQWxsU2NyZWVucyIsImdldE5ld1Rva2VucyIsImF1dGhlbnRpY2F0ZUpXVCIsIkFjY2Vzc1RvIiwiZ2V0VXNlckNyZWRlbnRpYWxzIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsiYXV0aC1yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF1dGhDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2F1dGgtY29udHJvbGxlcic7XG5pbXBvcnQgSm9pVmFsaWRhdGUgZnJvbSAnLi4vbWlkZGxld2FyZXMvSm9pVmFsaWRhdGUnO1xuaW1wb3J0IGF1dGhWYWxpZGF0aW9uIGZyb20gJy4uL3ZhbGlkYXRpb24vYXV0aC12YWxpZGF0aW9uJztcbmltcG9ydCBBY2Nlc3NUbyBmcm9tICcuLi9taWRkbGV3YXJlcy9BdXRoUmlnaHRzJztcbmltcG9ydCB7IGlzTG9nZ2VkSW4gfSBmcm9tICcuLi9taWRkbGV3YXJlcyc7XG5pbXBvcnQgYXV0aGVudGljYXRlSldUIGZyb20gJy4uL21pZGRsZXdhcmVzL2F1dGhlbnRpY2F0ZUpXVCc7XG5cbmV4cG9ydCBkZWZhdWx0IChhcHApID0+IHtcbiAgYXBwLnBvc3QoXG4gICAgJy9zaWdudXAnLFxuICAgIEpvaVZhbGlkYXRlKGF1dGhWYWxpZGF0aW9uLnJlZ2lzdGVyKSxcbiAgICBhdXRoQ29udHJvbGxlci5wb3N0UmVnaXN0ZXJVc2VyXG4gICk7XG5cbiAgYXBwLnBvc3QoXG4gICAgJy9sb2dpbi9lbWFpbCcsXG4gICAgSm9pVmFsaWRhdGUoYXV0aFZhbGlkYXRpb24ubG9naW5XaXRoRW1haWwpLFxuICAgIGF1dGhDb250cm9sbGVyLnBvc3RMb2dpblVzZXJXaXRoRW1haWxcbiAgKTtcblxuICBhcHAucG9zdChcbiAgICAnL2xvZ2luL3VzZXJuYW1lJyxcbiAgICBKb2lWYWxpZGF0ZShhdXRoVmFsaWRhdGlvbi5sb2dpbldpdGhVc2VybmFtZSksXG4gICAgYXV0aENvbnRyb2xsZXIucG9zdExvZ2luVXNlcldpdGhVc2VybmFtZVxuICApO1xuXG4gIGFwcC5wb3N0KFxuICAgICcvbG9naW4vcGhvbmUnLFxuICAgIEpvaVZhbGlkYXRlKGF1dGhWYWxpZGF0aW9uLmxvZ2luV2l0aFBob25lKSxcbiAgICBhdXRoQ29udHJvbGxlci5wb3N0TG9naW5Vc2VyV2l0aFBob25lXG4gICk7XG5cbiAgYXBwLmdldCgnL2xvZ291dCcsIGlzTG9nZ2VkSW4sIGF1dGhDb250cm9sbGVyLnBvc3RMb2dvdXRVc2VyKTtcbiAgYXBwLnBvc3QoXG4gICAgJy9yZXZva2UtYWxsLXRva2VucycsXG4gICAgaXNMb2dnZWRJbixcbiAgICBhdXRoQ29udHJvbGxlci5wb3N0TG9nb3V0VXNlckZyb21BbGxTY3JlZW5zXG4gICk7XG4gIGFwcC5nZXQoJy9yZWZyZXNoJywgaXNMb2dnZWRJbiwgYXV0aENvbnRyb2xsZXIuZ2V0TmV3VG9rZW5zKTtcblxuICBhcHAuZ2V0KFxuICAgICcvbWUnLFxuICAgIGF1dGhlbnRpY2F0ZUpXVCxcbiAgICBpc0xvZ2dlZEluLFxuICAgIEFjY2Vzc1RvKCksXG4gICAgYXV0aENvbnRyb2xsZXIuZ2V0VXNlckNyZWRlbnRpYWxzXG4gICk7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxlQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxlQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxZQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxnQkFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQTZELFNBQUFELHVCQUFBTyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBQUEsSUFBQUcsUUFBQSxHQUU3Q0MsR0FBRyxJQUFLO0VBQ3RCQSxHQUFHLENBQUNDLElBQUksQ0FDTixTQUFTLEVBQ1QsSUFBQUMsb0JBQVcsRUFBQ0MsdUJBQWMsQ0FBQ0MsUUFBUSxDQUFDLEVBQ3BDQyx1QkFBYyxDQUFDQyxnQkFDakIsQ0FBQztFQUVETixHQUFHLENBQUNDLElBQUksQ0FDTixjQUFjLEVBQ2QsSUFBQUMsb0JBQVcsRUFBQ0MsdUJBQWMsQ0FBQ0ksY0FBYyxDQUFDLEVBQzFDRix1QkFBYyxDQUFDRyxzQkFDakIsQ0FBQztFQUVEUixHQUFHLENBQUNDLElBQUksQ0FDTixpQkFBaUIsRUFDakIsSUFBQUMsb0JBQVcsRUFBQ0MsdUJBQWMsQ0FBQ00saUJBQWlCLENBQUMsRUFDN0NKLHVCQUFjLENBQUNLLHlCQUNqQixDQUFDO0VBRURWLEdBQUcsQ0FBQ0MsSUFBSSxDQUNOLGNBQWMsRUFDZCxJQUFBQyxvQkFBVyxFQUFDQyx1QkFBYyxDQUFDUSxjQUFjLENBQUMsRUFDMUNOLHVCQUFjLENBQUNPLHNCQUNqQixDQUFDO0VBRURaLEdBQUcsQ0FBQ2EsR0FBRyxDQUFDLFNBQVMsRUFBRUMsdUJBQVUsRUFBRVQsdUJBQWMsQ0FBQ1UsY0FBYyxDQUFDO0VBQzdEZixHQUFHLENBQUNDLElBQUksQ0FDTixvQkFBb0IsRUFDcEJhLHVCQUFVLEVBQ1ZULHVCQUFjLENBQUNXLDRCQUNqQixDQUFDO0VBQ0RoQixHQUFHLENBQUNhLEdBQUcsQ0FBQyxVQUFVLEVBQUVDLHVCQUFVLEVBQUVULHVCQUFjLENBQUNZLFlBQVksQ0FBQztFQUU1RGpCLEdBQUcsQ0FBQ2EsR0FBRyxDQUNMLEtBQUssRUFDTEssd0JBQWUsRUFDZkosdUJBQVUsRUFDVixJQUFBSyxtQkFBUSxFQUFDLENBQUMsRUFDVmQsdUJBQWMsQ0FBQ2Usa0JBQ2pCLENBQUM7QUFDSCxDQUFDO0FBQUFDLE9BQUEsQ0FBQXZCLE9BQUEsR0FBQUMsUUFBQSJ9","map":{"version":3,"names":["_authController","_interopRequireDefault","require","_JoiValidate","_authValidation","_AuthRights","_middlewares","_authenticateJWT","obj","__esModule","default","_default","app","post","JoiValidate","authValidation","register","authController","postRegisterUser","loginWithEmail","postLoginUserWithEmail","loginWithUsername","postLoginUserWithUsername","loginWithPhone","postLoginUserWithPhone","get","isLoggedIn","postLogoutUser","postLogoutUserFromAllScreens","getNewTokens","authenticateJWT","AccessTo","getUserCredentials","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/routes/","sources":["auth-routes.js"],"sourcesContent":["import authController from '../controllers/auth-controller';\nimport JoiValidate from '../middlewares/JoiValidate';\nimport authValidation from '../validation/auth-validation';\nimport AccessTo from '../middlewares/AuthRights';\nimport { isLoggedIn } from '../middlewares';\nimport authenticateJWT from '../middlewares/authenticateJWT';\n\nexport default (app) => {\n  app.post(\n    '/signup',\n    JoiValidate(authValidation.register),\n    authController.postRegisterUser\n  );\n\n  app.post(\n    '/login/email',\n    JoiValidate(authValidation.loginWithEmail),\n    authController.postLoginUserWithEmail\n  );\n\n  app.post(\n    '/login/username',\n    JoiValidate(authValidation.loginWithUsername),\n    authController.postLoginUserWithUsername\n  );\n\n  app.post(\n    '/login/phone',\n    JoiValidate(authValidation.loginWithPhone),\n    authController.postLoginUserWithPhone\n  );\n\n  app.get('/logout', isLoggedIn, authController.postLogoutUser);\n  app.post(\n    '/revoke-all-tokens',\n    isLoggedIn,\n    authController.postLogoutUserFromAllScreens\n  );\n  app.get('/refresh', isLoggedIn, authController.getNewTokens);\n\n  app.get(\n    '/me',\n    authenticateJWT,\n    isLoggedIn,\n    AccessTo(),\n    authController.getUserCredentials\n  );\n};\n"],"mappings":";;;;;;AAAA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,eAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,YAAA,GAAAJ,OAAA;AACA,IAAAK,gBAAA,GAAAN,sBAAA,CAAAC,OAAA;AAA6D,SAAAD,uBAAAO,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,IAAAG,QAAA,GAE7CC,GAAG,IAAK;EACtBA,GAAG,CAACC,IAAI,CACN,SAAS,EACT,IAAAC,oBAAW,EAACC,uBAAc,CAACC,QAAQ,CAAC,EACpCC,uBAAc,CAACC,gBACjB,CAAC;EAEDN,GAAG,CAACC,IAAI,CACN,cAAc,EACd,IAAAC,oBAAW,EAACC,uBAAc,CAACI,cAAc,CAAC,EAC1CF,uBAAc,CAACG,sBACjB,CAAC;EAEDR,GAAG,CAACC,IAAI,CACN,iBAAiB,EACjB,IAAAC,oBAAW,EAACC,uBAAc,CAACM,iBAAiB,CAAC,EAC7CJ,uBAAc,CAACK,yBACjB,CAAC;EAEDV,GAAG,CAACC,IAAI,CACN,cAAc,EACd,IAAAC,oBAAW,EAACC,uBAAc,CAACQ,cAAc,CAAC,EAC1CN,uBAAc,CAACO,sBACjB,CAAC;EAEDZ,GAAG,CAACa,GAAG,CAAC,SAAS,EAAEC,uBAAU,EAAET,uBAAc,CAACU,cAAc,CAAC;EAC7Df,GAAG,CAACC,IAAI,CACN,oBAAoB,EACpBa,uBAAU,EACVT,uBAAc,CAACW,4BACjB,CAAC;EACDhB,GAAG,CAACa,GAAG,CAAC,UAAU,EAAEC,uBAAU,EAAET,uBAAc,CAACY,YAAY,CAAC;EAE5DjB,GAAG,CAACa,GAAG,CACL,KAAK,EACLK,wBAAe,EACfJ,uBAAU,EACV,IAAAK,mBAAQ,EAAC,CAAC,EACVd,uBAAc,CAACe,kBACjB,CAAC;AACH,CAAC;AAAAC,OAAA,CAAAvB,OAAA,GAAAC,QAAA"}},"mtime":1690644035000},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/controllers/auth-controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _roles = _interopRequireDefault(require(\"../config/roles\"));\nvar _tokenTypes = _interopRequireDefault(require(\"../config/tokenTypes\"));\nvar _mongoHelpers = require(\"../database/mongoHelpers\");\nvar _ApiErrors = _interopRequireDefault(require(\"../errors/ApiErrors\"));\nvar _tokenHelper = require(\"../helpers/token-helper\");\nvar _tokenModel = _interopRequireDefault(require(\"../models/token-model\"));\nvar _userModel = _interopRequireDefault(require(\"../models/user-model\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = {\n  postRegisterUser: async (req, res, next) => {\n    try {\n      const {\n        name,\n        email,\n        phone,\n        username,\n        password,\n        confirmPassword,\n        acceptTerms\n      } = req.body;\n      if (await _userModel.default.isEmailTaken(email)) return next(new _ApiErrors.default(400, `Email ${email} already registered`));\n      const user = new _userModel.default();\n\n      // first registered account is an admin\n      const isFirstAccount = (await (0, _mongoHelpers.countDocuments)(_userModel.default)) === 0;\n      user.role = isFirstAccount ? _roles.default.Admin : _roles.default.User;\n      user.name = name;\n      user.email = email;\n      user.username = username;\n      user.phone = phone;\n      user.password = password;\n      user.confirmPassword = confirmPassword;\n      user.acceptTerms = acceptTerms;\n      await user.save();\n      res.status(201).json({\n        message: 'User successfully registered!'\n      });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithEmail: async (req, res, next) => {\n    const {\n      email,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        email: email\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithUsername: async (req, res, next) => {\n    const {\n      username,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        username: username\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithPhone: async (req, res, next) => {\n    const {\n      phone,\n      password\n    } = req.body;\n    try {\n      const user = await _userModel.default.findOne({\n        phone: phone\n      });\n      if (!user || !(await user.isPasswordMatch(password))) return next(new _ApiErrors.default(401, 'Invalid credentials'));\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: true\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUser: async (req, res, next) => {\n    // accept token from cookie\n    const {\n      refreshToken\n    } = req.cookies;\n    try {\n      if (!refreshToken) return next(new _ApiErrors.default(400, 'Token is required'));\n      const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n      if (!verifiedRefToken) return next(new _ApiErrors.default(404, 'Token not found'));\n      if (!(0, _mongoHelpers.isValidId)(req.user.id)) return next(new _ApiErrors.default(400, 'User not found'));\n      const user = await _userModel.default.findById(req.user.id);\n      if (!user) return next(new _ApiErrors.default(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(refreshToken) && req.user.role !== _roles.default.Admin) return next(new _ApiErrors.default(401, 'Unauthorized'));\n      const refreshTokenInDb = await _tokenModel.default.findOne({\n        refreshToken,\n        type: _tokenTypes.default.REFRESH,\n        blacklisted: false\n      });\n      if (!refreshTokenInDb) return next(new _ApiErrors.default(404, 'Not found'));\n      await refreshTokenInDb.deleteOne();\n      return res.status(200).clearCookie('refreshToken', {\n        httpOnly: true\n      }).end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUserFromAllScreens: async (req, res, next) => {\n    const token = req.body.token || req.cookies.refreshToken;\n    try {\n      if (!token) return next(new _ApiErrors.default(400, 'Token is required'));\n      if (!(0, _mongoHelpers.isValidId)(req.user.id)) return next(new _ApiErrors.default(400, 'User not found'));\n      const user = await _userModel.default.findById(req.user.id);\n      if (!user) return next(new _ApiErrors.default(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(token) && req.user.role !== _roles.default.Admin) return next(new _ApiErrors.default(401, 'Unauthorized'));\n\n      // return refresh tokens for user\n      const refreshToken = await _tokenModel.default.find({\n        user: req.user.id,\n        type: _tokenTypes.default.REFRESH,\n        blacklisted: false\n      });\n      if (!refreshToken) return next(new _ApiErrors.default(404, 'Not found'));\n      await _tokenModel.default.deleteMany({\n        refreshToken\n      });\n      return res.status(200).clearCookie('refreshToken', {\n        httpOnly: true\n      }).end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getNewTokens: async (req, res, next) => {\n    const {\n      refreshToken\n    } = req.cookies;\n    try {\n      if (!refreshToken) return next(new _ApiErrors.default(401, 'No refresh token provided'));\n      const verifiedRefToken = await (0, _tokenHelper.verifyDBToken)(refreshToken, _tokenTypes.default.REFRESH);\n      const user = await _userModel.default.findById(verifiedRefToken.user).exec();\n      if (!user) return next(new _ApiErrors.default(404, 'User not found'));\n      const refTokenInDb = await _tokenModel.default.findOne({\n        user: user.id,\n        token: refreshToken\n      });\n      if (!refTokenInDb) return next(new _ApiErrors.default(401, 'Invalid refresh token'));\n      await verifiedRefToken.deleteOne();\n      const tokens = await (0, _tokenHelper.generateAuthTokens)(user);\n      return res.cookie('refreshToken', tokens.refresh, {\n        httpOnly: true,\n        sameSite: 'lax',\n        maxAge: tokens.refreshExpires * 1000,\n        // always calculate time in milliseconds\n        expires: new Date(Date.now() + tokens.refreshExpires * 1000),\n        // always calculate time in milliseconds\n        secure: false\n      }).header('Authorization', 'Bearer ' + tokens.access).send({\n        accessToken: tokens.access\n      });\n      // .json({ user, tokens });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getUserCredentials: async (req, res, next) => {\n    try {\n      const user = req.user;\n      if (!user) return next(new _ApiErrors.default(404, 'User not found'));\n      const foundUser = await _userModel.default.findById(user.id).select('-password -acceptTerms -createdAt -updatedAt -__v');\n      if (!foundUser) return next(new _ApiErrors.default(404, 'User not found'));\n      res.status(200).send(foundUser);\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  }\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcm9sZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl90b2tlblR5cGVzIiwiX21vbmdvSGVscGVycyIsIl9BcGlFcnJvcnMiLCJfdG9rZW5IZWxwZXIiLCJfdG9rZW5Nb2RlbCIsIl91c2VyTW9kZWwiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9kZWZhdWx0IiwicG9zdFJlZ2lzdGVyVXNlciIsInJlcSIsInJlcyIsIm5leHQiLCJuYW1lIiwiZW1haWwiLCJwaG9uZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJhY2NlcHRUZXJtcyIsImJvZHkiLCJVc2VyIiwiaXNFbWFpbFRha2VuIiwiQXBpRXJyb3IiLCJ1c2VyIiwiaXNGaXJzdEFjY291bnQiLCJjb3VudERvY3VtZW50cyIsInJvbGUiLCJSb2xlIiwiQWRtaW4iLCJzYXZlIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJwb3N0TG9naW5Vc2VyV2l0aEVtYWlsIiwiZmluZE9uZSIsImlzUGFzc3dvcmRNYXRjaCIsInRva2VucyIsImdlbmVyYXRlQXV0aFRva2VucyIsImNvb2tpZSIsInJlZnJlc2giLCJodHRwT25seSIsInNhbWVTaXRlIiwibWF4QWdlIiwicmVmcmVzaEV4cGlyZXMiLCJleHBpcmVzIiwiRGF0ZSIsIm5vdyIsInNlY3VyZSIsImhlYWRlciIsImFjY2VzcyIsInNlbmQiLCJhY2Nlc3NUb2tlbiIsInBvc3RMb2dpblVzZXJXaXRoVXNlcm5hbWUiLCJwb3N0TG9naW5Vc2VyV2l0aFBob25lIiwicG9zdExvZ291dFVzZXIiLCJyZWZyZXNoVG9rZW4iLCJjb29raWVzIiwidmVyaWZpZWRSZWZUb2tlbiIsInZlcmlmeURCVG9rZW4iLCJ0b2tlblR5cGVzIiwiUkVGUkVTSCIsImlzVmFsaWRJZCIsImlkIiwiZmluZEJ5SWQiLCJvd25zVG9rZW4iLCJyZWZyZXNoVG9rZW5JbkRiIiwiVG9rZW4iLCJ0eXBlIiwiYmxhY2tsaXN0ZWQiLCJkZWxldGVPbmUiLCJjbGVhckNvb2tpZSIsImVuZCIsInBvc3RMb2dvdXRVc2VyRnJvbUFsbFNjcmVlbnMiLCJ0b2tlbiIsImZpbmQiLCJkZWxldGVNYW55IiwiZ2V0TmV3VG9rZW5zIiwiZXhlYyIsInJlZlRva2VuSW5EYiIsImdldFVzZXJDcmVkZW50aWFscyIsImZvdW5kVXNlciIsInNlbGVjdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL3Jhai9Eb2N1bWVudHMvQ29tcGxldGVkL21lcm4tc3RhY2stYXV0aC9TZXJ2ZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiYXV0aC1jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb2xlIGZyb20gJy4uL2NvbmZpZy9yb2xlcyc7XG5pbXBvcnQgdG9rZW5UeXBlcyBmcm9tICcuLi9jb25maWcvdG9rZW5UeXBlcyc7XG5pbXBvcnQgeyBjb3VudERvY3VtZW50cywgaXNWYWxpZElkIH0gZnJvbSAnLi4vZGF0YWJhc2UvbW9uZ29IZWxwZXJzJztcbmltcG9ydCBBcGlFcnJvciBmcm9tICcuLi9lcnJvcnMvQXBpRXJyb3JzJztcbmltcG9ydCB7IGdlbmVyYXRlQXV0aFRva2VucywgdmVyaWZ5REJUb2tlbiB9IGZyb20gJy4uL2hlbHBlcnMvdG9rZW4taGVscGVyJztcbmltcG9ydCBUb2tlbiBmcm9tICcuLi9tb2RlbHMvdG9rZW4tbW9kZWwnO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXItbW9kZWwnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHBvc3RSZWdpc3RlclVzZXI6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwaG9uZSxcbiAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICBjb25maXJtUGFzc3dvcmQsXG4gICAgICAgIGFjY2VwdFRlcm1zLFxuICAgICAgfSA9IHJlcS5ib2R5O1xuXG4gICAgICBpZiAoYXdhaXQgVXNlci5pc0VtYWlsVGFrZW4oZW1haWwpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCBgRW1haWwgJHtlbWFpbH0gYWxyZWFkeSByZWdpc3RlcmVkYCkpO1xuXG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoKTtcblxuICAgICAgLy8gZmlyc3QgcmVnaXN0ZXJlZCBhY2NvdW50IGlzIGFuIGFkbWluXG4gICAgICBjb25zdCBpc0ZpcnN0QWNjb3VudCA9IChhd2FpdCBjb3VudERvY3VtZW50cyhVc2VyKSkgPT09IDA7XG4gICAgICB1c2VyLnJvbGUgPSBpc0ZpcnN0QWNjb3VudCA/IFJvbGUuQWRtaW4gOiBSb2xlLlVzZXI7XG5cbiAgICAgIHVzZXIubmFtZSA9IG5hbWU7XG4gICAgICB1c2VyLmVtYWlsID0gZW1haWw7XG4gICAgICB1c2VyLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgICB1c2VyLnBob25lID0gcGhvbmU7XG4gICAgICB1c2VyLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICB1c2VyLmNvbmZpcm1QYXNzd29yZCA9IGNvbmZpcm1QYXNzd29yZDtcbiAgICAgIHVzZXIuYWNjZXB0VGVybXMgPSBhY2NlcHRUZXJtcztcblxuICAgICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQhJyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dpblVzZXJXaXRoRW1haWw6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlciB8fCAhKGF3YWl0IHVzZXIuaXNQYXNzd29yZE1hdGNoKHBhc3N3b3JkKSkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIGNyZWRlbnRpYWxzJykpO1xuXG4gICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLmNvb2tpZSgncmVmcmVzaFRva2VuJywgdG9rZW5zLnJlZnJlc2gsIHtcbiAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDApLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQoeyBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICAgIC8vIC5qc29uKHsgLyp1c2VyLCovIGFjY2VzczogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dpblVzZXJXaXRoVXNlcm5hbWU6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlciB8fCAhKGF3YWl0IHVzZXIuaXNQYXNzd29yZE1hdGNoKHBhc3N3b3JkKSkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIGNyZWRlbnRpYWxzJykpO1xuXG4gICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLmNvb2tpZSgncmVmcmVzaFRva2VuJywgdG9rZW5zLnJlZnJlc2gsIHtcbiAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDApLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQoeyBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICAgIC8vIC5qc29uKHsgLyp1c2VyLCovIGFjY2VzczogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dpblVzZXJXaXRoUGhvbmU6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgcGhvbmUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgcGhvbmU6IHBob25lLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlciB8fCAhKGF3YWl0IHVzZXIuaXNQYXNzd29yZE1hdGNoKHBhc3N3b3JkKSkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIGNyZWRlbnRpYWxzJykpO1xuXG4gICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG5cbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLmNvb2tpZSgncmVmcmVzaFRva2VuJywgdG9rZW5zLnJlZnJlc2gsIHtcbiAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiB0b2tlbnMucmVmcmVzaEV4cGlyZXMgKiAxMDAwLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDApLCAvLyBhbHdheXMgY2FsY3VsYXRlIHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQoeyBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICAgIC8vIC5qc29uKHsgLyp1c2VyLCovIGFjY2VzczogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dvdXRVc2VyOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAvLyBhY2NlcHQgdG9rZW4gZnJvbSBjb29raWVcbiAgICBjb25zdCB7IHJlZnJlc2hUb2tlbiB9ID0gcmVxLmNvb2tpZXM7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghcmVmcmVzaFRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVG9rZW4gaXMgcmVxdWlyZWQnKSk7XG5cbiAgICAgIGNvbnN0IHZlcmlmaWVkUmVmVG9rZW4gPSBhd2FpdCB2ZXJpZnlEQlRva2VuKFxuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIHRva2VuVHlwZXMuUkVGUkVTSFxuICAgICAgKTtcblxuICAgICAgaWYgKCF2ZXJpZmllZFJlZlRva2VuKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnVG9rZW4gbm90IGZvdW5kJykpO1xuXG4gICAgICBpZiAoIWlzVmFsaWRJZChyZXEudXNlci5pZCkpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdVc2VyIG5vdCBmb3VuZCcpKTtcblxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuaWQpO1xuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIC8vIHVzZXJzIGNhbiByZXZva2UgdGhlaXIgb3duIHRva2VucyBhbmQgYWRtaW5zIGNhbiByZXZva2UgYW55IHRva2Vuc1xuICAgICAgaWYgKCFyZXEudXNlci5vd25zVG9rZW4ocmVmcmVzaFRva2VuKSAmJiByZXEudXNlci5yb2xlICE9PSBSb2xlLkFkbWluKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnVW5hdXRob3JpemVkJykpO1xuXG4gICAgICBjb25zdCByZWZyZXNoVG9rZW5JbkRiID0gYXdhaXQgVG9rZW4uZmluZE9uZSh7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5SRUZSRVNILFxuICAgICAgICBibGFja2xpc3RlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVmcmVzaFRva2VuSW5EYikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ05vdCBmb3VuZCcpKTtcblxuICAgICAgYXdhaXQgcmVmcmVzaFRva2VuSW5EYi5kZWxldGVPbmUoKTtcblxuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgLmNsZWFyQ29va2llKCdyZWZyZXNoVG9rZW4nLCB7IGh0dHBPbmx5OiB0cnVlIH0pXG4gICAgICAgIC5lbmQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvcik7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH0sXG4gIHBvc3RMb2dvdXRVc2VyRnJvbUFsbFNjcmVlbnM6IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmJvZHkudG9rZW4gfHwgcmVxLmNvb2tpZXMucmVmcmVzaFRva2VuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmICghdG9rZW4pIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdUb2tlbiBpcyByZXF1aXJlZCcpKTtcblxuICAgICAgaWYgKCFpc1ZhbGlkSWQocmVxLnVzZXIuaWQpKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLmlkKTtcbiAgICAgIGlmICghdXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICAvLyB1c2VycyBjYW4gcmV2b2tlIHRoZWlyIG93biB0b2tlbnMgYW5kIGFkbWlucyBjYW4gcmV2b2tlIGFueSB0b2tlbnNcbiAgICAgIGlmICghcmVxLnVzZXIub3duc1Rva2VuKHRva2VuKSAmJiByZXEudXNlci5yb2xlICE9PSBSb2xlLkFkbWluKVxuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAxLCAnVW5hdXRob3JpemVkJykpO1xuXG4gICAgICAvLyByZXR1cm4gcmVmcmVzaCB0b2tlbnMgZm9yIHVzZXJcbiAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGF3YWl0IFRva2VuLmZpbmQoe1xuICAgICAgICB1c2VyOiByZXEudXNlci5pZCxcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5SRUZSRVNILFxuICAgICAgICBibGFja2xpc3RlZDogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZWZyZXNoVG9rZW4pIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdOb3QgZm91bmQnKSk7XG4gICAgICBhd2FpdCBUb2tlbi5kZWxldGVNYW55KHsgcmVmcmVzaFRva2VuIH0pO1xuXG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAuY2xlYXJDb29raWUoJ3JlZnJlc2hUb2tlbicsIHsgaHR0cE9ubHk6IHRydWUgfSlcbiAgICAgICAgLmVuZCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgZ2V0TmV3VG9rZW5zOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCB7IHJlZnJlc2hUb2tlbiB9ID0gcmVxLmNvb2tpZXM7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFyZWZyZXNoVG9rZW4pXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdObyByZWZyZXNoIHRva2VuIHByb3ZpZGVkJykpO1xuXG4gICAgICBjb25zdCB2ZXJpZmllZFJlZlRva2VuID0gYXdhaXQgdmVyaWZ5REJUb2tlbihcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICB0b2tlblR5cGVzLlJFRlJFU0hcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHZlcmlmaWVkUmVmVG9rZW4udXNlcikuZXhlYygpO1xuXG4gICAgICBpZiAoIXVzZXIpIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDQsICdVc2VyIG5vdCBmb3VuZCcpKTtcblxuICAgICAgY29uc3QgcmVmVG9rZW5JbkRiID0gYXdhaXQgVG9rZW4uZmluZE9uZSh7XG4gICAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICAgIHRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZWZUb2tlbkluRGIpXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDEsICdJbnZhbGlkIHJlZnJlc2ggdG9rZW4nKSk7XG5cbiAgICAgIGF3YWl0IHZlcmlmaWVkUmVmVG9rZW4uZGVsZXRlT25lKCk7XG5cbiAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IGdlbmVyYXRlQXV0aFRva2Vucyh1c2VyKTtcblxuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuY29va2llKCdyZWZyZXNoVG9rZW4nLCB0b2tlbnMucmVmcmVzaCwge1xuICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgICBtYXhBZ2U6IHRva2Vucy5yZWZyZXNoRXhwaXJlcyAqIDEwMDAsIC8vIGFsd2F5cyBjYWxjdWxhdGUgdGltZSBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgdG9rZW5zLnJlZnJlc2hFeHBpcmVzICogMTAwMCksIC8vIGFsd2F5cyBjYWxjdWxhdGUgdGltZSBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICBzZWN1cmU6IGZhbHNlLFxuICAgICAgICB9KVxuICAgICAgICAuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW5zLmFjY2VzcylcbiAgICAgICAgLnNlbmQoeyBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2VzcyB9KTtcbiAgICAgIC8vIC5qc29uKHsgdXNlciwgdG9rZW5zIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgZ2V0VXNlckNyZWRlbnRpYWxzOiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDA0LCAnVXNlciBub3QgZm91bmQnKSk7XG5cbiAgICAgIGNvbnN0IGZvdW5kVXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlci5pZCkuc2VsZWN0KFxuICAgICAgICAnLXBhc3N3b3JkIC1hY2NlcHRUZXJtcyAtY3JlYXRlZEF0IC11cGRhdGVkQXQgLV9fdidcbiAgICAgICk7XG4gICAgICBpZiAoIWZvdW5kVXNlcikgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwNCwgJ1VzZXIgbm90IGZvdW5kJykpO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChmb3VuZFVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgOj4+ICcsIGVycm9yKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfSxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFdBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGFBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFVBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFlBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLFdBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLFVBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUF3QyxTQUFBRCx1QkFBQVEsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLElBQUFHLFFBQUEsR0FFekI7RUFDYkMsZ0JBQWdCLEVBQUUsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUMxQyxJQUFJO01BQ0YsTUFBTTtRQUNKQyxJQUFJO1FBQ0pDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsZUFBZTtRQUNmQztNQUNGLENBQUMsR0FBR1QsR0FBRyxDQUFDVSxJQUFJO01BRVosSUFBSSxNQUFNQyxrQkFBSSxDQUFDQyxZQUFZLENBQUNSLEtBQUssQ0FBQyxFQUNoQyxPQUFPRixJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUcsU0FBUVQsS0FBTSxxQkFBb0IsQ0FBQyxDQUFDO01BRXJFLE1BQU1VLElBQUksR0FBRyxJQUFJSCxrQkFBSSxDQUFDLENBQUM7O01BRXZCO01BQ0EsTUFBTUksY0FBYyxHQUFHLENBQUMsTUFBTSxJQUFBQyw0QkFBYyxFQUFDTCxrQkFBSSxDQUFDLE1BQU0sQ0FBQztNQUN6REcsSUFBSSxDQUFDRyxJQUFJLEdBQUdGLGNBQWMsR0FBR0csY0FBSSxDQUFDQyxLQUFLLEdBQUdELGNBQUksQ0FBQ1AsSUFBSTtNQUVuREcsSUFBSSxDQUFDWCxJQUFJLEdBQUdBLElBQUk7TUFDaEJXLElBQUksQ0FBQ1YsS0FBSyxHQUFHQSxLQUFLO01BQ2xCVSxJQUFJLENBQUNSLFFBQVEsR0FBR0EsUUFBUTtNQUN4QlEsSUFBSSxDQUFDVCxLQUFLLEdBQUdBLEtBQUs7TUFDbEJTLElBQUksQ0FBQ1AsUUFBUSxHQUFHQSxRQUFRO01BQ3hCTyxJQUFJLENBQUNOLGVBQWUsR0FBR0EsZUFBZTtNQUN0Q00sSUFBSSxDQUFDTCxXQUFXLEdBQUdBLFdBQVc7TUFFOUIsTUFBTUssSUFBSSxDQUFDTSxJQUFJLENBQUMsQ0FBQztNQUVqQm5CLEdBQUcsQ0FBQ29CLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUFnQyxDQUFDLENBQUM7SUFDcEUsQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtNQUNkQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxZQUFZLEVBQUVGLEtBQUssQ0FBQztNQUNoQ3RCLElBQUksQ0FBQ3NCLEtBQUssQ0FBQztJQUNiO0VBQ0YsQ0FBQztFQUNERyxzQkFBc0IsRUFBRSxNQUFBQSxDQUFPM0IsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUNoRCxNQUFNO01BQUVFLEtBQUs7TUFBRUc7SUFBUyxDQUFDLEdBQUdQLEdBQUcsQ0FBQ1UsSUFBSTtJQUVwQyxJQUFJO01BQ0YsTUFBTUksSUFBSSxHQUFHLE1BQU1ILGtCQUFJLENBQUNpQixPQUFPLENBQUM7UUFDOUJ4QixLQUFLLEVBQUVBO01BQ1QsQ0FBQyxDQUFDO01BRUYsSUFBSSxDQUFDVSxJQUFJLElBQUksRUFBRSxNQUFNQSxJQUFJLENBQUNlLGVBQWUsQ0FBQ3RCLFFBQVEsQ0FBQyxDQUFDLEVBQ2xELE9BQU9MLElBQUksQ0FBQyxJQUFJVyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO01BRXZELE1BQU1pQixNQUFNLEdBQUcsTUFBTSxJQUFBQywrQkFBa0IsRUFBQ2pCLElBQUksQ0FBQztNQUU3QyxPQUFPYixHQUFHLENBQ1ArQixNQUFNLENBQUMsY0FBYyxFQUFFRixNQUFNLENBQUNHLE9BQU8sRUFBRTtRQUN0Q0MsUUFBUSxFQUFFLElBQUk7UUFDZEMsUUFBUSxFQUFFLEtBQUs7UUFDZkMsTUFBTSxFQUFFTixNQUFNLENBQUNPLGNBQWMsR0FBRyxJQUFJO1FBQUU7UUFDdENDLE9BQU8sRUFBRSxJQUFJQyxJQUFJLENBQUNBLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBR1YsTUFBTSxDQUFDTyxjQUFjLEdBQUcsSUFBSSxDQUFDO1FBQUU7UUFDOURJLE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQyxDQUNEQyxNQUFNLENBQUMsZUFBZSxFQUFFLFNBQVMsR0FBR1osTUFBTSxDQUFDYSxNQUFNLENBQUMsQ0FDbERDLElBQUksQ0FBQztRQUFFQyxXQUFXLEVBQUVmLE1BQU0sQ0FBQ2E7TUFBTyxDQUFDLENBQUM7TUFDdkM7SUFDRixDQUFDLENBQUMsT0FBT25CLEtBQUssRUFBRTtNQUNkQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxZQUFZLEVBQUVGLEtBQUssQ0FBQztNQUNoQ3RCLElBQUksQ0FBQ3NCLEtBQUssQ0FBQztJQUNiO0VBQ0YsQ0FBQztFQUNEc0IseUJBQXlCLEVBQUUsTUFBQUEsQ0FBTzlDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7SUFDbkQsTUFBTTtNQUFFSSxRQUFRO01BQUVDO0lBQVMsQ0FBQyxHQUFHUCxHQUFHLENBQUNVLElBQUk7SUFFdkMsSUFBSTtNQUNGLE1BQU1JLElBQUksR0FBRyxNQUFNSCxrQkFBSSxDQUFDaUIsT0FBTyxDQUFDO1FBQzlCdEIsUUFBUSxFQUFFQTtNQUNaLENBQUMsQ0FBQztNQUVGLElBQUksQ0FBQ1EsSUFBSSxJQUFJLEVBQUUsTUFBTUEsSUFBSSxDQUFDZSxlQUFlLENBQUN0QixRQUFRLENBQUMsQ0FBQyxFQUNsRCxPQUFPTCxJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUscUJBQXFCLENBQUMsQ0FBQztNQUV2RCxNQUFNaUIsTUFBTSxHQUFHLE1BQU0sSUFBQUMsK0JBQWtCLEVBQUNqQixJQUFJLENBQUM7TUFFN0MsT0FBT2IsR0FBRyxDQUNQK0IsTUFBTSxDQUFDLGNBQWMsRUFBRUYsTUFBTSxDQUFDRyxPQUFPLEVBQUU7UUFDdENDLFFBQVEsRUFBRSxJQUFJO1FBQ2RDLFFBQVEsRUFBRSxLQUFLO1FBQ2ZDLE1BQU0sRUFBRU4sTUFBTSxDQUFDTyxjQUFjLEdBQUcsSUFBSTtRQUFFO1FBQ3RDQyxPQUFPLEVBQUUsSUFBSUMsSUFBSSxDQUFDQSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdWLE1BQU0sQ0FBQ08sY0FBYyxHQUFHLElBQUksQ0FBQztRQUFFO1FBQzlESSxNQUFNLEVBQUU7TUFDVixDQUFDLENBQUMsQ0FDREMsTUFBTSxDQUFDLGVBQWUsRUFBRSxTQUFTLEdBQUdaLE1BQU0sQ0FBQ2EsTUFBTSxDQUFDLENBQ2xEQyxJQUFJLENBQUM7UUFBRUMsV0FBVyxFQUFFZixNQUFNLENBQUNhO01BQU8sQ0FBQyxDQUFDO01BQ3ZDO0lBQ0YsQ0FBQyxDQUFDLE9BQU9uQixLQUFLLEVBQUU7TUFDZEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsWUFBWSxFQUFFRixLQUFLLENBQUM7TUFDaEN0QixJQUFJLENBQUNzQixLQUFLLENBQUM7SUFDYjtFQUNGLENBQUM7RUFDRHVCLHNCQUFzQixFQUFFLE1BQUFBLENBQU8vQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQ2hELE1BQU07TUFBRUcsS0FBSztNQUFFRTtJQUFTLENBQUMsR0FBR1AsR0FBRyxDQUFDVSxJQUFJO0lBRXBDLElBQUk7TUFDRixNQUFNSSxJQUFJLEdBQUcsTUFBTUgsa0JBQUksQ0FBQ2lCLE9BQU8sQ0FBQztRQUM5QnZCLEtBQUssRUFBRUE7TUFDVCxDQUFDLENBQUM7TUFFRixJQUFJLENBQUNTLElBQUksSUFBSSxFQUFFLE1BQU1BLElBQUksQ0FBQ2UsZUFBZSxDQUFDdEIsUUFBUSxDQUFDLENBQUMsRUFDbEQsT0FBT0wsSUFBSSxDQUFDLElBQUlXLGtCQUFRLENBQUMsR0FBRyxFQUFFLHFCQUFxQixDQUFDLENBQUM7TUFFdkQsTUFBTWlCLE1BQU0sR0FBRyxNQUFNLElBQUFDLCtCQUFrQixFQUFDakIsSUFBSSxDQUFDO01BRTdDLE9BQU9iLEdBQUcsQ0FDUCtCLE1BQU0sQ0FBQyxjQUFjLEVBQUVGLE1BQU0sQ0FBQ0csT0FBTyxFQUFFO1FBQ3RDQyxRQUFRLEVBQUUsSUFBSTtRQUNkQyxRQUFRLEVBQUUsS0FBSztRQUNmQyxNQUFNLEVBQUVOLE1BQU0sQ0FBQ08sY0FBYyxHQUFHLElBQUk7UUFBRTtRQUN0Q0MsT0FBTyxFQUFFLElBQUlDLElBQUksQ0FBQ0EsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHVixNQUFNLENBQUNPLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFBRTtRQUM5REksTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUFDLENBQ0RDLE1BQU0sQ0FBQyxlQUFlLEVBQUUsU0FBUyxHQUFHWixNQUFNLENBQUNhLE1BQU0sQ0FBQyxDQUNsREMsSUFBSSxDQUFDO1FBQUVDLFdBQVcsRUFBRWYsTUFBTSxDQUFDYTtNQUFPLENBQUMsQ0FBQztNQUN2QztJQUNGLENBQUMsQ0FBQyxPQUFPbkIsS0FBSyxFQUFFO01BQ2RDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFlBQVksRUFBRUYsS0FBSyxDQUFDO01BQ2hDdEIsSUFBSSxDQUFDc0IsS0FBSyxDQUFDO0lBQ2I7RUFDRixDQUFDO0VBQ0R3QixjQUFjLEVBQUUsTUFBQUEsQ0FBT2hELEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7SUFDeEM7SUFDQSxNQUFNO01BQUUrQztJQUFhLENBQUMsR0FBR2pELEdBQUcsQ0FBQ2tELE9BQU87SUFDcEMsSUFBSTtNQUNGLElBQUksQ0FBQ0QsWUFBWSxFQUFFLE9BQU8vQyxJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztNQUV0RSxNQUFNc0MsZ0JBQWdCLEdBQUcsTUFBTSxJQUFBQywwQkFBYSxFQUMxQ0gsWUFBWSxFQUNaSSxtQkFBVSxDQUFDQyxPQUNiLENBQUM7TUFFRCxJQUFJLENBQUNILGdCQUFnQixFQUFFLE9BQU9qRCxJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztNQUV4RSxJQUFJLENBQUMsSUFBQTBDLHVCQUFTLEVBQUN2RCxHQUFHLENBQUNjLElBQUksQ0FBQzBDLEVBQUUsQ0FBQyxFQUN6QixPQUFPdEQsSUFBSSxDQUFDLElBQUlXLGtCQUFRLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7TUFFbEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1ILGtCQUFJLENBQUM4QyxRQUFRLENBQUN6RCxHQUFHLENBQUNjLElBQUksQ0FBQzBDLEVBQUUsQ0FBQztNQUM3QyxJQUFJLENBQUMxQyxJQUFJLEVBQUUsT0FBT1osSUFBSSxDQUFDLElBQUlXLGtCQUFRLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7O01BRTNEO01BQ0EsSUFBSSxDQUFDYixHQUFHLENBQUNjLElBQUksQ0FBQzRDLFNBQVMsQ0FBQ1QsWUFBWSxDQUFDLElBQUlqRCxHQUFHLENBQUNjLElBQUksQ0FBQ0csSUFBSSxLQUFLQyxjQUFJLENBQUNDLEtBQUssRUFDbkUsT0FBT2pCLElBQUksQ0FBQyxJQUFJVyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxjQUFjLENBQUMsQ0FBQztNQUVoRCxNQUFNOEMsZ0JBQWdCLEdBQUcsTUFBTUMsbUJBQUssQ0FBQ2hDLE9BQU8sQ0FBQztRQUMzQ3FCLFlBQVk7UUFDWlksSUFBSSxFQUFFUixtQkFBVSxDQUFDQyxPQUFPO1FBQ3hCUSxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUM7TUFDRixJQUFJLENBQUNILGdCQUFnQixFQUFFLE9BQU96RCxJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7TUFFbEUsTUFBTThDLGdCQUFnQixDQUFDSSxTQUFTLENBQUMsQ0FBQztNQUVsQyxPQUFPOUQsR0FBRyxDQUNQb0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUNYMkMsV0FBVyxDQUFDLGNBQWMsRUFBRTtRQUFFOUIsUUFBUSxFQUFFO01BQUssQ0FBQyxDQUFDLENBQy9DK0IsR0FBRyxDQUFDLENBQUM7SUFDVixDQUFDLENBQUMsT0FBT3pDLEtBQUssRUFBRTtNQUNkQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxZQUFZLEVBQUVGLEtBQUssQ0FBQztNQUNoQ3RCLElBQUksQ0FBQ3NCLEtBQUssQ0FBQztJQUNiO0VBQ0YsQ0FBQztFQUNEMEMsNEJBQTRCLEVBQUUsTUFBQUEsQ0FBT2xFLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7SUFDdEQsTUFBTWlFLEtBQUssR0FBR25FLEdBQUcsQ0FBQ1UsSUFBSSxDQUFDeUQsS0FBSyxJQUFJbkUsR0FBRyxDQUFDa0QsT0FBTyxDQUFDRCxZQUFZO0lBRXhELElBQUk7TUFDRixJQUFJLENBQUNrQixLQUFLLEVBQUUsT0FBT2pFLElBQUksQ0FBQyxJQUFJVyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO01BRS9ELElBQUksQ0FBQyxJQUFBMEMsdUJBQVMsRUFBQ3ZELEdBQUcsQ0FBQ2MsSUFBSSxDQUFDMEMsRUFBRSxDQUFDLEVBQ3pCLE9BQU90RCxJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztNQUVsRCxNQUFNQyxJQUFJLEdBQUcsTUFBTUgsa0JBQUksQ0FBQzhDLFFBQVEsQ0FBQ3pELEdBQUcsQ0FBQ2MsSUFBSSxDQUFDMEMsRUFBRSxDQUFDO01BQzdDLElBQUksQ0FBQzFDLElBQUksRUFBRSxPQUFPWixJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQzs7TUFFM0Q7TUFDQSxJQUFJLENBQUNiLEdBQUcsQ0FBQ2MsSUFBSSxDQUFDNEMsU0FBUyxDQUFDUyxLQUFLLENBQUMsSUFBSW5FLEdBQUcsQ0FBQ2MsSUFBSSxDQUFDRyxJQUFJLEtBQUtDLGNBQUksQ0FBQ0MsS0FBSyxFQUM1RCxPQUFPakIsSUFBSSxDQUFDLElBQUlXLGtCQUFRLENBQUMsR0FBRyxFQUFFLGNBQWMsQ0FBQyxDQUFDOztNQUVoRDtNQUNBLE1BQU1vQyxZQUFZLEdBQUcsTUFBTVcsbUJBQUssQ0FBQ1EsSUFBSSxDQUFDO1FBQ3BDdEQsSUFBSSxFQUFFZCxHQUFHLENBQUNjLElBQUksQ0FBQzBDLEVBQUU7UUFDakJLLElBQUksRUFBRVIsbUJBQVUsQ0FBQ0MsT0FBTztRQUN4QlEsV0FBVyxFQUFFO01BQ2YsQ0FBQyxDQUFDO01BRUYsSUFBSSxDQUFDYixZQUFZLEVBQUUsT0FBTy9DLElBQUksQ0FBQyxJQUFJVyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsQ0FBQztNQUM5RCxNQUFNK0MsbUJBQUssQ0FBQ1MsVUFBVSxDQUFDO1FBQUVwQjtNQUFhLENBQUMsQ0FBQztNQUV4QyxPQUFPaEQsR0FBRyxDQUNQb0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUNYMkMsV0FBVyxDQUFDLGNBQWMsRUFBRTtRQUFFOUIsUUFBUSxFQUFFO01BQUssQ0FBQyxDQUFDLENBQy9DK0IsR0FBRyxDQUFDLENBQUM7SUFDVixDQUFDLENBQUMsT0FBT3pDLEtBQUssRUFBRTtNQUNkQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxZQUFZLEVBQUVGLEtBQUssQ0FBQztNQUNoQ3RCLElBQUksQ0FBQ3NCLEtBQUssQ0FBQztJQUNiO0VBQ0YsQ0FBQztFQUNEOEMsWUFBWSxFQUFFLE1BQUFBLENBQU90RSxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQ3RDLE1BQU07TUFBRStDO0lBQWEsQ0FBQyxHQUFHakQsR0FBRyxDQUFDa0QsT0FBTztJQUVwQyxJQUFJO01BQ0YsSUFBSSxDQUFDRCxZQUFZLEVBQ2YsT0FBTy9DLElBQUksQ0FBQyxJQUFJVyxrQkFBUSxDQUFDLEdBQUcsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO01BRTdELE1BQU1zQyxnQkFBZ0IsR0FBRyxNQUFNLElBQUFDLDBCQUFhLEVBQzFDSCxZQUFZLEVBQ1pJLG1CQUFVLENBQUNDLE9BQ2IsQ0FBQztNQUVELE1BQU14QyxJQUFJLEdBQUcsTUFBTUgsa0JBQUksQ0FBQzhDLFFBQVEsQ0FBQ04sZ0JBQWdCLENBQUNyQyxJQUFJLENBQUMsQ0FBQ3lELElBQUksQ0FBQyxDQUFDO01BRTlELElBQUksQ0FBQ3pELElBQUksRUFBRSxPQUFPWixJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztNQUUzRCxNQUFNMkQsWUFBWSxHQUFHLE1BQU1aLG1CQUFLLENBQUNoQyxPQUFPLENBQUM7UUFDdkNkLElBQUksRUFBRUEsSUFBSSxDQUFDMEMsRUFBRTtRQUNiVyxLQUFLLEVBQUVsQjtNQUNULENBQUMsQ0FBQztNQUVGLElBQUksQ0FBQ3VCLFlBQVksRUFDZixPQUFPdEUsSUFBSSxDQUFDLElBQUlXLGtCQUFRLENBQUMsR0FBRyxFQUFFLHVCQUF1QixDQUFDLENBQUM7TUFFekQsTUFBTXNDLGdCQUFnQixDQUFDWSxTQUFTLENBQUMsQ0FBQztNQUVsQyxNQUFNakMsTUFBTSxHQUFHLE1BQU0sSUFBQUMsK0JBQWtCLEVBQUNqQixJQUFJLENBQUM7TUFFN0MsT0FBT2IsR0FBRyxDQUNQK0IsTUFBTSxDQUFDLGNBQWMsRUFBRUYsTUFBTSxDQUFDRyxPQUFPLEVBQUU7UUFDdENDLFFBQVEsRUFBRSxJQUFJO1FBQ2RDLFFBQVEsRUFBRSxLQUFLO1FBQ2ZDLE1BQU0sRUFBRU4sTUFBTSxDQUFDTyxjQUFjLEdBQUcsSUFBSTtRQUFFO1FBQ3RDQyxPQUFPLEVBQUUsSUFBSUMsSUFBSSxDQUFDQSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdWLE1BQU0sQ0FBQ08sY0FBYyxHQUFHLElBQUksQ0FBQztRQUFFO1FBQzlESSxNQUFNLEVBQUU7TUFDVixDQUFDLENBQUMsQ0FDREMsTUFBTSxDQUFDLGVBQWUsRUFBRSxTQUFTLEdBQUdaLE1BQU0sQ0FBQ2EsTUFBTSxDQUFDLENBQ2xEQyxJQUFJLENBQUM7UUFBRUMsV0FBVyxFQUFFZixNQUFNLENBQUNhO01BQU8sQ0FBQyxDQUFDO01BQ3ZDO0lBQ0YsQ0FBQyxDQUFDLE9BQU9uQixLQUFLLEVBQUU7TUFDZEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsWUFBWSxFQUFFRixLQUFLLENBQUM7TUFDaEN0QixJQUFJLENBQUNzQixLQUFLLENBQUM7SUFDYjtFQUNGLENBQUM7RUFDRGlELGtCQUFrQixFQUFFLE1BQUFBLENBQU96RSxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQzVDLElBQUk7TUFDRixNQUFNWSxJQUFJLEdBQUdkLEdBQUcsQ0FBQ2MsSUFBSTtNQUNyQixJQUFJLENBQUNBLElBQUksRUFBRSxPQUFPWixJQUFJLENBQUMsSUFBSVcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztNQUUzRCxNQUFNNkQsU0FBUyxHQUFHLE1BQU0vRCxrQkFBSSxDQUFDOEMsUUFBUSxDQUFDM0MsSUFBSSxDQUFDMEMsRUFBRSxDQUFDLENBQUNtQixNQUFNLENBQ25ELG1EQUNGLENBQUM7TUFDRCxJQUFJLENBQUNELFNBQVMsRUFBRSxPQUFPeEUsSUFBSSxDQUFDLElBQUlXLGtCQUFRLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7TUFFaEVaLEdBQUcsQ0FBQ29CLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3VCLElBQUksQ0FBQzhCLFNBQVMsQ0FBQztJQUNqQyxDQUFDLENBQUMsT0FBT2xELEtBQUssRUFBRTtNQUNkQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxZQUFZLEVBQUVGLEtBQUssQ0FBQztNQUNoQ3RCLElBQUksQ0FBQ3NCLEtBQUssQ0FBQztJQUNiO0VBQ0Y7QUFDRixDQUFDO0FBQUFvRCxPQUFBLENBQUEvRSxPQUFBLEdBQUFDLFFBQUEifQ==","map":{"version":3,"names":["_roles","_interopRequireDefault","require","_tokenTypes","_mongoHelpers","_ApiErrors","_tokenHelper","_tokenModel","_userModel","obj","__esModule","default","_default","postRegisterUser","req","res","next","name","email","phone","username","password","confirmPassword","acceptTerms","body","User","isEmailTaken","ApiError","user","isFirstAccount","countDocuments","role","Role","Admin","save","status","json","message","error","console","log","postLoginUserWithEmail","findOne","isPasswordMatch","tokens","generateAuthTokens","cookie","refresh","httpOnly","sameSite","maxAge","refreshExpires","expires","Date","now","secure","header","access","send","accessToken","postLoginUserWithUsername","postLoginUserWithPhone","postLogoutUser","refreshToken","cookies","verifiedRefToken","verifyDBToken","tokenTypes","REFRESH","isValidId","id","findById","ownsToken","refreshTokenInDb","Token","type","blacklisted","deleteOne","clearCookie","end","postLogoutUserFromAllScreens","token","find","deleteMany","getNewTokens","exec","refTokenInDb","getUserCredentials","foundUser","select","exports"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/controllers/","sources":["auth-controller.js"],"sourcesContent":["import Role from '../config/roles';\nimport tokenTypes from '../config/tokenTypes';\nimport { countDocuments, isValidId } from '../database/mongoHelpers';\nimport ApiError from '../errors/ApiErrors';\nimport { generateAuthTokens, verifyDBToken } from '../helpers/token-helper';\nimport Token from '../models/token-model';\nimport User from '../models/user-model';\n\nexport default {\n  postRegisterUser: async (req, res, next) => {\n    try {\n      const {\n        name,\n        email,\n        phone,\n        username,\n        password,\n        confirmPassword,\n        acceptTerms,\n      } = req.body;\n\n      if (await User.isEmailTaken(email))\n        return next(new ApiError(400, `Email ${email} already registered`));\n\n      const user = new User();\n\n      // first registered account is an admin\n      const isFirstAccount = (await countDocuments(User)) === 0;\n      user.role = isFirstAccount ? Role.Admin : Role.User;\n\n      user.name = name;\n      user.email = email;\n      user.username = username;\n      user.phone = phone;\n      user.password = password;\n      user.confirmPassword = confirmPassword;\n      user.acceptTerms = acceptTerms;\n\n      await user.save();\n\n      res.status(201).json({ message: 'User successfully registered!' });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithEmail: async (req, res, next) => {\n    const { email, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        email: email,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithUsername: async (req, res, next) => {\n    const { username, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        username: username,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLoginUserWithPhone: async (req, res, next) => {\n    const { phone, password } = req.body;\n\n    try {\n      const user = await User.findOne({\n        phone: phone,\n      });\n\n      if (!user || !(await user.isPasswordMatch(password)))\n        return next(new ApiError(401, 'Invalid credentials'));\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: true,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ /*user,*/ access: tokens.access });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUser: async (req, res, next) => {\n    // accept token from cookie\n    const { refreshToken } = req.cookies;\n    try {\n      if (!refreshToken) return next(new ApiError(400, 'Token is required'));\n\n      const verifiedRefToken = await verifyDBToken(\n        refreshToken,\n        tokenTypes.REFRESH\n      );\n\n      if (!verifiedRefToken) return next(new ApiError(404, 'Token not found'));\n\n      if (!isValidId(req.user.id))\n        return next(new ApiError(400, 'User not found'));\n\n      const user = await User.findById(req.user.id);\n      if (!user) return next(new ApiError(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(refreshToken) && req.user.role !== Role.Admin)\n        return next(new ApiError(401, 'Unauthorized'));\n\n      const refreshTokenInDb = await Token.findOne({\n        refreshToken,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n      });\n      if (!refreshTokenInDb) return next(new ApiError(404, 'Not found'));\n\n      await refreshTokenInDb.deleteOne();\n\n      return res\n        .status(200)\n        .clearCookie('refreshToken', { httpOnly: true })\n        .end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  postLogoutUserFromAllScreens: async (req, res, next) => {\n    const token = req.body.token || req.cookies.refreshToken;\n\n    try {\n      if (!token) return next(new ApiError(400, 'Token is required'));\n\n      if (!isValidId(req.user.id))\n        return next(new ApiError(400, 'User not found'));\n\n      const user = await User.findById(req.user.id);\n      if (!user) return next(new ApiError(400, 'User not found'));\n\n      // users can revoke their own tokens and admins can revoke any tokens\n      if (!req.user.ownsToken(token) && req.user.role !== Role.Admin)\n        return next(new ApiError(401, 'Unauthorized'));\n\n      // return refresh tokens for user\n      const refreshToken = await Token.find({\n        user: req.user.id,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n      });\n\n      if (!refreshToken) return next(new ApiError(404, 'Not found'));\n      await Token.deleteMany({ refreshToken });\n\n      return res\n        .status(200)\n        .clearCookie('refreshToken', { httpOnly: true })\n        .end();\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getNewTokens: async (req, res, next) => {\n    const { refreshToken } = req.cookies;\n\n    try {\n      if (!refreshToken)\n        return next(new ApiError(401, 'No refresh token provided'));\n\n      const verifiedRefToken = await verifyDBToken(\n        refreshToken,\n        tokenTypes.REFRESH\n      );\n\n      const user = await User.findById(verifiedRefToken.user).exec();\n\n      if (!user) return next(new ApiError(404, 'User not found'));\n\n      const refTokenInDb = await Token.findOne({\n        user: user.id,\n        token: refreshToken,\n      });\n\n      if (!refTokenInDb)\n        return next(new ApiError(401, 'Invalid refresh token'));\n\n      await verifiedRefToken.deleteOne();\n\n      const tokens = await generateAuthTokens(user);\n\n      return res\n        .cookie('refreshToken', tokens.refresh, {\n          httpOnly: true,\n          sameSite: 'lax',\n          maxAge: tokens.refreshExpires * 1000, // always calculate time in milliseconds\n          expires: new Date(Date.now() + tokens.refreshExpires * 1000), // always calculate time in milliseconds\n          secure: false,\n        })\n        .header('Authorization', 'Bearer ' + tokens.access)\n        .send({ accessToken: tokens.access });\n      // .json({ user, tokens });\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n  getUserCredentials: async (req, res, next) => {\n    try {\n      const user = req.user;\n      if (!user) return next(new ApiError(404, 'User not found'));\n\n      const foundUser = await User.findById(user.id).select(\n        '-password -acceptTerms -createdAt -updatedAt -__v'\n      );\n      if (!foundUser) return next(new ApiError(404, 'User not found'));\n\n      res.status(200).send(foundUser);\n    } catch (error) {\n      console.log('error :>> ', error);\n      next(error);\n    }\n  },\n};\n"],"mappings":"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"}},"mtime":1690965853076},"{\"assumptions\":{},\"sourceRoot\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"filename\":\"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/raj/Documents/Completed/mern-stack-auth/Server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst Role = {\n  Admin: 'Admin',\n  User: 'User'\n};\nvar _default = Role;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb2xlIiwiQWRtaW4iLCJVc2VyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmFqL0RvY3VtZW50cy9Db21wbGV0ZWQvbWVybi1zdGFjay1hdXRoL1NlcnZlci9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsicm9sZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUm9sZSA9IHtcbiAgQWRtaW46ICdBZG1pbicsXG4gIFVzZXI6ICdVc2VyJyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJvbGU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLElBQUksR0FBRztFQUNYQyxLQUFLLEVBQUUsT0FBTztFQUNkQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUVhSCxJQUFJO0FBQUFJLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBIn0=","map":{"version":3,"names":["Role","Admin","User","_default","exports","default"],"sourceRoot":"/home/raj/Documents/Completed/mern-stack-auth/Server/src/config/","sources":["roles.js"],"sourcesContent":["const Role = {\n  Admin: 'Admin',\n  User: 'User',\n};\n\nexport default Role;\n"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAG;EACXC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE;AACR,CAAC;AAAC,IAAAC,QAAA,GAEaH,IAAI;AAAAI,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1689247652000}}